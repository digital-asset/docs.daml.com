<!-- Copyright (c) 2023 Digital Asset (Switzerland) GmbH and/or its affiliates. All rights reserved. -->
<!-- SPDX-License-Identifier: Apache-2.0 -->



<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js" lang="en">
<!--<![endif]-->

<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>The Smart Contract Upgrade Model in Depth &mdash; Daml SDK 2.10.1 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
  
  
  <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
  <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
  <script src="../../_static/jquery.js"></script>
  <script src="../../_static/underscore.js"></script>
  <script src="../../_static/doctools.js"></script>
  <script src="../../_static/clipboard.min.js"></script>
  <script src="../../_static/copybutton.js"></script>
  
  <script type="text/javascript" src="../../_static/js/theme.js"></script>

  

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/copybutton.css" type="text/css" />
  <link rel="index" title="Index" href="../../genindex.html" />
  <link rel="search" title="Search" href="../../search.html" />
  <link rel="next" title="Canton Advanced Architecture" href="../../reference/canton-advanced-architecture.html" />
  <link rel="prev" title="Time on Daml Ledgers" href="../time.html" /> 

  
  <link rel="icon" type="image/svg+xml"  href="../../_static/images/daml-logo-mark-light.svg">
  <link rel="alternate icon" href="../../_static/images/daml-favicon-1.ico">

  <!-- Google Tag Manager -->
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-MSWJMNX');</script>
  <!-- End Google Tag Manager -->

</head>

<body class="wy-body-for-nav">
  <!-- Google Tag Manager (noscript) -->
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-MSWJMNX"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <!-- End Google Tag Manager (noscript) -->
   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-nav-side-shadow"></div>
      <div class="wy-side-scroll">

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
          
          
          
          
          
          <ul>
<li class="toctree-l1"><a class="reference external" href="https://docs.daml.com/">Daml Documentation</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Home</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../multiparty-application-intro.html">Introduction to Multi-Party Applications and Daml</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../multiparty-application-intro.html#multi-party-applications">Multi-Party Applications</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../multiparty-application-intro.html#why-do-multi-party-applications-matter">Why Do Multi-Party Applications Matter?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../multiparty-application-intro.html#what-is-a-multi-party-application">What Is a Multi-Party Application?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../multiparty-application-intro.html#important-concepts-in-multi-party-applications">Important Concepts in Multi-Party Applications</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../multiparty-application-intro.html#key-architectural-concepts-in-daml">Key Architectural Concepts in Daml</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../multiparty-application-intro.html#transfer-example-using-daml">Transfer Example Using Daml</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../multiparty-application-intro.html#next-steps">Next Steps</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Set Up Your Developer Environment</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../ops/requirements.html">System Requirements</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../ops/requirements.html#feature-component-system-requirements">Feature/Component System Requirements</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../getting-started/installation.html">Install the SDK</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../getting-started/installation.html#install-the-dependencies">Install the Dependencies</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../getting-started/installation.html#choose-daml-enterprise-or-daml-open-source">Choose Daml Enterprise or Daml Open Source</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../getting-started/installation.html#install-daml-open-source-sdk">Install Daml Open Source SDK</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../getting-started/installation.html#windows-10">Windows 10</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../getting-started/installation.html#mac-and-linux">Mac and Linux</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../getting-started/installation.html#install-daml-enterprise">Install Daml Enterprise</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../getting-started/installation.html#download-manually">Download Manually</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../getting-started/installation.html#next-steps">Next Steps</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../getting-started/path-variables.html">Set JAVA_HOME and PATH Variables</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../getting-started/path-variables.html#windows">Windows</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../getting-started/path-variables.html#set-the-java-home-variable">Set the JAVA_HOME Variable</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../getting-started/path-variables.html#set-the-path-variable">Set the PATH Variable</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../getting-started/path-variables.html#mac-os">Mac OS</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../getting-started/path-variables.html#linux">Linux</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../getting-started/path-variables.html#id2">Set the JAVA_HOME Variable</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../getting-started/path-variables.html#id3">Set the PATH Variable</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../getting-started/path-variables.html#verify-the-changes">Verify the Changes</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../getting-started/manual-download.html">Manual Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../getting-started/manual-download.html#install-the-sdk-from-a-tarball">Install the SDK from a Tarball</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../getting-started/manual-download.html#verify-the-integrity-of-a-tarball">Verify the Integrity of a Tarball</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Tutorial: Write Your First Daml App</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../getting-started/index.html">Getting Started with Daml</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../getting-started/index.html#prerequisites">Prerequisites</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../getting-started/index.html#run-the-app">Run the App</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../getting-started/app-architecture.html">App Architecture</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../getting-started/app-architecture.html#the-daml-model">The Daml Model</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../getting-started/app-architecture.html#typescript-code-generation">TypeScript Code Generation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../getting-started/app-architecture.html#the-ui">The UI</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../getting-started/first-feature.html">Your First Feature</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../getting-started/first-feature.html#daml-changes">Daml Changes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../getting-started/first-feature.html#messaging-ui">Messaging UI</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../getting-started/first-feature.html#messagelist-component">MessageList Component</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../getting-started/first-feature.html#messageedit-component">MessageEdit Component</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../getting-started/first-feature.html#mainview-component">MainView Component</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../getting-started/first-feature.html#run-the-updated-ui">Run the Updated UI</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../getting-started/first-feature.html#next-steps">Next Steps</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../getting-started/testing.html">Test Your App</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../getting-started/testing.html#set-up-the-tests">Set Up the Tests</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../getting-started/testing.html#example-log-in-and-out">Example: Log In and Out</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../getting-started/testing.html#accessing-ui-elements">Accessing UI Elements</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../getting-started/testing.html#writing-css-selectors">Writing CSS Selectors</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../getting-started/testing.html#the-full-test-suite">The Full Test Suite</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Create Daml Apps</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../daml/considerations.html">Important Considerations When Building Applications With Daml</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../daml/considerations.html#overall-considerations">Overall Considerations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../daml/considerations.html#developer-considerations">Developer Considerations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../daml/considerations.html#operational-considerations">Operational Considerations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../daml/considerations.html#next-steps">Next Steps</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../create-daml-apps/intro/index.html">Write Smart Contracts with Daml</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../daml/intro/0_Intro.html">An Introduction to Daml</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../daml/intro/1_Contracts.html">Basic Contracts</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../daml/intro/1_Contracts.html#daml-ledger-basics">Daml Ledger Basics</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml/intro/1_Contracts.html#daml-modules-and-files">Daml Modules and Files</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml/intro/1_Contracts.html#templates">Templates</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml/intro/1_Contracts.html#signatories">Signatories</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml/intro/1_Contracts.html#next-up">Next Up</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../daml/intro/2_DamlScript.html">Test Templates Using Daml Script</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../daml/intro/2_DamlScript.html#script-basics">Script Basics</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml/intro/2_DamlScript.html#run-the-scripts">Run the Scripts</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml/intro/2_DamlScript.html#test-for-failure">Test for Failure</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml/intro/2_DamlScript.html#archive-contracts">Archive Contracts</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml/intro/2_DamlScript.html#view-the-ledger-and-ledger-history">View the Ledger and Ledger History</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml/intro/2_DamlScript.html#exercises">Exercises</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml/intro/2_DamlScript.html#next-up">Next Up</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../daml/intro/3_Data.html">Data Types</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../daml/intro/3_Data.html#native-types">Native Types</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml/intro/3_Data.html#assemble-types">Assemble Types</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../daml/intro/3_Data.html#tuples">Tuples</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../daml/intro/3_Data.html#lists">Lists</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../daml/intro/3_Data.html#records">Records</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../daml/intro/3_Data.html#variants-and-pattern-matching">Variants and Pattern Matching</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../daml/intro/3_Data.html#manipulate-data">Manipulate Data</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml/intro/3_Data.html#contract-keys">Contract Keys</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml/intro/3_Data.html#next-up">Next Up</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../daml/intro/4_Transformations.html">Transform Data Using Choices</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../daml/intro/4_Transformations.html#choices-as-methods">Choices as Methods</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml/intro/4_Transformations.html#choices-as-delegation">Choices as Delegation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml/intro/4_Transformations.html#choices-in-the-ledger-model">Choices In the Ledger Model</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../daml/intro/4_Transformations.html#the-archive-choice">The Archive Choice</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../daml/intro/4_Transformations.html#a-simple-cash-model">A Simple Cash Model</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml/intro/4_Transformations.html#next-up">Next Up</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../daml/intro/5_Constraints.html">Add Constraints to a Contract</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../daml/intro/5_Constraints.html#template-preconditions">Template Preconditions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml/intro/5_Constraints.html#assertions">Assertions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml/intro/5_Constraints.html#time-on-daml-ledgers">Time on Daml Ledgers</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../daml/intro/5_Constraints.html#time-in-test-scripts">Time in Test Scripts</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../daml/intro/5_Constraints.html#actions-and-do-blocks">Actions and <code class="docutils literal notranslate"><span class="pre">do</span></code> Blocks</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../daml/intro/5_Constraints.html#pure-expressions-compared-to-actions">Pure Expressions Compared to Actions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../daml/intro/5_Constraints.html#actions-and-impurity">Actions and Impurity</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../daml/intro/5_Constraints.html#chain-actions-with-do-blocks">Chain Actions With <code class="docutils literal notranslate"><span class="pre">do</span></code> Blocks</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../daml/intro/5_Constraints.html#wrap-values-in-actions">Wrap Values in Actions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../daml/intro/5_Constraints.html#failing-actions">Failing Actions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml/intro/5_Constraints.html#a-sample-action">A Sample Action</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml/intro/5_Constraints.html#errors">Errors</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml/intro/5_Constraints.html#next-up">Next Up</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../daml/intro/6_Parties.html">Parties and Authority</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../daml/intro/6_Parties.html#preventing-iou-revocation">Preventing IOU Revocation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml/intro/6_Parties.html#use-propose-accept-workflows-for-one-off-authorization">Use Propose-Accept Workflows for One-Off Authorization</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml/intro/6_Parties.html#use-role-contracts-for-ongoing-authorization">Use Role Contracts for Ongoing Authorization</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml/intro/6_Parties.html#daml-s-authorization-model">Daml’s Authorization Model</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../daml/intro/6_Parties.html#an-authorization-example">An Authorization Example</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../daml/intro/6_Parties.html#next-up">Next Up</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../daml/intro/7_Composing.html">Composing Choices</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../daml/intro/7_Composing.html#daml-projects">Daml Projects</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml/intro/7_Composing.html#project-structure">Project Structure</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml/intro/7_Composing.html#project-overview">Project Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml/intro/7_Composing.html#composed-choices-and-scripts">Composed Choices and Scripts</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml/intro/7_Composing.html#daml-s-execution-model">Daml’s Execution Model</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml/intro/7_Composing.html#observers">Observers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml/intro/7_Composing.html#privacy">Privacy</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../daml/intro/7_Composing.html#divulgence">Divulgence</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../daml/intro/7_Composing.html#next-up">Next Up</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../daml/intro/13_Interfaces.html">Daml Interfaces</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../daml/intro/13_Interfaces.html#context">Context</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml/intro/13_Interfaces.html#interface-definition">Interface Definition</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml/intro/13_Interfaces.html#interface-instances">Interface Instances</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml/intro/13_Interfaces.html#using-an-interface">Using an Interface</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../daml/intro/8_Exceptions.html">Exception Handling</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../daml/intro/8_Exceptions.html#next-up">Next Up</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../daml/intro/9_Dependencies.html">Work With Dependencies</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../daml/intro/9_Dependencies.html#dar-dalf-daml-lf-and-the-engine">DAR, DALF, Daml-LF, and the Engine</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml/intro/9_Dependencies.html#hashes-and-identifiers">Hashes and Identifiers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml/intro/9_Dependencies.html#dependencies-and-data-dependencies">Dependencies and Data Dependencies</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml/intro/9_Dependencies.html#structuring-projects">Structuring Projects</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml/intro/9_Dependencies.html#building-multiple-packages">Building Multiple Packages</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml/intro/9_Dependencies.html#next-up">Next Up</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../daml/intro/10_Functional101.html">Functional Programming 101</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../daml/intro/10_Functional101.html#the-haskell-connection">The Haskell Connection</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml/intro/10_Functional101.html#functions">Functions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../daml/intro/10_Functional101.html#function-application">Function Application</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../daml/intro/10_Functional101.html#infix-functions">Infix Functions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../daml/intro/10_Functional101.html#type-constraints">Type Constraints</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../daml/intro/10_Functional101.html#pattern-matching-in-arguments">Pattern Matching in Arguments</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../daml/intro/10_Functional101.html#functions-everywhere">Functions Everywhere</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../daml/intro/10_Functional101.html#lambdas">Lambdas</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../daml/intro/10_Functional101.html#control-flow">Control Flow</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../daml/intro/10_Functional101.html#branching">Branching</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../daml/intro/10_Functional101.html#looping">Looping</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../daml/intro/10_Functional101.html#next-up">Next Up</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../daml/intro/11_StdLib.html">The Daml Standard Library</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../daml/intro/11_StdLib.html#the-prelude">The Prelude</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml/intro/11_StdLib.html#important-types-from-the-prelude">Important Types From the Prelude</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../daml/intro/11_StdLib.html#lists">Lists</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../daml/intro/11_StdLib.html#tuples">Tuples</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../daml/intro/11_StdLib.html#optional">Optional</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../daml/intro/11_StdLib.html#either">Either</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../daml/intro/11_StdLib.html#typeclasses">Typeclasses</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml/intro/11_StdLib.html#important-typeclasses-from-the-prelude">Important Typeclasses From the Prelude</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../daml/intro/11_StdLib.html#eq">Eq</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../daml/intro/11_StdLib.html#ord">Ord</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../daml/intro/11_StdLib.html#show">Show</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../daml/intro/11_StdLib.html#functor">Functor</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../daml/intro/11_StdLib.html#applicative-functor">Applicative Functor</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../daml/intro/11_StdLib.html#actions">Actions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../daml/intro/11_StdLib.html#semigroups-and-monoids">Semigroups and Monoids</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../daml/intro/11_StdLib.html#additive-and-multiplicative">Additive and Multiplicative</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../daml/intro/11_StdLib.html#important-modules-in-the-standard-library">Important Modules in the Standard Library</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml/intro/11_StdLib.html#search-the-standard-library">Search the Standard Library</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../daml/intro/11_StdLib.html#search-for-functions-by-name">Search for Functions by Name</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../daml/intro/11_StdLib.html#search-for-functions-by-signature">Search for Functions by Signature</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../daml/intro/11_StdLib.html#next-up">Next Up</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../daml/patterns.html">Good Design Patterns</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../daml/patterns/propose-accept.html">The Propose and Accept Pattern</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../daml/patterns/propose-accept.html#motivation">Motivation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../daml/patterns/propose-accept.html#implementation">Implementation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../daml/patterns/propose-accept.html#trade-offs">Trade-offs</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../daml/patterns/multiparty-agreement.html">The Multiple Party Agreement Pattern</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../daml/patterns/multiparty-agreement.html#motivation">Motivation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../daml/patterns/multiparty-agreement.html#implementation">Implementation</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../daml/patterns/delegation.html">The Delegation Pattern</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../daml/patterns/delegation.html#motivation">Motivation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../daml/patterns/delegation.html#implementation">Implementation</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../daml/patterns/authorization.html">The Authorization Pattern</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../daml/patterns/authorization.html#motivation">Motivation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../daml/patterns/authorization.html#authorization">Authorization</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../daml/patterns/locking.html">The Locking Pattern</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../daml/patterns/locking.html#motivation">Motivation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../daml/patterns/locking.html#implementation">Implementation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../daml/patterns/locking/locking-by-archiving.html">Lock by Archiving</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../daml/patterns/locking/locking-by-state.html">Lock by State</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../daml/patterns/locking/locking-by-safekeeping.html">Lock by Safekeeping</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../daml/patterns/legends.html">Diagram Legends</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../daml/intro/12_Testing.html">Test Daml Contracts</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../daml/intro/12_Testing.html#daml-test-tooling">Daml Test Tooling</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml/intro/12_Testing.html#debug-trace-and-stacktraces">Debug, Trace, and Stacktraces</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml/intro/12_Testing.html#diagnose-contention-errors">Diagnose Contention Errors</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../daml/intro/12_Testing.html#common-errors">Common Errors</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../daml/intro/12_Testing.html#avoid-race-conditions-and-stale-references">Avoid Race Conditions and Stale References</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../daml/intro/12_Testing.html#collisions-due-to-ignorance">Collisions Due to Ignorance</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../daml/intro/12_Testing.html#checking-coverage">Checking Coverage</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../daml/intro/12_Testing.html#flags-controlling-test-set">Flags Controlling Test Set</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../daml/intro/12_Testing.html#flags-controlling-serialization">Flags Controlling Serialization</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../daml/intro/12_Testing.html#flags-controlling-report">Flags Controlling Report</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../daml/intro/12_Testing.html#define-templates-choices-and-interfaces">Define templates, choices, and interfaces</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../daml/intro/12_Testing.html#start-testing">Start testing</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../daml/intro/12_Testing.html#template-creation-coverage">Template creation coverage</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../daml/intro/12_Testing.html#template-choice-exercise-coverage">Template choice exercise coverage</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../daml/intro/12_Testing.html#interface-choice-exercise-coverage">Interface choice exercise coverage</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../daml/intro/12_Testing.html#checking-coverage-of-external-dependencies">Checking Coverage of External Dependencies</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../daml/intro/12_Testing.html#definitions">Definitions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../daml/intro/12_Testing.html#local-definitions">Local Definitions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../daml/intro/12_Testing.html#external-definitions">External Definitions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../daml/intro/12_Testing.html#external-internal-and-any-coverage">External, Internal, and “Any” Coverage</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../daml/intro/12_Testing.html#serializing-results-workflows">Serializing Results Workflows</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../daml/intro/12_Testing.html#single-test-iteration">Single Test Iteration</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../daml/intro/12_Testing.html#multiple-test-aggregation">Multiple Test Aggregation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../daml/intro/12_Testing.html#test-failure-recovery">Test Failure Recovery</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../daml/intro/12_Testing.html#excluding-choices-from-the-coverage-report">Excluding Choices from the Coverage Report</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../daml/intro/12_Testing.html#example-excluding-archive-choices">Example: Excluding Archive Choices</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../daml/intro/12_Testing.html#example-excluding-choices-from-a-specific-module">Example: Excluding Choices from a Specific Module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../daml/intro/12_Testing.html#excluding-choices-from-serialized-reports">Excluding Choices from Serialized Reports</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../daml/intro/12_Testing.html#next-up">Next Up</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../daml/intro/99_NextSteps.html">Next Steps</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../create-daml-apps/off-ledger/index.html">Integrate Daml with Off-Ledger Services</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../building-applications.html">Build Applications</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../app-dev/app-arch.html">Daml Application Architecture</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../app-dev/app-arch.html#backend">Backend</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../app-dev/app-arch.html#frontend">Frontend</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../app-dev/app-arch.html#authorization">Authorization</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../app-dev/app-arch.html#developer-workflow">Developer Workflow</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../app-dev/app-arch.html#command-deduplication">Command Deduplication</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../app-dev/app-arch.html#deal-with-failures">Deal With Failures</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../app-dev/app-arch.html#deal-with-time">Deal With Time</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../app-dev/parties-users.html">Parties and Users On a Daml Ledger</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../app-dev/parties-users.html#parties-in-sdk-2-0-and-subsequent">Parties in SDK 2.0 and Subsequent</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../app-dev/parties-users.html#party-id-hints-and-display-names">Party ID Hints and Display Names</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../app-dev/parties-users.html#authorization-and-user-management">Authorization and User Management</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../app-dev/parties-users.html#working-with-parties">Working with Parties</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../app-dev/parties-users.html#daml-script">Daml Script</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../app-dev/parties-users.html#daml-triggers-deprecated">Daml Triggers (Deprecated)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../app-dev/parties-users.html#navigator-deprecated">Navigator (Deprecated)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../app-dev/parties-users.html#java-bindings">Java Bindings</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../app-dev/parties-users.html#create-daml-app-and-uis">Create-daml-app and UIs</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../create-daml-apps/off-ledger/json-api/index.html">Access Active Contracts with the HTTP JSON API Service</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../json-api/index.html">HTTP JSON API Service</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../json-api/index.html#run-the-json-api">Run the JSON API</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../json-api/index.html#http-status-codes">HTTP Status Codes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../json-api/index.html#create-a-new-contract">Create a New Contract</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../json-api/index.html#create-a-contract-with-a-command-id">Create a Contract with a Command ID</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../json-api/index.html#exercise-by-contract-id">Exercise by Contract ID</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../json-api/index.html#exercise-by-contract-key">Exercise by Contract Key</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../json-api/index.html#create-and-exercise-in-the-same-transaction">Create and Exercise in the Same Transaction</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../json-api/index.html#fetch-contract-by-contract-id">Fetch Contract by Contract ID</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../json-api/index.html#fetch-contract-by-key">Fetch Contract by Key</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../json-api/index.html#get-all-active-contracts">Get All Active Contracts</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../json-api/index.html#get-all-active-contracts-matching-a-given-query">Get All Active Contracts Matching a Given Query</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../json-api/index.html#fetch-parties-by-identifiers">Fetch Parties by Identifiers</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../json-api/index.html#fetch-all-known-parties">Fetch All Known Parties</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../json-api/index.html#allocate-a-new-party">Allocate a New Party</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../json-api/index.html#create-a-new-user">Create a New User</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../json-api/index.html#get-authenticated-user-information">Get Authenticated User Information</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../json-api/index.html#get-specific-user-information">Get Specific User Information</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../json-api/index.html#delete-specific-user">Delete Specific User</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../json-api/index.html#list-users">List Users</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../json-api/index.html#grant-user-rights">Grant User Rights</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../json-api/index.html#revoke-user-rights">Revoke User Rights</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../json-api/index.html#list-authenticated-user-rights">List Authenticated User Rights</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../json-api/index.html#list-specific-user-rights">List Specific User Rights</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../json-api/index.html#list-all-dalf-packages">List All DALF Packages</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../json-api/index.html#download-a-dalf-package">Download a DALF Package</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../json-api/index.html#upload-a-dar-file">Upload a DAR File</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../json-api/index.html#metering-report">Metering Report</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../json-api/index.html#streaming-api">Streaming API</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../json-api/index.html#healthcheck-endpoints">Healthcheck Endpoints</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../json-api/lf-value-specification.html">Daml-LF JSON Encoding</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../json-api/lf-value-specification.html#codec-library">Codec Library</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../json-api/lf-value-specification.html#type-directed-parsing">Type-directed Parsing</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../json-api/lf-value-specification.html#contractid">ContractId</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../json-api/lf-value-specification.html#decimal">Decimal</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../json-api/lf-value-specification.html#int64">Int64</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../json-api/lf-value-specification.html#timestamp">Timestamp</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../json-api/lf-value-specification.html#party">Party</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../json-api/lf-value-specification.html#unit">Unit</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../json-api/lf-value-specification.html#date">Date</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../json-api/lf-value-specification.html#text">Text</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../json-api/lf-value-specification.html#bool">Bool</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../json-api/lf-value-specification.html#record">Record</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../json-api/lf-value-specification.html#list">List</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../json-api/lf-value-specification.html#textmap">TextMap</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../json-api/lf-value-specification.html#genmap">GenMap</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../json-api/lf-value-specification.html#optional">Optional</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../json-api/lf-value-specification.html#variant">Variant</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../json-api/lf-value-specification.html#enum">Enum</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../json-api/search-query-language.html">Query Language</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../json-api/search-query-language.html#fallback-rule">Fallback Rule</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../json-api/search-query-language.html#simple-equality">Simple Equality</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../json-api/search-query-language.html#comparison-query">Comparison Query</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../json-api/search-query-language.html#appendix-type-aware-queries">Appendix: Type-aware Queries</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../json-api/search-query-language.html#appendix-known-issues">Appendix: Known Issues</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../app-dev/bindings-ts/index.html">Use JavaScript Client Libraries with Daml</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../app-dev/bindings-ts/daml2js.html">Use the JavaScript Code Generator</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../app-dev/bindings-ts/daml-react.html">&#64;daml/react</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../app-dev/bindings-ts/daml-ledger.html">&#64;daml/ledger</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../app-dev/bindings-ts/daml-types.html">&#64;daml/types</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../create-daml-apps/off-ledger/json-api/production-setup/index.html">JSON API Production Setup</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../json-api/production-setup.html">Production Setup</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../json-api/production-setup/query-store.html">Query Store</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../json-api/production-setup/security-and-privacy.html">Security and Privacy</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../json-api/production-setup/architecture.html">Architecture</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../json-api/production-setup/scaling-and-redundancy.html">Scaling and Redundancy</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../json-api/production-setup/logging.html">Logging</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../json-api/production-setup/metrics.html">Metrics</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../app-dev/ledger-api.html">Build Integration with the Ledger API</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../app-dev/ledger-api.html#what-s-in-the-ledger-api">What’s in the Ledger API</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../app-dev/ledger-api.html#how-to-access-the-ledger-api">How to Access the Ledger API</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../app-dev/ledger-api.html#daml-lf">Daml-LF</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../app-dev/ledger-api.html#when-you-need-to-know-about-daml-lf">When You Need to Know About Daml-LF</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../app-dev/services.html">The Ledger API Services</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../app-dev/services.html#overview">Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../app-dev/services.html#submit-commands-to-the-ledger">Submit Commands to the Ledger</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../app-dev/services.html#read-from-the-ledger">Read From the Ledger</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../app-dev/services.html#utility-services">Utility Services</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../app-dev/services.html#testing-services">Testing Services</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../app-dev/bindings-java/index.html">Java Bindings</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../app-dev/bindings-java/index.html#overview">Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../app-dev/bindings-java/index.html#reference-documentation">Reference Documentation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../app-dev/bindings-java/index.html#get-started">Get Started</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../app-dev/bindings-java/index.html#example-projects">Example Projects</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../app-dev/bindings-java/codegen.html">Generate Java Code from Daml</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../app-dev/bindings-java/example.html">Java Bindings Example Project</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../app-dev/bindings-java/quickstart.html">Iou Quickstart Tutorial</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../app-dev/bindings-java/open-tracing.html">Open Tracing in Ledger API Client Applications</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../app-dev/bindings-python.html">Python Bindings</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../app-dev/grpc/index.html">Use the Ledger API With gRPC</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../app-dev/grpc/index.html#get-started">Get Started</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../app-dev/grpc/index.html#protobuf-reference-documentation">Protobuf Reference Documentation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../app-dev/grpc/index.html#example-project">Example Project</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../app-dev/grpc/index.html#daml-types-and-protobuf">Daml Types and Protobuf</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../app-dev/grpc/index.html#error-handling">Error Handling</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../app-dev/grpc/proto-docs.html">Ledger API Reference</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../app-dev/grpc/proto-docs.html#activecontractsservice-version-com-daml-ledger-api-v1">ActiveContractsService, v1</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../app-dev/grpc/proto-docs.html#commandinspectionservice-version-com-daml-ledger-api-v1-admin">CommandInspectionService, v1/admin</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../app-dev/grpc/proto-docs.html#configmanagementservice-version-com-daml-ledger-api-v1-admin">ConfigManagementService, v1/admin</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../app-dev/grpc/proto-docs.html#com-daml-ledger-api-v1-admin-identityproviderconfigservice">IdentityProviderConfigService, v1/admin</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../app-dev/grpc/proto-docs.html#meteringreportservice-version-com-daml-ledger-api-v1-admin">MeteringReportService, v1/admin</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../app-dev/grpc/proto-docs.html#packagemanagementservice-version-com-daml-ledger-api-v1-admin">PackageManagementService, v1/admin</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../app-dev/grpc/proto-docs.html#participantpruningservice-version-com-daml-ledger-api-v1-admin">ParticipantPruningService, v1/admin</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../app-dev/grpc/proto-docs.html#partymanagementservice-version-com-daml-ledger-api-v1-admin">PartyManagementService, v1/admin</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../app-dev/grpc/proto-docs.html#usermanagementservice-version-com-daml-ledger-api-v1-admin">UserManagementService, v1/admin</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../app-dev/grpc/proto-docs.html#commandcompletionservice-version-com-daml-ledger-api-v1">CommandCompletionService, v1</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../app-dev/grpc/proto-docs.html#commandservice-version-com-daml-ledger-api-v1">CommandService, v1</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../app-dev/grpc/proto-docs.html#commandsubmissionservice-version-com-daml-ledger-api-v1">CommandSubmissionService, v1</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../app-dev/grpc/proto-docs.html#eventqueryservice-version-com-daml-ledger-api-v1">EventQueryService, v1</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../app-dev/grpc/proto-docs.html#ledgerconfigurationservice-version-com-daml-ledger-api-v1">LedgerConfigurationService, v1</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../app-dev/grpc/proto-docs.html#ledgeridentityservice-version-com-daml-ledger-api-v1">LedgerIdentityService, v1</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../app-dev/grpc/proto-docs.html#packageservice-version-com-daml-ledger-api-v1">PackageService, v1</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../app-dev/grpc/proto-docs.html#timeservice-version-com-daml-ledger-api-v1-testing">TimeService, v1/testing</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../app-dev/grpc/proto-docs.html#transactionservice-version-com-daml-ledger-api-v1">TransactionService, v1</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../app-dev/grpc/proto-docs.html#versionservice-version-com-daml-ledger-api-v1">VersionService, v1</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../app-dev/grpc/proto-docs.html#commandcompletionservice-version-com-daml-ledger-api-v2">CommandCompletionService, v2</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../app-dev/grpc/proto-docs.html#commandservice-version-com-daml-ledger-api-v2">CommandService, v2</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../app-dev/grpc/proto-docs.html#commandsubmissionservice-version-com-daml-ledger-api-v2">CommandSubmissionService, v2</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../app-dev/grpc/proto-docs.html#eventqueryservice-version-com-daml-ledger-api-v2">EventQueryService, v2</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../app-dev/grpc/proto-docs.html#packageservice-version-com-daml-ledger-api-v2">PackageService, v2</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../app-dev/grpc/proto-docs.html#stateservice-version-com-daml-ledger-api-v2">StateService, v2</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../app-dev/grpc/proto-docs.html#timeservice-version-com-daml-ledger-api-v2-testing">TimeService, v2/testing</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../app-dev/grpc/proto-docs.html#updateservice-version-com-daml-ledger-api-v2">UpdateService, v2</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../app-dev/grpc/proto-docs.html#versionservice-version-com-daml-ledger-api-v2">VersionService, v2</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../app-dev/grpc/proto-docs.html#scalar-value-types">Scalar Value Types</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../app-dev/grpc/daml-to-ledger-api.html">How Daml Types are Translated to Protobuf</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../app-dev/grpc/daml-to-ledger-api.html#notation">Notation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../app-dev/grpc/daml-to-ledger-api.html#records-and-primitive-types">Records and Primitive Types</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../app-dev/grpc/daml-to-ledger-api.html#variants">Variants</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../app-dev/grpc/daml-to-ledger-api.html#contract-templates">Contract Templates</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../app-dev/daml-lf-translation.html">How Daml Types are Translated to Daml-LF</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../app-dev/daml-lf-translation.html#primitive-types">Primitive Types</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../app-dev/daml-lf-translation.html#tuple-types">Tuple Types</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../app-dev/daml-lf-translation.html#data-types">Data Types</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../app-dev/daml-lf-translation.html#type-synonyms">Type Synonyms</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../app-dev/daml-lf-translation.html#template-types">Template Types</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../app-dev/daml-lf-translation.html#names-with-special-characters">Names with Special Characters</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../app-dev/bindings-x-lang/index.html">Create Your Own Bindings</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../app-dev/bindings-x-lang/index.html#build-ledger-commands">Build Ledger Commands</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../app-dev/bindings-x-lang/index.html#summary">Summary</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../app-dev/bindings-x-lang/index.html#links">Links</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../create-daml-apps/off-ledger/daml-off-ledger/index.html">Write Off-Ledger Automation Using Daml</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../daml-off-ledger.html">Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-script/index.html">React to Off-Ledger Events: Daml Script</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../daml-script/index.html#usage">Usage</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../daml-script/index.html#use-daml-script-for-ledger-initialization">Use Daml Script for Ledger Initialization</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../daml-script/index.html#use-daml-script-with-the-ide-ledger">Use Daml Script with the IDE Ledger</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../daml-script/index.html#use-daml-script-in-canton">Use Daml Script in Canton</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../daml-script/index.html#run-daml-script-against-ledgers-with-authorization">Run Daml Script Against Ledgers with Authorization</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../daml-script/index.html#run-daml-script-against-the-http-json-api">Run Daml Script Against the HTTP JSON API</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../triggers/index.html">React to On-Ledger Events: Daml Triggers</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../triggers/index.html#how-to-think-about-triggers">How To Think About Triggers</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../triggers/index.html#sample-trigger">Sample Trigger</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../triggers/index.html#daml-trigger-basics">Daml Trigger Basics</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../triggers/index.html#run-a-no-op-trigger">Run a No-Op Trigger</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../triggers/index.html#diversion-updating-message">Diversion: Updating <code class="docutils literal notranslate"><span class="pre">Message</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../triggers/index.html#autoreply">AutoReply</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../triggers/index.html#command-deduplication">Command Deduplication</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../triggers/index.html#authorization">Authorization</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../triggers/index.html#when-not-to-use-daml-triggers">When Not to Use Daml Triggers</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tools/trigger-service/index.html">Trigger Service</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tools/auth-middleware/index.html">Auth Middleware</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tools/auth-middleware/oauth2.html">OAuth 2.0 Auth Middleware</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../create-daml-apps/off-ledger/errors/index.html">Handle Errors</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../app-dev/command-deduplication.html">Command Deduplication</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../app-dev/command-deduplication.html#how-command-deduplication-works">How Command Deduplication Works</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../app-dev/command-deduplication.html#how-to-use-command-deduplication">How to Use Command Deduplication</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../app-dev/authorization.html">Authorization</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../app-dev/authorization.html#introduction">Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../app-dev/authorization.html#acquire-and-use-access-tokens">Acquire and Use Access Tokens</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../app-dev/authorization.html#access-tokens-and-rights">Access Tokens and Rights</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../app-dev/authorization.html#access-token-formats">Access Token Formats</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../app-dev/authorization.html#user-access-tokens">User Access Tokens</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../app-dev/authorization.html#custom-daml-claims-access-tokens">Custom Daml Claims Access Tokens</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../app-dev/authorization.html#encoding-and-signature">Encoding and Signature</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../app-dev/explicit-contract-disclosure.html">Explicit Contract Disclosure</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../app-dev/explicit-contract-disclosure.html#contract-read-delegation">Contract Read Delegation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../app-dev/explicit-contract-disclosure.html#read-delegation-using-explicit-contract-disclosure">Read delegation using explicit contract disclosure</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../app-dev/explicit-contract-disclosure.html#how-do-stakeholders-disclose-contracts-to-submitters">How do stakeholders disclose contracts to submitters?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../app-dev/explicit-contract-disclosure.html#attaching-a-disclosed-contract-to-a-command-submission">Attaching a disclosed contract to a command submission</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../app-dev/explicit-contract-disclosure.html#trading-the-stock-with-explicit-disclosure">Trading the stock with explicit disclosure</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../app-dev/explicit-contract-disclosure.html#safeguards">Safeguards</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../app-dev/explicit-contract-disclosure.html#contract-authentication">Contract authentication</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../app-dev/explicit-contract-disclosure.html#business-logic-safeguards">Business logic safeguards</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../daml/resource-management/index.html">Resource Management in Daml Application Design</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../daml/resource-management/latency-and-throughput.html">Managing Latency and Throughput</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../daml/resource-management/latency-and-throughput.html#problem-definition">Problem Definition</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../daml/resource-management/latency-and-throughput.html#possible-throughput-bottlenecks-in-order-of-likelihood">Possible Throughput Bottlenecks in Order of Likelihood</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../daml/resource-management/latency-and-throughput.html#solutions">Solutions</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../daml/resource-management/contention-avoiding.html">Avoid Contention Issues</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../daml/resource-management/contention-avoiding.html#contention-in-daml">Contention in Daml</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml/resource-management/contention-reducing.html">Reduce Contention</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml/resource-management/contention-techniques.html">Example Application with Techniques for Reducing Contention</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../daml/resource-management/contention-techniques.html#the-example-minimal-settlement-system">The Example Minimal Settlement System</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../daml/resource-management/contention-techniques.html#prepare-transactions-for-contention-free-parallelism">Prepare Transactions for Contention-Free Parallelism</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../daml/resource-management/contention-techniques.html#non-utxo-alternative-ledger-models">Non-UTXO Alternative Ledger Models</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../daml/resource-management/contention-techniques.html#simple-strategies-for-utxo-ledger-models">Simple Strategies for UTXO Ledger Models</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../daml/resource-management/contention-techniques.html#shard-asset-positions-for-utxo-ledger-models">Shard Asset Positions for UTXO Ledger Models</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../daml/resource-management/active-contract-set.html">Managing Active Contract Set (ACS) Size</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../daml/resource-management/active-contract-set.html#problem-definition">Problem Definition</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml/resource-management/active-contract-set.html#relational-databases">Relational Databases</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../daml/resource-management/active-contract-set.html#solutions">Solutions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../daml/resource-management/active-contract-set.html#http-json-api-service">HTTP JSON API Service</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../upgrade/index.html">Upgrading and Extending Daml Applications</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../upgrade/extend.html">Extending Daml Applications</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../upgrade/upgrade.html">Upgrading Daml Applications</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../upgrade/upgrade.html#daml-upgrade-overview">Daml Upgrade Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../upgrade/upgrade.html#structure-upgrade-contracts">Structure Upgrade Contracts</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../upgrade/upgrade.html#build-and-deploy-carbon-1-0-0">Build and Deploy <code class="docutils literal notranslate"><span class="pre">carbon-1.0.0</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../upgrade/upgrade.html#create-carbon-1-0-0-certificates">Create carbon-1.0.0 Certificates</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../upgrade/upgrade.html#build-and-deploy-carbon-2-0-0">Build and Deploy <code class="docutils literal notranslate"><span class="pre">carbon-2.0.0</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../upgrade/upgrade.html#build-and-deploy-carbon-upgrade">Build and Deploy <code class="docutils literal notranslate"><span class="pre">carbon-upgrade</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../upgrade/upgrade.html#upgrade-existing-certificates-from-carbon-1-0-0-to-carbon-2-0-0">Upgrade Existing Certificates from carbon-1.0.0 to carbon-2.0.0</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../upgrade/upgrade.html#further-steps">Further Steps</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../upgrade/smart-contract-upgrades.html">Smart Contract Upgrade</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../upgrade/smart-contract-upgrades.html#overview">Overview</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../upgrade/smart-contract-upgrades.html#what-is-smart-contract-upgrade-scu">What is Smart Contract Upgrade (SCU)?</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../upgrade/smart-contract-upgrades.html#requirements">Requirements</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../upgrade/smart-contract-upgrades.html#smart-contract-upgrade-basics">Smart Contract Upgrade Basics</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../upgrade/smart-contract-upgrades.html#upgrading-across-the-stack">Upgrading Across the Stack</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../upgrade/smart-contract-upgrades.html#limitations">Limitations</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../upgrade/smart-contract-upgrades.html#the-programming-model-by-example">The Programming Model by Example</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../upgrade/smart-contract-upgrades.html#writing-your-first-smart-contract-upgrade">Writing Your First Smart Contract Upgrade</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../upgrade/smart-contract-upgrades.html#deploying-your-first-upgrade">Deploying Your First Upgrade</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../upgrade/smart-contract-upgrades.html#continuing-to-write-your-upgrades">Continuing to Write Your Upgrades</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../upgrade/smart-contract-upgrades.html#developer-workflow">Developer Workflow</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../upgrade/smart-contract-upgrades.html#the-upgrade-model-in-depth-reference">The Upgrade Model in Depth - Reference</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../upgrade/smart-contract-upgrades.html#package-selection-in-the-ledger-api">Package Selection in the Ledger API</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../upgrade/smart-contract-upgrades.html#package-preference">Package Preference</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../upgrade/smart-contract-upgrades.html#dynamic-package-resolution-in-command-submission">Dynamic Package Resolution in Command Submission</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../upgrade/smart-contract-upgrades.html#dynamic-package-resolution-in-ledger-api-queries">Dynamic Package Resolution in Ledger API Queries</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../upgrade/smart-contract-upgrades.html#migrating-to-scu">Migrating to SCU</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../upgrade/smart-contract-upgrades.html#best-practices">Best Practices</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../upgrade/smart-contract-upgrades.html#separate-interfaces-exceptions-from-templates">Separate Interfaces/Exceptions from Templates</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../upgrade/smart-contract-upgrades.html#remove-retroactive-instances">Remove Retroactive Instances</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../upgrade/smart-contract-upgrades.html#avoid-contract-metadata-changes">Avoid Contract Metadata Changes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../upgrade/smart-contract-upgrades.html#breaking-changes-via-explicit-package-version">Breaking Changes via Explicit Package Version</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../upgrade/smart-contract-upgrades.html#avoid-depending-on-lf-1-15-packages">Avoid Depending on LF 1.15 Packages</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../upgrade/smart-contract-upgrades.html#avoid-depending-on-daml-script-packages">Avoid Depending on Daml Script Packages</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../upgrade/smart-contract-upgrades.html#operational-design-guideline-for-upgrading-daml-apps">Operational Design Guideline for Upgrading Daml Apps</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../upgrade/smart-contract-upgrades.html#testing">Testing</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../upgrade/smart-contract-upgrades.html#standalone-upgradeability-checks">Standalone Upgradeability Checks</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../upgrade/smart-contract-upgrades.html#dry-run-uploading-to-a-test-environment">Dry Run Uploading to a Test Environment</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../upgrade/smart-contract-upgrades.html#daml-script-testing">Daml Script Testing</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../upgrade/smart-contract-upgrades.html#multi-package-builds-for-upgrades">Multi-package builds for upgrades</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../upgrade/smart-contract-upgrades.html#workflow-testing">Workflow Testing</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../upgrade/smart-contract-upgrades.html#scu-support-in-daml-tooling">SCU Support in Daml Tooling</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../upgrade/smart-contract-upgrades.html#codegen">Codegen</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../upgrade/smart-contract-upgrades.html#json-api-server-1">JSON API Server</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../upgrade/smart-contract-upgrades.html#pqs">PQS</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../upgrade/smart-contract-upgrades.html#daml-shell">Daml Shell</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../upgrade/smart-contract-upgrades.html#id5">Daml-Script</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../upgrade/smart-contract-upgrades.html#daml-studio-support">Daml Studio support</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../upgrade/automation.html">Automating the Upgrade Process</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../upgrade/automation.html#structure-the-upgrade">Structure the Upgrade</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../upgrade/automation.html#implementation-of-the-daml-script">Implementation of the Daml Script</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../upgrade/automation.html#implementation-of-the-daml-trigger">Implementation of the Daml Trigger</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../upgrade/automation.html#deploy-and-execute-the-upgrade">Deploy and Execute the Upgrade</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../create-daml-apps/developer-tools/index.html">Developer Tools</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../tools/assistant.html">Daml Assistant</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../tools/assistant.html#command-help">Command Help</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../tools/assistant.html#configuration-files">Configuration Files</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../tools/assistant.html#global-config-file-daml-config-yaml">Global Config File (<code class="docutils literal notranslate"><span class="pre">daml-config.yaml</span></code>)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tools/assistant.html#project-config-file-daml-yaml">Project Config File (<code class="docutils literal notranslate"><span class="pre">daml.yaml</span></code>)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tools/assistant.html#recommended-build-options">Recommended <code class="docutils literal notranslate"><span class="pre">build-options</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tools/assistant.html#multi-package-config-file-multi-package-yaml">Multi-Package Config File (<code class="docutils literal notranslate"><span class="pre">multi-package.yaml</span></code>)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tools/assistant.html#environment-variable-interpolation">Environment Variable Interpolation</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../tools/assistant-install.html">Manage SDK Versions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../tools/assistant-build.html">Build Daml Projects</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../tools/assistant-build.html#build-a-project">Build a project</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tools/assistant-build.html#build-multiple-packages">Build multiple packages</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../tools/assistant-commands.html">Run Assistant Commands</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../tools/assistant-commands.html#terminal-command-completion">Terminal command completion</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tools/assistant-commands.html#run-commands-outside-of-the-project-directory">Run commands outside of the project directory</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../tools/daml-shell/index.html">Daml Shell</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../tools/daml-shell/index.html#getting-started">Getting started</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../tools/daml-shell/index.html#prerequisites">Prerequisites</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tools/daml-shell/index.html#running-daml-shell">Running Daml Shell</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tools/daml-shell/index.html#commands">Commands</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tools/daml-shell/index.html#filters">Filters</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../tools/daml-shell/index.html#configuration">Configuration</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../tools/daml-shell/index.html#command-line-arguments">Command line arguments</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tools/daml-shell/index.html#configuration-file">Configuration file</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tools/daml-shell/index.html#interactive-configuration">Interactive configuration</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../tools/daml-shell/index.html#usage">Usage</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../tools/daml-shell/index.html#connecting">Connecting</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tools/daml-shell/index.html#offsets">Offsets</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tools/daml-shell/index.html#summary-information">Summary information</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tools/daml-shell/index.html#payloads-by-fully-qualified-name">Payloads by fully qualified name</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tools/daml-shell/index.html#filtering-with-where-clauses">Filtering with <code class="docutils literal notranslate"><span class="pre">where</span></code> clauses</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tools/daml-shell/index.html#contract-lookup">Contract lookup</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tools/daml-shell/index.html#transaction-lookup">Transaction lookup</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tools/daml-shell/index.html#exercise-lookup">Exercise lookup</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../tools/daml-shell/index.html#transforming-and-exporting-command-output">Transforming and exporting command output</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../tools/daml-shell/index.html#setting-offset-bounds">Setting offset bounds</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tools/daml-shell/index.html#finding-transactions-that-created-or-archived-a-contract">Finding transactions that created or archived a contract</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../tools/daml-shell/index.html#faq">FAQ</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../tools/daml-shell/index.html#why-don-t-i-see-any-archived-contracts">Why don’t I see any archived contracts?</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tools/daml-shell/index.html#why-don-t-i-see-any-choices">Why don’t I see any choices?</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tools/daml-shell/index.html#why-don-t-i-see-any-interface-views">Why don’t I see any interface views?</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tools/daml-shell/index.html#why-do-all-contracts-show-the-same-ledger-offset">Why do all contracts show the same ledger offset?</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../tools/canton-console.html">Canton Console</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../tools/canton-console.html#introduction">Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../tools/canton-console.html#run-the-canton-console-against-the-sandbox">Run the Canton Console Against the Sandbox</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../tools/canton-console.html#built-in-documentation">Built-in Documentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../tools/canton-console.html#interact-with-the-sandbox">Interact With the Sandbox</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../deploy/generic_ledger.html">Deploy to Generic Daml Ledger</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../deploy/generic_ledger.html#connect-via-tls">Connect via TLS</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../deploy/generic_ledger.html#configure-request-timeouts">Configure Request Timeouts</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../daml-repl/index.html">Experiment: Daml REPL (Deprecated)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../daml-repl/index.html#usage">Usage</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-repl/index.html#what-is-in-scope-at-the-prompt">What Is in Scope at the Prompt?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-repl/index.html#using-daml-repl-without-a-ledger">Using Daml REPL Without a Ledger</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-repl/index.html#connecting-via-tls">Connecting via TLS</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-repl/index.html#connection-to-a-ledger-with-authorization">Connection to a Ledger With Authorization</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-repl/index.html#using-daml-repl-to-convert-to-json">Using Daml REPL to Convert to JSON</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../daml/daml-studio.html">Write: Daml Studio</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../daml/daml-studio.html#install">Install</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml/daml-studio.html#create-your-first-daml-file">Create Your First Daml File</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml/daml-studio.html#supported-features">Supported Features</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../daml/daml-studio.html#symbols-and-problem-reporting">Symbols and Problem Reporting</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../daml/daml-studio.html#hover-tooltips">Hover Tooltips</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../daml/daml-studio.html#daml-script-results">Daml Script Results</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../daml/daml-studio.html#daml-snippets">Daml Snippets</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../daml/daml-studio.html#common-script-errors">Common Script Errors</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../daml/daml-studio.html#abort-assert-and-debug">Abort, Assert, and Debug</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../daml/daml-studio.html#missing-authorization-on-create">Missing Authorization on Create</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../daml/daml-studio.html#missing-authorization-on-exercise">Missing Authorization on Exercise</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../daml/daml-studio.html#contract-not-visible">Contract Not Visible</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../daml/daml-studio.html#multi-package-support">Multi-Package Support</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../daml/daml-studio.html#multi-package-yaml-location">Multi-package.yaml Location</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../daml/daml-studio.html#package-environments-and-hot-loading">Package Environments and Hot-Loading</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../daml/daml-studio.html#multiple-daml-sdk-versions">Multiple Daml SDK Versions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../daml/daml-studio.html#directory-envrionment-tools-direnv">Directory Envrionment Tools (direnv)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../daml/daml-studio.html#limitations-in-2-10-0-rc">Limitations in 2.10.0-rc</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../daml/daml-studio.html#setting-multi-ide-sdk-version">Setting Multi-IDE SDK Version</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../daml/daml-studio.html#deactivating-multi-ide">Deactivating Multi-IDE</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../tools/sandbox.html">Test: Daml Sandbox</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../tools/sandbox.html#run-with-authorization">Run With Authorization</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../tools/sandbox.html#generate-json-web-tokens-jwt">Generate JSON Web Tokens (JWT)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tools/sandbox.html#generate-rsa-keys">Generate RSA keys</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tools/sandbox.html#generate-ec-keys">Generate EC keys</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../tools/sandbox.html#run-with-tls">Run With TLS</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../tools/sandbox.html#command-line-reference">Command-line Reference</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../tools/sandbox.html#metrics">Metrics</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../tools/sandbox.html#enable-and-configure-reporting">Enable and Configure Reporting</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tools/sandbox.html#types-of-metrics">Types of Metrics</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tools/sandbox.html#list-of-metrics">List of Metrics</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../tools/navigator/index.html">Visualize: Daml Navigator (Deprecated)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../tools/navigator/index.html#navigator-functionality">Navigator Functionality</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../tools/navigator/index.html#starting-navigator">Starting Navigator</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../tools/navigator/index.html#logging-in">Logging In</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../tools/navigator/index.html#logging-in-as-a-party">Logging in as a Party</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../tools/navigator/index.html#viewing-templates-or-contracts">Viewing Templates or Contracts</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../tools/navigator/index.html#listing-templates">Listing templates</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tools/navigator/index.html#listing-contracts">Listing contracts</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tools/navigator/index.html#viewing-contracts-based-on-a-template">Viewing contracts based on a template</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tools/navigator/index.html#viewing-template-and-contract-details">Viewing template and contract details</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../tools/navigator/index.html#using-navigator">Using Navigator</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../tools/navigator/index.html#creating-contracts">Creating contracts</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tools/navigator/index.html#exercising-choices">Exercising choices</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tools/navigator/index.html#advancing-time">Advancing time</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../tools/navigator/index.html#authorizing-navigator">Authorizing Navigator</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../tools/navigator/index.html#advanced-usage">Advanced Usage</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../tools/navigator/index.html#customizable-table-views">Customizable table views</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tools/navigator/index.html#using-navigator-with-a-daml-ledger">Using Navigator with a Daml Ledger</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../tools/profiler.html">Measure: Daml Profiler</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../tools/profiler.html#usage">Usage</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../tools/profiler.html#caveats">Caveats</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../tools/codegen.html">Daml Codegen</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../tools/codegen.html#introduction">Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../tools/codegen.html#run-the-daml-codegen">Run the Daml Codegen</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../tools/codegen.html#command-line-configuration">Command Line Configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tools/codegen.html#project-file-configuration-java">Project File Configuration (Java)</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Daml Finance</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../daml-finance/index.html">Daml Finance Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../daml-finance/overview/index.html">Overview</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../daml-finance/overview/intro.html">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../daml-finance/overview/architecture.html">Architecture</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../daml-finance/overview/building-applications.html">Building Applications</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../daml-finance/overview/extending-daml-finance.html">Extending Daml Finance</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../daml-finance/concepts/index.html">Concepts</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../daml-finance/concepts/asset-model.html">Asset Model</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../daml-finance/concepts/settlement.html">Settlement</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../daml-finance/concepts/lifecycling.html">Lifecycling</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../daml-finance/instruments/intro.html">Instruments</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../daml-finance/instruments/token.html">Token Instrument</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../daml-finance/instruments/bond.html">Bond Instrument</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../daml-finance/instruments/equity.html">Equity Instrument</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../daml-finance/instruments/option.html">Option Instrument</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../daml-finance/instruments/structured-product.html">Structured Product</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../daml-finance/instruments/swap.html">Swap Instrument</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../daml-finance/instruments/generic.html">Generic Instrument</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/instruments/generic/contingent-claims.html">Contingent Claims</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../daml-finance/packages/index.html">Packages</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../daml-finance/packages/interfaces/index.html">Interface Packages</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/packages/interfaces/daml-finance-interface-holding.html">Daml.Finance.Interface.Holding.V4</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../daml-finance/packages/interfaces/changelogs/daml-finance-interface-holding.html">Changelog</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/packages/interfaces/daml-finance-interface-account.html">Daml.Finance.Interface.Account.V4</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../daml-finance/packages/interfaces/changelogs/daml-finance-interface-account.html">Changelog</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/packages/interfaces/daml-finance-interface-settlement.html">Daml.Finance.Interface.Settlement.V4</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../daml-finance/packages/interfaces/changelogs/daml-finance-interface-settlement.html">Changelog</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/packages/interfaces/daml-finance-interface-lifecycle.html">Daml.Finance.Interface.Lifecycle.V4</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../daml-finance/packages/interfaces/changelogs/daml-finance-interface-lifecycle.html">Changelog</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/packages/interfaces/daml-finance-interface-instrument-base.html">Daml.Finance.Interface.Instrument.Base.V4</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../daml-finance/packages/interfaces/changelogs/daml-finance-interface-instrument-base.html">Changelog</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/packages/interfaces/daml-finance-interface-claims.html">Daml.Finance.Interface.Claims.V4</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../daml-finance/packages/interfaces/changelogs/daml-finance-interface-claims.html">Changelog</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/packages/interfaces/daml-finance-interface-data.html">Daml.Finance.Interface.Data.V4</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../daml-finance/packages/interfaces/changelogs/daml-finance-interface-data.html">Changelog</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/packages/interfaces/daml-finance-interface-types-common.html">Daml.Finance.Interface.Types.Common.V3</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../daml-finance/packages/interfaces/changelogs/daml-finance-interface-types-common.html">Changelog</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/packages/interfaces/daml-finance-interface-types-date.html">Daml.Finance.Interface.Types.Date.V3</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../daml-finance/packages/interfaces/changelogs/daml-finance-interface-types-date.html">Changelog</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/packages/interfaces/daml-finance-interface-util.html">Daml.Finance.Interface.Util.V3</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../daml-finance/packages/interfaces/changelogs/daml-finance-interface-util.html">Changelog</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/packages/interfaces/contingent-claims-core.html">ContingentClaims.Core.V3</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../daml-finance/packages/interfaces/changelogs/contingent-claims-core.html">Changelog</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/packages/interfaces/daml-finance-interface-instrument-bond.html">Daml.Finance.Interface.Instrument.Bond.V3</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../daml-finance/packages/interfaces/changelogs/daml-finance-interface-instrument-bond.html">Changelog</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/packages/interfaces/daml-finance-interface-instrument-equity.html">Daml.Finance.Interface.Instrument.Equity.V0</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../daml-finance/packages/interfaces/changelogs/daml-finance-interface-instrument-equity.html">Changelog</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/packages/interfaces/daml-finance-interface-instrument-generic.html">Daml.Finance.Interface.Instrument.Generic.V4</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../daml-finance/packages/interfaces/changelogs/daml-finance-interface-instrument-generic.html">Changelog</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/packages/interfaces/daml-finance-interface-instrument-option.html">Daml.Finance.Interface.Instrument.Option.V0</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../daml-finance/packages/interfaces/changelogs/daml-finance-interface-instrument-option.html">Changelog</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/packages/interfaces/daml-finance-interface-instrument-structuredproduct.html">Daml.Finance.Interface.Instrument.StructuredProduct.V0</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../daml-finance/packages/interfaces/changelogs/daml-finance-interface-instrument-structuredproduct.html">Changelog</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/packages/interfaces/daml-finance-interface-instrument-swap.html">Daml.Finance.Interface.Instrument.Swap.V0</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../daml-finance/packages/interfaces/changelogs/daml-finance-interface-instrument-swap.html">Changelog</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/packages/interfaces/daml-finance-interface-instrument-token.html">Daml.Finance.Interface.Instrument.Token.V4</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../daml-finance/packages/interfaces/changelogs/daml-finance-interface-instrument-token.html">Changelog</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/packages/interfaces/daml-finance-interface-instrument-types.html">Daml.Finance.Interface.Instrument.Types.V2</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../daml-finance/packages/interfaces/changelogs/daml-finance-interface-instrument-types.html">Changelog</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../daml-finance/packages/implementations/index.html">Implementation Packages</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/packages/implementations/daml-finance-holding.html">Daml.Finance.Holding.V4</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../daml-finance/packages/implementations/changelogs/daml-finance-holding.html">Changelog</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/packages/implementations/daml-finance-account.html">Daml.Finance.Account.V4</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../daml-finance/packages/implementations/changelogs/daml-finance-account.html">Changelog</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/packages/implementations/daml-finance-settlement.html">Daml.Finance.Settlement.V4</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../daml-finance/packages/implementations/changelogs/daml-finance-settlement.html">Changelog</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/packages/implementations/daml-finance-lifecycle.html">Daml.Finance.Lifecycle.V4</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../daml-finance/packages/implementations/changelogs/daml-finance-lifecycle.html">Changelog</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/packages/implementations/daml-finance-data.html">Daml.Finance.Data.V4</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../daml-finance/packages/implementations/changelogs/daml-finance-data.html">Changelog</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/packages/implementations/daml-finance-claims.html">Daml.Finance.Claims.V3</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../daml-finance/packages/implementations/changelogs/daml-finance-claims.html">Changelog</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/packages/implementations/daml-finance-util.html">Daml.Finance.Util.V4</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../daml-finance/packages/implementations/changelogs/daml-finance-util.html">Changelog</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/packages/implementations/contingent-claims-lifecycle.html">ContingentClaims.Lifecycle.V3</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../daml-finance/packages/implementations/changelogs/contingent-claims-lifecycle.html">Changelog</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/packages/implementations/contingent-claims-valuation.html">ContingentClaims.Valuation.V0</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../daml-finance/packages/implementations/changelogs/contingent-claims-valuation.html">Changelog</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/packages/implementations/daml-finance-instrument-bond.html">Daml.Finance.Instrument.Bond.V3</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../daml-finance/packages/implementations/changelogs/daml-finance-instrument-bond.html">Changelog</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/packages/implementations/daml-finance-instrument-equity.html">Daml.Finance.Instrument.Equity.V0</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../daml-finance/packages/implementations/changelogs/daml-finance-instrument-equity.html">Changelog</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/packages/implementations/daml-finance-instrument-generic.html">Daml.Finance.Instrument.Generic.V4</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../daml-finance/packages/implementations/changelogs/daml-finance-instrument-generic.html">Changelog</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/packages/implementations/daml-finance-instrument-option.html">Daml.Finance.Instrument.Option.V0</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../daml-finance/packages/implementations/changelogs/daml-finance-instrument-option.html">Changelog</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/packages/implementations/daml-finance-instrument-structuredproduct.html">Daml.Finance.Instrument.StructuredProduct.V0</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../daml-finance/packages/implementations/changelogs/daml-finance-instrument-structuredproduct.html">Changelog</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/packages/implementations/daml-finance-instrument-swap.html">Daml.Finance.Instrument.Swap.V0</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../daml-finance/packages/implementations/changelogs/daml-finance-instrument-swap.html">Changelog</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/packages/implementations/daml-finance-instrument-token.html">Daml.Finance.Instrument.Token.V4</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../daml-finance/packages/implementations/changelogs/daml-finance-instrument-token.html">Changelog</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../daml-finance/tutorials/index.html">Tutorials</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../daml-finance/tutorials/getting-started/intro.html">Getting Started</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/tutorials/getting-started/holdings.html">Holdings</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/tutorials/getting-started/transfer.html">Transfer</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/tutorials/getting-started/settlement.html">Settlement</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/tutorials/getting-started/lifecycling.html">Lifecycling</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../daml-finance/tutorials/settlement/intro.html">Settlement</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/tutorials/settlement/transfer.html">Enhanced Transfers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/tutorials/settlement/internal.html">Internal Settlement</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/tutorials/settlement/intermediated.html">Intermediated Settlement</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../daml-finance/tutorials/lifecycling/intro.html">Lifecycling</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/tutorials/lifecycling/fixed-rate-bond.html">Time-based lifecycling (using a fixed rate bond)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/tutorials/lifecycling/floating-rate-bond.html">Observations (using a floating rate bond)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/tutorials/lifecycling/callable-bond.html">Election-based lifecycling (using a callable bond)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../daml-finance/tutorials/upgrade/intro.html">Upgrade</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/tutorials/upgrade/account.html">Account Upgrade</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/tutorials/upgrade/holding.html">Holding Upgrade</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../daml-finance/tutorials/payoff-modeling/intro.html">Payoff Modeling</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/tutorials/payoff-modeling/basic-builders.html">Basic Builders</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/tutorials/payoff-modeling/observations.html">Observations</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../daml-finance/tutorials/advanced-topics/intro.html">Advanced Topics</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/tutorials/advanced-topics/lifecycling/intermediated-lifecycling.html">Intermediated Lifecycling of an Instrument</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/tutorials/advanced-topics/instrument-modeling/contingent-claims-instrument.html">Leverage Contingent Claims in Custom Instrument Implementations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/tutorials/advanced-topics/instrument-modeling/date-utilities.html">Date Utility Functions: Calendar, Schedule, and Day Count</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../daml-finance/reference/index.html">Reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../daml-finance/reference/glossary.html">Glossary</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../daml-finance/reference/patterns.html">Patterns</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/index.html">Daml Finance</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/ContingentClaims-Core-V3-Builders.html">ContingentClaims.Core.V3.Builders</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/ContingentClaims-Core-V3-Claim.html">ContingentClaims.Core.V3.Claim</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/ContingentClaims-Core-V3-Internal-Claim.html">ContingentClaims.Core.V3.Internal.Claim</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/ContingentClaims-Core-V3-Observation.html">ContingentClaims.Core.V3.Observation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/ContingentClaims-Core-V3-Util-Recursion.html">ContingentClaims.Core.V3.Util.Recursion</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/ContingentClaims-Lifecycle-V3-Lifecycle.html">ContingentClaims.Lifecycle.V3.Lifecycle</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/ContingentClaims-Lifecycle-V3-Util.html">ContingentClaims.Lifecycle.V3.Util</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/ContingentClaims-Valuation-V0-MathML.html">ContingentClaims.Valuation.V0.MathML</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/ContingentClaims-Valuation-V0-Stochastic.html">ContingentClaims.Valuation.V0.Stochastic</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Account-V4-Account.html">Daml.Finance.Account.V4.Account</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Claims-V3-Lifecycle-Rule.html">Daml.Finance.Claims.V3.Lifecycle.Rule</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Claims-V3-Util.html">Daml.Finance.Claims.V3.Util</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Claims-V3-Util-Builders.html">Daml.Finance.Claims.V3.Util.Builders</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Claims-V3-Util-Date.html">Daml.Finance.Claims.V3.Util.Date</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Claims-V3-Util-Lifecycle.html">Daml.Finance.Claims.V3.Util.Lifecycle</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Data-V4-Numeric-Observation.html">Daml.Finance.Data.V4.Numeric.Observation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Data-V4-Reference-HolidayCalendar.html">Daml.Finance.Data.V4.Reference.HolidayCalendar</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Data-V4-Time-DateClock.html">Daml.Finance.Data.V4.Time.DateClock</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Data-V4-Time-DateClock-Types.html">Daml.Finance.Data.V4.Time.DateClock.Types</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Data-V4-Time-DateClockUpdate.html">Daml.Finance.Data.V4.Time.DateClockUpdate</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Data-V4-Time-LedgerTime.html">Daml.Finance.Data.V4.Time.LedgerTime</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Holding-V4-BaseHolding.html">Daml.Finance.Holding.V4.BaseHolding</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Holding-V4-Factory.html">Daml.Finance.Holding.V4.Factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Holding-V4-Fungible.html">Daml.Finance.Holding.V4.Fungible</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Holding-V4-Transferable.html">Daml.Finance.Holding.V4.Transferable</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Holding-V4-TransferableFungible.html">Daml.Finance.Holding.V4.TransferableFungible</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Holding-V4-Util.html">Daml.Finance.Holding.V4.Util</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Instrument-Bond-V3-Callable-Factory.html">Daml.Finance.Instrument.Bond.V3.Callable.Factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Instrument-Bond-V3-Callable-Instrument.html">Daml.Finance.Instrument.Bond.V3.Callable.Instrument</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Instrument-Bond-V3-FixedRate-Factory.html">Daml.Finance.Instrument.Bond.V3.FixedRate.Factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Instrument-Bond-V3-FixedRate-Instrument.html">Daml.Finance.Instrument.Bond.V3.FixedRate.Instrument</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Instrument-Bond-V3-FloatingRate-Factory.html">Daml.Finance.Instrument.Bond.V3.FloatingRate.Factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Instrument-Bond-V3-FloatingRate-Instrument.html">Daml.Finance.Instrument.Bond.V3.FloatingRate.Instrument</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Instrument-Bond-V3-InflationLinked-Factory.html">Daml.Finance.Instrument.Bond.V3.InflationLinked.Factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Instrument-Bond-V3-InflationLinked-Instrument.html">Daml.Finance.Instrument.Bond.V3.InflationLinked.Instrument</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Instrument-Bond-V3-Util.html">Daml.Finance.Instrument.Bond.V3.Util</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Instrument-Bond-V3-ZeroCoupon-Factory.html">Daml.Finance.Instrument.Bond.V3.ZeroCoupon.Factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Instrument-Bond-V3-ZeroCoupon-Instrument.html">Daml.Finance.Instrument.Bond.V3.ZeroCoupon.Instrument</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Instrument-Equity-V0-Factory.html">Daml.Finance.Instrument.Equity.V0.Factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Instrument-Equity-V0-Instrument.html">Daml.Finance.Instrument.Equity.V0.Instrument</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Instrument-Generic-V4-Factory.html">Daml.Finance.Instrument.Generic.V4.Factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Instrument-Generic-V4-Instrument.html">Daml.Finance.Instrument.Generic.V4.Instrument</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Instrument-Generic-V4-Lifecycle-Rule.html">Daml.Finance.Instrument.Generic.V4.Lifecycle.Rule</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Instrument-Option-V0-BarrierEuropeanCash-Factory.html">Daml.Finance.Instrument.Option.V0.BarrierEuropeanCash.Factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Instrument-Option-V0-BarrierEuropeanCash-Instrument.html">Daml.Finance.Instrument.Option.V0.BarrierEuropeanCash.Instrument</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Instrument-Option-V0-Dividend-Factory.html">Daml.Finance.Instrument.Option.V0.Dividend.Factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Instrument-Option-V0-Dividend-Instrument.html">Daml.Finance.Instrument.Option.V0.Dividend.Instrument</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Instrument-Option-V0-Dividend-Election.html">Daml.Finance.Instrument.Option.V0.Dividend.Election</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Instrument-Option-V0-EuropeanCash-Factory.html">Daml.Finance.Instrument.Option.V0.EuropeanCash.Factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Instrument-Option-V0-EuropeanCash-Instrument.html">Daml.Finance.Instrument.Option.V0.EuropeanCash.Instrument</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Instrument-Option-V0-EuropeanPhysical-Factory.html">Daml.Finance.Instrument.Option.V0.EuropeanPhysical.Factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Instrument-Option-V0-EuropeanPhysical-Instrument.html">Daml.Finance.Instrument.Option.V0.EuropeanPhysical.Instrument</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Instrument-StructuredProduct-V0-AutoCallable-Factory.html">Daml.Finance.Instrument.StructuredProduct.V0.AutoCallable.Factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Instrument-StructuredProduct-V0-AutoCallable-Instrument.html">Daml.Finance.Instrument.StructuredProduct.V0.AutoCallable.Instrument</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Instrument-StructuredProduct-V0-BarrierReverseConvertible-Factory.html">Daml.Finance.Instrument.StructuredProduct.V0.BarrierReverseConvertible.Factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Instrument-StructuredProduct-V0-BarrierReverseConvertible-Instrument.html">Daml.Finance.Instrument.StructuredProduct.V0.BarrierReverseConvertible.Instrument</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Instrument-StructuredProduct-V0-Util.html">Daml.Finance.Instrument.StructuredProduct.V0.Util</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Instrument-Swap-V0-Asset-Factory.html">Daml.Finance.Instrument.Swap.V0.Asset.Factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Instrument-Swap-V0-Asset-Instrument.html">Daml.Finance.Instrument.Swap.V0.Asset.Instrument</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Instrument-Swap-V0-Asset-DistributionRule.html">Daml.Finance.Instrument.Swap.V0.Asset.DistributionRule</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Instrument-Swap-V0-CreditDefault-Factory.html">Daml.Finance.Instrument.Swap.V0.CreditDefault.Factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Instrument-Swap-V0-CreditDefault-Instrument.html">Daml.Finance.Instrument.Swap.V0.CreditDefault.Instrument</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Instrument-Swap-V0-Currency-Factory.html">Daml.Finance.Instrument.Swap.V0.Currency.Factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Instrument-Swap-V0-Currency-Instrument.html">Daml.Finance.Instrument.Swap.V0.Currency.Instrument</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Instrument-Swap-V0-ForeignExchange-Factory.html">Daml.Finance.Instrument.Swap.V0.ForeignExchange.Factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Instrument-Swap-V0-ForeignExchange-Instrument.html">Daml.Finance.Instrument.Swap.V0.ForeignExchange.Instrument</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Instrument-Swap-V0-Fpml-Factory.html">Daml.Finance.Instrument.Swap.V0.Fpml.Factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Instrument-Swap-V0-Fpml-Instrument.html">Daml.Finance.Instrument.Swap.V0.Fpml.Instrument</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Instrument-Swap-V0-Fpml-Util.html">Daml.Finance.Instrument.Swap.V0.Fpml.Util</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Instrument-Swap-V0-InterestRate-Factory.html">Daml.Finance.Instrument.Swap.V0.InterestRate.Factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Instrument-Swap-V0-InterestRate-Instrument.html">Daml.Finance.Instrument.Swap.V0.InterestRate.Instrument</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Instrument-Token-V4-Factory.html">Daml.Finance.Instrument.Token.V4.Factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Instrument-Token-V4-Instrument.html">Daml.Finance.Instrument.Token.V4.Instrument</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Account-V4-Account.html">Daml.Finance.Interface.Account.V4.Account</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Account-V4-Factory.html">Daml.Finance.Interface.Account.V4.Factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Account-V4-Util.html">Daml.Finance.Interface.Account.V4.Util</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Claims-V4-Claim.html">Daml.Finance.Interface.Claims.V4.Claim</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Claims-V4-Dynamic-Instrument.html">Daml.Finance.Interface.Claims.V4.Dynamic.Instrument</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Claims-V4-Types.html">Daml.Finance.Interface.Claims.V4.Types</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Data-V4-Numeric-Observation.html">Daml.Finance.Interface.Data.V4.Numeric.Observation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Data-V4-Numeric-Observation-Factory.html">Daml.Finance.Interface.Data.V4.Numeric.Observation.Factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Data-V4-Reference-HolidayCalendar.html">Daml.Finance.Interface.Data.V4.Reference.HolidayCalendar</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Data-V4-Reference-HolidayCalendar-Factory.html">Daml.Finance.Interface.Data.V4.Reference.HolidayCalendar.Factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Data-V4-Reference-Time.html">Daml.Finance.Interface.Data.V4.Reference.Time</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Holding-V4-Factory.html">Daml.Finance.Interface.Holding.V4.Factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Holding-V4-Fungible.html">Daml.Finance.Interface.Holding.V4.Fungible</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Holding-V4-Holding.html">Daml.Finance.Interface.Holding.V4.Holding</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Holding-V4-Transferable.html">Daml.Finance.Interface.Holding.V4.Transferable</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Holding-V4-Util.html">Daml.Finance.Interface.Holding.V4.Util</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Base-V4-Instrument.html">Daml.Finance.Interface.Instrument.Base.V4.Instrument</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Bond-V3-Callable-Factory.html">Daml.Finance.Interface.Instrument.Bond.V3.Callable.Factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Bond-V3-Callable-Instrument.html">Daml.Finance.Interface.Instrument.Bond.V3.Callable.Instrument</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Bond-V3-Callable-Types.html">Daml.Finance.Interface.Instrument.Bond.V3.Callable.Types</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Bond-V3-FixedRate-Factory.html">Daml.Finance.Interface.Instrument.Bond.V3.FixedRate.Factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Bond-V3-FixedRate-Instrument.html">Daml.Finance.Interface.Instrument.Bond.V3.FixedRate.Instrument</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Bond-V3-FixedRate-Types.html">Daml.Finance.Interface.Instrument.Bond.V3.FixedRate.Types</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Bond-V3-FloatingRate-Factory.html">Daml.Finance.Interface.Instrument.Bond.V3.FloatingRate.Factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Bond-V3-FloatingRate-Instrument.html">Daml.Finance.Interface.Instrument.Bond.V3.FloatingRate.Instrument</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Bond-V3-FloatingRate-Types.html">Daml.Finance.Interface.Instrument.Bond.V3.FloatingRate.Types</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Bond-V3-InflationLinked-Factory.html">Daml.Finance.Interface.Instrument.Bond.V3.InflationLinked.Factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Bond-V3-InflationLinked-Instrument.html">Daml.Finance.Interface.Instrument.Bond.V3.InflationLinked.Instrument</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Bond-V3-InflationLinked-Types.html">Daml.Finance.Interface.Instrument.Bond.V3.InflationLinked.Types</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Bond-V3-ZeroCoupon-Factory.html">Daml.Finance.Interface.Instrument.Bond.V3.ZeroCoupon.Factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Bond-V3-ZeroCoupon-Instrument.html">Daml.Finance.Interface.Instrument.Bond.V3.ZeroCoupon.Instrument</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Bond-V3-ZeroCoupon-Types.html">Daml.Finance.Interface.Instrument.Bond.V3.ZeroCoupon.Types</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Equity-V0-Factory.html">Daml.Finance.Interface.Instrument.Equity.V0.Factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Equity-V0-Instrument.html">Daml.Finance.Interface.Instrument.Equity.V0.Instrument</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Generic-V4-Factory.html">Daml.Finance.Interface.Instrument.Generic.V4.Factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Generic-V4-Instrument.html">Daml.Finance.Interface.Instrument.Generic.V4.Instrument</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Option-V0-BarrierEuropeanCash-Factory.html">Daml.Finance.Interface.Instrument.Option.V0.BarrierEuropeanCash.Factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Option-V0-BarrierEuropeanCash-Instrument.html">Daml.Finance.Interface.Instrument.Option.V0.BarrierEuropeanCash.Instrument</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Option-V0-BarrierEuropeanCash-Types.html">Daml.Finance.Interface.Instrument.Option.V0.BarrierEuropeanCash.Types</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Option-V0-Dividend-Factory.html">Daml.Finance.Interface.Instrument.Option.V0.Dividend.Factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Option-V0-Dividend-Instrument.html">Daml.Finance.Interface.Instrument.Option.V0.Dividend.Instrument</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Option-V0-Dividend-Types.html">Daml.Finance.Interface.Instrument.Option.V0.Dividend.Types</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Option-V0-Dividend-Election-Factory.html">Daml.Finance.Interface.Instrument.Option.V0.Dividend.Election.Factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Option-V0-EuropeanCash-Factory.html">Daml.Finance.Interface.Instrument.Option.V0.EuropeanCash.Factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Option-V0-EuropeanCash-Instrument.html">Daml.Finance.Interface.Instrument.Option.V0.EuropeanCash.Instrument</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Option-V0-EuropeanCash-Types.html">Daml.Finance.Interface.Instrument.Option.V0.EuropeanCash.Types</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Option-V0-EuropeanPhysical-Factory.html">Daml.Finance.Interface.Instrument.Option.V0.EuropeanPhysical.Factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Option-V0-EuropeanPhysical-Instrument.html">Daml.Finance.Interface.Instrument.Option.V0.EuropeanPhysical.Instrument</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Option-V0-EuropeanPhysical-Types.html">Daml.Finance.Interface.Instrument.Option.V0.EuropeanPhysical.Types</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Option-V0-Types.html">Daml.Finance.Interface.Instrument.Option.V0.Types</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-StructuredProduct-V0-AutoCallable-Factory.html">Daml.Finance.Interface.Instrument.StructuredProduct.V0.AutoCallable.Factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-StructuredProduct-V0-AutoCallable-Instrument.html">Daml.Finance.Interface.Instrument.StructuredProduct.V0.AutoCallable.Instrument</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-StructuredProduct-V0-AutoCallable-Types.html">Daml.Finance.Interface.Instrument.StructuredProduct.V0.AutoCallable.Types</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-StructuredProduct-V0-BarrierReverseConvertible-Factory.html">Daml.Finance.Interface.Instrument.StructuredProduct.V0.BarrierReverseConvertible.Factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-StructuredProduct-V0-BarrierReverseConvertible-Instrument.html">Daml.Finance.Interface.Instrument.StructuredProduct.V0.BarrierReverseConvertible.Instrument</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-StructuredProduct-V0-BarrierReverseConvertible-Types.html">Daml.Finance.Interface.Instrument.StructuredProduct.V0.BarrierReverseConvertible.Types</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-StructuredProduct-V0-Types.html">Daml.Finance.Interface.Instrument.StructuredProduct.V0.Types</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Swap-V0-Asset-Factory.html">Daml.Finance.Interface.Instrument.Swap.V0.Asset.Factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Swap-V0-Asset-Instrument.html">Daml.Finance.Interface.Instrument.Swap.V0.Asset.Instrument</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Swap-V0-Asset-Types.html">Daml.Finance.Interface.Instrument.Swap.V0.Asset.Types</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Swap-V0-CreditDefault-Factory.html">Daml.Finance.Interface.Instrument.Swap.V0.CreditDefault.Factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Swap-V0-CreditDefault-Instrument.html">Daml.Finance.Interface.Instrument.Swap.V0.CreditDefault.Instrument</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Swap-V0-CreditDefault-Types.html">Daml.Finance.Interface.Instrument.Swap.V0.CreditDefault.Types</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Swap-V0-Currency-Factory.html">Daml.Finance.Interface.Instrument.Swap.V0.Currency.Factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Swap-V0-Currency-Instrument.html">Daml.Finance.Interface.Instrument.Swap.V0.Currency.Instrument</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Swap-V0-Currency-Types.html">Daml.Finance.Interface.Instrument.Swap.V0.Currency.Types</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Swap-V0-ForeignExchange-Factory.html">Daml.Finance.Interface.Instrument.Swap.V0.ForeignExchange.Factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Swap-V0-ForeignExchange-Instrument.html">Daml.Finance.Interface.Instrument.Swap.V0.ForeignExchange.Instrument</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Swap-V0-ForeignExchange-Types.html">Daml.Finance.Interface.Instrument.Swap.V0.ForeignExchange.Types</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Swap-V0-Fpml-Factory.html">Daml.Finance.Interface.Instrument.Swap.V0.Fpml.Factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Swap-V0-Fpml-FpmlTypes.html">Daml.Finance.Interface.Instrument.Swap.V0.Fpml.FpmlTypes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Swap-V0-Fpml-Instrument.html">Daml.Finance.Interface.Instrument.Swap.V0.Fpml.Instrument</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Swap-V0-Fpml-Types.html">Daml.Finance.Interface.Instrument.Swap.V0.Fpml.Types</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Swap-V0-InterestRate-Factory.html">Daml.Finance.Interface.Instrument.Swap.V0.InterestRate.Factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Swap-V0-InterestRate-Instrument.html">Daml.Finance.Interface.Instrument.Swap.V0.InterestRate.Instrument</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Swap-V0-InterestRate-Types.html">Daml.Finance.Interface.Instrument.Swap.V0.InterestRate.Types</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Token-V4-Factory.html">Daml.Finance.Interface.Instrument.Token.V4.Factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Token-V4-Instrument.html">Daml.Finance.Interface.Instrument.Token.V4.Instrument</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Token-V4-Types.html">Daml.Finance.Interface.Instrument.Token.V4.Types</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Types-V2-FloatingRate.html">Daml.Finance.Interface.Instrument.Types.V2.FloatingRate</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Lifecycle-V4-Effect.html">Daml.Finance.Interface.Lifecycle.V4.Effect</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Lifecycle-V4-Election.html">Daml.Finance.Interface.Lifecycle.V4.Election</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Lifecycle-V4-Election-Factory.html">Daml.Finance.Interface.Lifecycle.V4.Election.Factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Lifecycle-V4-Event.html">Daml.Finance.Interface.Lifecycle.V4.Event</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Lifecycle-V4-Event-Distribution.html">Daml.Finance.Interface.Lifecycle.V4.Event.Distribution</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Lifecycle-V4-Event-Replacement.html">Daml.Finance.Interface.Lifecycle.V4.Event.Replacement</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Lifecycle-V4-Event-Time.html">Daml.Finance.Interface.Lifecycle.V4.Event.Time</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Lifecycle-V4-Observable-NumericObservable.html">Daml.Finance.Interface.Lifecycle.V4.Observable.NumericObservable</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Lifecycle-V4-Observable-TimeObservable.html">Daml.Finance.Interface.Lifecycle.V4.Observable.TimeObservable</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Lifecycle-V4-Rule-Claim.html">Daml.Finance.Interface.Lifecycle.V4.Rule.Claim</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Lifecycle-V4-Rule-Lifecycle.html">Daml.Finance.Interface.Lifecycle.V4.Rule.Lifecycle</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Settlement-V4-Batch.html">Daml.Finance.Interface.Settlement.V4.Batch</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Settlement-V4-Factory.html">Daml.Finance.Interface.Settlement.V4.Factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Settlement-V4-Instruction.html">Daml.Finance.Interface.Settlement.V4.Instruction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Settlement-V4-RouteProvider.html">Daml.Finance.Interface.Settlement.V4.RouteProvider</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Settlement-V4-Types.html">Daml.Finance.Interface.Settlement.V4.Types</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Types-Common-V3-Types.html">Daml.Finance.Interface.Types.Common.V3.Types</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Types-Date-V3-Calendar.html">Daml.Finance.Interface.Types.Date.V3.Calendar</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Types-Date-V3-Classes.html">Daml.Finance.Interface.Types.Date.V3.Classes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Types-Date-V3-DateOffset.html">Daml.Finance.Interface.Types.Date.V3.DateOffset</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Types-Date-V3-DayCount.html">Daml.Finance.Interface.Types.Date.V3.DayCount</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Types-Date-V3-RollConvention.html">Daml.Finance.Interface.Types.Date.V3.RollConvention</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Types-Date-V3-Schedule.html">Daml.Finance.Interface.Types.Date.V3.Schedule</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Util-V3-Common.html">Daml.Finance.Interface.Util.V3.Common</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Util-V3-Disclosure.html">Daml.Finance.Interface.Util.V3.Disclosure</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Util-V3-InterfaceKey.html">Daml.Finance.Interface.Util.V3.InterfaceKey</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Util-V3-Lockable.html">Daml.Finance.Interface.Util.V3.Lockable</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Lifecycle-V4-Effect.html">Daml.Finance.Lifecycle.V4.Effect</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Lifecycle-V4-Election.html">Daml.Finance.Lifecycle.V4.Election</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Lifecycle-V4-ElectionEffect.html">Daml.Finance.Lifecycle.V4.ElectionEffect</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Lifecycle-V4-Event-Distribution.html">Daml.Finance.Lifecycle.V4.Event.Distribution</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Lifecycle-V4-Event-Replacement.html">Daml.Finance.Lifecycle.V4.Event.Replacement</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Lifecycle-V4-Rule-Claim.html">Daml.Finance.Lifecycle.V4.Rule.Claim</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Lifecycle-V4-Rule-Distribution.html">Daml.Finance.Lifecycle.V4.Rule.Distribution</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Lifecycle-V4-Rule-Replacement.html">Daml.Finance.Lifecycle.V4.Rule.Replacement</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Lifecycle-V4-Rule-Util.html">Daml.Finance.Lifecycle.V4.Rule.Util</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Settlement-V4-Batch.html">Daml.Finance.Settlement.V4.Batch</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Settlement-V4-Factory.html">Daml.Finance.Settlement.V4.Factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Settlement-V4-Hierarchy.html">Daml.Finance.Settlement.V4.Hierarchy</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Settlement-V4-Instruction.html">Daml.Finance.Settlement.V4.Instruction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Settlement-V4-RouteProvider-IntermediatedStatic.html">Daml.Finance.Settlement.V4.RouteProvider.IntermediatedStatic</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Settlement-V4-RouteProvider-SingleCustodian.html">Daml.Finance.Settlement.V4.RouteProvider.SingleCustodian</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Util-V4-Common.html">Daml.Finance.Util.V4.Common</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Util-V4-Date-Calendar.html">Daml.Finance.Util.V4.Date.Calendar</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Util-V4-Date-DayCount.html">Daml.Finance.Util.V4.Date.DayCount</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Util-V4-Date-RollConvention.html">Daml.Finance.Util.V4.Date.RollConvention</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Util-V4-Date-Schedule.html">Daml.Finance.Util.V4.Date.Schedule</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Util-V4-Disclosure.html">Daml.Finance.Util.V4.Disclosure</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Util-V4-Lockable.html">Daml.Finance.Util.V4.Lockable</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Deploy Daml</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../deploy-daml/intro/index.html">Canton</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../canton/about.html">Introduction to Canton</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../canton/architecture/overview.html">Overview and Assumptions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../canton/architecture/overview.html#canton-101">Canton 101</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../canton/architecture/overview.html#a-basic-example">A Basic Example</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/architecture/overview.html#transaction-processing-in-canton">Transaction Processing in Canton</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/architecture/overview.html#conflict-detection">Conflict Detection</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/architecture/overview.html#time-in-canton">Time in Canton</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/architecture/overview.html#subtransaction-privacy">Subtransaction Privacy</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/architecture/overview.html#synchronization-domain-entities">Synchronization Domain Entities</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../canton/architecture/overview.html#sequencer">Sequencer</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/architecture/overview.html#mediator">Mediator</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/architecture/overview.html#topology-manager">Topology Manager</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/architecture/overview.html#participant-internal-canton-components">Participant-Internal Canton Components</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/architecture/overview.html#trust-assumptions">Trust Assumptions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../canton/architecture/overview.html#general-trust-assumptions">General Trust Assumptions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/architecture/overview.html#assumptions-relevant-for-privacy">Assumptions Relevant for Privacy</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/architecture/overview.html#assumptions-relevant-for-liveness">Assumptions Relevant for Liveness</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../canton/tutorials/demo.html">Canton Demo</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../canton/tutorials/getting_started.html">Getting Started</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../canton/tutorials/getting_started.html#installation">Installation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/tutorials/getting_started.html#starting-canton">Starting Canton</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/tutorials/getting_started.html#the-example-topology">The Example Topology</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/tutorials/getting_started.html#connecting-the-participant-nodes-and-synchronization-domains">Connecting The Participant Nodes and Synchronization Domains</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/tutorials/getting_started.html#canton-identities-and-provisioning-parties">Canton Identities and Provisioning Parties</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/tutorials/getting_started.html#creating-parties">Creating Parties</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/tutorials/getting_started.html#extracting-identifiers">Extracting Identifiers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/tutorials/getting_started.html#provisioning-smart-contract-code">Provisioning Smart Contract Code</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/tutorials/getting_started.html#executing-smart-contracts">Executing Smart Contracts</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/tutorials/getting_started.html#privacy">Privacy</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/tutorials/getting_started.html#your-development-choices">Your Development Choices</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/tutorials/getting_started.html#automation-using-bootstrap-scripts">Automation Using Bootstrap Scripts</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/tutorials/getting_started.html#what-next">What Next?</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../canton/tutorials/use_daml_sdk.html">Daml SDK and Canton</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../canton/tutorials/use_daml_sdk.html#starting-canton">Starting Canton</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/tutorials/use_daml_sdk.html#running-the-create-daml-app-example">Running the Create Daml App Example</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../canton/tutorials/use_daml_sdk.html#connecting-to-participant2">Connecting to participant2</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/tutorials/use_daml_sdk.html#what-next">What Next?</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../canton/tutorials/composability.html">Composability</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../canton/tutorials/composability.html#part-1-a-multi-synchronization-domain-workflow">Part 1: A multi-synchronization-domain workflow</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../canton/tutorials/composability.html#setting-up-the-topology">Setting up the topology</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/tutorials/composability.html#creating-the-iou-and-the-paint-offer">Creating the IOU and the paint offer</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/tutorials/composability.html#contracts-and-their-synchronization-domains">Contracts and Their Synchronization Domains</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/tutorials/composability.html#transferring-a-contract">Transferring a contract</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/tutorials/composability.html#atomic-acceptance">Atomic acceptance</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/tutorials/composability.html#completing-the-workflow">Completing the workflow</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/tutorials/composability.html#performing-transfers-automatically">Performing transfers automatically</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/tutorials/composability.html#takeaways">Takeaways</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/tutorials/composability.html#part-2-composing-existing-workflows">Part 2: Composing existing workflows</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../canton/tutorials/composability.html#existing-workflows">Existing workflows</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/tutorials/composability.html#required-changes">Required changes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/tutorials/composability.html#preparation-using-the-existing-workflows">Preparation using the existing workflows</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/tutorials/composability.html#the-paint-offer-accept-workflow">The paint offer-accept workflow</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/tutorials/composability.html#continuing-the-existing-workflows">Continuing the existing workflows</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/tutorials/composability.html#id1">Takeaways</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../canton/usermanual/versioning.html">Versioning</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/versioning.html#canton-release-version">Canton release version</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/versioning.html#for-application-developers-and-operators">For application developers and operators</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/versioning.html#for-canton-participant-and-synchronization-domain-operators">For Canton participant and synchronization domain operators</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/versioning.html#canton-protocol-version">Canton protocol version</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/versioning.html#features-and-protocol-versions">Features and protocol versions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/versioning.html#configuring-the-protocol-version">Configuring the protocol version</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/versioning.html#minimum-protocol-version">Minimum protocol version</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/versioning.html#support-and-bug-fixes">Support and bug fixes</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../canton/usermanual/downloading.html">Download and Install Canton</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../canton/usermanual/downloading.html#choosing-open-source-or-enterprise-edition">Choosing Open-Source or Enterprise Edition</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../canton/usermanual/downloading.html#downloading-the-open-source-edition">Downloading the Open Source Edition</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../canton/usermanual/downloading.html#downloading-the-enterprise-edition">Downloading the Enterprise Edition</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../canton/usermanual/installation.html">Install Canton</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/installation.html#hardware-resources">Hardware Resources</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/installation.html#downloading-canton">Downloading Canton</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/installation.html#your-topology">Your Topology</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/installation.html#the-config-directory-contents">The Config Directory Contents</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/installation.html#selecting-your-storage-layer">Selecting your Storage Layer</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/installation.html#persistence-using-postgres">Persistence using Postgres</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/installation.html#generate-the-tls-certificates">Generate the TLS Certificates</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/installation.html#setting-up-a-participant">Setting up a Participant</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/installation.html#secure-the-apis">Secure the APIs</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/installation.html#configure-applications-users-and-connection">Configure Applications, Users and Connection</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/installation.html#setting-up-a-synchronization-domain">Setting up a Synchronization Domain</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/installation.html#using-an-embedded-synchronization-domain">Using an Embedded Synchronization Domain</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/installation.html#using-microservices">Using Microservices</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/installation.html#id3">Secure the APIs</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/installation.html#next-steps">Next Steps</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/installation.html#multi-node-setup">Multi-Node Setup</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../canton/usermanual/docker.html">Work With the Docker Containers</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/docker.html#obtaining-the-docker-images">Obtaining the Docker Images</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/docker.html#starting-canton">Starting Canton</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/docker.html#configuring-logging-and-health-probes">Configuring Logging and Health Probes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/docker.html#administrating-the-running-node">Administrating the Running Node</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/docker.html#exposing-the-ledger-api-or-admin-api-to-the-host-machine">Exposing the Ledger API or Admin API to the host machine</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/docker.html#supplying-custom-configuration-and-dars">Supplying custom configuration and DARs</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/docker.html#running-postgres-in-docker">Running Postgres in Docker</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../canton/usermanual/static_conf.html">Set Configuration Options</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/static_conf.html#configuration-reference">Configuration reference</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/static_conf.html#configuration-compatibility">Configuration Compatibility</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/static_conf.html#advanced-configurations">Advanced Configurations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/static_conf.html#configuration-mixin">Configuration Mixin</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/static_conf.html#multiple-synchronization-domains">Multiple Synchronization Domains</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/static_conf.html#fail-fast-mode">Fail Fast Mode</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/static_conf.html#init-configuration">Init Configuration</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../canton/usermanual/domains/domains.html">Set Up A Daml Domain With Enterprise Drivers</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/domains/oracle.html">Oracle Domain</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/domains/fabric.html">Fabric Domain</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/domains/fabric.html#tutorial">Tutorial</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/domains/fabric.html#user-manual">User Manual</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/domains/fabric.html#fabric-setup">Fabric Setup</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/domains/ethereum.html">Ethereum Domain</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/domains/ethereum.html#introduction">Introduction</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/domains/ethereum.html#the-ethereum-demo">The Ethereum Demo</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/domains/ethereum.html#error-codes">Error Codes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/domains/ethereum.html#tls-configuration">TLS Configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/domains/ethereum.html#ethereum-accounts-and-wallets">Ethereum Accounts and Wallets</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/domains/ethereum.html#deployment-of-the-sequencer-contract">Deployment of the Sequencer Contract</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/domains/ethereum.html#requirements-for-the-ethereum-network">Requirements for the Ethereum Network</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/domains/ethereum.html#trust-properties-of-the-ethereum-sequencer-integration">Trust Properties of the Ethereum Sequencer Integration</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/domains/ethereum.html#high-availability">High Availability</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../deploy-daml/infrastructure-architecture/high-availability/main-menu.html">High Availability (HA)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../deploy-daml/infrastructure-architecture/high-availability/basic-ha/intro.html">Intro to HA in Canton</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../deploy-daml/infrastructure-architecture/high-availability/basic-ha/overview.html">Overview</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../deploy-daml/infrastructure-architecture/high-availability/basic-ha/overview.html#participant-nodes">Participant Nodes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../deploy-daml/infrastructure-architecture/high-availability/basic-ha/overview.html#synchronization-domains">Synchronization Domains</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../deploy-daml/infrastructure-architecture/high-availability/basic-ha/overview.html#replication">Replication</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../deploy-daml/infrastructure-architecture/high-availability/basic-ha/overview.html#databases">Databases</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../deploy-daml/infrastructure-architecture/high-availability/basic-ha/overview.html#health-check">Health Check</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../deploy-daml/infrastructure-architecture/high-availability/basic-ha/participant.html">Active-Passive Participant Node Configuration</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../deploy-daml/infrastructure-architecture/high-availability/basic-ha/participant.html#high-level-system-design">High-Level System Design</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../deploy-daml/infrastructure-architecture/high-availability/basic-ha/participant.html#leader-election">Leader Election</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../deploy-daml/infrastructure-architecture/high-availability/basic-ha/participant.html#prevent-passive-node-replica-activity">Prevent Passive Node Replica Activity</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../deploy-daml/infrastructure-architecture/high-availability/basic-ha/domain.html">HA on the Synchronization Domain</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../deploy-daml/infrastructure-architecture/high-availability/basic-ha/domain.html#sequencer">Sequencer</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../deploy-daml/infrastructure-architecture/high-availability/basic-ha/domain.html#mediator">Mediator</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../deploy-daml/infrastructure-architecture/high-availability/production.html">HA for Production Systems</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../deploy-daml/infrastructure-architecture/high-availability/ha-and-scaling/introduction.html">HA and Horizontal Scaling</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../deploy-daml/infrastructure-architecture/high-availability/ha-and-scaling/introduction.html#introduction">Introduction</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../deploy-daml/infrastructure-architecture/high-availability/ha-and-scaling/understanding-ha.html">High Availability From a Business Perspective</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../deploy-daml/infrastructure-architecture/high-availability/ha-and-scaling/understanding-ha.html#availability">Availability</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../deploy-daml/infrastructure-architecture/high-availability/ha-and-scaling/understanding-ha.html#resiliency">Resiliency</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../deploy-daml/infrastructure-architecture/high-availability/ha-and-scaling/understanding-ha.html#other-common-metrics-rto-and-rpo">Other Common Metrics / RTO and RPO</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../deploy-daml/infrastructure-architecture/high-availability/ha-and-scaling/understanding-ha.html#ha-cost-trade-offs">HA Cost Trade-Offs</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../deploy-daml/infrastructure-architecture/high-availability/ha-and-scaling/use-cases.html">Use Cases By Role</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../deploy-daml/infrastructure-architecture/high-availability/ha-and-scaling/use-cases.html#distributed-application-provider">Distributed Application Provider</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../deploy-daml/infrastructure-architecture/high-availability/ha-and-scaling/use-cases.html#distributed-application-user">Distributed Application User</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../deploy-daml/infrastructure-architecture/high-availability/ha-and-scaling/use-cases.html#site-reliability-engineer-sre">Site Reliability Engineer (SRE)</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../deploy-daml/infrastructure-architecture/high-availability/ha-and-scaling/implementing-ha.html">Implementing HA and Scaling Deployments</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../deploy-daml/infrastructure-architecture/high-availability/ha-and-scaling/implementing-ha.html#basic-daml-deployment">Basic Daml Deployment</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../deploy-daml/infrastructure-architecture/high-availability/ha-and-scaling/implementing-ha.html#architecture-for-ha-and-scaling">Architecture for HA and Scaling</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../deploy-daml/infrastructure-architecture/high-availability/ha-and-scaling/implementing-ha.html#http-json-api-and-participant-node-services">HTTP JSON API and Participant Node Services</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../deploy-daml/infrastructure-architecture/high-availability/ha-and-scaling/implementing-ha.html#sequencer-service">Sequencer Service</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../deploy-daml/infrastructure-architecture/high-availability/ha-and-scaling/implementing-ha.html#mediator-service">Mediator Service</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../deploy-daml/infrastructure-architecture/high-availability/ha-and-scaling/implementing-ha.html#synchronization-domain-manager-service">Synchronization Domain Manager Service</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../deploy-daml/infrastructure-architecture/high-availability/ha-and-scaling/implementing-ha.html#trigger-service-deprecated">Trigger Service (Deprecated)</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../deploy-daml/infrastructure-architecture/high-availability/ha-and-scaling/deployment-solution.html">HA Deployment Solution for Production</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../deploy-daml/infrastructure-architecture/high-availability/ha-and-scaling/ha-in-the-cloud.html">HA in the Cloud</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../deploy-daml/infrastructure-architecture/high-availability/ha-and-scaling/ha-in-the-cloud.html#database-options">Database Options</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../canton/usermanual/ha.html">High Availability Usage</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/ha.html#synchronization-domain-manager">Synchronization Domain Manager</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/ha.html#ha-setup-on-oracle">HA Setup on Oracle</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/ha.html#mediator">Mediator</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/ha.html#running-a-stand-alone-mediator-node">Running a Stand-Alone Mediator Node</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/ha.html#ha-configuration">HA Configuration</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/ha.html#sequencer">Sequencer</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/ha.html#total-node-count">Total node count</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/ha.html#external-load-balancer">External load balancer</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/ha.html#client-side-load-balancing">Client-side load balancing</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/ha.html#participant">Participant</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/ha.html#synchronization-domain-connectivity-during-fail-over">Synchronization domain connectivity during fail-over</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/ha.html#manual-trigger-of-a-fail-over">Manual trigger of a fail-over</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/ha.html#load-balancer-configuration">Load balancer configuration</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../deploy-daml/infrastructure-architecture/disaster-recovery.html">Disaster Recovery (DR)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../canton/usermanual/persistence.html">Persistence</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../canton/usermanual/persistence.html#id1">Postgres</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/persistence.html#ssl">SSL</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/persistence.html#sizing-and-performance">Sizing and Performance</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/persistence.html#predictability-of-shared-environments">Predictability of Shared Environments</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/persistence.html#postgres-configuration">Postgres Configuration</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../canton/usermanual/persistence.html#oracle">Oracle</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/persistence.html#installation-and-setup-of-oracle">Installation and Setup of Oracle</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/persistence.html#default-character-set-and-collations">Default Character Set and Collations</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/persistence.html#database-replication">Database Replication</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/persistence.html#setup-oracle-schemas">Setup Oracle Schemas</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/persistence.html#configuring-canton-nodes-for-oracle">Configuring Canton Nodes for Oracle</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/persistence.html#performance-tuning">Performance Tuning</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/persistence.html#operating-system-modifications">Operating System Modifications</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/persistence.html#system-container-configuration-cdb">System Container Configuration (CDB)</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../canton/usermanual/persistence.html#general-settings">General Settings</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/persistence.html#max-connection-settings">Max Connection Settings</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/persistence.html#queue-size">Queue Size</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../canton/usermanual/persistence.html#backup-and-restore">Backup and Restore</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/persistence.html#order-of-backups">Order of Backups</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/persistence.html#restore-caveats">Restore Caveats</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/persistence.html#incomplete-command-deduplication-state">Incomplete Command Deduplication State</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/persistence.html#application-state-reset">Application State Reset</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/persistence.html#private-keys">Private Keys</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/persistence.html#postgres-example">Postgres Example</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../canton/usermanual/persistence.html#database-replication-for-disaster-recovery">Database Replication for Disaster Recovery</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/persistence.html#synchronous-replication">Synchronous Replication</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Operate a Daml Ledger</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../operate-a-daml-ledger/canton-administration-quickstart/index.html">Canton Administration Quick Start</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../canton/usermanual/command_line.html">Use the Canton Command Line</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/command_line.html#selecting-a-configuration">Selecting a Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/command_line.html#run-modes">Run Modes</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/command_line.html#interactive-console">Interactive Console</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/command_line.html#daemon">Daemon</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/command_line.html#headless-script-mode">Headless Script Mode</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/command_line.html#interactive-server-process-using-screen">Interactive Server Process using Screen</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/command_line.html#java-virtual-machine-arguments">Java Virtual Machine Arguments</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../canton/usermanual/console.html">Canton Console</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/console.html#remote-administration">Remote Administration</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/console.html#tls-and-authorization">TLS and Authorization</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/console.html#node-references">Node References</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/console.html#help">Help</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/console.html#lifecycle-operations">Lifecycle Operations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/console.html#timeouts">Timeouts</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/console.html#code-generation-in-console">Code-Generation in Console</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/console.html#canton-administration-apis">Canton Administration APIs</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../canton/reference/console.html">Console Commands</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../canton/reference/console.html#top-level-commands">Top-level Commands</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/reference/console.html#participant-commands">Participant Commands</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/console.html#database">Database</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/console.html#health">Health</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/console.html#domain-connectivity">Domain Connectivity</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/console.html#packages">Packages</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/console.html#dar-management">DAR Management</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/console.html#party-management">Party Management</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/console.html#key-administration">Key Administration</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/console.html#topology-administration">Topology Administration</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/console.html#ledger-api-access">Ledger API Access</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/console.html#composability">Composability</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/console.html#ledger-pruning">Ledger Pruning</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/console.html#bilateral-commitments">Bilateral Commitments</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/console.html#participant-repair">Participant Repair</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/console.html#resource-management">Resource Management</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/console.html#replication">Replication</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/reference/console.html#multiple-participants">Multiple Participants</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/reference/console.html#domain-administration-commands">Domain Administration Commands</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/console.html#id267">Health</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/console.html#id269">Database</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/console.html#participants">Participants</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/console.html#sequencer">Sequencer</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/console.html#mediator">Mediator</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/console.html#domain-keys-admin">Key Administration</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/console.html#parties">Parties</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/console.html#service">Service</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/console.html#domain-topology-admin">Topology Administration</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/reference/console.html#domain-manager-administration-commands">Domain Manager Administration Commands</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/console.html#setup">Setup</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/console.html#id418">Health</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/console.html#id420">Database</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/console.html#sequencer-connection">Sequencer Connection</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/console.html#id423">Key Administration</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/console.html#id452">Parties</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/console.html#id455">Service</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/console.html#id473">Topology Administration</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/reference/console.html#sequencer-administration-commands">Sequencer Administration Commands</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/console.html#id474">Sequencer</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/console.html#id486">Health</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/console.html#id488">Database</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/reference/console.html#mediator-administration-commands">Mediator Administration Commands</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/console.html#id490">Mediator</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/console.html#id511">Health</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/console.html#id513">Database</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/console.html#id514">Sequencer Connection</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../canton/usermanual/monitoring.html">Monitoring Best Practices</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../canton/usermanual/monitoring.html#introduction">Introduction</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/monitoring.html#hands-on-with-the-daml-enterprise-observability-example">Hands-On with the Daml Enterprise - Observability Example</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../canton/usermanual/monitoring.html#golden-signals-and-key-metrics-quick-start">Golden Signals and Key Metrics Quick Start</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../canton/usermanual/monitoring.html#set-up-metrics-scraping">Set Up Metrics Scraping</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/monitoring.html#enable-the-prometheus-reporter">Enable the Prometheus Reporter</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/monitoring.html#prometheus-only-metrics">Prometheus-Only Metrics</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/monitoring.html#deprecated-reporters">Deprecated Reporters</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../canton/usermanual/monitoring.html#metrics">Metrics</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/monitoring.html#participant-metrics">Participant Metrics</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#canton-domain-conflict-detection-sequencer-counter-queue">canton.&lt;domain&gt;.conflict-detection.sequencer-counter-queue</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#canton-domain-conflict-detection-task-queue">canton.&lt;domain&gt;.conflict-detection.task-queue</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#canton-domain-protocol-messages-confirmation-request-creation">canton.&lt;domain&gt;.protocol-messages.confirmation-request-creation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#canton-domain-protocol-messages-confirmation-request-size">canton.&lt;domain&gt;.protocol-messages.confirmation-request-size</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#canton-domain-protocol-messages-transaction-message-receipt">canton.&lt;domain&gt;.protocol-messages.transaction-message-receipt</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#canton-domain-request-tracker-sequencer-counter-queue">canton.&lt;domain&gt;.request-tracker.sequencer-counter-queue</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#canton-domain-request-tracker-task-queue">canton.&lt;domain&gt;.request-tracker.task-queue</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#canton-domain-sequencer-client-application-handle">canton.&lt;domain&gt;.sequencer-client.application-handle</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#canton-domain-sequencer-client-delay">canton.&lt;domain&gt;.sequencer-client.delay</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#canton-domain-sequencer-client-event-handle">canton.&lt;domain&gt;.sequencer-client.event-handle</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#canton-domain-sequencer-client-handler-actual-in-flight-event-batches">canton.&lt;domain&gt;.sequencer-client.handler.actual-in-flight-event-batches</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#canton-domain-sequencer-client-handler-max-in-flight-event-batches">canton.&lt;domain&gt;.sequencer-client.handler.max-in-flight-event-batches</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#canton-domain-sequencer-client-submissions-dropped">canton.&lt;domain&gt;.sequencer-client.submissions.dropped</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#canton-domain-sequencer-client-submissions-in-flight">canton.&lt;domain&gt;.sequencer-client.submissions.in-flight</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#canton-domain-sequencer-client-submissions-overloaded">canton.&lt;domain&gt;.sequencer-client.submissions.overloaded</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#canton-domain-sequencer-client-submissions-sends">canton.&lt;domain&gt;.sequencer-client.submissions.sends</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#canton-domain-sequencer-client-submissions-sequencing">canton.&lt;domain&gt;.sequencer-client.submissions.sequencing</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#canton-domain-traffic-control-event-above-traffic-limit">canton.&lt;domain&gt;.traffic-control.event-above-traffic-limit</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#canton-domain-traffic-control-event-delivered">canton.&lt;domain&gt;.traffic-control.event-delivered</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#canton-domain-traffic-control-extra-traffic-credit-available">canton.&lt;domain&gt;.traffic-control.extra-traffic-credit-available</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#canton-domain-traffic-control-traffic-state-topology-transaction">canton.&lt;domain&gt;.traffic-control.traffic-state-topology-transaction</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#canton-commitments-catchup-mode-enabled">canton.commitments.catchup-mode-enabled</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#canton-commitments-compute">canton.commitments.compute</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#canton-commitments-sequencing-time">canton.commitments.sequencing-time</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#canton-db-storage-service-executor-exectime">canton.db-storage.&lt;service&gt;.executor.exectime</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#canton-db-storage-service-executor-load">canton.db-storage.&lt;service&gt;.executor.load</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#canton-db-storage-service-executor-queued">canton.db-storage.&lt;service&gt;.executor.queued</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#canton-db-storage-service-executor-running">canton.db-storage.&lt;service&gt;.executor.running</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#canton-db-storage-service-executor-waittime">canton.db-storage.&lt;service&gt;.executor.waittime</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#canton-db-storage-storage">canton.db-storage.&lt;storage&gt;</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#canton-db-storage-storage-load">canton.db-storage.&lt;storage&gt;.load</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#canton-db-storage-alerts-multi-domain-event-log">canton.db-storage.alerts.multi-domain-event-log</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#canton-db-storage-alerts-single-dimension-event-log">canton.db-storage.alerts.single-dimension-event-log</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#canton-dirty-requests">canton.dirty_requests*</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#canton-max-dirty-requests">canton.max_dirty_requests*</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#canton-prune">canton.prune</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#canton-prune-max-event-age">canton.prune.max-event-age</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#canton-updates-published">canton.updates-published</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#daml-cache-evicted-weight">daml.cache.evicted_weight*</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#daml-cache-evictions">daml.cache.evictions*</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#daml-cache-hits">daml.cache.hits*</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#daml-cache-misses">daml.cache.misses*</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#daml-commands-delayed-submissions">daml.commands.delayed_submissions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#daml-commands-failed-command-interpretations">daml.commands.failed_command_interpretations</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#daml-commands-max-in-flight-capacity">daml.commands.max_in_flight_capacity</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#daml-commands-max-in-flight-length">daml.commands.max_in_flight_length</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#daml-commands-reassignment-validation">daml.commands.reassignment_validation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#daml-commands-submissions">daml.commands.submissions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#daml-commands-submissions-running">daml.commands.submissions_running</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#daml-commands-valid-submissions">daml.commands.valid_submissions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#daml-commands-validation">daml.commands.validation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#daml-db-commit-duration-seconds">daml.db.commit.duration.seconds*</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#daml-db-compression-duration-seconds">daml.db.compression.duration.seconds*</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#daml-db-exec-duration-seconds">daml.db.exec.duration.seconds*</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#daml-db-query-duration-seconds">daml.db.query.duration.seconds*</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#daml-db-translation-duration-seconds">daml.db.translation.duration.seconds*</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#daml-db-wait-duration-seconds">daml.db.wait.duration.seconds*</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#daml-execution-cache-contract-state-register-update">daml.execution.cache.contract_state.register_update</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#daml-execution-cache-key-state-register-update">daml.execution.cache.key_state.register_update</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#daml-execution-cache-read-through-not-found">daml.execution.cache.read_through_not_found</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#daml-execution-cache-resolve-divulgence-lookup">daml.execution.cache.resolve_divulgence_lookup</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#daml-execution-cache-resolve-full-lookup">daml.execution.cache.resolve_full_lookup</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#daml-execution-engine">daml.execution.engine</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#daml-execution-engine-running">daml.execution.engine_running</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#daml-execution-get-lf-package">daml.execution.get_lf_package</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#daml-execution-lookup-active-contract">daml.execution.lookup_active_contract</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#daml-execution-lookup-active-contract-count-per-execution">daml.execution.lookup_active_contract_count_per_execution</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#daml-execution-lookup-active-contract-per-execution">daml.execution.lookup_active_contract_per_execution</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#daml-execution-lookup-contract-key">daml.execution.lookup_contract_key</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#daml-execution-lookup-contract-key-count-per-execution">daml.execution.lookup_contract_key_count_per_execution</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#daml-execution-lookup-contract-key-per-execution">daml.execution.lookup_contract_key_per_execution</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#daml-execution-retry">daml.execution.retry</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#daml-execution-total">daml.execution.total</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#daml-execution-total-running">daml.execution.total_running</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#daml-executor-runtime-completed">daml.executor.runtime.completed*</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#daml-executor-runtime-duration">daml.executor.runtime.duration*</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#daml-executor-runtime-idle">daml.executor.runtime.idle*</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#daml-executor-runtime-running">daml.executor.runtime.running*</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#daml-executor-runtime-submitted">daml.executor.runtime.submitted*</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#daml-index-active-contracts-buffer-size">daml.index.active_contracts_buffer_size</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#daml-index-completions-buffer-size">daml.index.completions_buffer_size</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#daml-index-db-active-contract-keys-lookup-batch-active-contract-lookup-batch-size">daml.index.db.active_contract_keys_lookup.batch.active_contract_lookup.batch_size</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#daml-index-db-active-contract-keys-lookup-batch-active-contract-lookup-buffer-capacity">daml.index.db.active_contract_keys_lookup.batch.active_contract_lookup.buffer_capacity</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#daml-index-db-active-contract-keys-lookup-batch-active-contract-lookup-buffer-delay-duration-seconds">daml.index.db.active_contract_keys_lookup.batch.active_contract_lookup.buffer_delay.duration.seconds</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#daml-index-db-active-contract-keys-lookup-batch-active-contract-lookup-buffer-length">daml.index.db.active_contract_keys_lookup.batch.active_contract_lookup.buffer_length</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#daml-index-db-active-contract-lookup-batch-active-contract-lookup-batch-size">daml.index.db.active_contract_lookup.batch.active_contract_lookup.batch_size</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#daml-index-db-active-contract-lookup-batch-active-contract-lookup-buffer-capacity">daml.index.db.active_contract_lookup.batch.active_contract_lookup.buffer_capacity</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#daml-index-db-active-contract-lookup-batch-active-contract-lookup-buffer-delay-duration-seconds">daml.index.db.active_contract_lookup.batch.active_contract_lookup.buffer_delay.duration.seconds</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#daml-index-db-active-contract-lookup-batch-active-contract-lookup-buffer-length">daml.index.db.active_contract_lookup.batch.active_contract_lookup.buffer_length</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#daml-index-db-compression-create-argument-compressed">daml.index.db.compression.create_argument_compressed</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#daml-index-db-compression-create-argument-uncompressed">daml.index.db.compression.create_argument_uncompressed</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#daml-index-db-compression-create-key-value-compressed">daml.index.db.compression.create_key_value_compressed</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#daml-index-db-compression-create-key-value-uncompressed">daml.index.db.compression.create_key_value_uncompressed</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#daml-index-db-compression-exercise-argument-compressed">daml.index.db.compression.exercise_argument_compressed</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#daml-index-db-compression-exercise-argument-uncompressed">daml.index.db.compression.exercise_argument_uncompressed</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#daml-index-db-compression-exercise-result-compressed">daml.index.db.compression.exercise_result_compressed</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#daml-index-db-compression-exercise-result-uncompressed">daml.index.db.compression.exercise_result_uncompressed</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#daml-index-db-flat-transactions-stream-translation">daml.index.db.flat_transactions_stream.translation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#daml-index-db-lookup-active-contract">daml.index.db.lookup_active_contract</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#daml-index-db-lookup-key">daml.index.db.lookup_key</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#daml-index-db-reassignment-stream-translation">daml.index.db.reassignment_stream.translation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#daml-index-db-translation-get-lf-package">daml.index.db.translation.get_lf_package</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#daml-index-db-tree-transactions-stream-translation">daml.index.db.tree_transactions_stream.translation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#daml-index-flat-transactions-buffer-size">daml.index.flat_transactions_buffer_size</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#daml-index-ledger-end-sequential-id">daml.index.ledger_end_sequential_id</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#daml-index-lf-value-compute-interface-view">daml.index.lf_value.compute_interface_view</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#daml-index-package-metadata-decode-archive">daml.index.package_metadata.decode_archive</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#daml-index-package-metadata-view-init">daml.index.package_metadata.view_init</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#daml-index-transaction-trees-buffer-size">daml.index.transaction_trees_buffer_size</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#daml-indexer-current-record-time-lag">daml.indexer.current_record_time_lag</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#daml-indexer-events">daml.indexer.events*</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#daml-indexer-last-received-record-time">daml.indexer.last_received_record_time</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#daml-indexer-ledger-end-sequential-id">daml.indexer.ledger_end_sequential_id</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#daml-indexer-metered-events">daml.indexer.metered_events*</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#daml-lapi-streams-acs-sent">daml.lapi.streams.acs_sent</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#daml-lapi-streams-active">daml.lapi.streams.active</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#daml-lapi-streams-completions-sent">daml.lapi.streams.completions_sent</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#daml-lapi-streams-transaction-trees-sent">daml.lapi.streams.transaction_trees_sent</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#daml-lapi-streams-transactions-sent">daml.lapi.streams.transactions_sent</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#daml-lapi-streams-update-trees-sent">daml.lapi.streams.update_trees_sent</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#daml-parallel-indexer-archivals">daml.parallel_indexer.archivals</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#daml-parallel-indexer-creates">daml.parallel_indexer.creates</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#daml-parallel-indexer-input-buffer-length">daml.parallel_indexer.input_buffer_length</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#daml-parallel-indexer-inputmapping-batch-size">daml.parallel_indexer.inputmapping.batch_size</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#daml-parallel-indexer-output-batched-buffer-length">daml.parallel_indexer.output_batched_buffer_length</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#daml-parallel-indexer-seqmapping-duration">daml.parallel_indexer.seqmapping.duration</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#daml-parallel-indexer-updates">daml.parallel_indexer.updates</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#daml-services-index-operation">daml.services.index.&lt;operation&gt;</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#daml-services-index-in-memory-fan-out-buffer-prune">daml.services.index.in_memory_fan_out_buffer.prune</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#daml-services-index-in-memory-fan-out-buffer-push">daml.services.index.in_memory_fan_out_buffer.push</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#daml-services-index-in-memory-fan-out-buffer-size">daml.services.index.in_memory_fan_out_buffer.size</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#daml-services-read-operation">daml.services.read.&lt;operation&gt;</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#daml-services-write-operation">daml.services.write.&lt;operation&gt;</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#daml-services-write-submit-transaction-count">daml.services.write.submit_transaction.count</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/monitoring.html#synchronization-domain-metrics">Synchronization Domain Metrics</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#canton-component-sequencer-client-application-handle">canton.&lt;component&gt;.sequencer-client.application-handle</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#canton-component-sequencer-client-delay">canton.&lt;component&gt;.sequencer-client.delay</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#canton-component-sequencer-client-event-handle">canton.&lt;component&gt;.sequencer-client.event-handle</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#id1">canton.db-storage.&lt;service&gt;.executor.exectime</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#id2">canton.db-storage.&lt;service&gt;.executor.load</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#id3">canton.db-storage.&lt;service&gt;.executor.queued</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#id4">canton.db-storage.&lt;service&gt;.executor.running</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#id5">canton.db-storage.&lt;service&gt;.executor.waittime</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#id6">canton.db-storage.&lt;storage&gt;</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#id7">canton.db-storage.&lt;storage&gt;.load</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#id8">canton.db-storage.alerts.multi-domain-event-log</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#id9">canton.db-storage.alerts.single-dimension-event-log</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#canton-mediator-event-rejected">canton.mediator.event-rejected</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#canton-mediator-max-event-age">canton.mediator.max-event-age</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#canton-mediator-outstanding-requests">canton.mediator.outstanding-requests</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#canton-mediator-requests">canton.mediator.requests</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#canton-mediator-sequencer-client-handler-actual-in-flight-event-batches">canton.mediator.sequencer-client.handler.actual-in-flight-event-batches</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#canton-mediator-sequencer-client-handler-max-in-flight-event-batches">canton.mediator.sequencer-client.handler.max-in-flight-event-batches</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#canton-mediator-sequencer-client-submissions-dropped">canton.mediator.sequencer-client.submissions.dropped</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#canton-mediator-sequencer-client-submissions-in-flight">canton.mediator.sequencer-client.submissions.in-flight</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#canton-mediator-sequencer-client-submissions-overloaded">canton.mediator.sequencer-client.submissions.overloaded</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#canton-mediator-sequencer-client-submissions-sends">canton.mediator.sequencer-client.submissions.sends</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#canton-mediator-sequencer-client-submissions-sequencing">canton.mediator.sequencer-client.submissions.sequencing</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#canton-sequencer-block-event-bytes">canton.sequencer.block.event-bytes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#canton-sequencer-block-events">canton.sequencer.block.events</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#canton-sequencer-block-height">canton.sequencer.block.height</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#canton-sequencer-db-storage-storage">canton.sequencer.db-storage.&lt;storage&gt;</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#canton-sequencer-db-storage-storage-load">canton.sequencer.db-storage.&lt;storage&gt;.load</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#canton-sequencer-db-storage-alerts-multi-domain-event-log">canton.sequencer.db-storage.alerts.multi-domain-event-log</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#canton-sequencer-db-storage-alerts-single-dimension-event-log">canton.sequencer.db-storage.alerts.single-dimension-event-log</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#canton-sequencer-db-storage-general-executor-exectime">canton.sequencer.db-storage.general.executor.exectime</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#canton-sequencer-db-storage-general-executor-load">canton.sequencer.db-storage.general.executor.load</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#canton-sequencer-db-storage-general-executor-queued">canton.sequencer.db-storage.general.executor.queued</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#canton-sequencer-db-storage-general-executor-running">canton.sequencer.db-storage.general.executor.running</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#canton-sequencer-db-storage-general-executor-waittime">canton.sequencer.db-storage.general.executor.waittime</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#canton-sequencer-db-storage-locks-executor-exectime">canton.sequencer.db-storage.locks.executor.exectime</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#canton-sequencer-db-storage-locks-executor-load">canton.sequencer.db-storage.locks.executor.load</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#canton-sequencer-db-storage-locks-executor-queued">canton.sequencer.db-storage.locks.executor.queued</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#canton-sequencer-db-storage-locks-executor-running">canton.sequencer.db-storage.locks.executor.running</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#canton-sequencer-db-storage-locks-executor-waittime">canton.sequencer.db-storage.locks.executor.waittime</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#canton-sequencer-db-storage-write-executor-exectime">canton.sequencer.db-storage.write.executor.exectime</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#canton-sequencer-db-storage-write-executor-load">canton.sequencer.db-storage.write.executor.load</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#canton-sequencer-db-storage-write-executor-queued">canton.sequencer.db-storage.write.executor.queued</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#canton-sequencer-db-storage-write-executor-running">canton.sequencer.db-storage.write.executor.running</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#canton-sequencer-db-storage-write-executor-waittime">canton.sequencer.db-storage.write.executor.waittime</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#canton-sequencer-max-event-age">canton.sequencer.max-event-age</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#canton-sequencer-processed">canton.sequencer.processed</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#canton-sequencer-processed-bytes">canton.sequencer.processed-bytes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#canton-sequencer-sequencer-client-handler-actual-in-flight-event-batches">canton.sequencer.sequencer-client.handler.actual-in-flight-event-batches</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#canton-sequencer-sequencer-client-handler-max-in-flight-event-batches">canton.sequencer.sequencer-client.handler.max-in-flight-event-batches</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#canton-sequencer-sequencer-client-submissions-dropped">canton.sequencer.sequencer-client.submissions.dropped</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#canton-sequencer-sequencer-client-submissions-in-flight">canton.sequencer.sequencer-client.submissions.in-flight</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#canton-sequencer-sequencer-client-submissions-overloaded">canton.sequencer.sequencer-client.submissions.overloaded</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#canton-sequencer-sequencer-client-submissions-sends">canton.sequencer.sequencer-client.submissions.sends</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#canton-sequencer-sequencer-client-submissions-sequencing">canton.sequencer.sequencer-client.submissions.sequencing</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#canton-sequencer-subscriptions">canton.sequencer.subscriptions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#canton-sequencer-time-requests">canton.sequencer.time-requests</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#canton-sequencer-traffic-control-event-delivered-cost">canton.sequencer.traffic-control.event-delivered-cost</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#canton-sequencer-traffic-control-event-received-size">canton.sequencer.traffic-control.event-received-size</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#canton-sequencer-traffic-control-event-rejected-cost">canton.sequencer.traffic-control.event-rejected-cost</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#canton-topology-manager-sequencer-client-handler-actual-in-flight-event-batches">canton.topology-manager.sequencer-client.handler.actual-in-flight-event-batches</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#canton-topology-manager-sequencer-client-handler-max-in-flight-event-batches">canton.topology-manager.sequencer-client.handler.max-in-flight-event-batches</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#canton-topology-manager-sequencer-client-submissions-dropped">canton.topology-manager.sequencer-client.submissions.dropped</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#canton-topology-manager-sequencer-client-submissions-in-flight">canton.topology-manager.sequencer-client.submissions.in-flight</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#canton-topology-manager-sequencer-client-submissions-overloaded">canton.topology-manager.sequencer-client.submissions.overloaded</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#canton-topology-manager-sequencer-client-submissions-sends">canton.topology-manager.sequencer-client.submissions.sends</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#canton-topology-manager-sequencer-client-submissions-sequencing">canton.topology-manager.sequencer-client.submissions.sequencing</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/monitoring.html#health-metrics">Health Metrics</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#daml-health-status">daml_health_status</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/monitoring.html#grpc-metrics">gRPC Metrics</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#daml-grpc-server-duration-seconds">daml_grpc_server_duration_seconds</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#daml-grpc-server-messages-sent-total">daml_grpc_server_messages_sent_total</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#daml-grpc-server-messages-received-total">daml_grpc_server_messages_received_total</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#daml-grpc-server-started-total">daml_grpc_server_started_total</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#daml-grpc-server-handled-total">daml_grpc_server_handled_total</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#daml-grpc-server-messages-sent-bytes">daml_grpc_server_messages_sent_bytes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#daml-grpc-server-messages-received-bytes">daml_grpc_server_messages_received_bytes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/monitoring.html#http-metrics">HTTP Metrics</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#daml-http-requests-duration-seconds">daml_http_requests_duration_seconds</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#daml-http-requests-total">daml_http_requests_total</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#daml-http-websocket-messages-received-total">daml_http_websocket_messages_received_total</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#daml-http-websocket-messages-sent-total">daml_http_websocket_messages_sent_total</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#daml-http-requests-payload-bytes">daml_http_requests_payload_bytes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#daml-http-responses-payload-bytes">daml_http_responses_payload_bytes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#daml-http-websocket-messages-received-bytes">daml_http_websocket_messages_received_bytes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#daml-http-websocket-messages-sent-bytes">daml_http_websocket_messages_sent_bytes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/monitoring.html#pruning-metrics">Pruning Metrics</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#daml-services-pruning-prune-started-total">daml_services_pruning_prune_started_total</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#daml-services-pruning-prune-completed-total">daml_services_pruning_prune_completed_total</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/monitoring.html#jvm-metrics">JVM Metrics</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#runtime-jvm-gc-time">runtime_jvm_gc_time</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#runtime-jvm-gc-count">runtime_jvm_gc_count</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#runtime-jvm-memory-area">runtime_jvm_memory_area</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/monitoring.html#runtime-jvm-memory-pool">runtime_jvm_memory_pool</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../canton/usermanual/monitoring.html#logging">Logging</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/monitoring.html#viewing-logs">Viewing Logs</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/monitoring.html#detailed-logging">Detailed Logging</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../canton/usermanual/monitoring.html#tracing">Tracing</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/monitoring.html#sampling">Sampling</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/monitoring.html#known-limitations">Known Limitations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/monitoring.html#traces">Traces</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../canton/usermanual/monitoring.html#node-health-status">Node Health Status</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../canton/usermanual/monitoring.html#health-checks">Health Checks</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/monitoring.html#grpc-health-check-service">gRPC Health Check Service</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/monitoring.html#http-health-check">HTTP Health Check</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../canton/usermanual/monitoring.html#health-dumps">Health Dumps</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/monitoring.html#remote-health-dumps">Remote Health Dumps</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../canton/usermanual/example_monitoring_setup.html">Example Monitoring Setup</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/example_monitoring_setup.html#container-setup">Container Setup</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/example_monitoring_setup.html#intended-use">Intended Use</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/example_monitoring_setup.html#network-configuration">Network Configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/example_monitoring_setup.html#postgres-setup">Postgres Setup</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/example_monitoring_setup.html#synchronization-domain-setup">Synchronization Domain Setup</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/example_monitoring_setup.html#participant-setup">Participant Setup</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/example_monitoring_setup.html#logstash">Logstash</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/example_monitoring_setup.html#elasticsearch">Elasticsearch</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/example_monitoring_setup.html#kibana">Kibana</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/example_monitoring_setup.html#cadvisor">cAdvisor</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/example_monitoring_setup.html#prometheus">Prometheus</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/example_monitoring_setup.html#grafana">Grafana</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/example_monitoring_setup.html#dependencies">Dependencies</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/example_monitoring_setup.html#docker-images">Docker Images</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/example_monitoring_setup.html#running-docker-compose">Running Docker Compose</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/example_monitoring_setup.html#connecting-to-nodes">Connecting to Nodes</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/example_monitoring_setup.html#remote-configurations">Remote Configurations</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/example_monitoring_setup.html#getting-started">Getting Started</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/example_monitoring_setup.html#kibana-log-monitoring">Kibana Log Monitoring</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/example_monitoring_setup.html#grafana-metric-monitoring">Grafana Metric Monitoring</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/example_monitoring_setup.html#monitoring-choices">Monitoring Choices</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/example_monitoring_setup.html#use-docker-log-drivers">Use Docker Log Drivers</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/example_monitoring_setup.html#use-gelf-docker-log-driver">Use GELF Docker Log Driver</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/example_monitoring_setup.html#use-logstash">Use Logstash</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/example_monitoring_setup.html#use-elasticsearch-kibana">Use Elasticsearch/Kibana</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/example_monitoring_setup.html#use-prometheus-grafana">Use Prometheus/Grafana</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/example_monitoring_setup.html#logging-improvements">Logging Improvements</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../canton/usermanual/monitoring_glossary.html">Glossary</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/monitoring_glossary.html#cadvisor">cAdvisor</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/monitoring_glossary.html#docker-log-driver">Docker Log Driver</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/monitoring_glossary.html#docker-plugins">Docker Plugins</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/monitoring_glossary.html#ecs">ECS</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/monitoring_glossary.html#elasticsearch">Elasticsearch</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/monitoring_glossary.html#elk">ELK</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/monitoring_glossary.html#gelf">GELF</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/monitoring_glossary.html#grafana">Grafana</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/monitoring_glossary.html#graylog">Graylog</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/monitoring_glossary.html#logstash">Logstash</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/monitoring_glossary.html#loki">Loki</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/monitoring_glossary.html#loki-log-driver">Loki Log Driver</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/monitoring_glossary.html#minio">MinIO</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/monitoring_glossary.html#opentelemetry">OpenTelemetry</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/monitoring_glossary.html#prometheus">Prometheus</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/monitoring_glossary.html#syslog">Syslog</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../query/pqs-user-guide.html">Participant Query Store</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../query/pqs-user-guide.html#introduction">Introduction</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../query/pqs-user-guide.html#audience">Audience</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../query/pqs-user-guide.html#purpose">Purpose</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../query/pqs-user-guide.html#operational-architecture">Operational Architecture</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../query/pqs-user-guide.html#key-feature-summary">Key Feature Summary</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../query/pqs-user-guide.html#sections">Sections</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../query/pqs-user-guide.html#getting-started">Getting Started</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../query/pqs-user-guide.html#pre-requisites">Pre-requisites</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../query/pqs-user-guide.html#running-pqs">Running PQS</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../query/pqs-user-guide.html#daml-platform-support">Daml Platform Support</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../query/pqs-user-guide.html#preparing-the-database">Preparing the Database</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../query/pqs-user-guide.html#running-the-pipeline">Running the Pipeline</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../query/pqs-user-guide.html#auth">Auth</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../query/pqs-user-guide.html#database">Database</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../query/pqs-user-guide.html#ledger-source">Ledger Source</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../query/pqs-user-guide.html#transaction-data-source">Transaction Data Source</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../query/pqs-user-guide.html#postgresql-schema">PostgreSQL Schema</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../query/pqs-user-guide.html#objectives">Objectives</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../query/pqs-user-guide.html#design">Design</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../query/pqs-user-guide.html#configuration">Configuration</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../query/pqs-user-guide.html#pqs-configuration">PQS Configuration</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../query/pqs-user-guide.html#applying-configuration-changes">Applying Configuration Changes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../query/pqs-user-guide.html#contract-filters">Contract Filters</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../query/pqs-user-guide.html#party-filtering">Party Filtering</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../query/pqs-user-guide.html#java-virtual-machine-jvm-configuration">Java Virtual Machine (JVM) Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../query/pqs-user-guide.html#postgresql-configuration">PostgreSQL Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../query/pqs-user-guide.html#postgresql-users">PostgreSQL Users</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../query/pqs-user-guide.html#host-infrastructure">Host Infrastructure</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../query/pqs-user-guide.html#host-environment">Host Environment</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../query/pqs-user-guide.html#testing">Testing</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../query/pqs-user-guide.html#resilience">Resilience</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../query/pqs-user-guide.html#high-availability">High Availability</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../query/pqs-user-guide.html#retries">Retries</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../query/pqs-user-guide.html#configuration-1">Configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../query/pqs-user-guide.html#logging">Logging</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../query/pqs-user-guide.html#metrics">Metrics</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../query/pqs-user-guide.html#retry-counters-reset">Retry Counters Reset</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../query/pqs-user-guide.html#exit-codes">Exit codes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../query/pqs-user-guide.html#ledger-streaming-recovery">Ledger Streaming &amp; Recovery</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../query/pqs-user-guide.html#read-api">Read API</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../query/pqs-user-guide.html#how-the-ledger-models-time">How The Ledger Models Time</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../query/pqs-user-guide.html#offset">Offset</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../query/pqs-user-guide.html#ledger-time">Ledger Time</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../query/pqs-user-guide.html#tranasction-id">Tranasction ID</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../query/pqs-user-guide.html#which-should-i-use">Which should I use?</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../query/pqs-user-guide.html#time-model">Time Model</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../query/pqs-user-guide.html#offset-management">Offset Management</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../query/pqs-user-guide.html#jsonb-encoding">JSONB Encoding</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../query/pqs-user-guide.html#primitive-types">Primitive Types</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../query/pqs-user-guide.html#user-defined-types">User-Defined Types</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../query/pqs-user-guide.html#querying-patterns">Querying Patterns</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../query/pqs-user-guide.html#summary-functions">Summary functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../query/pqs-user-guide.html#lookup-functions">Lookup functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../query/pqs-user-guide.html#optimization">Optimization</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../query/pqs-user-guide.html#indexing">Indexing</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../query/pqs-user-guide.html#pagination">Pagination</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../query/pqs-user-guide.html#psql-tips">psql Tips</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../query/pqs-user-guide.html#query-analysis">Query Analysis</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../query/pqs-user-guide.html#pruning">Pruning</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../query/pqs-user-guide.html#data-deletion-and-changes">Data Deletion and Changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../query/pqs-user-guide.html#constraints">Constraints</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../query/pqs-user-guide.html#pruning-from-the-command-line">Pruning from the command line</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../query/pqs-user-guide.html#example-with-timestamp-and-duration">Example with Timestamp and Duration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../query/pqs-user-guide.html#pruning-from-sql">Pruning from SQL</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../query/pqs-user-guide.html#authentication">Authentication</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../query/pqs-user-guide.html#audience-based-token">Audience-Based Token</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../query/pqs-user-guide.html#scope-based-token">Scope-Based Token</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../query/pqs-user-guide.html#custom-daml-claims-tokens">Custom Daml Claims Tokens</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../query/pqs-user-guide.html#static-access-token">Static Access Token</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../query/pqs-user-guide.html#ledger-api-users-and-daml-parties">Ledger API Users and Daml Parties</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../query/pqs-user-guide.html#token-expiry">Token expiry</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../query/pqs-user-guide.html#history-slicing">History Slicing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../query/pqs-user-guide.html#reset-procedure">Reset Procedure</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../query/pqs-user-guide.html#reset">Reset</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../query/pqs-user-guide.html#constraints-1">Constraints</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../query/pqs-user-guide.html#logging-1">Logging</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../query/pqs-user-guide.html#log-level">Log Level</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../query/pqs-user-guide.html#per-logger-log-level">Per-Logger Log Level</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../query/pqs-user-guide.html#log-pattern">Log Pattern</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../query/pqs-user-guide.html#log-format-for-console-output">Log Format for Console Output</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../query/pqs-user-guide.html#log-format-for-file-output">Log Format for File Output</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../query/pqs-user-guide.html#destination-file-for-file-output">Destination File for File Output</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../query/pqs-user-guide.html#log-format-and-log-pattern-combinations">Log Format and Log Pattern Combinations</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../query/pqs-user-guide.html#database-schema-evolution">Database Schema Evolution</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../query/pqs-user-guide.html#baselining">Baselining</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../query/pqs-user-guide.html#schema-upgrades">Schema Upgrades</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../query/pqs-user-guide.html#schema-dump">Schema Dump</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../query/pqs-user-guide.html#monitoring-progress">Monitoring Progress</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../query/pqs-user-guide.html#troubleshooting">Troubleshooting</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../query/pqs-user-guide.html#problem-1-an-application-s-flyway-conflicts-with-pqs-s-flyway">Problem 1: An application’s Flyway conflicts with PQS’s Flyway</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../query/pqs-user-guide.html#mapping-daml-models-to-relational-world">Mapping Daml Models to Relational World</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../query/pqs-user-guide.html#considerations">Considerations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../query/pqs-user-guide.html#definitions">Definitions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../query/pqs-user-guide.html#queries-results">Queries &amp; Results</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../query/pqs-user-guide.html#performance-optimizations">Performance Optimizations</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../query/pqs-user-guide.html#materialized-views">Materialized Views</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../query/pqs-user-guide.html#custom-triggers">Custom Triggers</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../query/pqs-user-guide.html#trade-offs-summary">Trade-Offs Summary</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../query/pqs-user-guide.html#observability">Observability</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../query/pqs-user-guide.html#underlying-mechanism">Underlying Mechanism</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../query/pqs-user-guide.html#provided-metrics">Provided Metrics</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../query/pqs-user-guide.html#example-dashboard">Example Dashboard</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../query/pqs-user-guide.html#health-check">Health Check</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../query/pqs-user-guide.html#tracing-of-pipeline-execution">Tracing of Pipeline Execution</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../query/pqs-user-guide.html#trace-context-propagation">Trace Context Propagation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../query/pqs-user-guide.html#redaction">Redaction</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../query/pqs-user-guide.html#conditions-for-redaction">Conditions for Redaction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../query/pqs-user-guide.html#examples">Examples</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../query/pqs-user-guide.html#redacting-an-archived-contract">Redacting an Archived Contract</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../query/pqs-user-guide.html#redacting-a-choice-exercise">Redacting a Choice Exercise</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../query/pqs-user-guide.html#accessing-redaction-information">Accessing Redaction Information</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../canton/usermanual/identity_management.html">Identity Management</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../canton/usermanual/identity_management.html#introduction">Introduction</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/identity_management.html#what-is-a-canton-identity">What is a Canton Identity?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/identity_management.html#unique-identifier">Unique Identifier</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/identity_management.html#topology-transactions">Topology Transactions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/identity_management.html#legal-identities">Legal Identities</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/identity_management.html#life-of-a-party">Life of a Party</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/identity_management.html#participant-onboarding">Participant Onboarding</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/identity_management.html#default-initialization">Default Initialization</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/identity_management.html#identity-setup-guide">Identity Setup Guide</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../canton/usermanual/identity_management.html#user-identity-management">User Identity Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../canton/usermanual/identity_management.html#cookbook">Cookbook</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/identity_management.html#manage-users">Manage Users</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/identity_management.html#create">Create</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/identity_management.html#update">Update</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/identity_management.html#inspect">Inspect</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/identity_management.html#decommission">Decommission</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/identity_management.html#configure-a-default-participant-admin">Configure a default Participant Admin</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/identity_management.html#adding-a-new-party-to-a-participant">Adding a new Party to a Participant</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/identity_management.html#client-controlled-party">Client Controlled Party</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/identity_management.html#replicate-party-to-another-participant-node">Replicate Party to Another Participant Node</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/identity_management.html#party-on-multiple-nodes">Party on Multiple Nodes</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../operate-a-daml-ledger/common-tasks/index.html">Common Operational Tasks</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../canton/usermanual/packagemanagement.html">Manage DARs and Packages</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/packagemanagement.html#uploading-dars">Uploading DARs</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/packagemanagement.html#inspecting-dars-and-packages">Inspecting DARs and Packages</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/packagemanagement.html#understanding-package-vetting">Understanding Package Vetting</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/packagemanagement.html#dar-vetting-lifecycle">DAR vetting lifecycle</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/packagemanagement.html#advanced-vetting-concepts">Advanced vetting concepts</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../canton/usermanual/upgrading.html">Upgrade To a New Release</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/upgrading.html#upgrade-canton-binary">Upgrade Canton Binary</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/upgrading.html#preparation">Preparation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/upgrading.html#back-up-your-database">Back Up Your Database</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/upgrading.html#test-your-configuration">Test your Configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/upgrading.html#migrating-the-database">Migrating the Database</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/upgrading.html#test-your-upgrade">Test Your Upgrade</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/upgrading.html#version-specific-notes">Version Specific Notes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/upgrading.html#change-the-canton-protocol-version">Change the Canton Protocol Version</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/upgrading.html#upgrade-the-synchronization-domain-to-a-new-protocol-version">Upgrade the Synchronization Domain to a new Protocol Version</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/upgrading.html#hard-synchronization-domain-migration">Hard Synchronization Domain Migration</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/upgrading.html#one-step-migration">One-Step Migration</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/upgrading.html#one-step-migration-recipe-for-2-10">One-Step Migration Recipe for 2.10</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../canton/usermanual/security.html">Security &amp; Key Management</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/security.html#cryptographic-key-usage">Cryptographic Key Usage</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/security.html#supported-cryptographic-schemes-in-canton">Supported Cryptographic Schemes in Canton</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/security.html#key-generation-and-storage">Key Generation and Storage</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/security.html#public-key-distribution-using-topology-management">Public Key Distribution using Topology Management</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/security.html#common-node-keys">Common Node Keys</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/security.html#participant-node-keys">Participant Node Keys</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/security.html#synchronization-domain-topology-manager-keys">Synchronization Domain Topology Manager Keys</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/security.html#sequencer-node-keys">Sequencer Node Keys</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/security.html#mediator-node-keys">Mediator Node Keys</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/security.html#synchronizer-domain-node-keys">Synchronizer Domain Node Keys</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/security.html#canton-console-keys">Canton Console Keys</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/security.html#cryptographic-key-management">Cryptographic Key Management</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/security.html#rotating-canton-node-keys">Rotating Canton Node Keys</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/security.html#deleting-canton-node-keys">Deleting Canton Node Keys</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/security.html#namespace-intermediate-key-management">Namespace Intermediate Key Management</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/security.html#moving-the-namespace-secret-key-to-offline-storage">Moving the Namespace Secret Key to Offline Storage</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/security.html#identifier-delegation-key-management">Identifier Delegation Key Management</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/security.html#ledger-api-authorization">Ledger-API Authorization</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../canton/usermanual/kms/kms.html">Key Management Service (KMS) Setup</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/kms/kms_setup.html">Canton Configuration of a KMS</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/kms/kms_aws_setup.html">Configure Amazon Web Services (AWS) KMS</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/kms/kms_gcp_setup.html">Configure Google Cloud Provider (GCP) KMS</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/kms/encrypted_private_key_storage/encrypted_private_key_storage.html">Configure Encrypted Private Key Storage with a Key Management Service (KMS)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/kms/encrypted_private_key_storage/encrypted_private_key_storage_aws.html">Configure Encrypted Private Key Storage with AWS KMS</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/kms/encrypted_private_key_storage/encrypted_private_key_storage_gcp.html">Configure Encrypted Private Key Storage with GCP KMS</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/kms/external_key_storage/external_key_storage.html">Configure External Key Storage with a Key Management Service (KMS)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/kms/external_key_storage/external_key_storage_aws.html">Configure External Key Storage with AWS KMS</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/kms/external_key_storage/external_key_storage_gcp.html">Configure External Key Storage with GCP KMS</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/kms/external_key_storage/interoperability.html">Interoperability with other nodes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/kms/external_key_storage/participant_kms_migration/participant_kms_migration.html">Participant Node Migration to KMS</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/kms/external_key_storage/manual_kms_key_rotation.html">Manual KMS key rotation</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/kms/kms_driver_guide.html">Canton KMS Driver API Developer Guide</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/kms/kms_driver_guide.html#introduction">Introduction</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/kms/kms_driver_guide.html#kms-driver-api">KMS Driver API</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/kms/kms_driver_guide.html#develop-and-test-a-kms-driver">Develop and Test a KMS Driver</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/kms/kms_driver_guide.html#run-canton-with-a-kms-driver">Run Canton with a KMS Driver</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../canton/usermanual/performance.html">Scaling and Performance</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../canton/usermanual/performance.html#network-scaling">Network Scaling</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../canton/usermanual/performance.html#node-scaling">Node Scaling</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../canton/usermanual/performance.html#performance-and-sizing">Performance and Sizing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../canton/usermanual/performance.html#batching">Batching</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../canton/usermanual/performance.html#asynchronous-submissions">Asynchronous Submissions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../canton/usermanual/performance.html#storage-estimation">Storage Estimation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../canton/usermanual/performance.html#set-up-canton-to-get-the-best-performance">Set Up Canton to Get the Best Performance</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/performance.html#system-design-architecture">System Design / Architecture</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/performance.html#hardware-and-database">Hardware and Database</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/performance.html#configuration">Configuration</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../canton/usermanual/performance.html#model-tuning">Model Tuning</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/performance.html#reduce-the-number-of-views">Reduce the Number of Views</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/performance.html#strategy-for-protocol-version-7">Strategy for Protocol Version 7</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/performance.html#strategy-for-protocol-versions-5-and-lower">Strategy for Protocol Versions 5 and Lower</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/performance.html#reduce-ledger-events">Reduce Ledger Events</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../operate-a-daml-ledger/advanced-operations/index.html">Advanced Ledger Operations</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../canton/usermanual/manage_domains.html">Manage Domains</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/manage_domains.html#permissioned-synchronization-domains">Permissioned Synchronization Domains</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/manage_domains.html#synchronization-domain-rules">Synchronization Domain Rules</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/manage_domains.html#dynamic-synchronization-domain-parameters">Dynamic synchronization domain parameters</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/manage_domains.html#recover-from-a-small-max-request-size">Recover From a Small Max Request Size</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../canton/usermanual/manage_domain_entities.html">Manage Domain Entities</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/manage_domain_entities.html#manual-vs-automatic-initialization">Manual vs Automatic Initialization</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/manage_domain_entities.html#keys-initialization">Keys Initialization</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/manage_domain_entities.html#embedded-synchronization-domain-initialization">Embedded Synchronization Domain Initialization</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/manage_domain_entities.html#set-up-a-distributed-synchronization-domain-with-a-single-console">Set up a Distributed Synchronization Domain With a Single Console</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/manage_domain_entities.html#set-up-a-distributed-synchronization-domain-with-separate-consoles">Set Up a Distributed Synchronization Domain With Separate Consoles</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/manage_domain_entities.html#add-new-sequencers-to-a-distributed-synchronization-domain">Add New Sequencers to a Distributed Synchronization Domain</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../canton/usermanual/manage_participants.html">Manage Participants</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/manage_participants.html#manual-vs-automatic-identity-initialization">Manual vs Automatic Identity Initialization</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/manage_participants.html#keys-initialization">Keys Initialization</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/manage_participants.html#participant-manual-initialization">Participant Manual Initialization</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../canton/usermanual/pruning.html">Ledger Pruning</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/pruning.html#enable-automatic-pruning">Enable Automatic Pruning</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/pruning.html#schedule-format">Schedule format</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/pruning.html#advanced-schedule-formatting">Advanced schedule formatting</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/pruning.html#monitor-pruning-progress">Monitor Pruning Progress</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/pruning.html#best-practices">Best Practices</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/pruning.html#current-limitations">Current Limitations</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../ops/pruning.html">Participant Pruning</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../ops/pruning.html#impacts-on-daml-applications">Impacts on Daml Applications</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ops/pruning.html#how-the-daml-ledger-api-is-affected">How the Daml Ledger API is Affected</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ops/pruning.html#other-limitations">Other Limitations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ops/pruning.html#how-pruning-affects-index-db-administration">How Pruning Affects Index DB Administration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ops/pruning.html#determine-a-suitable-pruning-offset">Determine a Suitable Pruning Offset</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../ops/metering.html">Participant Metering</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../ops/metering.html#generate-a-metering-report">Generate a Metering Report</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ops/metering.html#example">Example</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ops/metering.html#output">Output</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../canton/usermanual/apis.html">Api Configuration</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/apis.html#default-ports">Default Ports</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/apis.html#administration-api">Administration API</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/apis.html#tls-configuration">TLS Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/apis.html#keep-alive">Keep Alive</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/apis.html#max-inbound-message-size">Max Inbound Message Size</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/apis.html#participant-configuration">Participant Configuration</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/apis.html#ledger-api">Ledger Api</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/apis.html#synchronization-domain-configurations">Synchronization Domain Configurations</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/apis.html#public-api">Public API</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/apis.html#usage-of-native-libraries-by-netty">Usage of native libraries by Netty</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../canton/usermanual/connectivity.html">Sequencer Connections</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/connectivity.html#participant-connections">Participant Connections</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/connectivity.html#connect-using-macros">Connect Using Macros</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/connectivity.html#inspect-connections">Inspect Connections</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/connectivity.html#modify-connections">Modify Connections</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/connectivity.html#enable-and-disable-connections">Enable and Disable Connections</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/connectivity.html#mediator-and-synchronization-domain-manager">Mediator and Synchronization Domain Manager</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../canton/usermanual/repairing.html">Repair Nodes</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/repairing.html#preparation">Preparation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/repairing.html#importing-an-actual-ledger">Importing an actual Ledger</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/repairing.html#repairing-participants">Repairing Participants</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/repairing.html#recovering-from-a-lost-synchronization-domain">Recovering from a Lost Synchronization Domain</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/repairing.html#repairing-an-actual-topology">Repairing an actual Topology</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/repairing.html#repair-macros">Repair Macros</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/repairing.html#clone-identity">Clone Identity</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/repairing.html#importing-existing-contracts">Importing Existing Contracts</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../canton/usermanual/decommissioning.html">Decommission Nodes</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/decommissioning.html#decommissioning-a-participant-node">Decommissioning a Participant Node</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/decommissioning.html#prerequisites">Prerequisites</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/decommissioning.html#decommissioning-a-participant-once-the-prerequisites-are-met">Decommissioning a participant once the prerequisites are met</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/decommissioning.html#decommissioning-a-sequencer">Decommissioning a Sequencer</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/decommissioning.html#disconnecting-all-nodes-from-the-sequencer-to-be-decommissioned">Disconnecting all nodes from the sequencer to be decommissioned</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/decommissioning.html#decommissioning-the-sequencer">Decommissioning the sequencer</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/decommissioning.html#decommissioning-a-mediator">Decommissioning a Mediator</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../canton/usermanual/troubleshooting_guide.html">Troubleshooting Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../canton/usermanual/troubleshooting_guide.html#introduction">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../canton/usermanual/troubleshooting_guide.html#enable-information-gathering">Enable Information Gathering</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../canton/usermanual/troubleshooting_guide.html#key-knowledge">Key Knowledge</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../canton/usermanual/troubleshooting_guide.html#log-files">Log Files</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../canton/usermanual/troubleshooting_guide.html#using-lnav-to-view-log-files">Using LNAV to View Log Files</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../canton/usermanual/troubleshooting_guide.html#setup-issues">Setup Issues</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../canton/usermanual/troubleshooting_guide.html#timeout-errors">Timeout Errors</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../canton/usermanual/troubleshooting_guide.html#auth-errors">Auth Errors</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../canton/usermanual/troubleshooting_guide.html#disconnections">Disconnections</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../canton/usermanual/troubleshooting_guide.html#performance-issues">Performance Issues</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/troubleshooting_guide.html#how-to-measure-database-performance">How to Measure Database Performance</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/troubleshooting_guide.html#how-to-diagnose-slow-database-queries">How to Diagnose Slow Database Queries</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/troubleshooting_guide.html#how-to-find-the-bottleneck">How to find the Bottleneck</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/troubleshooting_guide.html#theory">Theory</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/troubleshooting_guide.html#practical">Practical</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../canton/usermanual/troubleshooting_guide.html#contention">Contention</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/troubleshooting_guide.html#why-do-you-get-contention">Why do you get contention</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/troubleshooting_guide.html#how-to-change-your-model-to-avoid-undesired-contention">How To Change Your Model To Avoid Undesired Contention</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/troubleshooting_guide.html#how-to-find-contention">How To Find Contention</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../canton/usermanual/troubleshooting_guide.html#use-bisection-to-narrow-down-the-root-cause">Use Bisection to Narrow Down the Root Cause</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../canton/usermanual/support_checklist.html">Support Checklist</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../canton/usermanual/support_checklist.html#remote-console-access">Remote Console Access</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../canton/usermanual/support_checklist.html#logging">Logging</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../canton/usermanual/support_checklist.html#metrics">Metrics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../canton/usermanual/support_checklist.html#configuration-and-patching">Configuration and Patching</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../canton/usermanual/support_checklist.html#database-access">Database Access</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Help</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../canton/reference/error_codes.html">Error Codes</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../canton/reference/error_codes.html#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../canton/reference/error_codes.html#glossary">Glossary</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../canton/reference/error_codes.html#anatomy-of-an-error">Anatomy of an Error</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../canton/reference/error_codes.html#error-description">Error Description</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/reference/error_codes.html#additional-machine-readable-information">Additional Machine-Readable Information</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/reference/error_codes.html#prevent-security-leaks-in-error-codes">Prevent Security Leaks in Error Codes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/reference/error_codes.html#work-with-error-codes">Work With Error Codes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../canton/reference/error_codes.html#error-codes-in-canton-operations">Error Codes In Canton Operations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../canton/reference/error_codes.html#error-categories">Error Categories</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../canton/reference/error_codes.html#machine-readable-information">Machine Readable Information</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../canton/reference/error_codes.html#example">Example</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../canton/reference/error_codes.html#error-categories-inventory">Error Categories Inventory</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../canton/reference/error_codes.html#error-codes-inventory-daml">Error Codes Inventory - Daml</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../canton/reference/error_codes.html#error-codes-inventory-canton">Error Codes Inventory - Canton</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../canton/reference/error_codes.html#grpcerrors">1. GrpcErrors</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#aborted-due-to-shutdown">ABORTED_DUE_TO_SHUTDOWN</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/reference/error_codes.html#authorizationcheckserrors">2. AuthorizationChecksErrors</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#access-token-expired">ACCESS_TOKEN_EXPIRED</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#internal-authorization-error">INTERNAL_AUTHORIZATION_ERROR</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#invalid-token">INVALID_TOKEN</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#permission-denied">PERMISSION_DENIED</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#stale-stream-authorization">STALE_STREAM_AUTHORIZATION</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#unauthenticated">UNAUTHENTICATED</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/reference/error_codes.html#participanterrorgroup">3. ParticipantErrorGroup</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/reference/error_codes.html#errors">3.1. Errors</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#acs-commitment-internal-error">ACS_COMMITMENT_INTERNAL_ERROR</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/reference/error_codes.html#mismatcherror">3.1.1. MismatchError</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#acs-commitment-alarm">ACS_COMMITMENT_ALARM</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#acs-commitment-mismatch">ACS_COMMITMENT_MISMATCH</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#acs-mismatch-no-shared-contracts">ACS_MISMATCH_NO_SHARED_CONTRACTS</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/reference/error_codes.html#degradationerror">3.1.2. DegradationError</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#acs-commitment-degradation">ACS_COMMITMENT_DEGRADATION</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#acs-commitment-degradation-with-ineffective-config">ACS_COMMITMENT_DEGRADATION_WITH_INEFFECTIVE_CONFIG</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/reference/error_codes.html#ledgerapierrorgroup">3.2. LedgerApiErrorGroup</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/reference/error_codes.html#commandexecutionerrors">3.2.1. CommandExecutionErrors</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#failed-to-determine-ledger-time">FAILED_TO_DETERMINE_LEDGER_TIME</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#interpretation-time-exceeded">INTERPRETATION_TIME_EXCEEDED</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/reference/error_codes.html#package">3.2.1.1. Package</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#allowed-language-versions">ALLOWED_LANGUAGE_VERSIONS</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#package-validation-failed">PACKAGE_VALIDATION_FAILED</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/reference/error_codes.html#preprocessing">3.2.1.2. Preprocessing</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#command-preprocessing-failed">COMMAND_PREPROCESSING_FAILED</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/reference/error_codes.html#interpreter">3.2.1.3. Interpreter</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#contract-does-not-implement-interface">CONTRACT_DOES_NOT_IMPLEMENT_INTERFACE</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#contract-does-not-implement-requiring-interface">CONTRACT_DOES_NOT_IMPLEMENT_REQUIRING_INTERFACE</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#contract-id-comparability">CONTRACT_ID_COMPARABILITY</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#contract-id-in-contract-key">CONTRACT_ID_IN_CONTRACT_KEY</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#contract-not-active">CONTRACT_NOT_ACTIVE</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#create-empty-contract-key-maintainers">CREATE_EMPTY_CONTRACT_KEY_MAINTAINERS</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#daml-authorization-error">DAML_AUTHORIZATION_ERROR</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#daml-interpretation-error">DAML_INTERPRETATION_ERROR</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#daml-interpreter-invalid-argument">DAML_INTERPRETER_INVALID_ARGUMENT</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#disallowed-interface-exercise">DISALLOWED_INTERFACE_EXERCISE</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#disclosed-contract-key-hashing-error">DISCLOSED_CONTRACT_KEY_HASHING_ERROR</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#fetch-empty-contract-key-maintainers">FETCH_EMPTY_CONTRACT_KEY_MAINTAINERS</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#interpretation-dev-error">INTERPRETATION_DEV_ERROR</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#interpretation-user-error">INTERPRETATION_USER_ERROR</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#non-comparable-values">NON_COMPARABLE_VALUES</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#template-precondition-violated">TEMPLATE_PRECONDITION_VIOLATED</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#unhandled-exception">UNHANDLED_EXCEPTION</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#value-nesting">VALUE_NESTING</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#wrongly-typed-contract">WRONGLY_TYPED_CONTRACT</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/reference/error_codes.html#lookuperrors">3.2.1.3.1. LookupErrors</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#contract-key-not-found">CONTRACT_KEY_NOT_FOUND</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/reference/error_codes.html#upgradeerror">3.2.1.3.2. UpgradeError</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#contract-not-upgradable">CONTRACT_NOT_UPGRADABLE</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#interpretation-upgrade-error-downgrade-drop-defined-field">INTERPRETATION_UPGRADE_ERROR_DOWNGRADE_DROP_DEFINED_FIELD</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#interpretation-upgrade-error-downgrade-failed">INTERPRETATION_UPGRADE_ERROR_DOWNGRADE_FAILED</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#interpretation-upgrade-error-validation-failed">INTERPRETATION_UPGRADE_ERROR_VALIDATION_FAILED</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#interpretation-upgrade-error-view-mismatch">INTERPRETATION_UPGRADE_ERROR_VIEW_MISMATCH</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/reference/error_codes.html#adminserviceserrorgroup">3.2.2. AdminServicesErrorGroup</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/reference/error_codes.html#partymanagementserviceerrors">3.2.2.1. PartyManagementServiceErrors</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#concurrent-party-details-update-detected">CONCURRENT_PARTY_DETAILS_UPDATE_DETECTED</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#internal-party-record-already-exists">INTERNAL_PARTY_RECORD_ALREADY_EXISTS</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#internal-party-record-not-found">INTERNAL_PARTY_RECORD_NOT_FOUND</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#invalid-party-details-update-request">INVALID_PARTY_DETAILS_UPDATE_REQUEST</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#max-party-details-annotations-size-exceeded">MAX_PARTY_DETAILS_ANNOTATIONS_SIZE_EXCEEDED</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#party-not-found">PARTY_NOT_FOUND</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/reference/error_codes.html#usermanagementserviceerrors">3.2.2.2. UserManagementServiceErrors</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#concurrent-user-update-detected">CONCURRENT_USER_UPDATE_DETECTED</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#invalid-user-update-request">INVALID_USER_UPDATE_REQUEST</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#max-user-annotations-size-exceeded">MAX_USER_ANNOTATIONS_SIZE_EXCEEDED</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#too-many-user-rights">TOO_MANY_USER_RIGHTS</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#user-already-exists">USER_ALREADY_EXISTS</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#user-not-found">USER_NOT_FOUND</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/reference/error_codes.html#identityproviderconfigserviceerrors-canton-error-codes">3.2.2.3. IdentityProviderConfigServiceErrors</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#idp-config-already-exists-canton-error-codes">IDP_CONFIG_ALREADY_EXISTS</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#idp-config-by-issuer-not-found-canton-error-codes">IDP_CONFIG_BY_ISSUER_NOT_FOUND</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#idp-config-issuer-already-exists-canton-error-codes">IDP_CONFIG_ISSUER_ALREADY_EXISTS</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#idp-config-not-found-canton-error-codes">IDP_CONFIG_NOT_FOUND</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#invalid-identity-provider-update-request">INVALID_IDENTITY_PROVIDER_UPDATE_REQUEST</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#too-many-identity-provider-configs">TOO_MANY_IDENTITY_PROVIDER_CONFIGS</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/reference/error_codes.html#adminserviceerrors">3.2.3. AdminServiceErrors</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#configuration-entry-rejected">CONFIGURATION_ENTRY_REJECTED</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#internally-invalid-key">INTERNALLY_INVALID_KEY</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#package-upload-rejected">PACKAGE_UPLOAD_REJECTED</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/reference/error_codes.html#consistencyerrors">3.2.4. ConsistencyErrors</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#contract-not-found">CONTRACT_NOT_FOUND</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#disclosed-contract-invalid">DISCLOSED_CONTRACT_INVALID</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#duplicate-command">DUPLICATE_COMMAND</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#duplicate-contract-key">DUPLICATE_CONTRACT_KEY</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#inconsistent">INCONSISTENT</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#inconsistent-contracts">INCONSISTENT_CONTRACTS</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#inconsistent-contract-key">INCONSISTENT_CONTRACT_KEY</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#invalid-ledger-time">INVALID_LEDGER_TIME</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#submission-already-in-flight">SUBMISSION_ALREADY_IN_FLIGHT</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/reference/error_codes.html#packageserviceerrors">3.2.5. PackageServiceErrors</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#dar-not-self-consistent">DAR_NOT_SELF_CONSISTENT</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#dar-not-valid-upgrade">DAR_NOT_VALID_UPGRADE</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#dar-validation-error">DAR_VALIDATION_ERROR</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#known-dar-version">KNOWN_DAR_VERSION</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#package-service-internal-error">PACKAGE_SERVICE_INTERNAL_ERROR</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#shutdown-interrupted-package-vetting">SHUTDOWN_INTERRUPTED_PACKAGE_VETTING</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/reference/error_codes.html#reading">3.2.5.1. Reading</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#dar-parse-error">DAR_PARSE_ERROR</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#invalid-dar">INVALID_DAR</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#invalid-dar-file-name">INVALID_DAR_FILE_NAME</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#invalid-legacy-dar">INVALID_LEGACY_DAR</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#invalid-zip-entry">INVALID_ZIP_ENTRY</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#zip-bomb">ZIP_BOMB</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/reference/error_codes.html#writeservicerejectionerrors">3.2.6. WriteServiceRejectionErrors</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#disputed">DISPUTED</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#out-of-quota">OUT_OF_QUOTA</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#party-not-known-on-ledger">PARTY_NOT_KNOWN_ON_LEDGER</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#submitter-cannot-act-via-participant">SUBMITTER_CANNOT_ACT_VIA_PARTICIPANT</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#submitting-party-not-known-on-ledger">SUBMITTING_PARTY_NOT_KNOWN_ON_LEDGER</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/reference/error_codes.html#internal">3.2.6.1. Internal</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#internally-duplicate-keys">INTERNALLY_DUPLICATE_KEYS</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#internally-inconsistent-keys">INTERNALLY_INCONSISTENT_KEYS</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/reference/error_codes.html#requestvalidationerrors">3.2.7. RequestValidationErrors</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#invalid-argument">INVALID_ARGUMENT</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#invalid-deduplication-period">INVALID_DEDUPLICATION_PERIOD</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#invalid-field">INVALID_FIELD</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#ledger-id-mismatch">LEDGER_ID_MISMATCH</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#missing-field">MISSING_FIELD</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#non-hexadecimal-offset">NON_HEXADECIMAL_OFFSET</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#offset-after-ledger-end">OFFSET_AFTER_LEDGER_END</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#offset-out-of-range">OFFSET_OUT_OF_RANGE</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#participant-pruned-data-accessed">PARTICIPANT_PRUNED_DATA_ACCESSED</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/reference/error_codes.html#notfound">3.2.7.1. NotFound</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#ledger-configuration-not-found">LEDGER_CONFIGURATION_NOT_FOUND</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#no-templates-for-package-name-and-qualified-name">NO_TEMPLATES_FOR_PACKAGE_NAME_AND_QUALIFIED_NAME</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#package-names-not-found">PACKAGE_NAMES_NOT_FOUND</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#package-not-found">PACKAGE_NOT_FOUND</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#templates-or-interfaces-not-found">TEMPLATES_OR_INTERFACES_NOT_FOUND</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#transaction-not-found">TRANSACTION_NOT_FOUND</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/reference/error_codes.html#transactionerrorgroup">3.3. TransactionErrorGroup</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/reference/error_codes.html#transactionroutingerror">3.3.1. TransactionRoutingError</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#automatic-transfer-for-transaction-failed">AUTOMATIC_TRANSFER_FOR_TRANSACTION_FAILED</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#routing-internal-error">ROUTING_INTERNAL_ERROR</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#unable-to-get-topology-snapshot">UNABLE_TO_GET_TOPOLOGY_SNAPSHOT</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/reference/error_codes.html#malformedinputerrors">3.3.1.1. MalformedInputErrors</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#disclosed-contract-authentication-failed">DISCLOSED_CONTRACT_AUTHENTICATION_FAILED</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#invalid-disclosed-contract">INVALID_DISCLOSED_CONTRACT</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#invalid-domain-alias">INVALID_DOMAIN_ALIAS</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#invalid-domain-id">INVALID_DOMAIN_ID</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#invalid-party-identifier">INVALID_PARTY_IDENTIFIER</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#invalid-submitter">INVALID_SUBMITTER</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/reference/error_codes.html#topologyerrors">3.3.1.2. TopologyErrors</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#informees-not-active">INFORMEES_NOT_ACTIVE</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#not-connected-to-all-contract-domains">NOT_CONNECTED_TO_ALL_CONTRACT_DOMAINS</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#no-common-domain">NO_COMMON_DOMAIN</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#no-domain-for-submission">NO_DOMAIN_FOR_SUBMISSION</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#no-domain-on-which-all-submitters-can-submit">NO_DOMAIN_ON_WHICH_ALL_SUBMITTERS_CAN_SUBMIT</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#submitters-not-active">SUBMITTERS_NOT_ACTIVE</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#submitter-always-stakeholder">SUBMITTER_ALWAYS_STAKEHOLDER</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#unknown-contract-domains">UNKNOWN_CONTRACT_DOMAINS</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#unknown-informees">UNKNOWN_INFORMEES</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#unknown-submitters">UNKNOWN_SUBMITTERS</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/reference/error_codes.html#configurationerrors">3.3.1.3. ConfigurationErrors</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#input-contract-has-unauthenticated-id">INPUT_CONTRACT_HAS_UNAUTHENTICATED_ID</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#invalid-prescribed-domain-id">INVALID_PRESCRIBED_DOMAIN_ID</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#multi-domain-support-not-enabled">MULTI_DOMAIN_SUPPORT_NOT_ENABLED</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#submission-domain-not-ready">SUBMISSION_DOMAIN_NOT_READY</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/reference/error_codes.html#submissionerrors">3.3.2. SubmissionErrors</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#chosen-mediator-is-inactive">CHOSEN_MEDIATOR_IS_INACTIVE</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#contract-authentication-failed">CONTRACT_AUTHENTICATION_FAILED</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#domain-backpressure">DOMAIN_BACKPRESSURE</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#domain-without-mediator">DOMAIN_WITHOUT_MEDIATOR</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#malformed-request">MALFORMED_REQUEST</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#not-sequenced-timeout">NOT_SEQUENCED_TIMEOUT</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#package-not-vetted-by-recipients">PACKAGE_NOT_VETTED_BY_RECIPIENTS</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#participant-overloaded">PARTICIPANT_OVERLOADED</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#sequencer-request-failed">SEQUENCER_REQUEST_FAILED</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#submission-during-shutdown">SUBMISSION_DURING_SHUTDOWN</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#unknown-contract-domain">UNKNOWN_CONTRACT_DOMAIN</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/reference/error_codes.html#syncserviceinjectionerror">3.3.3. SyncServiceInjectionError</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#command-injection-failure">COMMAND_INJECTION_FAILURE</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#node-is-passive-replica">NODE_IS_PASSIVE_REPLICA</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#not-connected-to-any-domain">NOT_CONNECTED_TO_ANY_DOMAIN</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/reference/error_codes.html#localreject">3.3.4. LocalReject</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/reference/error_codes.html#malformedrejects">3.3.4.1. MalformedRejects</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#local-verdict-bad-root-hash-messages">LOCAL_VERDICT_BAD_ROOT_HASH_MESSAGES</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#local-verdict-creates-existing-contracts">LOCAL_VERDICT_CREATES_EXISTING_CONTRACTS</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#local-verdict-failed-model-conformance-check">LOCAL_VERDICT_FAILED_MODEL_CONFORMANCE_CHECK</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#local-verdict-malformed-payload">LOCAL_VERDICT_MALFORMED_PAYLOAD</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#local-verdict-malformed-request">LOCAL_VERDICT_MALFORMED_REQUEST</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/reference/error_codes.html#consistencyrejections">3.3.4.2. ConsistencyRejections</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#local-verdict-duplicate-key">LOCAL_VERDICT_DUPLICATE_KEY</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#local-verdict-inactive-contracts">LOCAL_VERDICT_INACTIVE_CONTRACTS</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#local-verdict-inconsistent-key">LOCAL_VERDICT_INCONSISTENT_KEY</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#local-verdict-locked-contracts">LOCAL_VERDICT_LOCKED_CONTRACTS</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#local-verdict-locked-keys">LOCAL_VERDICT_LOCKED_KEYS</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/reference/error_codes.html#timerejects">3.3.4.3. TimeRejects</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#local-verdict-ledger-time-out-of-bound">LOCAL_VERDICT_LEDGER_TIME_OUT_OF_BOUND</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#local-verdict-submission-time-out-of-bound">LOCAL_VERDICT_SUBMISSION_TIME_OUT_OF_BOUND</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#local-verdict-timeout">LOCAL_VERDICT_TIMEOUT</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/reference/error_codes.html#transferinrejects">3.3.4.4. TransferInRejects</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#transfer-in-already-completed">TRANSFER_IN_ALREADY_COMPLETED</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#transfer-in-contract-already-active">TRANSFER_IN_CONTRACT_ALREADY_ACTIVE</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#transfer-in-contract-already-archived">TRANSFER_IN_CONTRACT_ALREADY_ARCHIVED</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#transfer-in-contract-is-locked">TRANSFER_IN_CONTRACT_IS_LOCKED</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/reference/error_codes.html#transferoutrejects">3.3.4.5. TransferOutRejects</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#transfer-out-activeness-check-failed">TRANSFER_OUT_ACTIVENESS_CHECK_FAILED</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/reference/error_codes.html#commanddeduplicationerror">3.3.5. CommandDeduplicationError</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#malformed-deduplication-offset">MALFORMED_DEDUPLICATION_OFFSET</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/reference/error_codes.html#syncserviceerror">3.4. SyncServiceError</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#party-allocation-without-connected-domain">PARTY_ALLOCATION_WITHOUT_CONNECTED_DOMAIN</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#sync-service-alarm">SYNC_SERVICE_ALARM</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#sync-service-already-added">SYNC_SERVICE_ALREADY_ADDED</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#sync-service-domain-became-passive">SYNC_SERVICE_DOMAIN_BECAME_PASSIVE</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#sync-service-domain-disabled-us">SYNC_SERVICE_DOMAIN_DISABLED_US</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#sync-service-domain-disconnected">SYNC_SERVICE_DOMAIN_DISCONNECTED</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#sync-service-domain-must-be-offline">SYNC_SERVICE_DOMAIN_MUST_BE_OFFLINE</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#sync-service-domain-must-not-have-in-flight-transactions">SYNC_SERVICE_DOMAIN_MUST_NOT_HAVE_IN_FLIGHT_TRANSACTIONS</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#sync-service-domain-status-must-be-inactive">SYNC_SERVICE_DOMAIN_STATUS_MUST_BE_INACTIVE</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#sync-service-domain-status-not-active">SYNC_SERVICE_DOMAIN_STATUS_NOT_ACTIVE</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#sync-service-internal-error">SYNC_SERVICE_INTERNAL_ERROR</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#sync-service-unknown-domain">SYNC_SERVICE_UNKNOWN_DOMAIN</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/reference/error_codes.html#syncdomainmigrationerror">3.4.1. SyncDomainMigrationError</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#broken-domain-migration">BROKEN_DOMAIN_MIGRATION</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#invalid-domain-migration-request">INVALID_DOMAIN_MIGRATION_REQUEST</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/reference/error_codes.html#domainregistryerror">3.4.2. DomainRegistryError</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#domain-registry-internal-error">DOMAIN_REGISTRY_INTERNAL_ERROR</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#topology-conversion-error">TOPOLOGY_CONVERSION_ERROR</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/reference/error_codes.html#id183">3.4.2.1. ConfigurationErrors</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#cannot-issue-domain-trust-certificate">CANNOT_ISSUE_DOMAIN_TRUST_CERTIFICATE</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#domain-parameters-changed">DOMAIN_PARAMETERS_CHANGED</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#incompatible-unique-contract-keys-mode">INCOMPATIBLE_UNIQUE_CONTRACT_KEYS_MODE</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#invalid-domain-connection">INVALID_DOMAIN_CONNECTION</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#misconfigured-static-domain-parameters">MISCONFIGURED_STATIC_DOMAIN_PARAMETERS</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#sequencers-from-different-domains-are-configured">SEQUENCERS_FROM_DIFFERENT_DOMAINS_ARE_CONFIGURED</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/reference/error_codes.html#handshakeerrors">3.4.2.2. HandshakeErrors</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#domain-alias-duplication">DOMAIN_ALIAS_DUPLICATION</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#domain-crypto-handshake-failed">DOMAIN_CRYPTO_HANDSHAKE_FAILED</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#domain-handshake-failed">DOMAIN_HANDSHAKE_FAILED</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#domain-id-mismatch">DOMAIN_ID_MISMATCH</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#service-agreement-acceptance-failed">SERVICE_AGREEMENT_ACCEPTANCE_FAILED</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/reference/error_codes.html#connectionerrors">3.4.2.3. ConnectionErrors</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#domain-is-not-available">DOMAIN_IS_NOT_AVAILABLE</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#failed-to-connect-to-sequencer">FAILED_TO_CONNECT_TO_SEQUENCER</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#failed-to-connect-to-sequencers">FAILED_TO_CONNECT_TO_SEQUENCERS</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#grpc-connection-failure">GRPC_CONNECTION_FAILURE</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#participant-is-not-active">PARTICIPANT_IS_NOT_ACTIVE</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/reference/error_codes.html#adminworkflowservices">3.5. AdminWorkflowServices</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#can-not-automatically-vet-admin-workflow-package">CAN_NOT_AUTOMATICALLY_VET_ADMIN_WORKFLOW_PACKAGE</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/reference/error_codes.html#repairserviceerror">3.6. RepairServiceError</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#contract-purge-error">CONTRACT_PURGE_ERROR</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#contract-serialization-error">CONTRACT_SERIALIZATION_ERROR</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#import-acs-error">IMPORT_ACS_ERROR</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#inconsistent-acs-snapshot">INCONSISTENT_ACS_SNAPSHOT</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#invalid-acs-snapshot-timestamp">INVALID_ACS_SNAPSHOT_TIMESTAMP</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#invalid-argument-repair">INVALID_ARGUMENT_REPAIR</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#unavailable-acs-snapshot">UNAVAILABLE_ACS_SNAPSHOT</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#unsupported-protocol-version-participant">UNSUPPORTED_PROTOCOL_VERSION_PARTICIPANT</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/reference/error_codes.html#cantonpackageserviceerror">3.7. CantonPackageServiceError</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#dar-not-found">DAR_NOT_FOUND</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#package-missing-dependencies">PACKAGE_MISSING_DEPENDENCIES</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#package-or-dar-removal-error">PACKAGE_OR_DAR_REMOVAL_ERROR</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/reference/error_codes.html#ledgerapierrors">3.8. LedgerApiErrors</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#heap-memory-over-limit">HEAP_MEMORY_OVER_LIMIT</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#ledger-api-internal-error">LEDGER_API_INTERNAL_ERROR</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#maximum-number-of-streams">MAXIMUM_NUMBER_OF_STREAMS</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#participant-backpressure">PARTICIPANT_BACKPRESSURE</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#threadpool-overloaded">THREADPOOL_OVERLOADED</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/reference/error_codes.html#indexerrors">3.9. IndexErrors</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/reference/error_codes.html#databaseerrors">3.9.1. DatabaseErrors</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#index-db-invalid-result-set">INDEX_DB_INVALID_RESULT_SET</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#index-db-sql-non-transient-error">INDEX_DB_SQL_NON_TRANSIENT_ERROR</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#index-db-sql-transient-error">INDEX_DB_SQL_TRANSIENT_ERROR</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/reference/error_codes.html#pruningserviceerror">3.10. PruningServiceError</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#internal-pruning-error">INTERNAL_PRUNING_ERROR</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#non-canton-offset">NON_CANTON_OFFSET</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#no-internal-participant-data-before">NO_INTERNAL_PARTICIPANT_DATA_BEFORE</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#pruning-not-supported-in-community-edition">PRUNING_NOT_SUPPORTED_IN_COMMUNITY_EDITION</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#shutdown-interrupted-pruning">SHUTDOWN_INTERRUPTED_PRUNING</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#unsafe-to-prune">UNSAFE_TO_PRUNE</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/reference/error_codes.html#participantreplicationserviceerror">3.11. ParticipantReplicationServiceError</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#participant-replication-internal-error">PARTICIPANT_REPLICATION_INTERNAL_ERROR</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#participant-replication-not-supported-by-storage">PARTICIPANT_REPLICATION_NOT_SUPPORTED_BY_STORAGE</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/reference/error_codes.html#commonerrors">3.12. CommonErrors</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#request-deadline-exceeded">REQUEST_DEADLINE_EXCEEDED</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#request-time-out">REQUEST_TIME_OUT</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#server-is-shutting-down">SERVER_IS_SHUTTING_DOWN</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#service-internal-error">SERVICE_INTERNAL_ERROR</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#service-not-running">SERVICE_NOT_RUNNING</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#unsupported-operation">UNSUPPORTED_OPERATION</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/reference/error_codes.html#ethereumerrors">4. EthereumErrors</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/reference/error_codes.html#id235">4.1. ConfigurationErrors</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#ahead-of-head">AHEAD_OF_HEAD</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#attempt-to-change-immutable-value">ATTEMPT_TO_CHANGE_IMMUTABLE_VALUE</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#besu-version-mismatch">BESU_VERSION_MISMATCH</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#ethereum-cant-query-version">ETHEREUM_CANT_QUERY_VERSION</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#many-blocks-behind-head">MANY_BLOCKS_BEHIND_HEAD</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#not-free-gas-network">NOT_FREE_GAS_NETWORK</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#wrong-evm-bytecode">WRONG_EVM_BYTECODE</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/reference/error_codes.html#transactionerrors">4.2. TransactionErrors</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#ethereum-transaction-invalid">ETHEREUM_TRANSACTION_INVALID</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#ethereum-transaction-receipt-fetching-failed">ETHEREUM_TRANSACTION_RECEIPT_FETCHING_FAILED</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#ethereum-transaction-submission-failed">ETHEREUM_TRANSACTION_SUBMISSION_FAILED</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/reference/error_codes.html#topologymanagementerrorgroup">5. TopologyManagementErrorGroup</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/reference/error_codes.html#topologymanagererror">5.1. TopologyManagerError</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#duplicate-topology-transaction">DUPLICATE_TOPOLOGY_TRANSACTION</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#illegal-removal-of-domain-trust-certificate">ILLEGAL_REMOVAL_OF_DOMAIN_TRUST_CERTIFICATE</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#increase-of-ledger-time-record-time-tolerance">INCREASE_OF_LEDGER_TIME_RECORD_TIME_TOLERANCE</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#insufficient-keys">INSUFFICIENT_KEYS</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#invalid-domain">INVALID_DOMAIN</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#invalid-threshold">INVALID_THRESHOLD</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#invalid-topology-tx-signature-error">INVALID_TOPOLOGY_TX_SIGNATURE_ERROR</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#invalid-traffic-limit">INVALID_TRAFFIC_LIMIT</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#no-appropriate-signing-key-in-store">NO_APPROPRIATE_SIGNING_KEY_IN_STORE</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#no-corresponding-active-tx-to-revoke">NO_CORRESPONDING_ACTIVE_TX_TO_REVOKE</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#public-key-not-in-store">PUBLIC_KEY_NOT_IN_STORE</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#removing-key-dangling-transactions-must-be-forced">REMOVING_KEY_DANGLING_TRANSACTIONS_MUST_BE_FORCED</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#removing-last-key-must-be-forced">REMOVING_LAST_KEY_MUST_BE_FORCED</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#secret-key-not-in-store">SECRET_KEY_NOT_IN_STORE</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#serial-mismatch">SERIAL_MISMATCH</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#topology-manager-alarm">TOPOLOGY_MANAGER_ALARM</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#topology-manager-internal-error">TOPOLOGY_MANAGER_INTERNAL_ERROR</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#topology-mapping-already-exists">TOPOLOGY_MAPPING_ALREADY_EXISTS</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#unauthorized-topology-transaction">UNAUTHORIZED_TOPOLOGY_TRANSACTION</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#unknown-members">UNKNOWN_MEMBERS</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/reference/error_codes.html#domaintopologymanagererror">5.1.1. DomainTopologyManagerError</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#alien-domain-entities">ALIEN_DOMAIN_ENTITIES</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#failed-to-add-member">FAILED_TO_ADD_MEMBER</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#malicous-or-faulty-onboarding-request">MALICOUS_OR_FAULTY_ONBOARDING_REQUEST</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#participant-not-initialized">PARTICIPANT_NOT_INITIALIZED</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#wrong-domain">WRONG_DOMAIN</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#wrong-protocol-version">WRONG_PROTOCOL_VERSION</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/reference/error_codes.html#participanttopologymanagererror">5.1.2. ParticipantTopologyManagerError</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#cannot-vet-due-to-missing-packages">CANNOT_VET_DUE_TO_MISSING_PACKAGES</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#dangerous-key-use-command-requires-force">DANGEROUS_KEY_USE_COMMAND_REQUIRES_FORCE</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#dangerous-vetting-commands-require-force">DANGEROUS_VETTING_COMMANDS_REQUIRE_FORCE</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#dependencies-not-check-only-or-vetted">DEPENDENCIES_NOT_CHECK_ONLY_OR_VETTED</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#dependencies-not-vetted">DEPENDENCIES_NOT_VETTED</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#disable-party-with-active-contracts-requires-force">DISABLE_PARTY_WITH_ACTIVE_CONTRACTS_REQUIRES_FORCE</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#main-dar-package-referenced-externally">MAIN_DAR_PACKAGE_REFERENCED_EXTERNALLY</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#package-topology-state-update-timeout">PACKAGE_TOPOLOGY_STATE_UPDATE_TIMEOUT</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#uninitialized-participant">UNINITIALIZED_PARTICIPANT</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/reference/error_codes.html#domain">5.1.3. Domain</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#domain-node-initialisation-failed">DOMAIN_NODE_INITIALISATION_FAILED</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/reference/error_codes.html#grpcsequencerauthenticationservice">5.1.3.1. GrpcSequencerAuthenticationService</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#client-authentication-faulty">CLIENT_AUTHENTICATION_FAULTY</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#client-authentication-rejected">CLIENT_AUTHENTICATION_REJECTED</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/reference/error_codes.html#domaintopologysender">5.2. DomainTopologySender</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#topology-dispatching-degradation">TOPOLOGY_DISPATCHING_DEGRADATION</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#topology-dispatching-internal-error">TOPOLOGY_DISPATCHING_INTERNAL_ERROR</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/reference/error_codes.html#configerrors">6. ConfigErrors</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#cannot-parse-config-files">CANNOT_PARSE_CONFIG_FILES</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#cannot-read-config-files">CANNOT_READ_CONFIG_FILES</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#config-substitution-error">CONFIG_SUBSTITUTION_ERROR</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#config-validation-error">CONFIG_VALIDATION_ERROR</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#generic-config-error">GENERIC_CONFIG_ERROR</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#no-config-files">NO_CONFIG_FILES</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/reference/error_codes.html#commanderrors">7. CommandErrors</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#console-command-internal-error">CONSOLE_COMMAND_INTERNAL_ERROR</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#console-command-timed-out">CONSOLE_COMMAND_TIMED_OUT</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#node-not-started">NODE_NOT_STARTED</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/reference/error_codes.html#databasestorageerror">8. DatabaseStorageError</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#db-connection-lost">DB_CONNECTION_LOST</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#db-storage-degradation">DB_STORAGE_DEGRADATION</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/reference/error_codes.html#id298">9. HandshakeErrors</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#deprecated-protocol-version">DEPRECATED_PROTOCOL_VERSION</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#deprecating-protocol-version">DEPRECATING_PROTOCOL_VERSION</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/reference/error_codes.html#envelopeopenererror">10. EnvelopeOpenerError</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#event-deserialization-error">EVENT_DESERIALIZATION_ERROR</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/reference/error_codes.html#fabricerrors">11. FabricErrors</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/reference/error_codes.html#id303">11.1. ConfigurationErrors</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#fabric-ahead-of-head">FABRIC_AHEAD_OF_HEAD</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#fabric-many-blocks-behind-head">FABRIC_MANY_BLOCKS_BEHIND_HEAD</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/reference/error_codes.html#id307">11.2. TransactionErrors</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#fabric-transaction-invalid">FABRIC_TRANSACTION_INVALID</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#fabric-transaction-proposal-submission-failed">FABRIC_TRANSACTION_PROPOSAL_SUBMISSION_FAILED</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#fabric-transaction-submission-failed">FABRIC_TRANSACTION_SUBMISSION_FAILED</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/reference/error_codes.html#sequencererror">12. SequencerError</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#invalid-acknowledgement-signature">INVALID_ACKNOWLEDGEMENT_SIGNATURE</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#invalid-acknowledgement-timestamp">INVALID_ACKNOWLEDGEMENT_TIMESTAMP</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#invalid-envelope-signature">INVALID_ENVELOPE_SIGNATURE</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#invalid-ledger-event">INVALID_LEDGER_EVENT</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#invalid-sequencer-pruning-request-on-chain">INVALID_SEQUENCER_PRUNING_REQUEST_ON_CHAIN</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#invalid-submission-request-signature">INVALID_SUBMISSION_REQUEST_SIGNATURE</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#max-request-size-exceeded">MAX_REQUEST_SIZE_EXCEEDED</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#max-sequencing-time-exceeded">MAX_SEQUENCING_TIME_EXCEEDED</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#missing-submission-request-signature-timestamp">MISSING_SUBMISSION_REQUEST_SIGNATURE_TIMESTAMP</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#multiple-mediator-recipients">MULTIPLE_MEDIATOR_RECIPIENTS</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#payload-to-event-time-bound-exceeded">PAYLOAD_TO_EVENT_TIME_BOUND_EXCEEDED</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/reference/error_codes.html#enterprisegrpcvaultserviceerror">13. EnterpriseGrpcVaultServiceError</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#invalid-kms-key-id">INVALID_KMS_KEY_ID</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#no-encrypted-private-key-store-error">NO_ENCRYPTED_PRIVATE_KEY_STORE_ERROR</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#register-kms-key-internal-error">REGISTER_KMS_KEY_INTERNAL_ERROR</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#wrapper-key-already-in-use-error">WRAPPER_KEY_ALREADY_IN_USE_ERROR</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#wrapper-key-disabled-or-deleted-error">WRAPPER_KEY_DISABLED_OR_DELETED_ERROR</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#wrapper-key-not-exist-error">WRAPPER_KEY_NOT_EXIST_ERROR</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#wrapper-key-rotation-internal-error">WRAPPER_KEY_ROTATION_INTERNAL_ERROR</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/reference/error_codes.html#mediatorerror">14. MediatorError</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#mediator-internal-error">MEDIATOR_INTERNAL_ERROR</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#mediator-invalid-message">MEDIATOR_INVALID_MESSAGE</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#mediator-received-malformed-message">MEDIATOR_RECEIVED_MALFORMED_MESSAGE</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#mediator-says-tx-timed-out">MEDIATOR_SAYS_TX_TIMED_OUT</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/reference/error_codes.html#protodeserializationerror">15. ProtoDeserializationError</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#proto-deserialization-failure">PROTO_DESERIALIZATION_FAILURE</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/reference/error_codes.html#sequencererrors">16. SequencerErrors</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#sequencer-aggregate-submission-already-sent">SEQUENCER_AGGREGATE_SUBMISSION_ALREADY_SENT</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#sequencer-aggregate-submission-stuffing">SEQUENCER_AGGREGATE_SUBMISSION_STUFFING</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#sequencer-max-sequencing-time-too-far">SEQUENCER_MAX_SEQUENCING_TIME_TOO_FAR</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#sequencer-not-enough-traffic-credit">SEQUENCER_NOT_ENOUGH_TRAFFIC_CREDIT</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#sequencer-signing-timestamp-after-sequencing-timestamp">SEQUENCER_SIGNING_TIMESTAMP_AFTER_SEQUENCING_TIMESTAMP</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#sequencer-signing-timestamp-missing">SEQUENCER_SIGNING_TIMESTAMP_MISSING</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#sequencer-signing-timestamp-too-early">SEQUENCER_SIGNING_TIMESTAMP_TOO_EARLY</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#sequencer-submission-request-malformed">SEQUENCER_SUBMISSION_REQUEST_MALFORMED</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#sequencer-submission-request-refused">SEQUENCER_SUBMISSION_REQUEST_REFUSED</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#sequencer-tombstone-persisted">SEQUENCER_TOMBSTONE_PERSISTED</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#sequencer-unknown-recipients">SEQUENCER_UNKNOWN_RECIPIENTS</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/reference/error_codes.html#resilientsequencersubscription">17. ResilientSequencerSubscription</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#sequencer-fork-detected">SEQUENCER_FORK_DETECTED</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#sequencer-subscription-lost">SEQUENCER_SUBSCRIPTION_LOST</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/reference/error_codes.html#sequencersubscriptionerror">18. SequencerSubscriptionError</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#sequencer-tombstone-encountered">SEQUENCER_TOMBSTONE_ENCOUNTERED</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/reference/error_codes.html#clock">19. Clock</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../canton/reference/error_codes.html#system-clock-running-backwards">SYSTEM_CLOCK_RUNNING_BACKWARDS</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../daml/troubleshooting.html">Troubleshooting</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../daml/troubleshooting.html#error-x-is-not-authorized-to-commit-an-update">Error: “&lt;X&gt; is not authorized to commit an update”</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../daml/troubleshooting.html#error-argument-is-not-of-serializable-type">Error: “Argument is not of serializable type”</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../daml/troubleshooting.html#error-recursion-limit-overflow-in-module">Error: “Recursion limit overflow in module”</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../daml/troubleshooting.html#solving-script-recursion-limits">Solving script recursion limits</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml/troubleshooting.html#solving-datatype-recursion-limits">Solving datatype recursion limits</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../daml/troubleshooting.html#modeling-questions">Modeling Questions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../daml/troubleshooting.html#how-to-model-an-agreement-with-another-party">How To Model an Agreement With Another Party</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml/troubleshooting.html#how-to-model-rights">How To Model Rights</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml/troubleshooting.html#how-to-void-a-contract">How To Void a Contract</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml/troubleshooting.html#how-to-represent-off-ledger-parties">How To Represent Off-ledger Parties</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml/troubleshooting.html#how-to-limit-a-choice-by-time">How To Limit a Choice by Time</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml/troubleshooting.html#how-to-model-a-mandatory-action">How To Model a Mandatory Action</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml/troubleshooting.html#when-to-use-optional">When to Use Optional</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../daml/troubleshooting.html#testing-questions">Testing Questions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../daml/troubleshooting.html#how-to-test-that-a-contract-is-visible-to-a-party">How To Test That a Contract Is Visible to a Party</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml/troubleshooting.html#how-to-test-that-an-update-action-cannot-be-committed">How To Test That an Update Action Cannot Be Committed</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../support/support.html">Get Help</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../support/support.html#support-expectations">Support Expectations</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../support/compatibility.html">Portability, Compatibility, and Support Durations</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../support/compatibility.html#ledger-api-compatibility-application-portability">Ledger API Compatibility: Application Portability</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../support/compatibility.html#list-of-ledger-api-versions-supported-by-daml">List of Ledger API Versions Supported by Daml</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../support/compatibility.html#summary-of-ledger-api-changes">Summary of Ledger API Changes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../support/compatibility.html#driver-and-participant-compatibility-network-upgradeability">Driver and Participant Compatibility: Network Upgradeability</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../support/compatibility.html#participant-database-migration">Participant database migration</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../support/compatibility.html#sdk-runtime-component-and-library-compatibility-daml-upgradeability">SDK, Runtime Component, and Library Compatibility: Daml Upgradeability</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../support/compatibility.html#ledger-api-support-duration">Ledger API Support Duration</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../support/overview.html">Daml Ecosystem Overview</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../support/overview.html#architecture">Architecture</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../support/overview.html#daml-networks">Daml Networks</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../support/overview.html#daml-drivers">Daml drivers</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../support/overview.html#participant-nodes">Participant Nodes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../support/overview.html#ledger-api">Ledger API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../support/overview.html#daml-components">Daml Components</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../support/overview.html#runtime-components">Runtime components</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../support/overview.html#libraries">Libraries</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../support/overview.html#generated-code">Generated code</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../support/overview.html#developer-tools-sdk">Developer tools / SDK</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../support/status-definitions.html">Status Definitions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../support/status-definitions.html#early-access-features">Early Access Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../support/status-definitions.html#deprecation">Deprecation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../support/status-definitions.html#comparison-of-statuses">Comparison of Statuses</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../support/releases.html">Releases and Versioning</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../support/releases.html#versioning">Versioning</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../support/releases.html#cadence">Cadence</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../support/releases.html#support-duration">Support Duration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../support/releases.html#release-notes">Release Notes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../support/releases.html#process">Process</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Reference</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../glossary.html">Glossary of Concepts</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../glossary.html#key-concepts">Key Concepts</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../glossary.html#daml">Daml</a></li>
<li class="toctree-l3"><a class="reference internal" href="../glossary.html#daml-language">Daml Language</a></li>
<li class="toctree-l3"><a class="reference internal" href="../glossary.html#daml-ledger">Daml Ledger</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../glossary.html#canton-ledger">Canton Ledger</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../glossary.html#canton-protocol">Canton Protocol</a></li>
<li class="toctree-l3"><a class="reference internal" href="../glossary.html#synchronization-technology">Synchronization Technology</a></li>
<li class="toctree-l3"><a class="reference internal" href="../glossary.html#daml-drivers">Daml Drivers</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../glossary.html#daml-language-concepts">Daml Language Concepts</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../glossary.html#contract">Contract</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../glossary.html#active-contract-archived-contract">Active Contract, Archived Contract</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../glossary.html#template">Template</a></li>
<li class="toctree-l3"><a class="reference internal" href="../glossary.html#choice">Choice</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../glossary.html#consuming-choice">Consuming Choice</a></li>
<li class="toctree-l4"><a class="reference internal" href="../glossary.html#nonconsuming-choice">Nonconsuming Choice</a></li>
<li class="toctree-l4"><a class="reference internal" href="../glossary.html#disjunction-choice-flexible-controllers">Disjunction Choice, Flexible Controllers</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../glossary.html#party">Party</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../glossary.html#signatory">Signatory</a></li>
<li class="toctree-l4"><a class="reference internal" href="../glossary.html#observer">Observer</a></li>
<li class="toctree-l4"><a class="reference internal" href="../glossary.html#controller">Controller</a></li>
<li class="toctree-l4"><a class="reference internal" href="../glossary.html#choice-observer">Choice Observer</a></li>
<li class="toctree-l4"><a class="reference internal" href="../glossary.html#stakeholder">Stakeholder</a></li>
<li class="toctree-l4"><a class="reference internal" href="../glossary.html#maintainer">Maintainer</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../glossary.html#authorization-signing">Authorization, Signing</a></li>
<li class="toctree-l3"><a class="reference internal" href="../glossary.html#standard-library">Standard Library</a></li>
<li class="toctree-l3"><a class="reference internal" href="../glossary.html#agreement">Agreement</a></li>
<li class="toctree-l3"><a class="reference internal" href="../glossary.html#create">Create</a></li>
<li class="toctree-l3"><a class="reference internal" href="../glossary.html#exercise">Exercise</a></li>
<li class="toctree-l3"><a class="reference internal" href="../glossary.html#daml-script">Daml Script</a></li>
<li class="toctree-l3"><a class="reference internal" href="../glossary.html#contract-key">Contract Key</a></li>
<li class="toctree-l3"><a class="reference internal" href="../glossary.html#dar-file-dalf-file">DAR File, DALF File</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../glossary.html#developer-tools">Developer Tools</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../glossary.html#assistant">Assistant</a></li>
<li class="toctree-l3"><a class="reference internal" href="../glossary.html#studio">Studio</a></li>
<li class="toctree-l3"><a class="reference internal" href="../glossary.html#sandbox">Sandbox</a></li>
<li class="toctree-l3"><a class="reference internal" href="../glossary.html#navigator-deprecated">Navigator (Deprecated)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../glossary.html#navigator-gui">Navigator GUI</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../glossary.html#building-applications">Building Applications</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../glossary.html#application-ledger-client-integration">Application, Ledger Client, Integration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../glossary.html#ledger-api">Ledger API</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../glossary.html#command-submission-service">Command Submission Service</a></li>
<li class="toctree-l4"><a class="reference internal" href="../glossary.html#command-completion-service">Command Completion Service</a></li>
<li class="toctree-l4"><a class="reference internal" href="../glossary.html#command-service">Command Service</a></li>
<li class="toctree-l4"><a class="reference internal" href="../glossary.html#transaction-service">Transaction Service</a></li>
<li class="toctree-l4"><a class="reference internal" href="../glossary.html#active-contract-service">Active Contract Service</a></li>
<li class="toctree-l4"><a class="reference internal" href="../glossary.html#package-service">Package Service</a></li>
<li class="toctree-l4"><a class="reference internal" href="../glossary.html#ledger-identity-service">Ledger Identity Service</a></li>
<li class="toctree-l4"><a class="reference internal" href="../glossary.html#ledger-configuration-service">Ledger Configuration Service</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../glossary.html#ledger-api-libraries">Ledger API Libraries</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../glossary.html#java-bindings">Java Bindings</a></li>
<li class="toctree-l4"><a class="reference internal" href="../glossary.html#python-bindings">Python Bindings</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../glossary.html#reading-from-the-ledger">Reading From the Ledger</a></li>
<li class="toctree-l3"><a class="reference internal" href="../glossary.html#submitting-commands-writing-to-the-ledger">Submitting Commands, Writing To the Ledger</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../glossary.html#commands">Commands</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../glossary.html#participant-node">Participant Node</a></li>
<li class="toctree-l3"><a class="reference internal" href="../glossary.html#sub-transaction-privacy">Sub-transaction Privacy</a></li>
<li class="toctree-l3"><a class="reference internal" href="../glossary.html#id2">Daml-LF</a></li>
<li class="toctree-l3"><a class="reference internal" href="../glossary.html#composability">Composability</a></li>
<li class="toctree-l3"><a class="reference internal" href="../glossary.html#trust-domain">Trust Domain</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../glossary.html#canton-concepts">Canton Concepts</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../glossary.html#synchronization-domain">Synchronization Domain</a></li>
<li class="toctree-l3"><a class="reference internal" href="../glossary.html#private-contract-store">Private Contract Store</a></li>
<li class="toctree-l3"><a class="reference internal" href="../glossary.html#virtual-global-ledger">Virtual Global Ledger</a></li>
<li class="toctree-l3"><a class="reference internal" href="../glossary.html#mediator">Mediator</a></li>
<li class="toctree-l3"><a class="reference internal" href="../glossary.html#sequencer">Sequencer</a></li>
<li class="toctree-l3"><a class="reference internal" href="../glossary.html#synchronization-domain-identity-manager">Synchronization Domain Identity Manager</a></li>
<li class="toctree-l3"><a class="reference internal" href="../glossary.html#consensus">Consensus</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../reference/example-applications.html">Daml Example Applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../reference/daml-language-references.html">Daml Language References</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../reference/cheat-sheet.html">Daml Language Cheat Sheet</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../daml/reference/index.html">Language Reference</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../daml/reference/structure.html">Overview: Template Structure</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../daml/reference/structure.html#template-outline-structure">Template Outline Structure</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../daml/reference/structure.html#choice-structure">Choice Structure</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../daml/reference/structure.html#choice-body-structure">Choice Body Structure</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../daml/reference/templates.html">Reference: Templates</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../daml/reference/templates.html#template-name">Template Name</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../daml/reference/templates.html#template-parameters">Template Parameters</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../daml/reference/templates.html#implicit-record">Implicit Record</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../daml/reference/templates.html#this-and-self"><code class="docutils literal notranslate"><span class="pre">this</span></code> and <code class="docutils literal notranslate"><span class="pre">self</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../daml/reference/templates.html#template-local-definitions-deprecated">Template-local Definitions (Deprecated)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../daml/reference/templates.html#signatory-parties">Signatory Parties</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../daml/reference/templates.html#observers">Observers</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../daml/reference/templates.html#choices">Choices</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../daml/reference/templates.html#serializable-types">Serializable Types</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../daml/reference/templates.html#agreements-deprecated">Agreements (Deprecated)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../daml/reference/templates.html#preconditions">Preconditions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../daml/reference/templates.html#contract-keys-and-maintainers">Contract Keys and Maintainers</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../daml/reference/templates.html#interface-instances">Interface Instances</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../daml/reference/choices.html">Reference: Choices</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../daml/reference/choices.html#choice-name">Choice Name</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../daml/reference/choices.html#controllers">Controllers</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../daml/reference/choices.html#choice-observers">Choice Observers</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../daml/reference/choices.html#preconsuming-choices">Preconsuming Choices</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../daml/reference/choices.html#postconsuming-choices">Postconsuming Choices</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../daml/reference/choices.html#non-consuming-choices">Non-consuming Choices</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../daml/reference/choices.html#choice-arguments">Choice Arguments</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../daml/reference/choices.html#choice-body">Choice Body</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../daml/reference/updates.html">Reference: Updates</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../daml/reference/updates.html#background">Background</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../daml/reference/updates.html#binding-variables">Binding Variables</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../daml/reference/updates.html#do">do</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../daml/reference/updates.html#archive">archive</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../daml/reference/updates.html#create">create</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../daml/reference/updates.html#exercise">exercise</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../daml/reference/updates.html#exercisebykey">exerciseByKey</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../daml/reference/updates.html#fetch">fetch</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../daml/reference/updates.html#fetchbykey">fetchByKey</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../daml/reference/updates.html#visiblebykey">visibleByKey</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../daml/reference/updates.html#lookupbykey">lookupByKey</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../daml/reference/updates.html#abort">abort</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../daml/reference/updates.html#assert">assert</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../daml/reference/updates.html#gettime">getTime</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../daml/reference/updates.html#return">return</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../daml/reference/updates.html#let">let</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../daml/reference/updates.html#this">this</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../daml/reference/data-types.html">Reference: Data types</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../daml/reference/data-types.html#built-in-types">Built-in Types</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../daml/reference/data-types.html#lists">Lists</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../daml/reference/data-types.html#records-and-record-types">Records and Record Types</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../daml/reference/data-types.html#type-synonyms">Type Synonyms</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../daml/reference/data-types.html#algebraic-data-types">Algebraic Data Types</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../daml/reference/working-with.html">Reference: Built-in functions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../daml/reference/working-with.html#work-with-time">Work with Time</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../daml/reference/working-with.html#work-with-numbers">Work with Numbers</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../daml/reference/working-with.html#work-with-text">Work with Text</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../daml/reference/working-with.html#work-with-lists">Work with Lists</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../daml/reference/expressions.html">Reference: Expressions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../daml/reference/expressions.html#definitions">Definitions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../daml/reference/expressions.html#arithmetic-operators">Arithmetic Operators</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../daml/reference/expressions.html#comparison-operators">Comparison Operators</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../daml/reference/expressions.html#logical-operators">Logical Operators</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../daml/reference/expressions.html#if-then-else">If-then-else</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../daml/reference/expressions.html#let">Let</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../daml/reference/functions.html">Reference: Functions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../daml/reference/functions.html#defining-functions">Defining Functions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../daml/reference/functions.html#partial-application">Partial Application</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../daml/reference/functions.html#functions-are-values">Functions are Values</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../daml/reference/functions.html#generic-functions">Generic Functions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../daml/reference/file-structure.html">Reference: File structure</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../daml/reference/file-structure.html#file-structure">File Structure</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../daml/reference/file-structure.html#imports">Imports</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../daml/reference/file-structure.html#libraries">Libraries</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../daml/reference/file-structure.html#comments">Comments</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../daml/reference/file-structure.html#contract-identifiers">Contract Identifiers</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../daml/reference/packages.html">Reference: Packages</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../daml/reference/packages.html#building-daml-archives">Building Daml Archives</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../daml/reference/packages.html#inspecting-dars">Inspecting DARs</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../daml/reference/packages.html#import-daml-packages">Import Daml Packages</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../daml/reference/packages.html#handling-module-name-collisions">Handling Module Name Collisions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../daml/reference/contract-keys.html">Reference: Contract keys</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../daml/reference/contract-keys.html#what-can-be-a-contract-key">What Can Be a Contract Key</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../daml/reference/contract-keys.html#specify-maintainers">Specify Maintainers</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../daml/reference/contract-keys.html#contract-lookups">Contract Lookups</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../daml/reference/contract-keys.html#exercisebykey">exerciseByKey</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../daml/reference/contract-keys.html#example">Example</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../daml/reference/exceptions.html">Reference: Exceptions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../daml/reference/exceptions.html#builtin-errors">Builtin Errors</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../daml/reference/exceptions.html#user-defined-exceptions">User-defined Exceptions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../daml/reference/exceptions.html#throw-exceptions">Throw Exceptions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../daml/reference/exceptions.html#catch-exceptions">Catch Exceptions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../daml/reference/interfaces.html">Reference: Interfaces</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../daml/reference/interfaces.html#configuration">Configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../daml/reference/interfaces.html#interface-declaration">Interface Declaration</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../daml/reference/interfaces.html#interface-instances">Interface Instances</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../daml/reference/interfaces.html#interface-functions">Interface Functions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../daml/reference/interfaces.html#required-interfaces">Required Interfaces</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../daml/stdlib/index.html">The Standard Library</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../daml/stdlib/Prelude.html">Prelude</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../daml/stdlib/Prelude.html#typeclasses">Typeclasses</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../daml/stdlib/Prelude.html#data-types">Data Types</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../daml/stdlib/Prelude.html#functions">Functions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../daml/stdlib/DA-Action.html">DA.Action</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../daml/stdlib/DA-Action.html#functions">Functions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../daml/stdlib/DA-Action-State.html">DA.Action.State</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../daml/stdlib/DA-Action-State.html#data-types">Data Types</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../daml/stdlib/DA-Action-State.html#functions">Functions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../daml/stdlib/DA-Action-State-Class.html">DA.Action.State.Class</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../daml/stdlib/DA-Action-State-Class.html#typeclasses">Typeclasses</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../daml/stdlib/DA-Assert.html">DA.Assert</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../daml/stdlib/DA-Assert.html#functions">Functions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../daml/stdlib/DA-Bifunctor.html">DA.Bifunctor</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../daml/stdlib/DA-Bifunctor.html#typeclasses">Typeclasses</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../daml/stdlib/DA-BigNumeric.html">DA.BigNumeric</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../daml/stdlib/DA-BigNumeric.html#functions">Functions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../daml/stdlib/DA-Date.html">DA.Date</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../daml/stdlib/DA-Date.html#data-types">Data Types</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../daml/stdlib/DA-Date.html#functions">Functions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../daml/stdlib/DA-Either.html">DA.Either</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../daml/stdlib/DA-Either.html#functions">Functions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../daml/stdlib/DA-Exception.html">DA.Exception</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../daml/stdlib/DA-Exception.html#typeclasses">Typeclasses</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../daml/stdlib/DA-Exception.html#data-types">Data Types</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../daml/stdlib/DA-Foldable.html">DA.Foldable</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../daml/stdlib/DA-Foldable.html#typeclasses">Typeclasses</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../daml/stdlib/DA-Foldable.html#functions">Functions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../daml/stdlib/DA-Functor.html">DA.Functor</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../daml/stdlib/DA-Functor.html#functions">Functions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../daml/stdlib/DA-Internal-Interface-AnyView.html">DA.Internal.Interface.AnyView</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../daml/stdlib/DA-Internal-Interface-AnyView.html#typeclasses">Typeclasses</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../daml/stdlib/DA-Internal-Interface-AnyView.html#functions">Functions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../daml/stdlib/DA-Internal-Interface-AnyView-Types.html">DA.Internal.Interface.AnyView.Types</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../daml/stdlib/DA-Internal-Interface-AnyView-Types.html#data-types">Data Types</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../daml/stdlib/DA-List.html">DA.List</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../daml/stdlib/DA-List.html#functions">Functions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../daml/stdlib/DA-List-BuiltinOrder.html">DA.List.BuiltinOrder</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../daml/stdlib/DA-List-BuiltinOrder.html#functions">Functions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../daml/stdlib/DA-List-Total.html">DA.List.Total</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../daml/stdlib/DA-List-Total.html#functions">Functions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../daml/stdlib/DA-Logic.html">DA.Logic</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../daml/stdlib/DA-Logic.html#data-types">Data Types</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../daml/stdlib/DA-Logic.html#functions">Functions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../daml/stdlib/DA-Map.html">DA.Map</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../daml/stdlib/DA-Map.html#functions">Functions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../daml/stdlib/DA-Math.html">DA.Math</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../daml/stdlib/DA-Math.html#functions">Functions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../daml/stdlib/DA-Monoid.html">DA.Monoid</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../daml/stdlib/DA-Monoid.html#data-types">Data Types</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../daml/stdlib/DA-NonEmpty.html">DA.NonEmpty</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../daml/stdlib/DA-NonEmpty.html#functions">Functions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../daml/stdlib/DA-NonEmpty-Types.html">DA.NonEmpty.Types</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../daml/stdlib/DA-NonEmpty-Types.html#data-types">Data Types</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../daml/stdlib/DA-Numeric.html">DA.Numeric</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../daml/stdlib/DA-Numeric.html#functions">Functions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../daml/stdlib/DA-Optional.html">DA.Optional</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../daml/stdlib/DA-Optional.html#functions">Functions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../daml/stdlib/DA-Record.html">DA.Record</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../daml/stdlib/DA-Record.html#typeclasses">Typeclasses</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../daml/stdlib/DA-Semigroup.html">DA.Semigroup</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../daml/stdlib/DA-Semigroup.html#data-types">Data Types</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../daml/stdlib/DA-Set.html">DA.Set</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../daml/stdlib/DA-Set.html#data-types">Data Types</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../daml/stdlib/DA-Set.html#functions">Functions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../daml/stdlib/DA-Stack.html">DA.Stack</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../daml/stdlib/DA-Stack.html#data-types">Data Types</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../daml/stdlib/DA-Stack.html#functions">Functions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../daml/stdlib/DA-Text.html">DA.Text</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../daml/stdlib/DA-Text.html#functions">Functions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../daml/stdlib/DA-TextMap.html">DA.TextMap</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../daml/stdlib/DA-TextMap.html#functions">Functions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../daml/stdlib/DA-Time.html">DA.Time</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../daml/stdlib/DA-Time.html#data-types">Data Types</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../daml/stdlib/DA-Time.html#functions">Functions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../daml/stdlib/DA-Traversable.html">DA.Traversable</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../daml/stdlib/DA-Traversable.html#typeclasses">Typeclasses</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../daml/stdlib/DA-Traversable.html#functions">Functions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../daml/stdlib/DA-Tuple.html">DA.Tuple</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../daml/stdlib/DA-Tuple.html#functions">Functions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../daml/stdlib/DA-Validation.html">DA.Validation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../daml/stdlib/DA-Validation.html#data-types">Data Types</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../daml/stdlib/DA-Validation.html#functions">Functions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../daml/stdlib/GHC-Show-Text.html">GHC.Show.Text</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../daml/stdlib/GHC-Show-Text.html#functions">Functions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../daml/stdlib/GHC-Tuple-Check.html">GHC.Tuple.Check</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../daml/stdlib/GHC-Tuple-Check.html#functions">Functions</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../daml-script/api/index.html">Daml Script Library</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../daml-script/api/Daml-Script.html">Daml.Script</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../daml-script/api/Daml-Script.html#data-types">Data Types</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../daml-script/api/Daml-Script.html#functions">Functions</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../triggers/api/index.html">Daml Trigger Library</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../triggers/api/Daml-Trigger.html">Daml.Trigger</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../triggers/api/Daml-Trigger.html#typeclasses">Typeclasses</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../triggers/api/Daml-Trigger.html#data-types">Data Types</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../triggers/api/Daml-Trigger.html#functions">Functions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../triggers/api/Daml-Trigger-Assert.html">Daml.Trigger.Assert</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../triggers/api/Daml-Trigger-Assert.html#data-types">Data Types</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../triggers/api/Daml-Trigger-Assert.html#functions">Functions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../triggers/api/Daml-Trigger-LowLevel.html">Daml.Trigger.LowLevel</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../triggers/api/Daml-Trigger-LowLevel.html#typeclasses">Typeclasses</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../triggers/api/Daml-Trigger-LowLevel.html#data-types">Data Types</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../triggers/api/Daml-Trigger-LowLevel.html#functions">Functions</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="../../reference/daml-ledger-references.html">Daml Ledger References</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Daml Ledger Model Concepts</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="ledger-structure.html">Structure</a><ul>
<li class="toctree-l4"><a class="reference internal" href="ledger-structure.html#actions-and-transactions">Actions and Transactions</a></li>
<li class="toctree-l4"><a class="reference internal" href="ledger-structure.html#ledgers">Ledgers</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="ledger-integrity.html">Integrity</a><ul>
<li class="toctree-l4"><a class="reference internal" href="ledger-integrity.html#valid-ledgers">Valid Ledgers</a></li>
<li class="toctree-l4"><a class="reference internal" href="ledger-integrity.html#consistency">Consistency</a></li>
<li class="toctree-l4"><a class="reference internal" href="ledger-integrity.html#conformance">Conformance</a></li>
<li class="toctree-l4"><a class="reference internal" href="ledger-integrity.html#authorization">Authorization</a></li>
<li class="toctree-l4"><a class="reference internal" href="ledger-integrity.html#valid-ledgers-obligations-offers-and-rights">Valid Ledgers, Obligations, Offers and Rights</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../local-ledger.html">Causality and Local Daml Ledgers</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../local-ledger.html#causality-examples">Causality Examples</a></li>
<li class="toctree-l4"><a class="reference internal" href="../local-ledger.html#causality-graphs">Causality Graphs</a></li>
<li class="toctree-l4"><a class="reference internal" href="../local-ledger.html#local-ledgers">Local Ledgers</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="ledger-privacy.html">Privacy</a><ul>
<li class="toctree-l4"><a class="reference internal" href="ledger-privacy.html#contract-observers-and-stakeholders">Contract Observers and Stakeholders</a></li>
<li class="toctree-l4"><a class="reference internal" href="ledger-privacy.html#choice-observers">Choice Observers</a></li>
<li class="toctree-l4"><a class="reference internal" href="ledger-privacy.html#projections">Projections</a></li>
<li class="toctree-l4"><a class="reference internal" href="ledger-privacy.html#privacy-through-authorization">Privacy Through Authorization</a></li>
<li class="toctree-l4"><a class="reference internal" href="ledger-privacy.html#divulgence-when-non-stakeholders-see-contracts">Divulgence: When Non-Stakeholders See Contracts</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="ledger-daml.html">Daml: Define Contract Models Compactly</a></li>
<li class="toctree-l3"><a class="reference internal" href="ledger-exceptions.html">Exceptions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="ledger-exceptions.html#structure">Structure</a></li>
<li class="toctree-l4"><a class="reference internal" href="ledger-exceptions.html#consistency">Consistency</a></li>
<li class="toctree-l4"><a class="reference internal" href="ledger-exceptions.html#transaction-normalization">Transaction Normalization</a></li>
<li class="toctree-l4"><a class="reference internal" href="ledger-exceptions.html#authorization">Authorization</a></li>
<li class="toctree-l4"><a class="reference internal" href="ledger-exceptions.html#privacy">Privacy</a></li>
<li class="toctree-l4"><a class="reference internal" href="ledger-exceptions.html#relation-to-daml-exceptions">Relation to Daml Exceptions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../identity-and-package-management.html">Identity and Package Management</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../identity-and-package-management.html#identity-management">Identity Management</a></li>
<li class="toctree-l4"><a class="reference internal" href="../identity-and-package-management.html#package-management">Package Management</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../time.html">Time on Daml Ledgers</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../time.html#ledger-time">Ledger Time</a></li>
<li class="toctree-l4"><a class="reference internal" href="../time.html#record-time">Record Time</a></li>
<li class="toctree-l4"><a class="reference internal" href="../time.html#guarantees">Guarantees</a></li>
<li class="toctree-l4"><a class="reference internal" href="../time.html#ledger-time-model">Ledger Time Model</a></li>
<li class="toctree-l4"><a class="reference internal" href="../time.html#assign-ledger-time">Assign Ledger Time</a></li>
</ul>
</li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Smart Contract Upgrade In Depth</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#static-checks">Static Checks</a></li>
<li class="toctree-l4"><a class="reference internal" href="#data-transformation-runtime-semantics">Data Transformation: Runtime Semantics</a></li>
<li class="toctree-l4"><a class="reference internal" href="#lf-1-17-values-in-the-ledger-api">LF 1.17 Values in the Ledger API</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../reference/canton-advanced-architecture.html">Canton Advanced Architecture</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/contract_keys.html">Contract Keys in Canton</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/contract_keys.html#synchronization-domains-with-uniqueness-guarantees">Synchronization Domains with Uniqueness Guarantees</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/contract_keys.html#non-unique-contract-keys-mode">Non-Unique Contract Keys Mode</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/architecture/domains/domains.html">Domain Architecture and Integrations</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../canton/architecture/domains/domains.html#synchronization-domain-specific-requirements">Synchronization Domain-Specific Requirements</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/architecture/domains/domains.html#synchronization-domain-internal-components">Synchronization Domain-Internal Components</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/architecture/domains/domains.html#drivers">Drivers</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/architecture/domains/ethereum.html">Canton Domain on Ethereum</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/architecture/domains/fabric.html">Canton Domain on Fabric</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/architecture/identity.html">Identity Management</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../canton/architecture/identity.html#identity-providing-service">Identity Providing Service</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/architecture/identity.html#identity-management-design">Identity Management Design</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/architecture/identity.html#implementation">Implementation</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/architecture/requirements/requirements.html">Canton High-Level Requirements</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../canton/architecture/requirements/requirements.html#functional-requirements">Functional requirements</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/architecture/requirements/requirements.html#resource-limits">Resource limits</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/architecture/requirements/requirements.html#non-functional-requirements">Non-functional requirements</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/architecture/requirements/requirements.html#known-limitations">Known limitations</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/architecture/requirements/requirements.html#requirement-exceptions-notes">Requirement Exceptions: Notes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/architecture/research.html">Research Publications</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/architecture/security.html">Security Architecture</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../canton/architecture/security.html#secure-cryptographic-private-key-storage">Secure Cryptographic Private Key Storage</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/architecture/security.html#resilience-to-malicious-participants">Resilience to Malicious Participants</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/architecture/security.html#consensus-transparency">Consensus &amp; Transparency</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../ops/system_architecture_faq.html">System Architecture FAQ</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../ops/system_architecture_faq.html#what-does-the-sequencer-do">What does the Sequencer do?</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../ops/system_architecture_faq.html#how-does-canton-process-a-transaction">How does Canton process a transaction?</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../ops/system_architecture_faq.html#how-does-canton-ensure-privacy">How does Canton ensure privacy?</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../ops/system_architecture_faq.html#where-does-the-golden-source-of-daml-ledger-data-live-in-canton">Where does “the golden source” of Daml Ledger data live in Canton?</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../ops/system_architecture_faq.html#how-is-canton-able-to-recover-from-data-loss">How is Canton able to recover from data loss?</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../canton/usermanual/FAQ.html">Canton Frequently Asked Questions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/FAQ.html#log-messages">Log Messages</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/FAQ.html#database-task-queue-full">Database task queue full</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/FAQ.html#serialization-exception">Serialization Exception</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/FAQ.html#console-commands">Console Commands</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/FAQ.html#i-received-an-error-saying-that-the-domainalias-i-used-was-too-long-where-i-can-see-the-limits-of-string-types-in-canton">I received an error saying that the DomainAlias I used was too long. Where I can see the limits of String types in Canton?</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/FAQ.html#bootstrap-scripts">Bootstrap Scripts</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/FAQ.html#why-do-you-have-an-additional-new-line-between-each-line-in-your-example-scripts">Why do you have an additional new line between each line in your example scripts?</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/FAQ.html#how-can-i-use-nested-import-statements-to-split-my-script-into-multiple-files">How can I use nested import statements to split my script into multiple files?</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/FAQ.html#how-do-i-write-data-to-a-file-and-how-do-i-read-it-back">How do I write data to a file and how do I read it back?</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/FAQ.html#why-is-canton-complaining-about-my-database-version">Why is Canton complaining about my database version?</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/FAQ.html#postgres">Postgres</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/FAQ.html#oracle">Oracle</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../canton/usermanual/FAQ.html#using-non-standard-database-versions">Using non-standard database versions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/FAQ.html#how-do-i-enable-unsupported-features">How do I enable unsupported features?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/FAQ.html#how-do-i-enable-beta-features">How do I enable beta features?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../canton/usermanual/FAQ.html#how-to-troubleshoot-included-configuration-files">How to troubleshoot included configuration files?</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../test-evidence.html">Test Evidence</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Early Access</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../interoperability.html">Daml Ledger Interoperability</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../interoperability.html#interoperability-examples">Interoperability Examples</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../interoperability.html#topology">Topology</a></li>
<li class="toctree-l3"><a class="reference internal" href="../interoperability.html#aggregation-at-the-participant">Aggregation at the Participant</a></li>
<li class="toctree-l3"><a class="reference internal" href="../interoperability.html#enter-and-leave-events">Enter and Leave Events</a></li>
<li class="toctree-l3"><a class="reference internal" href="../interoperability.html#cross-ledger-transactions">Cross-ledger Transactions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../interoperability.html#multi-ledger-causality-graphs">Multi-ledger Causality Graphs</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../interoperability.html#consistency">Consistency</a></li>
<li class="toctree-l3"><a class="reference internal" href="../interoperability.html#minimality-and-reduction">Minimality and Reduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../interoperability.html#from-multi-ledger-causality-graphs-to-ledgers">From Multi-ledger Causality Graphs to Ledgers</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../interoperability.html#ledger-aware-projection">Ledger-aware Projection</a></li>
<li class="toctree-l2"><a class="reference internal" href="../interoperability.html#ledger-api-ordering-guarantees">Ledger API Ordering Guarantees</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../tools/non-repudiation.html">Non-repudiation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../tools/non-repudiation.html#architecture">Architecture</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tools/non-repudiation.html#run-the-server-side-components">Run the Server-side Components</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tools/non-repudiation.html#use-the-client">Use the Client</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tools/non-repudiation.html#non-repudiation-over-the-http-json-api">Non-repudiation Over the HTTP JSON API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tools/non-repudiation.html#tls-support">TLS Support</a></li>
</ul>
</li>
</ul>

          
          
          
          <div class="pdf-download"><a href="../../_downloads/DamlEnterprise2.10.1.pdf" download>Download as PDF</a></div>
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <div class="topbar fixed">
        
        <nav class="wy-nav-top" aria-label="top navigation">
          
          <i data-toggle="wy-nav-top" class="wy-nav-top-toggle"></i>
          
        </nav>
        <!-- Copyright (c) 2023 Digital Asset (Switzerland) GmbH and/or its affiliates. All rights reserved. -->
<!-- SPDX-License-Identifier: Apache-2.0 -->

<div class="navbar">
    <h1><img src="../../_static/images/Daml_Logo_Blue.svg"></h1>
    <div class="navbar-menu">
        <div class="da-menu-item da-menu-depth-1" role="menu">
            <a href="https://www.digitalasset.com/developers" role="menuitem" class="da-menu-link">Developers</a>
        </div>
        <div class="da-menu-item da-menu-depth-1" role="menu">
            <a href="https://www.digitalasset.com/products" role="menuitem" class="da-menu-link">Products</a>
        </div>
        <div class="da-menu-item da-menu-depth-1" role="menu">
            <a href="https://www.digitalasset.com" role="menuitem" class="da-menu-link">Company</a>
        </div>
    </div>
</div>

        <div class="version ">
          <span class="hide-mobile">Version&nbsp;</span><span class="version_switcher_placeholder"></span>
          
        </div>


        <!-- Copyright (c) 2023 Digital Asset (Switzerland) GmbH and/or its affiliates. All rights reserved. -->
<!-- SPDX-License-Identifier: Apache-2.0 -->
<div class="search-inline">
    <div id="rtd-search-inline-form" class="wy-form">
        <input type="text" class="search-inline-input" placeholder="Search" name="q">
        <img src="../../_static/images/Search.svg" class="search-inline-img"/>
    </div>
    <div class="search-alert">
        Please enter at least 3 letters.
    </div>
    <div id="search-inline-results" class="search-inline-results">
        
    </div>
</div>
          <!-- Copyright (c) 2023 Digital Asset (Switzerland) GmbH and/or its affiliates. All rights reserved. -->
<!-- SPDX-License-Identifier: Apache-2.0 -->

<div class="content-menu collapsed">
    <span class="content-menu-title">In This Section</span>
    <span class="content-menu-expand"></span>
    <div class="content-menu-wrapper">
        
        <!-- Local TOC -->
        <div class="content-menu-toc"><ul>
<li><a class="reference internal" href="#">The Smart Contract Upgrade Model in Depth</a><ul>
<li><a class="reference internal" href="#static-checks">Static Checks</a><ul>
<li><a class="reference internal" href="#packages">Packages</a></li>
<li><a class="reference internal" href="#modules">Modules</a></li>
<li><a class="reference internal" href="#templates">Templates</a></li>
<li><a class="reference internal" href="#template-parameters">Template Parameters</a></li>
<li><a class="reference internal" href="#template-keys">Template Keys</a></li>
<li><a class="reference internal" href="#template-choices">Template Choices</a></li>
<li><a class="reference internal" href="#template-choices-parameters">Template Choices - Parameters</a></li>
<li><a class="reference internal" href="#template-choices-return-type">Template Choices - Return Type</a></li>
<li><a class="reference internal" href="#data-types">Data Types</a></li>
<li><a class="reference internal" href="#data-types-records">Data Types - Records</a></li>
<li><a class="reference internal" href="#data-types-variants">Data Types - Variants</a></li>
<li><a class="reference internal" href="#data-types-enums">Data Types - Enums</a></li>
<li><a class="reference internal" href="#data-types-type-references">Data Types - Type References</a></li>
<li><a class="reference internal" href="#data-types-builtin-types">Data Types - Builtin Types</a></li>
<li><a class="reference internal" href="#data-types-parameterized-data-types">Data Types - Parameterized Data Types</a></li>
<li><a class="reference internal" href="#data-types-applied-parameterized-data-types">Data Types - Applied Parameterized Data Types</a></li>
<li><a class="reference internal" href="#interface-and-exception-definitions">Interface and Exception Definitions</a></li>
<li><a class="reference internal" href="#interface-instances">Interface Instances</a></li>
</ul>
</li>
<li><a class="reference internal" href="#data-transformation-runtime-semantics">Data Transformation: Runtime Semantics</a><ul>
<li><a class="reference internal" href="#static-target-template-selection">Static Target Template Selection</a></li>
<li><a class="reference internal" href="#dynamic-target-template-selection">Dynamic Target Template Selection</a></li>
<li><a class="reference internal" href="#transformation-rules">Transformation Rules</a><ul>
<li><a class="reference internal" href="#records-and-parameters">Records and Parameters</a></li>
<li><a class="reference internal" href="#variants-and-enums">Variants and Enums</a></li>
<li><a class="reference internal" href="#other-types">Other Types</a></li>
</ul>
</li>
<li><a class="reference internal" href="#metadata">Metadata</a></li>
<li><a class="reference internal" href="#ensure-clause">Ensure Clause</a></li>
<li><a class="reference internal" href="#interface-views">Interface Views</a></li>
<li><a class="reference internal" href="#key-transformation-in-fetchbykey-and-lookupbykey">Key Transformation in FetchByKey and LookupByKey</a></li>
</ul>
</li>
<li><a class="reference internal" href="#lf-1-17-values-in-the-ledger-api">LF 1.17 Values in the Ledger API</a><ul>
<li><a class="reference internal" href="#value-validation-in-commands">Value Validation in Commands</a></li>
<li><a class="reference internal" href="#value-normalization-in-ledger-api-responses">Value normalization in Ledger API responses</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
        
    </div>
</div>
        

      </div>
      <div class="wy-nav-content">
        
        <div class="rst-content">
          
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div itemprop="articleBody">
                
  <div class="section" id="the-smart-contract-upgrade-model-in-depth">
<span id="upgrade-model-reference"></span><h1>The Smart Contract Upgrade Model in Depth<a class="headerlink" href="#the-smart-contract-upgrade-model-in-depth" title="Permalink to this headline">¶</a></h1>
<p>This document describes in detail what rules govern package validation upon
upload and how contracts, choice arguments and choice results are upgraded or
downgraded at runtime. These topics are for a large part covered in
<a class="reference internal" href="../../upgrade/smart-contract-upgrades.html#smart-contract-upgrades"><span class="std std-ref">Smart Contract Upgrade</span></a>. This document acts as a thorough reference.</p>
<div class="section" id="static-checks">
<h2>Static Checks<a class="headerlink" href="#static-checks" title="Permalink to this headline">¶</a></h2>
<p>Upgrade static checks are performed once alongside other validity checks
when a DAR is uploaded to a participant. DARs deemed invalid for
upgrades are rejected.</p>
<p>DAR upgrade checks are broken down into package-level checks, which are in turn
broken down into module, template and data type-level checks.</p>
<div class="section" id="packages">
<h3>Packages<a class="headerlink" href="#packages" title="Permalink to this headline">¶</a></h3>
<p id="upgrades-utility-package"><strong>Definition:</strong> A <em>utility package</em> is a package with no template
definition, no interface definition, no exception definition, and only
non-<a class="reference external" href="https://github.com/digital-asset/daml/blob/main-2.x/sdk/daml-lf/spec/daml-lf-1.rst#serializable-types">serializable</a>
data type definitions. A utility package typically consists of
helper functions and constants, but no type definitions.</p>
<p>In the following validity check, packages whose LF version does not support upgrades
(1.15 and earlier) and utility packages are ignored.</p>
<p>A DAR is checked against previously uploaded DARs for upgrade validity on upload
to a participant. Specifically, for every package with
<a class="reference internal" href="../../tools/assistant-build.html#assistant-manual-build-a-project"><span class="std std-ref">name</span></a> <em>p</em> and
<a class="reference internal" href="../../tools/assistant-build.html#assistant-manual-build-a-project"><span class="std std-ref">version</span></a> <em>v</em> present in the uploaded
DAR:</p>
<ol class="arabic">
<li><p class="first">The participant looks up versions <em>v_prev</em> and <em>v_next</em> of <em>p</em> in its package
database, such that <em>v_prev</em> is the greatest version of
<em>p</em> smaller than <em>v</em>, and <em>v_next</em> is the smallest version of <em>p</em>
greater than <em>v</em>. Note that they may not always exist.</p>
<img alt="../../_images/upgrade-static-checks-order.svg" src="../../_images/upgrade-static-checks-order.svg" /></li>
<li><p class="first">The participant checks that version <em>v</em> of <em>p</em> is a valid upgrade of
version <em>v_prev</em> of p, if it exists.</p>
</li>
<li><p class="first">The participant checks that version <em>v_next</em> of <em>p</em> is a valid
upgrade of version <em>v</em> of <em>p</em>, if it exists.</p>
</li>
</ol>
<p>Therefore “being a valid upgrade” for a DAR is context
dependent: it depends on what packages are already uploaded on the
participant. It also <em>modular</em>: checks are performed at the package level. That
is, a new version of a package is rejected as soon as it contains some
element which doesn’t properly upgrade its counterpart in the old
package, even if some other elements do. Similarly,
all packages in a DAR must be pass the check for the DAR to be accepted. If one
of the packages fails the check, the entire DAR is rejected.</p>
</div>
<div class="section" id="modules">
<h3>Modules<a class="headerlink" href="#modules" title="Permalink to this headline">¶</a></h3>
<p>The modules of the new version of a package must form a superset of the modules
of the prior version of that package. In other words, it is valid to add new
modules but deleting a module leads to a validation error.</p>
<p><strong>Examples</strong></p>
<p>In the file tree below, package v2 is a potentially valid upgrade of
package v1, assuming <code class="docutils literal notranslate"><span class="pre">v2/A.daml</span></code> is a valid upgrade of <code class="docutils literal notranslate"><span class="pre">v1/A.daml</span></code>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>├── v1
│   ├── daml
│   │   └── A.daml
│   └── daml.yaml
└── v2
    ├── daml
    │   ├── A.daml
    │   └── B.daml
    └── daml.yaml
</pre></div>
</div>
<p>In the file tree below, package v2 cannot possibly be a valid upgrade of
v1 because it doesn’t define module <code class="docutils literal notranslate"><span class="pre">B</span></code>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>├── v1
│   ├── daml
│   │   ├── A.daml
│   │   └── B.daml
│   └── daml.yaml
└── v2
    ├── daml
    │   └── A.daml
    └── daml.yaml
</pre></div>
</div>
</div>
<div class="section" id="templates">
<h3>Templates<a class="headerlink" href="#templates" title="Permalink to this headline">¶</a></h3>
<p>The templates of the new version of a package must form a superset of the
templates of the prior version of that package. In other words, it is valid to
add new templates but deleting a template leads to a validation error.</p>
<p id="examples-1"><strong>Examples</strong></p>
<p>Below, the module on the right is a valid upgrade of the module on the
left. But the module on the left is <strong>not</strong> a valid upgrade of the
module on the right because it lacks a definition for template <code class="docutils literal notranslate"><span class="pre">T2</span></code>.</p>
<table border="1" class="colwidths-given diff-block docutils align-default" style="width: 100%">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><div class="first last highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="kr">module</span><span class="w"> </span><span class="nn">M</span><span class="w"> </span><span class="kr">where</span>

<span class="kr">template</span><span class="w"> </span><span class="kt">T1</span>
<span class="w">  </span><span class="kr">with</span>
<span class="w">    </span><span class="n">p</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Party</span>
<span class="w">  </span><span class="kr">where</span>
<span class="w">    </span><span class="kr">signatory</span><span class="w"> </span><span class="n">p</span>
</pre></div>
</div>
</td>
<td><div class="first last highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="kr">module</span><span class="w"> </span><span class="nn">M</span><span class="w"> </span><span class="kr">where</span>

<span class="w">  </span><span class="kr">template</span><span class="w"> </span><span class="kt">T1</span>
<span class="w">    </span><span class="kr">with</span>
<span class="w">      </span><span class="n">p</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Party</span>
<span class="w">    </span><span class="kr">where</span>
<span class="w">      </span><span class="kr">signatory</span><span class="w"> </span><span class="n">p</span>

<span class="w">  </span><span class="kr">template</span><span class="w"> </span><span class="kt">T2</span>
<span class="w">    </span><span class="kr">with</span>
<span class="w">      </span><span class="n">p</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Party</span>
<span class="w">    </span><span class="kr">where</span>
<span class="w">      </span><span class="kr">signatory</span><span class="w"> </span><span class="n">p</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="template-parameters">
<h3>Template Parameters<a class="headerlink" href="#template-parameters" title="Permalink to this headline">¶</a></h3>
<p>The new version of a template may add new optional parameters at the end of the
parameter sequence of the prior version of the template. The types of the
parameters that the new template has in common with the prior template must be
pairwise valid upgrades of the original types.</p>
<p>Deleting a parameter leads to a validation error.</p>
<p>Adding a parameter in the middle of the parameter sequence leads to a
validation error.</p>
<p>As a special case of the two points above, renaming a parameter leads to
a validation error.</p>
<p>Adding a non-optional parameter at the end of the parameter leads to a
validation error.</p>
<p id="examples-2"><strong>Examples</strong></p>
<p>Below, the template on the right is a valid upgrade of the template on
the left. It adds an optional parameter <code class="docutils literal notranslate"><span class="pre">x1</span></code> at the end of the parameter
sequence.</p>
<table border="1" class="colwidths-given diff-block docutils align-default" style="width: 100%">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><div class="first last highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="kr">template</span><span class="w"> </span><span class="kt">T</span>
<span class="w">    </span><span class="kr">with</span>
<span class="w">      </span><span class="n">p</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Party</span>
<span class="w">    </span><span class="kr">where</span>
<span class="w">      </span><span class="kr">signatory</span><span class="w"> </span><span class="n">p</span>
</pre></div>
</div>
</td>
<td><div class="first last highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="kr">template</span><span class="w"> </span><span class="kt">T</span>
<span class="w">    </span><span class="kr">with</span>
<span class="w">      </span><span class="n">p</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Party</span>
<span class="w">      </span><span class="n">x1</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Optional</span><span class="w"> </span><span class="kt">Int</span>
<span class="w">    </span><span class="kr">where</span>
<span class="w">      </span><span class="kr">signatory</span><span class="w"> </span><span class="n">p</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
<p>Below, the template on the right is <strong>not</strong> a valid upgrade of the
template on the left because it adds a new parameter <code class="docutils literal notranslate"><span class="pre">x1</span></code> before <code class="docutils literal notranslate"><span class="pre">p</span></code> instead
of adding it at the end of the parameter sequence.</p>
<table border="1" class="colwidths-given diff-block docutils align-default" style="width: 100%">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><div class="first last highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="kr">template</span><span class="w"> </span><span class="kt">T</span>
<span class="w">  </span><span class="kr">with</span>
<span class="w">    </span><span class="n">p</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Party</span>
<span class="w">  </span><span class="kr">where</span>
<span class="w">    </span><span class="kr">signatory</span><span class="w"> </span><span class="n">p</span>
</pre></div>
</div>
</td>
<td><div class="first last highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="kr">template</span><span class="w"> </span><span class="kt">T</span>
<span class="w">  </span><span class="kr">with</span>
<span class="w">    </span><span class="n">x1</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Optional</span><span class="w"> </span><span class="kt">Int</span>
<span class="w">    </span><span class="n">p</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Party</span>
<span class="w">  </span><span class="kr">where</span>
<span class="w">    </span><span class="kr">signatory</span><span class="w"> </span><span class="n">p</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
<p>Below, the template on the right is <strong>not</strong> a valid upgrade of the
template on the left because it drops parameter <code class="docutils literal notranslate"><span class="pre">x1</span></code>.</p>
<table border="1" class="colwidths-given diff-block docutils align-default" style="width: 100%">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><div class="first last highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="kr">template</span><span class="w"> </span><span class="kt">T</span>
<span class="w">  </span><span class="kr">with</span>
<span class="w">    </span><span class="n">p</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Party</span>
<span class="w">    </span><span class="n">x1</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Int</span>
<span class="w">  </span><span class="kr">where</span>
<span class="w">    </span><span class="kr">signatory</span><span class="w"> </span><span class="n">p</span>
</pre></div>
</div>
</td>
<td><div class="first last highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="kr">template</span><span class="w"> </span><span class="kt">T</span>
<span class="w">  </span><span class="kr">with</span>
<span class="w">    </span><span class="n">p</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Party</span>
<span class="w">  </span><span class="kr">where</span>
<span class="w">    </span><span class="kr">signatory</span><span class="w"> </span><span class="n">p</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
<p>Below, the template on the right is <strong>not</strong> a valid upgrade of the
template on the left because it changes the type of <code class="docutils literal notranslate"><span class="pre">x1</span></code> from <code class="docutils literal notranslate"><span class="pre">Int</span></code> to <code class="docutils literal notranslate"><span class="pre">Text</span></code>.
<code class="docutils literal notranslate"><span class="pre">Text</span></code> is not a valid upgrade of <code class="docutils literal notranslate"><span class="pre">Int</span></code>.</p>
<table border="1" class="colwidths-given diff-block docutils align-default" style="width: 100%">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><div class="first last highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="kr">template</span><span class="w"> </span><span class="kt">T</span>
<span class="w">  </span><span class="kr">with</span>
<span class="w">    </span><span class="n">p</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Party</span>
<span class="w">    </span><span class="n">x1</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Int</span>
<span class="w">  </span><span class="kr">where</span>
<span class="w">    </span><span class="kr">signatory</span><span class="w"> </span><span class="n">p</span>
</pre></div>
</div>
</td>
<td><div class="first last highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="kr">template</span><span class="w"> </span><span class="kt">T</span>
<span class="w">  </span><span class="kr">with</span>
<span class="w">    </span><span class="n">p</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Party</span>
<span class="w">    </span><span class="n">x1</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Text</span>
<span class="w">  </span><span class="kr">where</span>
<span class="w">    </span><span class="kr">signatory</span><span class="w"> </span><span class="n">p</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="template-keys">
<h3>Template Keys<a class="headerlink" href="#template-keys" title="Permalink to this headline">¶</a></h3>
<p>The key of the new version of a template must be a valid upgrade of the prior version’s key.</p>
<p>Adding or removing a key leads to a validation error.</p>
<p>Changing the key type to one that is not a valid upgrade of the
original type leads to a validation error.</p>
<p id="examples-3"><strong>Examples</strong></p>
<p>Below, the template on the right is a valid upgrade of the template on the left because the key type of the template on the right is a valid upgrade of the key type of the template on the left:</p>
<table border="1" class="colwidths-given diff-block docutils align-default" style="width: 100%">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><div class="first last highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="kr">data</span><span class="w"> </span><span class="kt">MyKey</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="kt">MyKey</span>
<span class="w">  </span><span class="kr">with</span>
<span class="w">    </span><span class="n">p</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Party</span>

<span class="kr">template</span><span class="w"> </span><span class="kt">T</span>
<span class="w">  </span><span class="kr">with</span>
<span class="w">    </span><span class="n">p</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Party</span>
<span class="w">  </span><span class="kr">where</span>
<span class="w">    </span><span class="kr">signatory</span><span class="w"> </span><span class="n">p</span>
<span class="w">    </span><span class="kr">key</span><span class="w"> </span><span class="kt">MyKey</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">MyKey</span>
<span class="w">    </span><span class="kr">maintainer</span><span class="w"> </span><span class="kr">key</span><span class="o">.</span><span class="n">p</span>
</pre></div>
</div>
</td>
<td><div class="first last highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="kr">data</span><span class="w"> </span><span class="kt">MyKey</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="kt">MyKey</span>
<span class="w">  </span><span class="kr">with</span>
<span class="w">    </span><span class="n">p</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Party</span>
<span class="w">    </span><span class="n">i</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Optional</span><span class="w"> </span><span class="kt">Int</span>

<span class="kr">template</span><span class="w"> </span><span class="kt">T</span>
<span class="w">  </span><span class="kr">with</span>
<span class="w">    </span><span class="n">p</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Party</span>
<span class="w">  </span><span class="kr">where</span>
<span class="w">    </span><span class="kr">signatory</span><span class="w"> </span><span class="n">p</span>
<span class="w">    </span><span class="kr">key</span><span class="w"> </span><span class="kt">MyKey</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="kt">None</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">MyKey</span>
<span class="w">    </span><span class="kr">maintainer</span><span class="w"> </span><span class="kr">key</span><span class="o">.</span><span class="n">p</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
<p>Below, the template on the right is <strong>not</strong> a valid upgrade of the
template on the left because it adds a key.</p>
<table border="1" class="colwidths-given diff-block docutils align-default" style="width: 100%">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><div class="first last highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="kr">template</span><span class="w"> </span><span class="kt">T</span>
<span class="w">  </span><span class="kr">with</span>
<span class="w">    </span><span class="n">p</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Party</span>
<span class="w">    </span><span class="n">k</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Text</span>
<span class="w">  </span><span class="kr">where</span>
<span class="w">    </span><span class="kr">signatory</span><span class="w"> </span><span class="n">p</span>
</pre></div>
</div>
</td>
<td><div class="first last highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="kr">template</span><span class="w"> </span><span class="kt">T</span>
<span class="w">  </span><span class="kr">with</span>
<span class="w">    </span><span class="n">p</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Party</span>
<span class="w">    </span><span class="n">k</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Text</span>
<span class="w">  </span><span class="kr">where</span>
<span class="w">    </span><span class="kr">signatory</span><span class="w"> </span><span class="n">p</span>
<span class="w">    </span><span class="kr">key</span><span class="w"> </span><span class="p">(</span><span class="n">p</span><span class="p">,</span><span class="w"> </span><span class="n">k</span><span class="p">)</span><span class="kt">:</span><span class="w"> </span><span class="p">(</span><span class="kt">Party</span><span class="p">,</span><span class="w"> </span><span class="kt">Text</span><span class="p">)</span>
<span class="w">    </span><span class="kr">maintainer</span><span class="w"> </span><span class="p">(</span><span class="n">fst</span><span class="w"> </span><span class="kr">key</span><span class="p">)</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
<p>Below, the template on the right is <strong>not</strong> a valid upgrade of the
template on the left because it deletes its key.</p>
<table border="1" class="colwidths-given diff-block docutils align-default" style="width: 100%">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><div class="first last highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="kr">template</span><span class="w"> </span><span class="kt">T</span>
<span class="w">  </span><span class="kr">with</span>
<span class="w">    </span><span class="n">p</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Party</span>
<span class="w">    </span><span class="n">k</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Text</span>
<span class="w">  </span><span class="kr">where</span>
<span class="w">    </span><span class="kr">signatory</span><span class="w"> </span><span class="n">p</span>
<span class="w">    </span><span class="kr">key</span><span class="w"> </span><span class="p">(</span><span class="n">p</span><span class="p">,</span><span class="w"> </span><span class="n">k</span><span class="p">)</span><span class="kt">:</span><span class="w"> </span><span class="p">(</span><span class="kt">Party</span><span class="p">,</span><span class="w"> </span><span class="kt">Text</span><span class="p">)</span>
<span class="w">    </span><span class="kr">maintainer</span><span class="w"> </span><span class="p">(</span><span class="n">fst</span><span class="w"> </span><span class="kr">key</span><span class="p">)</span>
</pre></div>
</div>
</td>
<td><div class="first last highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="kr">template</span><span class="w"> </span><span class="kt">T</span>
<span class="w">  </span><span class="kr">with</span>
<span class="w">    </span><span class="n">p</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Party</span>
<span class="w">    </span><span class="n">k</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Text</span>
<span class="w">  </span><span class="kr">where</span>
<span class="w">    </span><span class="kr">signatory</span><span class="w"> </span><span class="n">p</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
<p>Below, the template on the right is <strong>not</strong> a valid upgrade of the
template on the left because it changes the key type for a type that
is not a valid upgrade of <code class="docutils literal notranslate"><span class="pre">(Party,</span> <span class="pre">Text)</span></code>.</p>
<table border="1" class="colwidths-given diff-block docutils align-default" style="width: 100%">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><div class="first last highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="kr">template</span><span class="w"> </span><span class="kt">T</span>
<span class="w">  </span><span class="kr">with</span>
<span class="w">    </span><span class="n">p</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Party</span>
<span class="w">    </span><span class="n">k</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Text</span>
<span class="w">  </span><span class="kr">where</span>
<span class="w">    </span><span class="kr">signatory</span><span class="w"> </span><span class="n">p</span>
<span class="w">    </span><span class="kr">key</span><span class="w"> </span><span class="p">(</span><span class="n">p</span><span class="p">,</span><span class="w"> </span><span class="n">k</span><span class="p">)</span><span class="kt">:</span><span class="w"> </span><span class="p">(</span><span class="kt">Party</span><span class="p">,</span><span class="w"> </span><span class="kt">Text</span><span class="p">)</span>
<span class="w">    </span><span class="kr">maintainer</span><span class="w"> </span><span class="p">(</span><span class="n">fst</span><span class="w"> </span><span class="kr">key</span><span class="p">)</span>
</pre></div>
</div>
</td>
<td><div class="first last highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="kr">template</span><span class="w"> </span><span class="kt">T</span>
<span class="w">  </span><span class="kr">with</span>
<span class="w">    </span><span class="n">p</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Party</span>
<span class="w">    </span><span class="n">k</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Text</span>
<span class="w">  </span><span class="kr">where</span>
<span class="w">    </span><span class="kr">signatory</span><span class="w"> </span><span class="n">p</span>
<span class="w">    </span><span class="kr">key</span><span class="w"> </span><span class="p">(</span><span class="n">p</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="kt">:</span><span class="w"> </span><span class="p">(</span><span class="kt">Party</span><span class="p">,</span><span class="w"> </span><span class="kt">Int</span><span class="p">)</span>
<span class="w">    </span><span class="kr">maintainer</span><span class="w"> </span><span class="p">(</span><span class="n">fst</span><span class="w"> </span><span class="kr">key</span><span class="p">)</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="template-choices">
<h3>Template Choices<a class="headerlink" href="#template-choices" title="Permalink to this headline">¶</a></h3>
<p>The choices of the new version of a template must form a superset of the choices
of the prior version of the template template. In other words, it is valid to
add new choices but deleting a choice leads to a validation error.</p>
<p id="examples-4"><strong>Examples</strong></p>
<p>Below, the template on the right is a valid upgrade of the template on
the left. It adds a choice <code class="docutils literal notranslate"><span class="pre">C</span></code> to the previous version of the template.
But the template on the left is <strong>not</strong> a valid upgrade of the template
on the right as it deletes a choice.</p>
<table border="1" class="colwidths-given diff-block docutils align-default" style="width: 100%">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><div class="first last highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="kr">template</span><span class="w"> </span><span class="kt">T</span>
<span class="w">  </span><span class="kr">with</span>
<span class="w">    </span><span class="n">p</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Party</span>
<span class="w">  </span><span class="kr">where</span>
<span class="w">    </span><span class="kr">signatory</span><span class="w"> </span><span class="n">p</span>
</pre></div>
</div>
</td>
<td><div class="first last highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="kr">template</span><span class="w"> </span><span class="kt">T</span>
<span class="w">  </span><span class="kr">with</span>
<span class="w">    </span><span class="n">p</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Party</span>
<span class="w">  </span><span class="kr">where</span>
<span class="w">    </span><span class="kr">signatory</span><span class="w"> </span><span class="n">p</span>

<span class="w">    </span><span class="kr">choice</span><span class="w"> </span><span class="kt">C</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="nb">()</span>
<span class="w">      </span><span class="kr">controller</span><span class="w"> </span><span class="n">p</span>
<span class="w">      </span><span class="kr">do</span>
<span class="w">        </span><span class="kr">return</span><span class="w"> </span><span class="nb">()</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="template-choices-parameters">
<h3>Template Choices - Parameters<a class="headerlink" href="#template-choices-parameters" title="Permalink to this headline">¶</a></h3>
<p>As with template parameters, the new version of a choice may add new optional
parameters at the end of the parameter sequence of the prior version of that
choice.  The types of the parameters that the new choice has in common with the
prior choice must be pairwise valid upgrades of the original types.</p>
<p>Deleting a parameter leads to a validation error.</p>
<p>Adding a parameter in the middle of the parameter sequence leads to a
validation error.</p>
<p>As a special case of the two points above, renaming a parameter leads to
a validation error.</p>
<p>Adding a non-optional parameter at the end of the parameter sequence leads to a
validation error.</p>
<p><strong>Example</strong></p>
<p>Below, the choice on the right is a valid upgrade of the choice on the
left. It adds an optional parameter <code class="docutils literal notranslate"><span class="pre">x2</span></code> at the end of the parameter
sequence.</p>
<table border="1" class="colwidths-given diff-block docutils align-default" style="width: 100%">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><div class="first last highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="kr">choice</span><span class="w"> </span><span class="kt">C</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="nb">()</span>
<span class="w">  </span><span class="kr">with</span>
<span class="w">    </span><span class="n">x1</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Int</span>
<span class="w">  </span><span class="kr">controller</span><span class="w"> </span><span class="n">p</span>
<span class="w">  </span><span class="kr">do</span>
<span class="w">    </span><span class="kr">return</span><span class="w"> </span><span class="nb">()</span>
</pre></div>
</div>
</td>
<td><div class="first last highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="kr">choice</span><span class="w"> </span><span class="kt">C</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="nb">()</span>
<span class="w">  </span><span class="kr">with</span>
<span class="w">    </span><span class="n">x1</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Int</span>
<span class="w">    </span><span class="n">x2</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Optional</span><span class="w"> </span><span class="kt">Text</span>
<span class="w">  </span><span class="kr">controller</span><span class="w"> </span><span class="n">p</span>
<span class="w">  </span><span class="kr">do</span>
<span class="w">    </span><span class="kr">return</span><span class="w"> </span><span class="nb">()</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
<p>Below, the choice on the right is <strong>not</strong> a valid upgrade of the choice
on the left because it adds a new parameter <code class="docutils literal notranslate"><span class="pre">x2</span></code> before <code class="docutils literal notranslate"><span class="pre">x1</span></code> instead of
adding it at the end of the parameter sequence.</p>
<table border="1" class="colwidths-given diff-block docutils align-default" style="width: 100%">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><div class="first last highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="kr">choice</span><span class="w"> </span><span class="kt">C</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="nb">()</span>
<span class="w">  </span><span class="kr">with</span>
<span class="w">    </span><span class="n">x1</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Int</span>
<span class="w">  </span><span class="kr">controller</span><span class="w"> </span><span class="n">p</span>
<span class="w">  </span><span class="kr">do</span>
<span class="w">    </span><span class="kr">return</span><span class="w"> </span><span class="nb">()</span>
</pre></div>
</div>
</td>
<td><div class="first last highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="kr">choice</span><span class="w"> </span><span class="kt">C</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="nb">()</span>
<span class="w">  </span><span class="kr">with</span>
<span class="w">    </span><span class="n">x2</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Optional</span><span class="w"> </span><span class="kt">Text</span>
<span class="w">    </span><span class="n">x1</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Int</span>
<span class="w">  </span><span class="kr">controller</span><span class="w"> </span><span class="n">p</span>
<span class="w">  </span><span class="kr">do</span>
<span class="w">    </span><span class="kr">return</span><span class="w"> </span><span class="nb">()</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
<p>Below, the choice on the right is <strong>not</strong> a valid upgrade of the choice
on the left because it adds a new field <code class="docutils literal notranslate"><span class="pre">x2</span></code> before <code class="docutils literal notranslate"><span class="pre">x1</span></code> instead of adding
it at the end of the parameter sequence.</p>
<table border="1" class="colwidths-given diff-block docutils align-default" style="width: 100%">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><div class="first last highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="kr">choice</span><span class="w"> </span><span class="kt">C</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="nb">()</span>
<span class="w">  </span><span class="kr">with</span>
<span class="w">    </span><span class="n">x1</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Int</span>
<span class="w">  </span><span class="kr">controller</span><span class="w"> </span><span class="n">p</span>
<span class="w">  </span><span class="kr">do</span>
<span class="w">    </span><span class="kr">return</span><span class="w"> </span><span class="nb">()</span>
</pre></div>
</div>
</td>
<td><div class="first last highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="kr">choice</span><span class="w"> </span><span class="kt">C</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="nb">()</span>
<span class="w">  </span><span class="kr">with</span>
<span class="w">    </span><span class="n">x2</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Optional</span><span class="w"> </span><span class="kt">Text</span>
<span class="w">    </span><span class="n">x1</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Int</span>
<span class="w">  </span><span class="kr">controller</span><span class="w"> </span><span class="n">p</span>
<span class="w">  </span><span class="kr">do</span>
<span class="w">    </span><span class="kr">return</span><span class="w"> </span><span class="nb">()</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
<p>Below, the choice on the right is <strong>not</strong> a valid upgrade of the choice
on the left because it drops parameter <code class="docutils literal notranslate"><span class="pre">x1</span></code>.</p>
<table border="1" class="colwidths-given diff-block docutils align-default" style="width: 100%">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><div class="first last highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="kr">choice</span><span class="w"> </span><span class="kt">C</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="nb">()</span>
<span class="w">  </span><span class="kr">with</span>
<span class="w">    </span><span class="n">x1</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Int</span>
<span class="w">  </span><span class="kr">controller</span><span class="w"> </span><span class="n">p</span>
<span class="w">  </span><span class="kr">do</span>
<span class="w">    </span><span class="kr">return</span><span class="w"> </span><span class="nb">()</span>
</pre></div>
</div>
</td>
<td><div class="first last highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="kr">choice</span><span class="w"> </span><span class="kt">C</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="nb">()</span>
<span class="w">  </span><span class="kr">with</span>
<span class="w">  </span><span class="kr">controller</span><span class="w"> </span><span class="n">p</span>
<span class="w">  </span><span class="kr">do</span>
<span class="w">    </span><span class="kr">return</span><span class="w"> </span><span class="nb">()</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
<p>Below, the choice on the right is <strong>not</strong> a valid upgrade of the choice
on the left because it changes the type of <code class="docutils literal notranslate"><span class="pre">x1</span></code> from <code class="docutils literal notranslate"><span class="pre">Int</span></code> to <code class="docutils literal notranslate"><span class="pre">Text</span></code>. <code class="docutils literal notranslate"><span class="pre">Text</span></code> is
not a valid upgrade of <code class="docutils literal notranslate"><span class="pre">Int</span></code>.</p>
<table border="1" class="colwidths-given diff-block docutils align-default" style="width: 100%">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><div class="first last highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="kr">choice</span><span class="w"> </span><span class="kt">C</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="nb">()</span>
<span class="w">  </span><span class="kr">with</span>
<span class="w">    </span><span class="n">x1</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Int</span>
<span class="w">  </span><span class="kr">controller</span><span class="w"> </span><span class="n">p</span>
<span class="w">  </span><span class="kr">do</span>
<span class="w">    </span><span class="kr">return</span><span class="w"> </span><span class="nb">()</span>
</pre></div>
</div>
</td>
<td><div class="first last highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="kr">choice</span><span class="w"> </span><span class="kt">C</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="nb">()</span>
<span class="w">  </span><span class="kr">with</span>
<span class="w">  </span><span class="kr">controller</span><span class="w"> </span><span class="n">p</span>
<span class="w">  </span><span class="kr">do</span>
<span class="w">    </span><span class="kr">return</span><span class="w"> </span><span class="nb">()</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="template-choices-return-type">
<h3>Template Choices - Return Type<a class="headerlink" href="#template-choices-return-type" title="Permalink to this headline">¶</a></h3>
<p>The return type of the new version of a choice must be a valid upgrade of the
return type of the prior version of that choice.</p>
<p>Changing the return type of a choice for a non-valid upgrade leads to a
validation error.</p>
<p id="examples-5"><strong>Examples</strong></p>
<p>Below, the choice on the right is <strong>not</strong> a valid upgrade of the choice
on the left because it changes its return type from <code class="docutils literal notranslate"><span class="pre">()</span></code> to <code class="docutils literal notranslate"><span class="pre">Int</span></code>. <code class="docutils literal notranslate"><span class="pre">Int</span></code> is
not a valid upgrade of <code class="docutils literal notranslate"><span class="pre">()</span></code>.</p>
<table border="1" class="colwidths-given diff-block docutils align-default" style="width: 100%">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><div class="first last highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="kr">choice</span><span class="w"> </span><span class="kt">C</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="nb">()</span>
<span class="w">  </span><span class="kr">controller</span><span class="w"> </span><span class="n">p</span>
<span class="w">  </span><span class="kr">do</span>
<span class="w">    </span><span class="kr">return</span><span class="w"> </span><span class="nb">()</span>
</pre></div>
</div>
</td>
<td><div class="first last highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="kr">choice</span><span class="w"> </span><span class="kt">C</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Int</span>
<span class="w">  </span><span class="kr">controller</span><span class="w"> </span><span class="n">p</span>
<span class="w">  </span><span class="kr">do</span>
<span class="w">    </span><span class="kr">return</span><span class="w"> </span><span class="mi">1</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="data-types">
<h3>Data Types<a class="headerlink" href="#data-types" title="Permalink to this headline">¶</a></h3>
<p>The serializable data types of the new version of a module must form a superset
of the serializable data types of the prior version of that package. In other
words, it is valid to add new data types but deleting a data type leads to a
validation error.</p>
<p>Changing the variety of a serializable data type leads to a validation
error. For instance, one cannot change a record type into a variant
type.</p>
<p>Non-serializable data types are inexistent from the point of view of the
upgrade validity check. Turning a non-serializable data type into a
serializable one amounts to adding a new data type, which is valid.
Turning a serializable data type into a non-serializable one amounts to
deleting this data type, which is invalid.</p>
<p id="examples-6"><strong>Examples</strong></p>
<p>Below, the module on the right is a valid upgrade of the module on the
left. It defines an additional serializable data type <code class="docutils literal notranslate"><span class="pre">B</span></code>.</p>
<table border="1" class="colwidths-given diff-block docutils align-default" style="width: 100%">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><div class="first last highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="w"> </span><span class="kr">module</span><span class="w"> </span><span class="nn">M</span><span class="w"> </span><span class="kr">where</span>

<span class="kr">data</span><span class="w"> </span><span class="kt">A</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="kt">A</span>
</pre></div>
</div>
</td>
<td><div class="first last highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="kr">module</span><span class="w"> </span><span class="nn">M</span><span class="w"> </span><span class="kr">where</span>

<span class="kr">data</span><span class="w"> </span><span class="kt">A</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="kt">A</span>
<span class="kr">data</span><span class="w"> </span><span class="kt">B</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="kt">B</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
<p>Below, the module on the right is a valid upgrade of the module on the
left. It turns the non-serializable type <code class="docutils literal notranslate"><span class="pre">A</span></code> into a serializable one. The
non-serializable type is invisible to the upgrade validity check so this
amounts to adding a new data type to the module on the right.</p>
<table border="1" class="colwidths-given diff-block docutils align-default" style="width: 100%">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><div class="first last highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="kr">module</span><span class="w"> </span><span class="nn">M</span><span class="w"> </span><span class="kr">where</span>

<span class="kr">data</span><span class="w"> </span><span class="kt">A</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="kt">A</span>
<span class="w">  </span><span class="kr">with</span>
<span class="w">    </span><span class="n">x</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Int</span><span class="w"> </span><span class="ow">-&gt;</span><span class="w"> </span><span class="kt">Int</span>
</pre></div>
</div>
</td>
<td><div class="first last highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="kr">module</span><span class="w"> </span><span class="nn">M</span><span class="w"> </span><span class="kr">where</span>

<span class="kr">data</span><span class="w"> </span><span class="kt">A</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="kt">A</span>
<span class="w">  </span><span class="kr">with</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
<p>Below, the module on the right is <strong>not</strong> a valid upgrade of the module
on the left because it changes the variety of <code class="docutils literal notranslate"><span class="pre">A</span></code> from record type to
variant type.</p>
<table border="1" class="colwidths-given diff-block docutils align-default" style="width: 100%">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><div class="first last highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="kr">module</span><span class="w"> </span><span class="nn">M</span><span class="w"> </span><span class="kr">where</span>

<span class="kr">data</span><span class="w"> </span><span class="kt">A</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="kt">A</span>
<span class="w">  </span><span class="kr">with</span>
</pre></div>
</div>
</td>
<td><div class="first last highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="kr">module</span><span class="w"> </span><span class="nn">M</span><span class="w"> </span><span class="kr">where</span>

<span class="kr">data</span><span class="w"> </span><span class="kt">A</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="kt">A</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="kt">B</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
<p>Below, the module on the right is <strong>not</strong> a valid upgrade of the module
on the left because it drops the serializable data type <code class="docutils literal notranslate"><span class="pre">A</span></code>.</p>
<table border="1" class="colwidths-given diff-block docutils align-default" style="width: 100%">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><div class="first last highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="kr">module</span><span class="w"> </span><span class="nn">M</span><span class="w"> </span><span class="kr">where</span>

<span class="kr">data</span><span class="w"> </span><span class="kt">A</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="kt">A</span>
</pre></div>
</div>
</td>
<td><div class="first last highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="kr">module</span><span class="w"> </span><span class="nn">M</span><span class="w"> </span><span class="kr">where</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
<p>Below, the module on the right is <strong>not</strong> a valid upgrade of the module
on the left because although it adds an optional field to the record
type <code class="docutils literal notranslate"><span class="pre">A</span></code>, it also turns <code class="docutils literal notranslate"><span class="pre">A</span></code> into a non-serializable type, which amounts to
deleting <code class="docutils literal notranslate"><span class="pre">A</span></code> from the point of view of the upgrade validity check.</p>
<table border="1" class="colwidths-given diff-block docutils align-default" style="width: 100%">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><div class="first last highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="kr">module</span><span class="w"> </span><span class="nn">M</span><span class="w"> </span><span class="kr">where</span>

<span class="kr">data</span><span class="w"> </span><span class="kt">A</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="kt">A</span>
<span class="w">  </span><span class="kr">with</span>
</pre></div>
</div>
</td>
<td><div class="first last highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="kr">module</span><span class="w"> </span><span class="nn">M</span><span class="w"> </span><span class="kr">where</span>

<span class="kr">data</span><span class="w"> </span><span class="kt">A</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="kt">A</span>
<span class="w">  </span><span class="kr">with</span>
<span class="w">    </span><span class="n">x</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Optional</span><span class="w"> </span><span class="p">(</span><span class="kt">Int</span><span class="w"> </span><span class="ow">-&gt;</span><span class="w"> </span><span class="kt">Int</span><span class="p">)</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="data-types-records">
<h3>Data Types - Records<a class="headerlink" href="#data-types-records" title="Permalink to this headline">¶</a></h3>
<p>The new version of a record may add new optional fields at the end of the field
sequence of the prior version of that record. The types of the fields that the
new record has in common with the prior record must be pairwise valid upgrades
of the original types.</p>
<p>Deleting a field leads to a validation error.</p>
<p>Adding a field in the middle of the field sequence leads to a validation
error.</p>
<p>As a special case of the two points above, renaming a field leads to a
validation error.</p>
<p>Adding a non-optional field at the end of the field sequence leads to a
validation error.</p>
<p id="examples-7"><strong>Examples</strong></p>
<p>Below, the record on the right is a valid upgrade of the module on the
left. It adds an optional field <code class="docutils literal notranslate"><span class="pre">x2</span></code> at the end of the field sequence.</p>
<table border="1" class="colwidths-given diff-block docutils align-default" style="width: 100%">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><div class="first last highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="kr">data</span><span class="w"> </span><span class="kt">T</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="kt">T</span><span class="w"> </span><span class="kr">with</span>
<span class="w">  </span><span class="n">x1</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Int</span>
</pre></div>
</div>
</td>
<td><div class="first last highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="kr">data</span><span class="w"> </span><span class="kt">T</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="kt">T</span><span class="w"> </span><span class="kr">with</span>
<span class="w"> </span><span class="n">x1</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Int</span>
<span class="w"> </span><span class="n">x2</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Optional</span><span class="w"> </span><span class="kt">Text</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
<p>Below, the record on the right is <strong>not</strong> a valid upgrade of the record
on the left because it adds a new field <code class="docutils literal notranslate"><span class="pre">x2</span></code> before <code class="docutils literal notranslate"><span class="pre">x1</span></code> instead of adding
it at the end of the field sequence.</p>
<table border="1" class="colwidths-given diff-block docutils align-default" style="width: 100%">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><div class="first last highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="kr">data</span><span class="w"> </span><span class="kt">T</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="kt">T</span><span class="w"> </span><span class="kr">with</span>
<span class="w">  </span><span class="n">x1</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Int</span>
</pre></div>
</div>
</td>
<td><div class="first last highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="kr">data</span><span class="w"> </span><span class="kt">T</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="kt">T</span><span class="w"> </span><span class="kr">with</span>
<span class="w">  </span><span class="n">x2</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Optional</span><span class="w"> </span><span class="kt">Text</span>
<span class="w">  </span><span class="n">x1</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Int</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
<p>Below, the record on the right is <strong>not</strong> a valid upgrade of the record
on the left because it drops field <code class="docutils literal notranslate"><span class="pre">x2</span></code>.</p>
<table border="1" class="colwidths-given diff-block docutils align-default" style="width: 100%">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><div class="first last highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="kr">data</span><span class="w"> </span><span class="kt">T</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="kt">T</span><span class="w"> </span><span class="kr">with</span>
<span class="w">  </span><span class="n">x1</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Int</span>
<span class="w">  </span><span class="n">x2</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Text</span>
</pre></div>
</div>
</td>
<td><div class="first last highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="kr">data</span><span class="w"> </span><span class="kt">T</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="kt">T</span><span class="w"> </span><span class="kr">with</span>
<span class="w">  </span><span class="n">x1</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Int</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
<p>Below, the record on the right is <strong>not</strong> a valid upgrade of the record
on the left because it changes the type of <code class="docutils literal notranslate"><span class="pre">x1</span></code> from <code class="docutils literal notranslate"><span class="pre">Int</span></code> to <code class="docutils literal notranslate"><span class="pre">Text</span></code>.
<code class="docutils literal notranslate"><span class="pre">Text</span></code> is not a valid upgrade of <code class="docutils literal notranslate"><span class="pre">Int</span></code>.</p>
<table border="1" class="colwidths-given diff-block docutils align-default" style="width: 100%">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><div class="first last highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="kr">data</span><span class="w"> </span><span class="kt">T</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="kt">T</span><span class="w"> </span><span class="kr">with</span>
<span class="w">  </span><span class="n">x1</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Int</span>
</pre></div>
</div>
</td>
<td><div class="first last highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="kr">data</span><span class="w"> </span><span class="kt">T</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="kt">T</span><span class="w"> </span><span class="kr">with</span>
<span class="w">  </span><span class="n">x1</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Text</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="data-types-variants">
<h3>Data Types - Variants<a class="headerlink" href="#data-types-variants" title="Permalink to this headline">¶</a></h3>
<p>The new version of a variant may add new constructors at the end of the
constructor sequence of the old version of that variant. The argument types  of
the constructors that the new variant has in common with the  prior variant must
be pairwise valid upgrades of the original types. This last rule also applies to
constructors whose arguments are unnamed records, in which case the rules about
record upgrade apply.</p>
<p>Adding an argument to a constructor without arguments leads to a validation
error. In particular, adding an optional field to a constructor that previously
had no arguments is not allowed.</p>
<p>Adding a constructor in the middle of the constructor sequence leads to
a validation error.</p>
<p>Changing the order or the name of the constructor sequence leads to a validation
error.</p>
<p>Removing a constructor leads to a validation error.</p>
<p>Enums cannot get upgraded to variants: adding a constructor with an argument at
the end of the constructor sequence of an enum leads to a validation error.</p>
<p id="examples-8"><strong>Examples</strong></p>
<p>Below, the variant on the right is a valid upgrade of the variant on the
left. It adds a new constructor <code class="docutils literal notranslate"><span class="pre">C</span></code> at the end of the constructor
sequence.</p>
<table border="1" class="colwidths-given diff-block docutils align-default" style="width: 100%">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><div class="first last highlight-haskell notranslate"><div class="highlight"><pre><span></span><span class="kr">data</span><span class="w"> </span><span class="kt">T</span><span class="w"> </span><span class="ow">=</span>
<span class="w">  </span><span class="kt">A</span><span class="w"> </span><span class="kt">Int</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="kt">B</span><span class="w"> </span><span class="kt">Text</span>
</pre></div>
</div>
</td>
<td><div class="first last highlight-haskell notranslate"><div class="highlight"><pre><span></span><span class="kr">data</span><span class="w"> </span><span class="kt">T</span><span class="w"> </span><span class="ow">=</span>
<span class="w">  </span><span class="kt">A</span><span class="w"> </span><span class="kt">Int</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="kt">B</span><span class="w"> </span><span class="kt">Text</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="kt">C</span><span class="w"> </span><span class="kt">Bool</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
<p>Below, the variant on the right is a valid upgrade of the variant on the
left. It adds a new optional field to constructor <code class="docutils literal notranslate"><span class="pre">B</span></code>.</p>
<table border="1" class="colwidths-given diff-block docutils align-default" style="width: 100%">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><div class="first last highlight-haskell notranslate"><div class="highlight"><pre><span></span><span class="kr">data</span><span class="w"> </span><span class="kt">T</span><span class="w"> </span><span class="ow">=</span>
<span class="w">  </span><span class="kt">A</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="kt">B</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Int</span><span class="w"> </span><span class="p">}</span>
</pre></div>
</div>
</td>
<td><div class="first last highlight-haskell notranslate"><div class="highlight"><pre><span></span><span class="kr">data</span><span class="w"> </span><span class="kt">T</span><span class="w"> </span><span class="ow">=</span>
<span class="w">  </span><span class="kt">A</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="kt">B</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Int</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Optional</span><span class="w"> </span><span class="kt">Text</span><span class="w"> </span><span class="p">}</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
<p>Below, the variant on the right is <strong>not</strong> a valid upgrade of the
variant on the left because it adds a new constructor <code class="docutils literal notranslate"><span class="pre">C</span></code> before <code class="docutils literal notranslate"><span class="pre">B</span></code> instead
of adding it at the end of the constructor sequence.</p>
<table border="1" class="colwidths-given diff-block docutils align-default" style="width: 100%">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><div class="first last highlight-haskell notranslate"><div class="highlight"><pre><span></span><span class="kr">data</span><span class="w"> </span><span class="kt">T</span><span class="w"> </span><span class="ow">=</span>
<span class="w">  </span><span class="kt">A</span><span class="w"> </span><span class="kt">Int</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="kt">B</span><span class="w"> </span><span class="kt">Text</span>
</pre></div>
</div>
</td>
<td><div class="first last highlight-haskell notranslate"><div class="highlight"><pre><span></span><span class="kr">data</span><span class="w"> </span><span class="kt">T</span><span class="w"> </span><span class="ow">=</span>
<span class="w">  </span><span class="kt">A</span><span class="w"> </span><span class="kt">Int</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="kt">C</span><span class="w"> </span><span class="kt">Bool</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="kt">B</span><span class="w"> </span><span class="kt">Text</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
<p>Below, the variant on the right is <strong>not</strong> a valid upgrade of the
variant on the left because it changes the order of its constructors.</p>
<table border="1" class="colwidths-given diff-block docutils align-default" style="width: 100%">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><div class="first last highlight-haskell notranslate"><div class="highlight"><pre><span></span><span class="kr">data</span><span class="w"> </span><span class="kt">T</span><span class="w"> </span><span class="ow">=</span>
<span class="w">  </span><span class="kt">A</span><span class="w"> </span><span class="kt">Int</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="kt">B</span><span class="w"> </span><span class="kt">Text</span>
</pre></div>
</div>
</td>
<td><div class="first last highlight-haskell notranslate"><div class="highlight"><pre><span></span><span class="kr">data</span><span class="w"> </span><span class="kt">T</span><span class="w"> </span><span class="ow">=</span>
<span class="w">  </span><span class="kt">B</span><span class="w"> </span><span class="kt">Text</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="kt">A</span><span class="w"> </span><span class="kt">Int</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
<p>Below, the variant on the right is <strong>not</strong> a valid upgrade of the
variant on the left because it drops constructor <code class="docutils literal notranslate"><span class="pre">B</span></code>.</p>
<table border="1" class="colwidths-given diff-block docutils align-default" style="width: 100%">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><div class="first last highlight-haskell notranslate"><div class="highlight"><pre><span></span><span class="kr">data</span><span class="w"> </span><span class="kt">T</span><span class="w"> </span><span class="ow">=</span>
<span class="w">  </span><span class="kt">A</span><span class="w"> </span><span class="kt">Int</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="kt">B</span><span class="w"> </span><span class="kt">Text</span>
</pre></div>
</div>
</td>
<td><div class="first last highlight-haskell notranslate"><div class="highlight"><pre><span></span><span class="kr">data</span><span class="w"> </span><span class="kt">T</span><span class="w"> </span><span class="ow">=</span>
<span class="w">  </span><span class="kt">A</span><span class="w"> </span><span class="kt">Int</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
<p>Below, the variant on the right is <strong>not</strong> a valid upgrade of the
variant on the left because it changes the type of <code class="docutils literal notranslate"><span class="pre">B</span></code>’s argument from
<code class="docutils literal notranslate"><span class="pre">Text</span></code> to <code class="docutils literal notranslate"><span class="pre">Bool</span></code>. <code class="docutils literal notranslate"><span class="pre">Bool</span></code> is not a valid upgrade of <code class="docutils literal notranslate"><span class="pre">Text</span></code>.</p>
<table border="1" class="colwidths-given diff-block docutils align-default" style="width: 100%">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><div class="first last highlight-haskell notranslate"><div class="highlight"><pre><span></span><span class="kr">data</span><span class="w"> </span><span class="kt">T</span><span class="w"> </span><span class="ow">=</span>
<span class="w">  </span><span class="kt">A</span><span class="w"> </span><span class="kt">Int</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="kt">B</span><span class="w"> </span><span class="kt">Text</span>
</pre></div>
</div>
</td>
<td><div class="first last highlight-haskell notranslate"><div class="highlight"><pre><span></span><span class="kr">data</span><span class="w"> </span><span class="kt">T</span><span class="w"> </span><span class="ow">=</span>
<span class="w">  </span><span class="kt">A</span><span class="w"> </span><span class="kt">Int</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="kt">B</span><span class="w"> </span><span class="kt">Bool</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
<p>Below, the variant on the right is <strong>not</strong> a valid upgrade of the
variant on the left because it adds an argument to constructor <code class="docutils literal notranslate"><span class="pre">B</span></code> which
didn’t have one before.</p>
<table border="1" class="colwidths-given diff-block docutils align-default" style="width: 100%">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><div class="first last highlight-haskell notranslate"><div class="highlight"><pre><span></span><span class="kr">data</span><span class="w"> </span><span class="kt">T</span><span class="w"> </span><span class="ow">=</span>
<span class="w">  </span><span class="kt">A</span><span class="w"> </span><span class="kt">Int</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="kt">B</span>
</pre></div>
</div>
</td>
<td><div class="first last highlight-haskell notranslate"><div class="highlight"><pre><span></span><span class="kr">data</span><span class="w"> </span><span class="kt">T</span><span class="w"> </span><span class="ow">=</span>
<span class="w">  </span><span class="kt">A</span><span class="w"> </span><span class="kt">Int</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="kt">B</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Optional</span><span class="w"> </span><span class="kt">Text</span><span class="w"> </span><span class="p">}</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
<p>Below, the variant on the right is <strong>not</strong> a valid upgrade of the
enum on the left. Enums cannot get upgraded to variants and <code class="docutils literal notranslate"><span class="pre">T</span></code> as defined
on the left is an enum because none of its constructors have arguments.</p>
<table border="1" class="colwidths-given diff-block docutils align-default" style="width: 100%">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><div class="first last highlight-haskell notranslate"><div class="highlight"><pre><span></span><span class="kr">data</span><span class="w"> </span><span class="kt">T</span><span class="w"> </span><span class="ow">=</span>
<span class="w">  </span><span class="kt">A</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="kt">B</span>
</pre></div>
</div>
</td>
<td><div class="first last highlight-haskell notranslate"><div class="highlight"><pre><span></span><span class="kr">data</span><span class="w"> </span><span class="kt">T</span><span class="w"> </span><span class="ow">=</span>
<span class="w">  </span><span class="kt">A</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="kt">B</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="kt">C</span><span class="w"> </span><span class="kt">Int</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="data-types-enums">
<h3>Data Types - Enums<a class="headerlink" href="#data-types-enums" title="Permalink to this headline">¶</a></h3>
<p>For the purpose of upgrade validation, enums can be treated as a special
case of variants. The rules of <a class="reference external" href="#data-types---variants">the section on
variants</a> apply, only without constructor
arguments.</p>
</div>
<div class="section" id="data-types-type-references">
<h3>Data Types - Type References<a class="headerlink" href="#data-types-type-references" title="Permalink to this headline">¶</a></h3>
<p>A type reference is an identifier that resolves to a type. For instance,
consider the following module definitions, from two different packages:</p>
<div class="highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="c1">-- In package q</span>
<span class="kr">module</span><span class="w"> </span><span class="nn">Dep</span><span class="w"> </span><span class="kr">where</span>

<span class="kr">data</span><span class="w"> </span><span class="kt">U</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="kt">U</span><span class="w"> </span><span class="kr">with</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Int</span>
<span class="kr">type</span><span class="w"> </span><span class="kt">A</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="kt">U</span>
</pre></div>
</div>
<div class="highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="c1">-- In package p</span>
<span class="kr">module</span><span class="w"> </span><span class="nn">M</span><span class="w"> </span><span class="kr">where</span>
<span class="kr">import</span><span class="w"> </span><span class="k">qualified</span><span class="w"> </span><span class="nn">Dep</span>

<span class="kr">data</span><span class="w"> </span><span class="kt">T</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="kt">T</span><span class="w"> </span><span class="kr">with</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Dep</span><span class="o">.</span><span class="kt">A</span>
</pre></div>
</div>
<p>In the definition of <code class="docutils literal notranslate"><span class="pre">T</span></code>, <code class="docutils literal notranslate"><span class="pre">Dep.A</span></code> is a type reference that resolves to the
type with qualified name <code class="docutils literal notranslate"><span class="pre">Dep.U</span></code> in package <code class="docutils literal notranslate"><span class="pre">q</span></code>.</p>
<p>A reference <em>r2</em> to a data type upgrades a reference <em>r1</em> to a data type
if and only if:</p>
<ul class="simple">
<li><em>r2</em> resolves to a type <em>t2</em> with qualified name <em>q2</em> in package <em>p2;</em></li>
<li><em>r1</em> resolves to a type <em>t1</em> with qualified name <em>q1</em> in package <em>p1;</em></li>
<li>The qualified names <em>q2</em> and <em>q1</em> are the same;</li>
<li>Either the LF versions or <em>p1</em> and <em>p2</em> both support upgrades and
package <em>p2</em> is a valid upgrade of package <em>p1</em>, or <em>p2</em> and <em>p1</em> are the
exact same package.</li>
</ul>
<p>It is worth noting that even when <em>t2</em> upgrades <em>t1</em>, <em>r2</em> only upgrades
<em>r1</em> provided that package <em>p2</em> is a valid upgrade of package <em>p1</em> as a
whole.</p>
<p id="examples-9"><strong>Examples</strong></p>
<p>In these examples we assume the existence of packages <code class="docutils literal notranslate"><span class="pre">q-1.0.0</span></code> and
<code class="docutils literal notranslate"><span class="pre">q-2.0.0</span></code> with LF version 1.17, and that the latter is a valid upgrade of
the former.</p>
<table border="1" class="colwidths-given diff-block docutils align-default" style="width: 100%">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>In <code class="docutils literal notranslate"><span class="pre">q-1.0.0</span></code>:</td>
<td>In <code class="docutils literal notranslate"><span class="pre">q-2.0.0</span></code>:</td>
</tr>
<tr class="row-even"><td><div class="first last highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="kr">module</span><span class="w"> </span><span class="nn">Dep</span><span class="w"> </span><span class="kr">where</span>

<span class="kr">data</span><span class="w"> </span><span class="kt">U</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="kt">C1</span>
<span class="kr">data</span><span class="w"> </span><span class="kt">V</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="kt">V</span>
</pre></div>
</div>
</td>
<td><div class="first last highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="kr">module</span><span class="w"> </span><span class="nn">Dep</span><span class="w"> </span><span class="kr">where</span>

<span class="kr">data</span><span class="w"> </span><span class="kt">U</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="kt">C1</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="kt">C2</span>
<span class="kr">data</span><span class="w"> </span><span class="kt">V</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="kt">V</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
<p>Then below, the module on the right is a valid upgrade of the module on
the left.</p>
<table border="1" class="colwidths-given diff-block docutils align-default" style="width: 100%">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><div class="first last highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="kr">module</span><span class="w"> </span><span class="nn">Main</span><span class="w"> </span><span class="kr">where</span>

<span class="c1">-- imported from q-1.0.0</span>
<span class="kr">import</span><span class="w"> </span><span class="k">qualified</span><span class="w"> </span><span class="nn">Dep</span>

<span class="kr">data</span><span class="w"> </span><span class="kt">T</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="kt">T</span><span class="w"> </span><span class="kt">Dep</span><span class="o">.</span><span class="kt">U</span>
</pre></div>
</div>
</td>
<td><div class="first last highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="kr">module</span><span class="w"> </span><span class="nn">Main</span><span class="w"> </span><span class="kr">where</span>

<span class="c1">-- imported from q-2.0.0</span>
<span class="kr">import</span><span class="w"> </span><span class="k">qualified</span><span class="w"> </span><span class="nn">Dep</span>

<span class="kr">data</span><span class="w"> </span><span class="kt">T</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="kt">T</span><span class="w"> </span><span class="kt">Dep</span><span class="o">.</span><span class="kt">U</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
<p>However below, the module on the right is <strong>not</strong> a valid upgrade of the
module on the left because <code class="docutils literal notranslate"><span class="pre">Dep.V</span></code> on the right belongs to package <code class="docutils literal notranslate"><span class="pre">q-1.0.0</span></code>
which is not a valid upgrade of package <code class="docutils literal notranslate"><span class="pre">p-2.0.0</span></code>, even though the two
definitions of <code class="docutils literal notranslate"><span class="pre">V</span></code> are the same.</p>
<table border="1" class="colwidths-given diff-block docutils align-default" style="width: 100%">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><div class="first last highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="kr">module</span><span class="w"> </span><span class="nn">Main</span><span class="w"> </span><span class="kr">where</span>

<span class="c1">-- imported from q-2.0.0</span>
<span class="kr">import</span><span class="w"> </span><span class="k">qualified</span><span class="w"> </span><span class="nn">Dep</span>

<span class="kr">data</span><span class="w"> </span><span class="kt">T</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="kt">T</span><span class="w"> </span><span class="kt">Dep</span><span class="o">.</span><span class="kt">V</span>
</pre></div>
</div>
</td>
<td><div class="first last highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="kr">module</span><span class="w"> </span><span class="nn">Main</span><span class="w"> </span><span class="kr">where</span>

<span class="c1">-- imported from q-1.0.0</span>
<span class="kr">import</span><span class="w"> </span><span class="k">qualified</span><span class="w"> </span><span class="nn">Dep</span>

<span class="kr">data</span><span class="w"> </span><span class="kt">T</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="kt">T</span><span class="w"> </span><span class="kt">Dep</span><span class="o">.</span><span class="kt">V</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
<p>Suppose now that q-1.0.0 and q-2.0.0 are both compiled to LF version
1.15 (which does not support upgrades). Then below, the module on the
right is <strong>not</strong> a valid upgrade of the module on the left because the
references to U on each side resolve to packages with different IDs.</p>
<table border="1" class="colwidths-given diff-block docutils align-default" style="width: 100%">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><div class="first last highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="kr">module</span><span class="w"> </span><span class="nn">Main</span><span class="w"> </span><span class="kr">where</span>

<span class="c1">-- imported from q-1.0.0</span>
<span class="kr">import</span><span class="w"> </span><span class="k">qualified</span><span class="w"> </span><span class="nn">Dep</span>

<span class="kr">data</span><span class="w"> </span><span class="kt">T</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="kt">T</span><span class="w"> </span><span class="kt">Dep</span><span class="o">.</span><span class="kt">U</span>
</pre></div>
</div>
</td>
<td><div class="first last highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="kr">module</span><span class="w"> </span><span class="nn">Main</span><span class="w"> </span><span class="kr">where</span>

<span class="c1">-- imported from q-2.0.0</span>
<span class="kr">import</span><span class="w"> </span><span class="k">qualified</span><span class="w"> </span><span class="nn">Dep</span>

<span class="kr">data</span><span class="w"> </span><span class="kt">T</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="kt">T</span><span class="w"> </span><span class="kt">Dep</span><span class="o">.</span><span class="kt">U</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="data-types-builtin-types">
<h3>Data Types - Builtin Types<a class="headerlink" href="#data-types-builtin-types" title="Permalink to this headline">¶</a></h3>
<p>Builtin scalar types like <code class="docutils literal notranslate"><span class="pre">Int</span></code>, <code class="docutils literal notranslate"><span class="pre">Text</span></code>, <code class="docutils literal notranslate"><span class="pre">Party</span></code>, etc. only upgrade
themselves. In other words, it is never valid to replace them with another
type.</p>
</div>
<div class="section" id="data-types-parameterized-data-types">
<h3>Data Types - Parameterized Data Types<a class="headerlink" href="#data-types-parameterized-data-types" title="Permalink to this headline">¶</a></h3>
<p>The upgrade validation for parameterized data types follows the same
rules as non-parameterized data types, but also compares type variables. Type
variables may be renamed.</p>
<p><strong>Example</strong></p>
<p>Below, the parameterized data type on the right is a valid upgrade of
the parameterized data type on the left. As is valid with any record
type, it adds an optional field.</p>
<table border="1" class="colwidths-given diff-block docutils align-default" style="width: 100%">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><div class="first last highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="kr">data</span><span class="w"> </span><span class="kt">Tree</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="ow">=</span>
<span class="w">  </span><span class="kt">Tree</span><span class="w"> </span><span class="kr">with</span>
<span class="w">    </span><span class="n">label</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="n">a</span>
<span class="w">    </span><span class="n">children</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="p">[</span><span class="kt">Tree</span><span class="w"> </span><span class="n">a</span><span class="p">]</span>
</pre></div>
</div>
</td>
<td><div class="first last highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="kr">data</span><span class="w"> </span><span class="kt">Tree</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="ow">=</span>
<span class="w">  </span><span class="kt">Tree</span><span class="w"> </span><span class="kr">with</span>
<span class="w">    </span><span class="n">label</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="n">b</span>
<span class="w">    </span><span class="n">children</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="p">[</span><span class="kt">Tree</span><span class="w"> </span><span class="n">b</span><span class="p">]</span>
<span class="w">    </span><span class="n">cachedSize</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Optional</span><span class="w"> </span><span class="kt">Int</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="data-types-applied-parameterized-data-types">
<h3>Data Types - Applied Parameterized Data Types<a class="headerlink" href="#data-types-applied-parameterized-data-types" title="Permalink to this headline">¶</a></h3>
<p>A type constructor application <code class="docutils literal notranslate"><span class="pre">T'</span> <span class="pre">U1'</span> <span class="pre">..</span> <span class="pre">Un'</span></code> upgrades
<code class="docutils literal notranslate"><span class="pre">T</span> <span class="pre">U1</span> <span class="pre">..</span> <span class="pre">Un</span></code> if and only if <code class="docutils literal notranslate"><span class="pre">T'</span></code> upgrades <code class="docutils literal notranslate"><span class="pre">T</span></code> and
each <code class="docutils literal notranslate"><span class="pre">Ui'</span></code> upgrades the corresponding <code class="docutils literal notranslate"><span class="pre">Ui</span></code>.</p>
<p><strong>Examples</strong></p>
<p>Below, the module on the right is a valid upgrade of the module on the left.
The record type <code class="docutils literal notranslate"><span class="pre">T</span></code> on the right upgrades the record type <code class="docutils literal notranslate"><span class="pre">T</span></code> on the left.
As a result, the type constructor application <code class="docutils literal notranslate"><span class="pre">List</span> <span class="pre">T</span></code> on the right upgrades
the type constructor application <code class="docutils literal notranslate"><span class="pre">List</span> <span class="pre">T</span></code> on the left. Same goes for <code class="docutils literal notranslate"><span class="pre">List</span></code>
and <code class="docutils literal notranslate"><span class="pre">Optional</span></code>.</p>
<table border="1" class="colwidths-given diff-block docutils align-default" style="width: 100%">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><div class="first last highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="kr">module</span><span class="w"> </span><span class="nn">M</span><span class="w"> </span><span class="kr">where</span>

<span class="kr">data</span><span class="w"> </span><span class="kt">T</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="kt">T</span><span class="w"> </span><span class="p">{}</span>

<span class="kr">data</span><span class="w"> </span><span class="kt">Demo</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="kt">Demo</span><span class="w"> </span><span class="kr">with</span>
<span class="w">  </span><span class="n">field1</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">List</span><span class="w"> </span><span class="kt">T</span>
<span class="w">  </span><span class="n">field2</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Map</span><span class="w"> </span><span class="kt">T</span><span class="w"> </span><span class="kt">T</span>
<span class="w">  </span><span class="n">field3</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Optional</span><span class="w"> </span><span class="kt">T</span>
</pre></div>
</div>
</td>
<td><div class="first last highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="kr">module</span><span class="w"> </span><span class="nn">M</span><span class="w"> </span><span class="kr">where</span>

<span class="kr">data</span><span class="w"> </span><span class="kt">T</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="kt">T</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Optional</span><span class="w"> </span><span class="kt">Int</span><span class="w"> </span><span class="p">}</span>

<span class="kr">data</span><span class="w"> </span><span class="kt">Demo</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="kt">Demo</span><span class="w"> </span><span class="kr">with</span>
<span class="w">  </span><span class="n">field1</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">List</span><span class="w"> </span><span class="kt">T</span>
<span class="w">  </span><span class="n">field2</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Map</span><span class="w"> </span><span class="kt">T</span><span class="w"> </span><span class="kt">T</span>
<span class="w">  </span><span class="n">field3</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Optional</span><span class="w"> </span><span class="kt">T</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
<p>Below, the module on the right is a valid upgrade of the module on the left.
The parameterized type <code class="docutils literal notranslate"><span class="pre">C</span></code> on the right upgrades the parameterized type <code class="docutils literal notranslate"><span class="pre">C</span></code> on the left.
As a result, the type constructor application <code class="docutils literal notranslate"><span class="pre">C</span> <span class="pre">Int</span></code> on the right upgrades
the type constructor application <code class="docutils literal notranslate"><span class="pre">C</span> <span class="pre">Int</span></code> on the left.</p>
<table border="1" class="colwidths-given diff-block docutils align-default" style="width: 100%">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><div class="first last highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="kr">module</span><span class="w"> </span><span class="nn">M</span><span class="w"> </span><span class="kr">where</span>

<span class="kr">data</span><span class="w"> </span><span class="kt">C</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="kt">C</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="p">}</span>

<span class="kr">data</span><span class="w"> </span><span class="kt">Demo</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="kt">Demo</span><span class="w"> </span><span class="kr">with</span>
<span class="w">  </span><span class="n">field1</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">C</span><span class="w"> </span><span class="kt">T</span>
</pre></div>
</div>
</td>
<td><div class="first last highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="kr">module</span><span class="w"> </span><span class="nn">M</span><span class="w"> </span><span class="kr">where</span>

<span class="kr">data</span><span class="w"> </span><span class="kt">C</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="kt">C</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Optional</span><span class="w"> </span><span class="kt">Int</span><span class="w"> </span><span class="p">}</span>

<span class="kr">data</span><span class="w"> </span><span class="kt">Demo</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="kt">Demo</span><span class="w"> </span><span class="kr">with</span>
<span class="w">  </span><span class="n">field1</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">C</span><span class="w"> </span><span class="kt">T</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="interface-and-exception-definitions">
<h3>Interface and Exception Definitions<a class="headerlink" href="#interface-and-exception-definitions" title="Permalink to this headline">¶</a></h3>
<p>Neither interface definitions nor exception definitions can be upgraded. We
strongly discourage uploading a package that defines interfaces or exceptions
alongside templates, as these templates cannot benefit from smart contract
upgrade in the future. Instead, we recommend declaring interfaces and exceptions
in a package of their own that defines no template.</p>
</div>
<div class="section" id="interface-instances">
<h3>Interface Instances<a class="headerlink" href="#interface-instances" title="Permalink to this headline">¶</a></h3>
<p>Interface instances may be upgraded. Note however that the type signature of
their methods and view cannot change between two versions of an instance since
they are fixed by the interface definition, which is non-upgradable. Hence,
the only thing that can change between two versions of an instance is the
bodies of its methods and view.</p>
<p>Adding or deleting an interface leads to a validation error.</p>
<p><strong>Examples</strong></p>
<p>Assume an interface <code class="docutils literal notranslate"><span class="pre">I</span></code> with view type <code class="docutils literal notranslate"><span class="pre">IView</span></code> and a method <code class="docutils literal notranslate"><span class="pre">m</span></code>.</p>
<div class="highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="kr">data</span><span class="w"> </span><span class="kt">IView</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="kt">IView</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Int</span><span class="w"> </span><span class="p">}</span>

<span class="kr">interface</span><span class="w"> </span><span class="kt">I</span><span class="w"> </span><span class="kr">where</span>
<span class="w">  </span><span class="kr">viewtype</span><span class="w"> </span><span class="kt">IView</span>
</pre></div>
</div>
<p>Then, below, the instance of <code class="docutils literal notranslate"><span class="pre">I</span></code> for template <code class="docutils literal notranslate"><span class="pre">T</span></code> on the right is a valid
upgrade of the instance on the left. It changes the <code class="docutils literal notranslate"><span class="pre">view</span></code> expression and the
body of method <code class="docutils literal notranslate"><span class="pre">m</span></code>.</p>
<table border="1" class="colwidths-given diff-block docutils align-default" style="width: 100%">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><div class="first last highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="kr">template</span><span class="w"> </span><span class="kt">T</span>
<span class="w">  </span><span class="kr">with</span>
<span class="w">    </span><span class="n">p</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Party</span>
<span class="w">    </span><span class="n">i</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Int</span>
<span class="w">  </span><span class="kr">where</span>
<span class="w">    </span><span class="kr">signatory</span><span class="w"> </span><span class="n">p</span>

<span class="w">    </span><span class="kr">interface</span><span class="w"> </span><span class="kr">instance</span><span class="w"> </span><span class="kt">I</span><span class="w"> </span><span class="kr">for</span><span class="w"> </span><span class="kt">T</span><span class="w"> </span><span class="kr">where</span>
<span class="w">      </span><span class="n">view</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="kt">IView</span><span class="w"> </span><span class="n">i</span>
<span class="w">      </span><span class="n">m</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="n">i</span>
</pre></div>
</div>
</td>
<td><div class="first last highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="kr">template</span><span class="w"> </span><span class="kt">T</span>
<span class="w">  </span><span class="kr">with</span>
<span class="w">    </span><span class="n">p</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Party</span>
<span class="w">    </span><span class="n">i</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Int</span>
<span class="w">    </span><span class="n">j</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Optional</span><span class="w"> </span><span class="kt">Int</span>
<span class="w">  </span><span class="kr">where</span>
<span class="w">    </span><span class="kr">signatory</span><span class="w"> </span><span class="n">p</span>

<span class="w">    </span><span class="kr">interface</span><span class="w"> </span><span class="kr">instance</span><span class="w"> </span><span class="kt">I</span><span class="w"> </span><span class="kr">for</span><span class="w"> </span><span class="kt">T</span><span class="w"> </span><span class="kr">where</span>
<span class="w">      </span><span class="n">view</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="kt">IView</span><span class="w"> </span><span class="p">(</span><span class="n">fromOptional</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="n">j</span><span class="p">)</span>
<span class="w">      </span><span class="n">m</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="n">fromOptional</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="n">j</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
<p>Below, the template on the right is <strong>not</strong> a valid upgrade of the
template on the left because it removes the instance of <code class="docutils literal notranslate"><span class="pre">I</span></code> for template
<code class="docutils literal notranslate"><span class="pre">T2</span></code>.</p>
<table border="1" class="colwidths-given diff-block docutils align-default" style="width: 100%">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><div class="first last highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="kr">template</span><span class="w"> </span><span class="kt">T2</span>
<span class="w">  </span><span class="kr">with</span>
<span class="w">    </span><span class="n">p</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Party</span>
<span class="w">    </span><span class="n">i</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Int</span>
<span class="w">  </span><span class="kr">where</span>
<span class="w">    </span><span class="kr">signatory</span><span class="w"> </span><span class="n">p</span>

<span class="w">    </span><span class="kr">interface</span><span class="w"> </span><span class="kr">instance</span><span class="w"> </span><span class="kt">I</span><span class="w"> </span><span class="kr">for</span><span class="w"> </span><span class="kt">T2</span><span class="w"> </span><span class="kr">where</span>
<span class="w">      </span><span class="n">view</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="kt">IView</span><span class="w"> </span><span class="n">i</span>
<span class="w">      </span><span class="n">m</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="n">i</span>
</pre></div>
</div>
</td>
<td><div class="first last highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="kr">template</span><span class="w"> </span><span class="kt">T2</span>
<span class="w">  </span><span class="kr">with</span>
<span class="w">    </span><span class="n">p</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Party</span>
<span class="w">    </span><span class="n">i</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Int</span>
<span class="w">  </span><span class="kr">where</span>
<span class="w">    </span><span class="kr">signatory</span><span class="w"> </span><span class="n">p</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
<p>Below, the template on the right is <strong>not</strong> a valid upgrade of the
template on the left because it adds a new instance of <code class="docutils literal notranslate"><span class="pre">I</span></code> for template
<code class="docutils literal notranslate"><span class="pre">T3</span></code>.</p>
<table border="1" class="colwidths-given diff-block docutils align-default" style="width: 100%">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><div class="first last highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="kr">template</span><span class="w"> </span><span class="kt">T3</span>
<span class="w">  </span><span class="kr">with</span>
<span class="w">    </span><span class="n">p</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Party</span>
<span class="w">    </span><span class="n">i</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Int</span>
<span class="w">  </span><span class="kr">where</span>
<span class="w">    </span><span class="kr">signatory</span><span class="w"> </span><span class="n">p</span>
</pre></div>
</div>
</td>
<td><div class="first last highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="kr">template</span><span class="w"> </span><span class="kt">T3</span>
<span class="w">  </span><span class="kr">with</span>
<span class="w">    </span><span class="n">p</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Party</span>
<span class="w">    </span><span class="n">i</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Int</span>
<span class="w">  </span><span class="kr">where</span>
<span class="w">    </span><span class="kr">signatory</span><span class="w"> </span><span class="n">p</span>

<span class="w">    </span><span class="kr">interface</span><span class="w"> </span><span class="kr">instance</span><span class="w"> </span><span class="kt">I</span><span class="w"> </span><span class="kr">for</span><span class="w"> </span><span class="kt">T3</span><span class="w"> </span><span class="kr">where</span>
<span class="w">      </span><span class="n">view</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="kt">IView</span><span class="w"> </span><span class="n">i</span>
<span class="w">      </span><span class="n">m</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="n">i</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="data-transformation-runtime-semantics">
<h2>Data Transformation: Runtime Semantics<a class="headerlink" href="#data-transformation-runtime-semantics" title="Permalink to this headline">¶</a></h2>
<p>A template version is selected whenever a contract is fetched, a choice is exercised, or an interface value is
converted to a template value, according to a set
of rules detailed below. We call this template the target template.</p>
<p>The contract is then transformed into a value that fits the type of
the target template. Then, its metadata (signatories, stakeholders, key,
maintainers) is recomputed using the code of the target template and compared
against the existing metadata stored on the ledger: it is not allowed to change.
The ensure clause of the contract is also re-evaluated: it must evaluate to
<code class="docutils literal notranslate"><span class="pre">True</span></code>.</p>
<p>In addition, when a choice is exercised, its arguments are transformed into
values that fit the type signature of the choice in the target template.  The
result of the exercise is then possibly transformed back to some other target
type by the client (e.g. the generated java client code).</p>
<p>Below, we detail the rules governing target template selection, then explain how
transformations are performed, and finally detail the rules of metadata
re-computation.</p>
<div class="section" id="static-target-template-selection">
<h3>Static Target Template Selection<a class="headerlink" href="#static-target-template-selection" title="Permalink to this headline">¶</a></h3>
<p>In a non-interface fetch or exercise triggered by the body of a choice, the
target template is determined by the dependencies of the package that defines
the choice. In other words, it is statically known.</p>
<p>Interface fetches and exercises, on the other hand, are subject to dynamic target
template selection, as detailed in <a class="reference internal" href="#dynamic-target-template-selection"><span class="std std-ref">the next
section</span></a>. However, operations acting on
interface <em>values</em> — as opposed to IDs — are static. Their mode of operation is
detailed below.</p>
<p>Daml contracts are represented by one of two sorts of values at runtime:
template values or interface values.</p>
<ul>
<li><p class="first">Template values are those whose concrete template type is statically
known. They are obtained by directly constructing a template record, or by a
call to <code class="docutils literal notranslate"><span class="pre">fetch</span></code>. Their runtime representation is a simple record.</p>
</li>
<li><p class="first">Interface values are those whose concrete template type is not fully
statically known, aside from the fact that it implements a given interface.
They are obtained by applying <code class="docutils literal notranslate"><span class="pre">toInterface</span></code> to a template value.
At runtime, they are represented by a pair consisting of:</p>
<blockquote>
<div><ul class="simple">
<li>a record: the contract;</li>
<li>a template type: the runtime type of that record.</li>
</ul>
</div></blockquote>
<p>For instance, if <code class="docutils literal notranslate"><span class="pre">c</span></code> is a contract of type <code class="docutils literal notranslate"><span class="pre">T</span></code> and <code class="docutils literal notranslate"><span class="pre">T</span></code> implements the
interface <code class="docutils literal notranslate"><span class="pre">I</span></code>, then <code class="docutils literal notranslate"><span class="pre">toInterface</span> <span class="pre">c</span></code> evaluates to the pair <code class="docutils literal notranslate"><span class="pre">(c,</span> <span class="pre">T)</span></code>.</p>
<p>Note that the type of interface values is opaque: while it is useful to
conceptualize interface values as pairs for defining the runtime semantics of
the language, their actual implementation may vary and is not exposed to the
user.</p>
</li>
</ul>
<p>Let us assume an interface value <code class="docutils literal notranslate"><span class="pre">iv</span></code> = <code class="docutils literal notranslate"><span class="pre">(c,</span> <span class="pre">T)</span></code>. Then
<code class="docutils literal notranslate"><span class="pre">fromInterface</span> <span class="pre">&#64;U</span> <span class="pre">iv</span></code> evaluates as follow.</p>
<blockquote>
<div><ul class="simple">
<li>If <code class="docutils literal notranslate"><span class="pre">U</span></code> upgrades <code class="docutils literal notranslate"><span class="pre">T</span></code>, then it evaluates to <code class="docutils literal notranslate"><span class="pre">Some</span> <span class="pre">c'</span></code> where <code class="docutils literal notranslate"><span class="pre">c'</span></code> is the
result of transforming <code class="docutils literal notranslate"><span class="pre">c</span></code> into a value of type <code class="docutils literal notranslate"><span class="pre">U</span></code>.</li>
<li>Otherwise, it evaluates to <code class="docutils literal notranslate"><span class="pre">None</span></code>.</li>
</ul>
</div></blockquote>
<p>Let us assume an interface value <code class="docutils literal notranslate"><span class="pre">iv</span></code> = <code class="docutils literal notranslate"><span class="pre">(c,</span> <span class="pre">T)</span></code> and an interface type
<code class="docutils literal notranslate"><span class="pre">I</span></code>. Then <code class="docutils literal notranslate"><span class="pre">create</span> <span class="pre">&#64;I</span> <span class="pre">iv</span></code> evaluates as follow.</p>
<blockquote>
<div><ul class="simple">
<li>If <code class="docutils literal notranslate"><span class="pre">T</span></code> does not implement <code class="docutils literal notranslate"><span class="pre">I</span></code> then an error is thrown.</li>
<li>Otherwise <code class="docutils literal notranslate"><span class="pre">create</span> <span class="pre">&#64;T</span> <span class="pre">c</span></code> is evaluated.</li>
</ul>
</div></blockquote>
<p><strong>Example 1</strong></p>
<p>Assume two versions of a package called dep, defining a template U and its
upgrade.</p>
<table border="1" class="colwidths-given diff-block docutils align-default" style="width: 100%">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>In <code class="docutils literal notranslate"><span class="pre">dep-1.0.0</span></code>:</td>
<td>In <code class="docutils literal notranslate"><span class="pre">dep-2.0.0</span></code>:</td>
</tr>
<tr class="row-even"><td><div class="first last highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="kr">module</span><span class="w"> </span><span class="nn">Dep</span><span class="w"> </span><span class="kr">where</span>

<span class="kr">template</span><span class="w"> </span><span class="kt">U</span>
<span class="w">  </span><span class="kr">with</span>
<span class="w">    </span><span class="n">p</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Party</span>
<span class="w">  </span><span class="kr">where</span>
<span class="w">    </span><span class="kr">signatory</span><span class="w"> </span><span class="n">p</span>
</pre></div>
</div>
</td>
<td><div class="first last highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="kr">module</span><span class="w"> </span><span class="nn">Dep</span><span class="w"> </span><span class="kr">where</span>

<span class="kr">template</span><span class="w"> </span><span class="kt">U</span>
<span class="w">  </span><span class="kr">with</span>
<span class="w">    </span><span class="n">p</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Party</span>
<span class="w">    </span><span class="n">t</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Optional</span><span class="w"> </span><span class="kt">Text</span>
<span class="w">  </span><span class="kr">where</span>
<span class="w">    </span><span class="kr">signatory</span><span class="w"> </span><span class="n">p</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
<p>Assume then some package <code class="docutils literal notranslate"><span class="pre">q</span></code> which depends on version <code class="docutils literal notranslate"><span class="pre">1.0.0</span></code> of <code class="docutils literal notranslate"><span class="pre">dep</span></code>.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="p p-Indicator">[</span><span class="nv">...</span><span class="p p-Indicator">]</span>
<span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">q</span>
<span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1.0.0</span>
<span class="nt">data-dependencies</span><span class="p">:</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">dep-1.0.0.dar</span>
</pre></div>
</div>
<p>Package <code class="docutils literal notranslate"><span class="pre">q</span></code> defines a template <code class="docutils literal notranslate"><span class="pre">S</span></code> with a choice that fetches a contract of
type <code class="docutils literal notranslate"><span class="pre">U</span></code>.</p>
<div class="highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="kr">import</span><span class="w"> </span><span class="k">qualified</span><span class="w"> </span><span class="nn">Dep</span>

<span class="kr">template</span><span class="w"> </span><span class="kt">S</span>
<span class="w">  </span><span class="kr">with</span>
<span class="w">    </span><span class="n">p</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Party</span>
<span class="w">  </span><span class="kr">where</span>
<span class="w">    </span><span class="kr">signatory</span><span class="w"> </span><span class="n">p</span>

<span class="w">    </span><span class="kr">choice</span><span class="w"> </span><span class="kt">GetU</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Dep</span><span class="o">.</span><span class="kt">U</span>
<span class="w">      </span><span class="kr">with</span>
<span class="w">        </span><span class="n">cid</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">ContractId</span><span class="w"> </span><span class="kt">Dep</span><span class="o">.</span><span class="kt">U</span>
<span class="w">      </span><span class="kr">where</span>
<span class="w">        </span><span class="kr">controller</span><span class="w"> </span><span class="n">p</span>
<span class="w">        </span><span class="kr">do</span><span class="w"> </span><span class="n">fetch</span><span class="w"> </span><span class="n">cid</span>
</pre></div>
</div>
<p>Finally assume a ledger that contains a contract of type <code class="docutils literal notranslate"><span class="pre">S</span></code> written by <code class="docutils literal notranslate"><span class="pre">q</span></code>
and a contract of type <code class="docutils literal notranslate"><span class="pre">U</span></code> written by <code class="docutils literal notranslate"><span class="pre">dep-2.0.0</span></code>.</p>
<table border="1" class="docutils align-default">
<colgroup>
<col width="19%" />
<col width="27%" />
<col width="54%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Contract ID</th>
<th class="head">Type</th>
<th class="head">Contract</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">4321</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">q:T</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">T</span> <span class="pre">{</span> <span class="pre">p</span> <span class="pre">=</span> <span class="pre">'Alice'</span> <span class="pre">}</span></code></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">8765</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">dep-2.0.0:U</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">U</span> <span class="pre">{</span> <span class="pre">p</span> <span class="pre">=</span> <span class="pre">'Bob',</span> <span class="pre">t</span> <span class="pre">=</span> <span class="pre">None</span> <span class="pre">}</span></code></td>
</tr>
</tbody>
</table>
<p>When exercising choice <code class="docutils literal notranslate"><span class="pre">GetU</span> <span class="pre">8765</span></code> on contract <code class="docutils literal notranslate"><span class="pre">4321</span></code> with package
preference <code class="docutils literal notranslate"><span class="pre">dep-2.0.0</span></code>, we trigger a fetch of contract <code class="docutils literal notranslate"><span class="pre">5678</span></code>. Because
package <code class="docutils literal notranslate"><span class="pre">q</span></code> depends on version <code class="docutils literal notranslate"><span class="pre">1.0.0</span></code> of <code class="docutils literal notranslate"><span class="pre">dep</span></code>, the target type for <code class="docutils literal notranslate"><span class="pre">U</span></code>
is the one defined in package <code class="docutils literal notranslate"><span class="pre">dep-1.0.0</span></code>. Contract <code class="docutils literal notranslate"><span class="pre">5678</span></code> is thus
downgraded to <code class="docutils literal notranslate"><span class="pre">U</span> <span class="pre">{</span> <span class="pre">p</span> <span class="pre">=</span> <span class="pre">'Bob'}</span></code> upon retrieval. Note that the command
preference for version <code class="docutils literal notranslate"><span class="pre">2.0.0</span></code> of package <code class="docutils literal notranslate"><span class="pre">dep</span></code> bears no incidence here.</p>
<p><strong>Example 2</strong></p>
<p>Assume an interface <code class="docutils literal notranslate"><span class="pre">I</span></code> with view type <code class="docutils literal notranslate"><span class="pre">IView</span></code> and a method <code class="docutils literal notranslate"><span class="pre">m</span></code>.</p>
<div class="highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="kr">data</span><span class="w"> </span><span class="kt">IView</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="kt">IView</span><span class="w"> </span><span class="p">{}</span>

<span class="kr">interface</span><span class="w"> </span><span class="kt">I</span><span class="w"> </span><span class="kr">where</span>
<span class="w">  </span><span class="kr">viewtype</span><span class="w"> </span><span class="kt">IView</span>
</pre></div>
</div>
<p>Assume then two versions of a template <code class="docutils literal notranslate"><span class="pre">T</span></code> that implements <code class="docutils literal notranslate"><span class="pre">I</span></code>.</p>
<table border="1" class="colwidths-given diff-block docutils align-default" style="width: 100%">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><div class="first last highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="kr">template</span><span class="w"> </span><span class="kt">T</span>
<span class="w">  </span><span class="kr">with</span>
<span class="w">    </span><span class="n">p</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Party</span>
<span class="w">  </span><span class="kr">where</span>
<span class="w">    </span><span class="kr">signatory</span><span class="w"> </span><span class="n">p</span>

<span class="w">    </span><span class="kr">interface</span><span class="w"> </span><span class="kr">instance</span><span class="w"> </span><span class="kt">I</span><span class="w"> </span><span class="kr">for</span><span class="w"> </span><span class="kt">T</span><span class="w"> </span><span class="kr">where</span>
<span class="w">      </span><span class="n">view</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="kt">IView</span><span class="w"> </span><span class="p">{}</span>
</pre></div>
</div>
</td>
<td><div class="first last highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="kr">template</span><span class="w"> </span><span class="kt">T</span>
<span class="w">  </span><span class="kr">with</span>
<span class="w">    </span><span class="n">p</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Party</span>
<span class="w">    </span><span class="n">i</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Optional</span><span class="w"> </span><span class="kt">Int</span>
<span class="w">  </span><span class="kr">where</span>
<span class="w">    </span><span class="kr">signatory</span><span class="w"> </span><span class="n">p</span>

<span class="w">    </span><span class="kr">interface</span><span class="w"> </span><span class="kr">instance</span><span class="w"> </span><span class="kt">I</span><span class="w"> </span><span class="kr">for</span><span class="w"> </span><span class="kt">T</span><span class="w"> </span><span class="kr">where</span>
<span class="w">      </span><span class="n">view</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="kt">IView</span><span class="w"> </span><span class="p">{}</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
<p>Finally, assume that the module defining the first version of <code class="docutils literal notranslate"><span class="pre">T</span></code> is imported
as <code class="docutils literal notranslate"><span class="pre">V1</span></code>, and the module defining the second version of <code class="docutils literal notranslate"><span class="pre">T</span></code> is imported as
<code class="docutils literal notranslate"><span class="pre">V2</span></code>. The expression <code class="docutils literal notranslate"><span class="pre">fromInterface</span> <span class="pre">&#64;V2.T</span> <span class="pre">(toInterface</span> <span class="pre">&#64;I</span> <span class="pre">(V1.T</span> <span class="pre">'Alice'))</span></code>
evaluates as follows:</p>
<blockquote>
<div><ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">toInterface</span> <span class="pre">&#64;I</span> <span class="pre">(&#64;V1.T</span> <span class="pre">alice)</span></code> evaluates to the interface value
<code class="docutils literal notranslate"><span class="pre">(V1.T</span> <span class="pre">{</span> <span class="pre">p</span> <span class="pre">=</span> <span class="pre">'Alice'</span> <span class="pre">},</span> <span class="pre">V1.T)</span></code>.</li>
<li>The type <code class="docutils literal notranslate"><span class="pre">V2.T</span></code> upgrades <code class="docutils literal notranslate"><span class="pre">V1.T</span></code> so <code class="docutils literal notranslate"><span class="pre">fromInterface</span></code> proceeds to
transform <code class="docutils literal notranslate"><span class="pre">(V1.T</span> <span class="pre">{</span> <span class="pre">p</span> <span class="pre">=</span> <span class="pre">'Alice'</span> <span class="pre">})</span></code> into a value of type <code class="docutils literal notranslate"><span class="pre">V2.T</span></code></li>
<li>The entire expression thus evaluates to <code class="docutils literal notranslate"><span class="pre">V2.T</span> <span class="pre">{</span> <span class="pre">p</span> <span class="pre">=</span> <span class="pre">'Alice',</span> <span class="pre">i</span> <span class="pre">=</span> <span class="pre">None</span> <span class="pre">}</span></code>.</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="dynamic-target-template-selection">
<span id="id1"></span><h3>Dynamic Target Template Selection<a class="headerlink" href="#dynamic-target-template-selection" title="Permalink to this headline">¶</a></h3>
<p>In a top-level exercise triggered by a Ledger API command, or in an interface
fetch or exercise triggered from the body of a choice, the rules of package preference detailed in
<a class="reference internal" href="../../upgrade/smart-contract-upgrades.html#dynamic-package-resolution-in-command-submission"><span class="std std-ref">dynamic package
resolution</span></a>  determine the target template at runtime.</p>
<p><strong>Example 1</strong></p>
<p>Assume a package <code class="docutils literal notranslate"><span class="pre">p</span></code> with two versions. The new version adds an optional text
field.</p>
<table border="1" class="colwidths-given diff-block docutils align-default" style="width: 100%">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>In <code class="docutils literal notranslate"><span class="pre">p-1.0.0</span></code>:</td>
<td>In <code class="docutils literal notranslate"><span class="pre">p-2.0.0</span></code>:</td>
</tr>
<tr class="row-even"><td><div class="first last highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="kr">template</span><span class="w"> </span><span class="kt">T</span>
<span class="w">  </span><span class="kr">with</span>
<span class="w">    </span><span class="n">p</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Party</span>
<span class="w">  </span><span class="kr">where</span>
<span class="w">    </span><span class="kr">signatory</span><span class="w"> </span><span class="n">p</span>
</pre></div>
</div>
</td>
<td><div class="first last highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="kr">template</span><span class="w"> </span><span class="kt">T</span>
<span class="w">  </span><span class="kr">with</span>
<span class="w">    </span><span class="n">p</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Party</span>
<span class="w">    </span><span class="n">t</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Optional</span><span class="w"> </span><span class="kt">Text</span>
<span class="w">  </span><span class="kr">where</span>
<span class="w">    </span><span class="kr">signatory</span><span class="w"> </span><span class="n">p</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
<p>Also assume a ledger that contains a contract of type <code class="docutils literal notranslate"><span class="pre">T</span></code> written by
<code class="docutils literal notranslate"><span class="pre">p-1.0.0</span></code>, and another contract of written by <code class="docutils literal notranslate"><span class="pre">p-2.0.0</span></code>.</p>
<table border="1" class="docutils align-default">
<colgroup>
<col width="19%" />
<col width="22%" />
<col width="59%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Contract ID</th>
<th class="head">Type</th>
<th class="head">Contract</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">1234</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">p-1.0.0:T</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">T</span> <span class="pre">{</span> <span class="pre">p</span> <span class="pre">=</span> <span class="pre">'Alice'</span> <span class="pre">}</span></code></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">5678</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">p-2.0.0:T</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">T</span> <span class="pre">{</span> <span class="pre">p</span> <span class="pre">=</span> <span class="pre">'Bob',</span> <span class="pre">t</span> <span class="pre">=</span> <span class="pre">Some</span> <span class="pre">&quot;Hello&quot;</span> <span class="pre">}</span></code></td>
</tr>
</tbody>
</table>
<p>Then</p>
<ul class="simple">
<li>Fetching contract <code class="docutils literal notranslate"><span class="pre">1234</span></code> with package preference <code class="docutils literal notranslate"><span class="pre">p-1.0.0</span></code> retrieves the
contract and leaves it unchanged, returning <code class="docutils literal notranslate"><span class="pre">T</span> <span class="pre">{</span> <span class="pre">p</span> <span class="pre">=</span> <span class="pre">'Alice'</span> <span class="pre">}</span></code>.</li>
<li>Fetching contract <code class="docutils literal notranslate"><span class="pre">1234</span></code> with package preference <code class="docutils literal notranslate"><span class="pre">p-2.0.0</span></code> retrieves the
contract and successfully transforms it to the target template
type, returning <code class="docutils literal notranslate"><span class="pre">T</span> <span class="pre">{</span> <span class="pre">p</span> <span class="pre">=</span> <span class="pre">'Alice',</span> <span class="pre">t</span> <span class="pre">=</span> <span class="pre">None</span> <span class="pre">}</span></code>.</li>
<li>Fetching contract <code class="docutils literal notranslate"><span class="pre">5678</span></code> with package preference <code class="docutils literal notranslate"><span class="pre">p-1.0.0</span></code> retrieves the
contract and fails to downgrade it to the target template type,
returning an error.</li>
<li>Fetching contract <code class="docutils literal notranslate"><span class="pre">5678</span></code> with package preference <code class="docutils literal notranslate"><span class="pre">p-2.0.0</span></code> retrieves the
contract and leaves it unchanged, returning <code class="docutils literal notranslate"><span class="pre">T</span> <span class="pre">{</span> <span class="pre">p</span> <span class="pre">=</span> <span class="pre">'Bob',</span> <span class="pre">t</span> <span class="pre">=</span>
<span class="pre">Some</span> <span class="pre">&quot;Hello&quot;</span> <span class="pre">}</span></code>.</li>
</ul>
<p><strong>Example 2</strong></p>
<p>Assume an interface <code class="docutils literal notranslate"><span class="pre">I</span></code> with a choice <code class="docutils literal notranslate"><span class="pre">GetInt</span></code></p>
<div class="highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="kr">data</span><span class="w"> </span><span class="kt">IView</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="kt">IView</span><span class="w"> </span><span class="p">{}</span>

<span class="kr">interface</span><span class="w"> </span><span class="kt">I</span><span class="w"> </span><span class="kr">where</span>
<span class="w">  </span><span class="kr">viewtype</span><span class="w"> </span><span class="kt">IView</span>
<span class="w">  </span><span class="n">getInt</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Int</span>

<span class="w">  </span><span class="kr">choice</span><span class="w"> </span><span class="kt">GetInt</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Int</span>
<span class="w">    </span><span class="kr">with</span>
<span class="w">      </span><span class="n">p</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Party</span>
<span class="w">    </span><span class="kr">controller</span><span class="w"> </span><span class="n">p</span>
<span class="w">    </span><span class="kr">do</span>
<span class="w">      </span><span class="n">pure</span><span class="w"> </span><span class="p">(</span><span class="n">getInt</span><span class="w"> </span><span class="kr">this</span><span class="p">)</span>
</pre></div>
</div>
<p>Now, assume two versions of a package called <code class="docutils literal notranslate"><span class="pre">inst</span></code>, defining a template
<code class="docutils literal notranslate"><span class="pre">Inst</span></code> and its upgrade. The two versions of the template instantiate
interface <code class="docutils literal notranslate"><span class="pre">I</span></code>, but their <code class="docutils literal notranslate"><span class="pre">getInt</span></code> method return different values.</p>
<table border="1" class="colwidths-given diff-block docutils align-default" style="width: 100%">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>In <code class="docutils literal notranslate"><span class="pre">inst-1.0.0</span></code>:</td>
<td>In <code class="docutils literal notranslate"><span class="pre">inst-2.0.0</span></code>:</td>
</tr>
<tr class="row-even"><td><div class="first last highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="kr">template</span><span class="w"> </span><span class="kt">Inst</span>
<span class="w">  </span><span class="kr">with</span>
<span class="w">    </span><span class="n">p</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Party</span>
<span class="w">  </span><span class="kr">where</span>
<span class="w">    </span><span class="kr">signatory</span><span class="w"> </span><span class="n">p</span>

<span class="w">    </span><span class="kr">interface</span><span class="w"> </span><span class="kr">instance</span><span class="w"> </span><span class="kt">I</span><span class="w"> </span><span class="kr">for</span><span class="w"> </span><span class="kt">T</span><span class="w"> </span><span class="kr">where</span>
<span class="w">      </span><span class="n">view</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="kt">IView</span>
<span class="w">      </span><span class="n">getInt</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="mi">1</span>
</pre></div>
</div>
</td>
<td><div class="first last highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="kr">template</span><span class="w"> </span><span class="kt">Inst</span>
<span class="w">  </span><span class="kr">with</span>
<span class="w">    </span><span class="n">p</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Party</span>
<span class="w">  </span><span class="kr">where</span>
<span class="w">    </span><span class="kr">signatory</span><span class="w"> </span><span class="n">p</span>

<span class="w">    </span><span class="kr">interface</span><span class="w"> </span><span class="kr">instance</span><span class="w"> </span><span class="kt">I</span><span class="w"> </span><span class="kr">for</span><span class="w"> </span><span class="kt">T</span><span class="w"> </span><span class="kr">where</span>
<span class="w">      </span><span class="n">view</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="kt">IView</span>
<span class="w">      </span><span class="n">getInt</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="mi">2</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
<p>Assume then some package <code class="docutils literal notranslate"><span class="pre">client</span></code> which defines a template whose choice <code class="docutils literal notranslate"><span class="pre">Go</span></code>
exercises choice <code class="docutils literal notranslate"><span class="pre">GetInt</span></code> by interface.</p>
<div class="highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="kr">template</span><span class="w"> </span><span class="kt">Client</span>
<span class="w">  </span><span class="kr">with</span>
<span class="w">    </span><span class="n">p</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Party</span>
<span class="w">    </span><span class="n">icid</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">ContractId</span><span class="w"> </span><span class="kt">I</span>
<span class="w">  </span><span class="kr">where</span>
<span class="w">    </span><span class="kr">signatory</span><span class="w"> </span><span class="n">p</span>

<span class="w">    </span><span class="kr">choice</span><span class="w"> </span><span class="kt">Go</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Int</span>
<span class="w">      </span><span class="kr">controller</span><span class="w"> </span><span class="n">p</span>
<span class="w">      </span><span class="kr">do</span>
<span class="w">        </span><span class="n">exercise</span><span class="w"> </span><span class="n">icid</span><span class="w"> </span><span class="p">(</span><span class="kt">GetInt</span><span class="w"> </span><span class="n">p</span><span class="p">)</span>
</pre></div>
</div>
<p>Finally assume a ledger that contains a contract of type <code class="docutils literal notranslate"><span class="pre">Inst</span></code> written by
<code class="docutils literal notranslate"><span class="pre">inst-1.0.0</span></code>, and a contract of type <code class="docutils literal notranslate"><span class="pre">Client</span></code> written by <code class="docutils literal notranslate"><span class="pre">client</span></code>.</p>
<table border="1" class="docutils align-default">
<colgroup>
<col width="18%" />
<col width="31%" />
<col width="51%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Contract ID</th>
<th class="head">Type</th>
<th class="head">Contract</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">0123</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">inst-1.0.0:Inst</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">Inst</span> <span class="pre">{</span> <span class="pre">p</span> <span class="pre">=</span> <span class="pre">'Alice'</span> <span class="pre">}</span></code></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">0456</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">client:Client</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">Client</span> <span class="pre">{</span> <span class="pre">p</span> <span class="pre">=</span> <span class="pre">'Alice'</span> <span class="pre">}</span></code></td>
</tr>
</tbody>
</table>
<p>Then:</p>
<ul class="simple">
<li>When exercising choice <code class="docutils literal notranslate"><span class="pre">Go</span></code> on contract <code class="docutils literal notranslate"><span class="pre">0456</span></code> with package
preference <code class="docutils literal notranslate"><span class="pre">inst-1.0.0</span></code>, we trigger an exercise by interface of contract
<code class="docutils literal notranslate"><span class="pre">0123</span></code>. Because <code class="docutils literal notranslate"><span class="pre">inst-1.0.0</span></code> is prefered, contract <code class="docutils literal notranslate"><span class="pre">0123</span></code> is upgraded
to a value of type <code class="docutils literal notranslate"><span class="pre">inst-1.0.0::Inst</span></code> and its <code class="docutils literal notranslate"><span class="pre">getInt</span></code> method is executed.
The result of the exercise is thus the value <code class="docutils literal notranslate"><span class="pre">1</span></code>.</li>
<li>When exercising choice <code class="docutils literal notranslate"><span class="pre">Go</span></code> on contract <code class="docutils literal notranslate"><span class="pre">0456</span></code> but with package
preference <code class="docutils literal notranslate"><span class="pre">inst-2.0.0</span></code> this time, <code class="docutils literal notranslate"><span class="pre">inst-2.0.0:Inst</span></code> is picked as the
target template for <code class="docutils literal notranslate"><span class="pre">0123</span></code> and thus the exercise returns the
value <code class="docutils literal notranslate"><span class="pre">2</span></code>. Note that the fact that the exercise stored on the ledger is of
type <code class="docutils literal notranslate"><span class="pre">inst-1.0.0:Inst</span></code> bears no incidence on the <code class="docutils literal notranslate"><span class="pre">getInt</span></code> method that is
eventually executed.</li>
</ul>
<p><strong>Example 3</strong></p>
<p>Assume now a package <code class="docutils literal notranslate"><span class="pre">r</span></code> with two versions. They define a template with a
choice, and version <code class="docutils literal notranslate"><span class="pre">2.0.0</span></code> adds an optional field to the parameters of the
choice. The return type of the choice is also upgraded.</p>
<table border="1" class="colwidths-given diff-block docutils align-default" style="width: 100%">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>In <code class="docutils literal notranslate"><span class="pre">r-1.0.0</span></code>:</td>
<td>In <code class="docutils literal notranslate"><span class="pre">r-2.0.0</span></code>:</td>
</tr>
<tr class="row-even"><td><div class="first last highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="kr">module</span><span class="w"> </span><span class="nn">M</span><span class="w"> </span><span class="kr">where</span>

<span class="kr">data</span><span class="w"> </span><span class="kt">Ret</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="kt">Ret</span><span class="w"> </span><span class="kr">with</span>

<span class="kr">template</span><span class="w"> </span><span class="kt">V</span>
<span class="w">  </span><span class="kr">with</span>
<span class="w">    </span><span class="n">p</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Party</span>
<span class="w">  </span><span class="kr">where</span>
<span class="w">    </span><span class="kr">signatory</span><span class="w"> </span><span class="n">p</span>

<span class="w">    </span><span class="kr">choice</span><span class="w"> </span><span class="kt">C</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Ret</span>
<span class="w">      </span><span class="kr">with</span>
<span class="w">        </span><span class="n">i</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Int</span>
<span class="w">      </span><span class="kr">controller</span><span class="w"> </span><span class="n">p</span>
<span class="w">      </span><span class="kr">do</span><span class="w"> </span><span class="kr">return</span><span class="w"> </span><span class="kt">Ret</span>
</pre></div>
</div>
</td>
<td><div class="first last highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="kr">module</span><span class="w"> </span><span class="nn">M</span><span class="w"> </span><span class="kr">where</span>

<span class="kr">data</span><span class="w"> </span><span class="kt">Ret</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="kt">Ret</span><span class="w"> </span><span class="kr">with</span>
<span class="w">  </span><span class="n">j</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Optional</span><span class="w"> </span><span class="kt">Int</span>

<span class="kr">template</span><span class="w"> </span><span class="kt">V</span>
<span class="w">  </span><span class="kr">with</span>
<span class="w">     </span><span class="n">p</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Party</span>
<span class="w">   </span><span class="kr">where</span>
<span class="w">     </span><span class="kr">signatory</span><span class="w"> </span><span class="n">p</span>

<span class="w">     </span><span class="kr">choice</span><span class="w"> </span><span class="kt">C</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Ret</span>
<span class="w">       </span><span class="kr">with</span>
<span class="w">         </span><span class="n">i</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Int</span>
<span class="w">         </span><span class="n">j</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Optional</span><span class="w"> </span><span class="kt">Int</span>
<span class="w">       </span><span class="kr">controller</span><span class="w"> </span><span class="n">p</span>
<span class="w">       </span><span class="kr">do</span><span class="w"> </span><span class="kr">return</span><span class="w"> </span><span class="kt">Ret</span><span class="w"> </span><span class="kr">with</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="n">j</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
<p>Also assume a ledger that contains a contract of type <code class="docutils literal notranslate"><span class="pre">V</span></code> written by
<code class="docutils literal notranslate"><span class="pre">r-1.0.0</span></code>.</p>
<table border="1" class="docutils align-default">
<colgroup>
<col width="19%" />
<col width="22%" />
<col width="59%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Contract ID</th>
<th class="head">Type</th>
<th class="head">Contract</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">9101</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">r-1.0.0:V</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">V</span> <span class="pre">{</span> <span class="pre">p</span> <span class="pre">=</span> <span class="pre">'Alice'</span> <span class="pre">}</span></code></td>
</tr>
</tbody>
</table>
<p>Then:</p>
<ul class="simple">
<li>Exercising <code class="docutils literal notranslate"><span class="pre">C</span> <span class="pre">with</span> <span class="pre">i=1</span></code> on contract <code class="docutils literal notranslate"><span class="pre">9101</span></code> with package preference <code class="docutils literal notranslate"><span class="pre">r-2.0.0</span></code>
will execute the code of <code class="docutils literal notranslate"><span class="pre">C</span></code> as defined in <code class="docutils literal notranslate"><span class="pre">r-2.0.0</span></code>. The parameter
sequence <code class="docutils literal notranslate"><span class="pre">i=1</span></code> is thus transformed into the parameter sequence <code class="docutils literal notranslate"><span class="pre">i=1,</span> <span class="pre">j=None</span></code> to
match its parameter types. The exercise then returns the value <code class="docutils literal notranslate"><span class="pre">Ret</span> <span class="pre">with</span> <span class="pre">j=None</span></code>.
It is up to the client code (e.g. the caller of the ledger API) to transform this
to a value that fits the return type it expects. For instance, a client which
only knows about version <code class="docutils literal notranslate"><span class="pre">1.0.0</span></code> of package <code class="docutils literal notranslate"><span class="pre">r</span></code> would expect a value of type
<code class="docutils literal notranslate"><span class="pre">Ret</span></code> and would thus transform the value <code class="docutils literal notranslate"><span class="pre">Ret</span> <span class="pre">with</span> <span class="pre">j=None</span></code> back to <code class="docutils literal notranslate"><span class="pre">Ret</span></code>.</li>
<li>Exercising <code class="docutils literal notranslate"><span class="pre">C</span> <span class="pre">with</span> <span class="pre">i=1</span></code> on contract <code class="docutils literal notranslate"><span class="pre">9101</span></code> with package preference <code class="docutils literal notranslate"><span class="pre">r-1.0.0</span></code>
will execute the code of <code class="docutils literal notranslate"><span class="pre">C</span></code> as defined in <code class="docutils literal notranslate"><span class="pre">r-1.0.0</span></code>. The parameter sequence
requires therefore no transformation. The exercise returns the value <code class="docutils literal notranslate"><span class="pre">Ret</span></code>.</li>
<li>Exercising <code class="docutils literal notranslate"><span class="pre">C</span> <span class="pre">with</span> <span class="pre">i=1</span> <span class="pre">j=Some</span> <span class="pre">2</span></code> on contract <code class="docutils literal notranslate"><span class="pre">9101</span></code> with package preference <code class="docutils literal notranslate"><span class="pre">r-2.0.0</span></code>
will execute the code of <code class="docutils literal notranslate"><span class="pre">C</span></code> as defined in <code class="docutils literal notranslate"><span class="pre">r-2.0.0</span></code>. Again, the parameter sequence
no transformation. The exercise returns the value <code class="docutils literal notranslate"><span class="pre">Ret</span> <span class="pre">with</span> <span class="pre">j=Some</span> <span class="pre">2</span></code>.</li>
<li>Exercising <code class="docutils literal notranslate"><span class="pre">C</span> <span class="pre">with</span> <span class="pre">i=1</span> <span class="pre">j=Some</span> <span class="pre">2</span></code> on contract <code class="docutils literal notranslate"><span class="pre">9101</span></code> with package preference <code class="docutils literal notranslate"><span class="pre">r-1.0.0</span></code>
will fail with a runtime error as the parameter sequence <code class="docutils literal notranslate"><span class="pre">i=1</span> <span class="pre">j=Some</span> <span class="pre">2</span></code> cannot be
downgraded to the parameter sequence of <code class="docutils literal notranslate"><span class="pre">C</span></code> as defined in <code class="docutils literal notranslate"><span class="pre">r-1.0.0</span></code>.</li>
</ul>
</div>
<div class="section" id="transformation-rules">
<h3>Transformation Rules<a class="headerlink" href="#transformation-rules" title="Permalink to this headline">¶</a></h3>
<p>Once the target type has been determined, the data transformation rules
themselves follow the <a class="reference external" href="https://protobuf.dev/programming-guides/proto3/#updating">upgrading rules of
protocol
buffers</a>.</p>
<div class="section" id="records-and-parameters">
<h4>Records and Parameters<a class="headerlink" href="#records-and-parameters" title="Permalink to this headline">¶</a></h4>
<p>Given a record type and its upgrade, referred to respectively as <code class="docutils literal notranslate"><span class="pre">T-v1</span></code>
and <code class="docutils literal notranslate"><span class="pre">T-v2</span></code> in the following,</p>
<table border="1" class="colwidths-given diff-block docutils align-default" style="width: 100%">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><div class="first last highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="kr">data</span><span class="w"> </span><span class="kt">T</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="kt">T</span><span class="w"> </span><span class="kr">with</span>
<span class="w">  </span><span class="n">x1</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">T1</span>
<span class="w">  </span><span class="o">...</span>
<span class="w">  </span><span class="n">xn</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Tn</span>
</pre></div>
</div>
</td>
<td><div class="first last highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="kr">data</span><span class="w"> </span><span class="kt">T</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="kt">T</span><span class="w"> </span><span class="kr">with</span>
<span class="w">  </span><span class="n">x1</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">T1&#39;</span>
<span class="w">  </span><span class="o">...</span>
<span class="w">  </span><span class="n">xn</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Tn&#39;</span>
<span class="w">  </span><span class="n">y1</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Optional</span><span class="w"> </span><span class="kt">U1</span>
<span class="w">  </span><span class="o">...</span>
<span class="w">  </span><span class="n">ym</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Optional</span><span class="w"> </span><span class="kt">Um</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
<ul class="simple">
<li>A <code class="docutils literal notranslate"><span class="pre">T-v1</span></code> value <code class="docutils literal notranslate"><span class="pre">T</span> <span class="pre">{</span> <span class="pre">x1</span> <span class="pre">=</span> <span class="pre">v1,</span> <span class="pre">...,</span> <span class="pre">xn</span> <span class="pre">=</span> <span class="pre">vn</span> <span class="pre">}</span></code> is upgraded to a <code class="docutils literal notranslate"><span class="pre">T-v2</span></code> value by
setting the additional fields to None and upgrading <code class="docutils literal notranslate"><span class="pre">v1...vn</span></code>
recursively. The transformation results in a value <code class="docutils literal notranslate"><span class="pre">T</span> <span class="pre">{</span> <span class="pre">x1</span> <span class="pre">=</span> <span class="pre">v1',</span>
<span class="pre">...,</span> <span class="pre">xn</span> <span class="pre">=</span> <span class="pre">vn',</span> <span class="pre">y1</span> <span class="pre">=</span> <span class="pre">None,</span> <span class="pre">...,</span> <span class="pre">ym</span> <span class="pre">=</span> <span class="pre">None</span> <span class="pre">}</span></code>, where <code class="docutils literal notranslate"><span class="pre">v1'...</span> <span class="pre">vn'</span></code> is the
result of upgrading <code class="docutils literal notranslate"><span class="pre">v1...vn</span></code> to <code class="docutils literal notranslate"><span class="pre">T1'</span> <span class="pre">...</span> <span class="pre">Tn'</span></code>.</li>
<li>A <code class="docutils literal notranslate"><span class="pre">T-v2</span></code> value of the shape
<code class="docutils literal notranslate"><span class="pre">T</span> <span class="pre">{</span> <span class="pre">x1</span> <span class="pre">=</span> <span class="pre">v1,</span> <span class="pre">...,</span> <span class="pre">xn</span> <span class="pre">=</span> <span class="pre">vn,</span> <span class="pre">y1</span> <span class="pre">=</span> <span class="pre">None,</span> <span class="pre">...,</span> <span class="pre">ym</span> <span class="pre">=</span> <span class="pre">None</span> <span class="pre">}</span></code> is downgraded to a <code class="docutils literal notranslate"><span class="pre">T-v1</span></code>
value by dropping additional fields and downgrading <code class="docutils literal notranslate"><span class="pre">v1...vn</span></code> recursively.
The transformation results in a value
<code class="docutils literal notranslate"><span class="pre">T</span> <span class="pre">{</span> <span class="pre">x1</span> <span class="pre">=</span> <span class="pre">v1',</span> <span class="pre">...,</span> <span class="pre">xn</span> <span class="pre">=</span> <span class="pre">vn'</span> <span class="pre">}</span></code> where <code class="docutils literal notranslate"><span class="pre">v1'...</span> <span class="pre">vn'</span></code> is the result of
downgrading <code class="docutils literal notranslate"><span class="pre">v1</span> <span class="pre">...</span> <span class="pre">vn</span></code> to <code class="docutils literal notranslate"><span class="pre">T1</span> <span class="pre">...</span> <span class="pre">Tn</span></code>.</li>
<li>Attempting to downgrade a <code class="docutils literal notranslate"><span class="pre">T-v2</span></code> value where at least one <code class="docutils literal notranslate"><span class="pre">yi</span></code> is a
<code class="docutils literal notranslate"><span class="pre">Some</span> <span class="pre">_</span></code> results in a runtime error.</li>
</ul>
<p>The same transformation rules apply to template parameters and choice
parameters.</p>
</div>
<div class="section" id="variants-and-enums">
<h4>Variants and Enums<a class="headerlink" href="#variants-and-enums" title="Permalink to this headline">¶</a></h4>
<p>Given a variant type and its upgrade, referred to respectively as <code class="docutils literal notranslate"><span class="pre">V-v1</span></code>
and <code class="docutils literal notranslate"><span class="pre">V-v2</span></code> in the following,</p>
<table border="1" class="colwidths-given diff-block docutils align-default" style="width: 100%">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><div class="first last highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="kr">data</span><span class="w"> </span><span class="kt">V</span><span class="w"> </span><span class="ow">=</span>
<span class="w">  </span><span class="ow">=</span><span class="w"> </span><span class="kt">C1</span><span class="w"> </span><span class="kt">T1</span>
<span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="o">...</span>
<span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="kt">Cn</span><span class="w"> </span><span class="kt">Tn</span>
</pre></div>
</div>
</td>
<td><div class="first last highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="kr">data</span><span class="w"> </span><span class="kt">V</span><span class="w"> </span><span class="ow">=</span>
<span class="w">  </span><span class="ow">=</span><span class="w"> </span><span class="kt">C1</span><span class="w"> </span><span class="kt">T1&#39;</span>
<span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="o">...</span>
<span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="kt">Cn</span><span class="w"> </span><span class="kt">Tn&#39;</span>
<span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="kt">D1</span><span class="w"> </span><span class="kt">U1</span>
<span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="o">...</span>
<span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="kt">Dm</span><span class="w"> </span><span class="kt">Um</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
<ul class="simple">
<li>A <code class="docutils literal notranslate"><span class="pre">V-v1</span></code> value <code class="docutils literal notranslate"><span class="pre">Ci</span> <span class="pre">vi</span></code> is upgraded to a <code class="docutils literal notranslate"><span class="pre">V-v2</span></code> value by upgrading <code class="docutils literal notranslate"><span class="pre">vi</span></code>
recursively. The transformation results in a value <code class="docutils literal notranslate"><span class="pre">Ci</span> <span class="pre">vi'</span></code> where
<code class="docutils literal notranslate"><span class="pre">vi'</span></code> is the result of upgrading <code class="docutils literal notranslate"><span class="pre">vi</span></code> to <code class="docutils literal notranslate"><span class="pre">Ti'</span></code>.</li>
<li>A <code class="docutils literal notranslate"><span class="pre">V-v2</span></code> value <code class="docutils literal notranslate"><span class="pre">Ci</span> <span class="pre">vi</span></code> is downgraded to a <code class="docutils literal notranslate"><span class="pre">V-v1</span></code> value by downgrading <code class="docutils literal notranslate"><span class="pre">vi</span></code>
recursively. The transformation results in a value <code class="docutils literal notranslate"><span class="pre">Ci</span> <span class="pre">vi'</span></code> where
<code class="docutils literal notranslate"><span class="pre">vi'</span></code> is the result of downgrading <code class="docutils literal notranslate"><span class="pre">vi</span></code> to <code class="docutils literal notranslate"><span class="pre">Ti</span></code>.</li>
<li>Attempting to downgrade a <code class="docutils literal notranslate"><span class="pre">V-v2</span></code> value of the form <code class="docutils literal notranslate"><span class="pre">Dj</span> <span class="pre">vj</span></code> results in a
runtime error.</li>
</ul>
<p>The same transformation rules apply to enum types, constructor arguments
aside.</p>
</div>
<div class="section" id="other-types">
<h4>Other Types<a class="headerlink" href="#other-types" title="Permalink to this headline">¶</a></h4>
<p>Types that aren’t records or variants are “pass-through” for the upgrade
and downgrade transformations:</p>
<ul class="simple">
<li>Values of scalar types are trivially transformed to themselves.</li>
<li>The payload of an Optional is recursively transformed.</li>
<li>The elements of Lists are recursively transformed.</li>
<li>The keys and values of Maps are recursively transformed.</li>
</ul>
</div>
</div>
<div class="section" id="metadata">
<h3>Metadata<a class="headerlink" href="#metadata" title="Permalink to this headline">¶</a></h3>
<p>For a given contract, metadata is every information outside of the contract
parameters that is stored on the ledger for this contract. Namely:</p>
<ul class="simple">
<li>The contract signatories;</li>
<li>The contract stakeholders (the union of signatories and observers);</li>
<li>The contract key;</li>
<li>The maintainers of the contract key.</li>
</ul>
<p>The metadata of two contracts are equivalent if and only if:</p>
<ul class="simple">
<li>their signatories are equal;</li>
<li>their stakeholders are equal;</li>
<li>their keys, after transformation to the maximum version of the two contracts, are equal;</li>
<li>their maintainers are equal.</li>
</ul>
<p>Upon retrieval and after conversion, the metadata of a contract is recomputed
using the code of the target template. It is a runtime error if the recomputed
metadata is not equivalent to that of the original contract.</p>
<p><strong>Note:</strong> A given implementation may choose to perform the equivalence check
differently from what is described above, as long as the result is semantically
equivalent.</p>
<p><strong>Example 1</strong></p>
<p>Below the template on the right is a valid upgrade of the template on the left.</p>
<table border="1" class="colwidths-given diff-block docutils align-default" style="width: 100%">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>In <code class="docutils literal notranslate"><span class="pre">p-1.0.0</span></code>:</td>
<td>In <code class="docutils literal notranslate"><span class="pre">p-2.0.0</span></code>:</td>
</tr>
<tr class="row-even"><td><div class="first last highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="kr">template</span><span class="w"> </span><span class="kt">T</span>
<span class="w">  </span><span class="kr">with</span>
<span class="w">    </span><span class="n">sig</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Party</span>
<span class="w">  </span><span class="kr">where</span>
<span class="w">    </span><span class="kr">signatory</span><span class="w"> </span><span class="n">sig</span>
</pre></div>
</div>
</td>
<td><div class="first last highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="kr">template</span><span class="w"> </span><span class="kt">T</span>
<span class="w">  </span><span class="kr">with</span>
<span class="w">    </span><span class="n">sig</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Party</span>
<span class="w">    </span><span class="n">additionalSig</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Optional</span><span class="w"> </span><span class="kt">Party</span>
<span class="w">  </span><span class="kr">where</span>
<span class="w">    </span><span class="kr">signatory</span><span class="w"> </span><span class="n">sig</span><span class="p">,</span><span class="w"> </span><span class="n">fromOptional</span><span class="w"> </span><span class="kt">[]</span><span class="w"> </span><span class="n">additionalSig</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
<p>Assume a ledger that contains a contract of type <code class="docutils literal notranslate"><span class="pre">T</span></code> written by
<code class="docutils literal notranslate"><span class="pre">p-1.0.0</span></code>.</p>
<table border="1" class="docutils align-default">
<colgroup>
<col width="19%" />
<col width="22%" />
<col width="59%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Contract ID</th>
<th class="head">Type</th>
<th class="head">Contract</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">1234</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">p-1.0.0:T</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">T</span> <span class="pre">{</span> <span class="pre">sig</span> <span class="pre">=</span> <span class="pre">['Alice']</span> <span class="pre">}</span></code></td>
</tr>
</tbody>
</table>
<p>Fetching contract <code class="docutils literal notranslate"><span class="pre">1234</span></code> with target type <code class="docutils literal notranslate"><span class="pre">p-2.0.0:T</span></code> retrieves the
contract and successfully transforms it into a value of type <code class="docutils literal notranslate"><span class="pre">p-2.0.0:T</span></code>: <code class="docutils literal notranslate"><span class="pre">T</span>
<span class="pre">{</span> <span class="pre">sig</span> <span class="pre">=</span> <span class="pre">'Alice',</span> <span class="pre">additionalSig</span> <span class="pre">=</span> <span class="pre">None</span> <span class="pre">}</span></code>. The signatories of this transformed
contract are then computed using the expression <code class="docutils literal notranslate"><span class="pre">sig,</span> <span class="pre">fromOptional</span> <span class="pre">[]</span>
<span class="pre">additionalSig</span></code>, which evaluate to the list <code class="docutils literal notranslate"><span class="pre">['Alice']</span></code>. This list is then
compared to signatories of the original contract stored on the ledger:
<code class="docutils literal notranslate"><span class="pre">['Alice']</span></code>. They match and thus the upgrade is valid.</p>
<p>On the other hand, below, the template on the right is <strong>not</strong> a valid upgrade
of the template on the left.</p>
<table border="1" class="colwidths-given diff-block docutils align-default" style="width: 100%">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>In <code class="docutils literal notranslate"><span class="pre">p-1.0.0</span></code>:</td>
<td>In <code class="docutils literal notranslate"><span class="pre">p-2.0.0</span></code>:</td>
</tr>
<tr class="row-even"><td><div class="first last highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="kr">template</span><span class="w"> </span><span class="kt">T</span>
<span class="w">  </span><span class="kr">with</span>
<span class="w">    </span><span class="n">sig</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Party</span>
<span class="w">  </span><span class="kr">where</span>
<span class="w">    </span><span class="kr">signatory</span><span class="w"> </span><span class="n">sig</span>
</pre></div>
</div>
</td>
<td><div class="first last highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="kr">template</span><span class="w"> </span><span class="kt">T</span>
<span class="w">  </span><span class="kr">with</span>
<span class="w">    </span><span class="n">sig</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Party</span>
<span class="w">  </span><span class="kr">where</span>
<span class="w">    </span><span class="kr">signatory</span><span class="w"> </span><span class="n">sig</span><span class="p">,</span><span class="w"> </span><span class="n">sig</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
<p>Assume the same ledger as above. Fetching contract <code class="docutils literal notranslate"><span class="pre">1234</span></code> with target type
<code class="docutils literal notranslate"><span class="pre">p-2.0.0:T</span></code> retrieves the contract and again successfully
transforms it into the value <code class="docutils literal notranslate"><span class="pre">T</span> <span class="pre">{</span> <span class="pre">sig</span> <span class="pre">=</span> <span class="pre">'Alice',</span> <span class="pre">additionalSig</span> <span class="pre">=</span> <span class="pre">None</span> <span class="pre">}</span></code>. The
signatories of this transformed contract are then computed using the expression
<code class="docutils literal notranslate"><span class="pre">sig,</span> <span class="pre">sig</span></code>, which evaluate to the list <code class="docutils literal notranslate"><span class="pre">['Alice',</span> <span class="pre">'Alice']</span></code>. This list is
then compared to signatories of the original contract stored on the ledger:
<code class="docutils literal notranslate"><span class="pre">['Alice']</span></code>. They do not match and thus the upgrade is rejected at runtime.</p>
<p><strong>Example 2</strong></p>
<p>Below the module on the right is a valid upgrade of the module on the left:</p>
<table border="1" class="colwidths-given diff-block docutils align-default" style="width: 100%">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>In <code class="docutils literal notranslate"><span class="pre">p-1.0.0</span></code>:</td>
<td>In <code class="docutils literal notranslate"><span class="pre">p-2.0.0</span></code>:</td>
</tr>
<tr class="row-even"><td><div class="first last highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="kr">module</span><span class="w"> </span><span class="nn">M</span><span class="w"> </span><span class="kr">where</span>

<span class="kr">data</span><span class="w"> </span><span class="kt">MyKey</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="kt">MyKey</span>
<span class="w">  </span><span class="kr">with</span>
<span class="w">    </span><span class="n">p</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Party</span>

<span class="kr">template</span><span class="w"> </span><span class="kt">T</span>
<span class="w">  </span><span class="kr">with</span>
<span class="w">    </span><span class="n">sig</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Party</span>
<span class="w">  </span><span class="kr">where</span>
<span class="w">    </span><span class="kr">signatory</span><span class="w"> </span><span class="n">sig</span>
<span class="w">    </span><span class="kr">key</span><span class="w"> </span><span class="kt">MyKey</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">MyKey</span>
<span class="w">    </span><span class="kr">maintainer</span><span class="w"> </span><span class="kr">key</span><span class="o">.</span><span class="n">p</span>
</pre></div>
</div>
</td>
<td><div class="first last highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="kr">module</span><span class="w"> </span><span class="nn">M</span><span class="w"> </span><span class="kr">where</span>

<span class="kr">data</span><span class="w"> </span><span class="kt">MyKey</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="kt">MyKey</span>
<span class="w">  </span><span class="kr">with</span>
<span class="w">    </span><span class="n">p</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Party</span>
<span class="w">    </span><span class="n">i</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Optional</span><span class="w"> </span><span class="kt">Int</span>

<span class="kr">template</span><span class="w"> </span><span class="kt">T</span>
<span class="w">  </span><span class="kr">with</span>
<span class="w">    </span><span class="n">sig</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Party</span>
<span class="w">    </span><span class="n">i</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Optional</span><span class="w"> </span><span class="kt">Int</span>
<span class="w">  </span><span class="kr">where</span>
<span class="w">    </span><span class="kr">signatory</span><span class="w"> </span><span class="n">sig</span>
<span class="w">    </span><span class="kr">key</span><span class="w"> </span><span class="kt">MyKey</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">MyKey</span>
<span class="w">    </span><span class="kr">maintainer</span><span class="w"> </span><span class="kr">key</span><span class="o">.</span><span class="n">p</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
<p>Assume a ledger that contains a contract of type <code class="docutils literal notranslate"><span class="pre">T</span></code> written by
<code class="docutils literal notranslate"><span class="pre">p-1.0.0</span></code>.</p>
<table border="1" class="docutils align-default">
<colgroup>
<col width="16%" />
<col width="19%" />
<col width="34%" />
<col width="31%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Contract ID</th>
<th class="head">Contract Type</th>
<th class="head">Contract Key</th>
<th class="head">Contract</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">1234</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">p-1.0.0:T</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">MyKey</span> <span class="pre">{</span> <span class="pre">p</span> <span class="pre">=</span> <span class="pre">'Alice'</span> <span class="pre">}</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">T</span> <span class="pre">{</span> <span class="pre">sig</span> <span class="pre">=</span> <span class="pre">'Alice'</span> <span class="pre">}</span></code></td>
</tr>
</tbody>
</table>
<p>Fetching contract <code class="docutils literal notranslate"><span class="pre">1234</span></code> with package preference <code class="docutils literal notranslate"><span class="pre">p-2.0.0</span></code> retrieves the
contract and successfully transforms it into a value of type <code class="docutils literal notranslate"><span class="pre">p-2.0.0:T</span></code>: <code class="docutils literal notranslate"><span class="pre">T</span>
<span class="pre">{</span> <span class="pre">sig</span> <span class="pre">=</span> <span class="pre">'Alice',</span> <span class="pre">i</span> <span class="pre">=</span> <span class="pre">None</span> <span class="pre">}</span></code>. The key of this transformed contract is then
computed using the expression <code class="docutils literal notranslate"><span class="pre">MyKey</span> <span class="pre">p</span> <span class="pre">i</span></code>, which evaluates to the value
<code class="docutils literal notranslate"><span class="pre">MyKey</span> <span class="pre">{</span> <span class="pre">p</span> <span class="pre">=</span> <span class="pre">'Alice',</span> <span class="pre">i</span> <span class="pre">=</span> <span class="pre">None</span> <span class="pre">}</span></code>. This value is then compared against the key
of the original contract after transformation to a value of type
<code class="docutils literal notranslate"><span class="pre">p-2.0.0:MyKey</span></code>: <code class="docutils literal notranslate"><span class="pre">MyKey</span> <span class="pre">{</span> <span class="pre">p</span> <span class="pre">=</span> <span class="pre">'Alice',</span> <span class="pre">i</span> <span class="pre">=</span> <span class="pre">None</span> <span class="pre">}</span></code>. The two values match and
thus the upgrade is valid.</p>
<p>On the other hand, below, the module on the right is <strong>not</strong> a valid upgrade
of the module on the left:</p>
<table border="1" class="colwidths-given diff-block docutils align-default" style="width: 100%">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>In <code class="docutils literal notranslate"><span class="pre">p-1.0.0</span></code>:</td>
<td>In <code class="docutils literal notranslate"><span class="pre">p-2.0.0</span></code>:</td>
</tr>
<tr class="row-even"><td><div class="first last highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="kr">module</span><span class="w"> </span><span class="nn">M</span><span class="w"> </span><span class="kr">where</span>

<span class="kr">data</span><span class="w"> </span><span class="kt">MyKey</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="kt">MyKey</span>
<span class="w">  </span><span class="kr">with</span>
<span class="w">    </span><span class="n">p</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Party</span>

<span class="kr">template</span><span class="w"> </span><span class="kt">T</span>
<span class="w">  </span><span class="kr">with</span>
<span class="w">    </span><span class="n">sig</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Party</span>
<span class="w">  </span><span class="kr">where</span>
<span class="w">    </span><span class="kr">signatory</span><span class="w"> </span><span class="n">sig</span>
<span class="w">    </span><span class="kr">key</span><span class="w"> </span><span class="kt">MyKey</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">MyKey</span>
<span class="w">    </span><span class="kr">maintainer</span><span class="w"> </span><span class="kr">key</span><span class="o">.</span><span class="n">p</span>
</pre></div>
</div>
</td>
<td><div class="first last highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="kr">module</span><span class="w"> </span><span class="nn">M</span><span class="w"> </span><span class="kr">where</span>

<span class="kr">data</span><span class="w"> </span><span class="kt">MyKey</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="kt">MyKey</span>
<span class="w">  </span><span class="kr">with</span>
<span class="w">    </span><span class="n">p</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Party</span>
<span class="w">    </span><span class="n">i</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Optional</span><span class="w"> </span><span class="kt">Int</span>

<span class="kr">template</span><span class="w"> </span><span class="kt">T</span>
<span class="w">  </span><span class="kr">with</span>
<span class="w">    </span><span class="n">sig</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Party</span>
<span class="w">  </span><span class="kr">where</span>
<span class="w">    </span><span class="kr">signatory</span><span class="w"> </span><span class="n">sig</span>
<span class="w">    </span><span class="kr">key</span><span class="w"> </span><span class="kt">MyKey</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="p">(</span><span class="kt">Some</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">MyKey</span>
<span class="w">    </span><span class="kr">maintainer</span><span class="w"> </span><span class="kr">key</span><span class="o">.</span><span class="n">p</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
<p>Assume the same ledger as above. Fetching contract <code class="docutils literal notranslate"><span class="pre">1234</span></code> with package
preference <code class="docutils literal notranslate"><span class="pre">p-2.0.0</span></code> retrieves the the contract and again successfully
transforms it into the value <code class="docutils literal notranslate"><span class="pre">T</span> <span class="pre">{</span> <span class="pre">sig</span> <span class="pre">=</span> <span class="pre">'Alice'</span> <span class="pre">}</span></code>. The key of this
transformed contract is then computed using the expression <code class="docutils literal notranslate"><span class="pre">MyKey</span> <span class="pre">p</span> <span class="pre">(Some</span> <span class="pre">0)</span></code>,
which evaluates to the value <code class="docutils literal notranslate"><span class="pre">MyKey</span> <span class="pre">{</span> <span class="pre">p</span> <span class="pre">=</span> <span class="pre">'Alice',</span> <span class="pre">i</span> <span class="pre">=</span> <span class="pre">Some</span> <span class="pre">0</span> <span class="pre">}</span></code>. This value is
then compared against the original contract’s key after transformation to a
value of type <code class="docutils literal notranslate"><span class="pre">p-2.0.0:MyKey</span></code>: <code class="docutils literal notranslate"><span class="pre">MyKey</span> <span class="pre">{</span> <span class="pre">p</span> <span class="pre">=</span> <span class="pre">'Alice',</span> <span class="pre">i</span> <span class="pre">=</span> <span class="pre">None</span> <span class="pre">}</span></code>. The two
values do not match and thus the upgrade is rejected at runtime.</p>
</div>
<div class="section" id="ensure-clause">
<h3>Ensure Clause<a class="headerlink" href="#ensure-clause" title="Permalink to this headline">¶</a></h3>
<p>Upon retrieval and after conversion, the ensure clause of a contract is
recomputed using the code of the target template. It is a runtime error if the
recomputed ensure clause evaluates to <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p>
<p><strong>Examples</strong></p>
<p>Below, the template on the right is <strong>not</strong> a valid upgrade of the template on
the left because its ensure clause will evaluate to <code class="docutils literal notranslate"><span class="pre">False</span></code> for contracts that
have been written using the template on the left with <code class="docutils literal notranslate"><span class="pre">n</span> <span class="pre">=</span> <span class="pre">0</span></code>.</p>
<table border="1" class="colwidths-given diff-block docutils align-default" style="width: 100%">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><div class="first last highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="kr">template</span><span class="w"> </span><span class="kt">T</span>
<span class="w">  </span><span class="kr">with</span>
<span class="w">    </span><span class="n">sig</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Party</span>
<span class="w">    </span><span class="n">n</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Int</span>
<span class="w">  </span><span class="kr">where</span>
<span class="w">    </span><span class="kr">signatory</span><span class="w"> </span><span class="n">sig</span>
<span class="w">    </span><span class="kr">ensure</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="mi">0</span>
</pre></div>
</div>
</td>
<td><div class="first last highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="kr">template</span><span class="w"> </span><span class="kt">T</span>
<span class="w">  </span><span class="kr">with</span>
<span class="w">    </span><span class="n">sig</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Party</span>
<span class="w">    </span><span class="n">n</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Int</span>
<span class="w">  </span><span class="kr">where</span>
<span class="w">    </span><span class="kr">signatory</span><span class="w"> </span><span class="n">sig</span>
<span class="w">    </span><span class="kr">ensure</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="interface-views">
<h3>Interface Views<a class="headerlink" href="#interface-views" title="Permalink to this headline">¶</a></h3>
<p>The view for a given interface instance is not allowed to change between two
versions of a contract. When a contract is fetched or exercised by interface,
its view according to the code of the target template is compared to its view
according to the code of the template that was used when the contract was
created. It is a runtime error if the two views differ.</p>
<p><strong>Example</strong></p>
<p>Assume an interface <code class="docutils literal notranslate"><span class="pre">I</span></code> with view type <code class="docutils literal notranslate"><span class="pre">IView</span></code> and a method <code class="docutils literal notranslate"><span class="pre">m</span></code>.</p>
<div class="highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="kr">data</span><span class="w"> </span><span class="kt">IView</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="kt">IView</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Int</span><span class="w"> </span><span class="p">}</span>

<span class="kr">interface</span><span class="w"> </span><span class="kt">I</span><span class="w"> </span><span class="kr">where</span>
<span class="w">  </span><span class="kr">viewtype</span><span class="w"> </span><span class="kt">IView</span>
<span class="w">  </span><span class="n">m</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Int</span>
</pre></div>
</div>
<p>In that case, the template on the right below is a valid upgrade of the template on the
left.</p>
<table border="1" class="colwidths-given diff-block docutils align-default" style="width: 100%">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>In <code class="docutils literal notranslate"><span class="pre">p-1.0.0</span></code>:</td>
<td>In <code class="docutils literal notranslate"><span class="pre">p-2.0.0</span></code>:</td>
</tr>
<tr class="row-even"><td><div class="first last highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="kr">template</span><span class="w"> </span><span class="kt">T</span>
<span class="w">  </span><span class="kr">with</span>
<span class="w">    </span><span class="n">p</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Party</span>
<span class="w">    </span><span class="n">i</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Int</span>
<span class="w">  </span><span class="kr">where</span>
<span class="w">    </span><span class="kr">signatory</span><span class="w"> </span><span class="n">p</span>

<span class="w">    </span><span class="kr">interface</span><span class="w"> </span><span class="kr">instance</span><span class="w"> </span><span class="kt">I</span><span class="w"> </span><span class="kr">for</span><span class="w"> </span><span class="kt">T</span><span class="w"> </span><span class="kr">where</span>
<span class="w">      </span><span class="n">view</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="kt">IView</span><span class="w"> </span><span class="n">i</span>
<span class="w">      </span><span class="n">m</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="n">i</span>
</pre></div>
</div>
</td>
<td><div class="first last highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="kr">template</span><span class="w"> </span><span class="kt">T</span>
<span class="w">  </span><span class="kr">with</span>
<span class="w">    </span><span class="n">p</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Party</span>
<span class="w">    </span><span class="n">i</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Int</span>
<span class="w">    </span><span class="n">j</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Optional</span><span class="w"> </span><span class="kt">Int</span>
<span class="w">  </span><span class="kr">where</span>
<span class="w">    </span><span class="kr">signatory</span><span class="w"> </span><span class="n">p</span>

<span class="w">    </span><span class="kr">interface</span><span class="w"> </span><span class="kr">instance</span><span class="w"> </span><span class="kt">I</span><span class="w"> </span><span class="kr">for</span><span class="w"> </span><span class="kt">T</span><span class="w"> </span><span class="kr">where</span>
<span class="w">      </span><span class="n">view</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="kt">IView</span><span class="w"> </span><span class="p">(</span><span class="n">fromOptional</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="n">j</span><span class="p">)</span>
<span class="w">      </span><span class="n">m</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="n">fromOptional</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="n">j</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
<p>Assume a ledger that contains a contract of type <code class="docutils literal notranslate"><span class="pre">T</span></code> written by
<code class="docutils literal notranslate"><span class="pre">p-1.0.0</span></code>.</p>
<table border="1" class="docutils align-default">
<colgroup>
<col width="19%" />
<col width="22%" />
<col width="59%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Contract ID</th>
<th class="head">Type</th>
<th class="head">Contract</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">1234</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">p-1.0.0:T</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">T</span> <span class="pre">{</span> <span class="pre">p</span> <span class="pre">=</span> <span class="pre">'Alice',</span> <span class="pre">i</span> <span class="pre">=</span> <span class="pre">42</span> <span class="pre">}</span></code></td>
</tr>
</tbody>
</table>
<p>Fetching contract <code class="docutils literal notranslate"><span class="pre">1234</span></code> by interface with package preference <code class="docutils literal notranslate"><span class="pre">p-2.0.0</span></code>
retrieves the contract and computes its view according to <code class="docutils literal notranslate"><span class="pre">p-1.0.0</span></code>: <code class="docutils literal notranslate"><span class="pre">IView</span>
<span class="pre">42</span></code>. The contract is then transformed into a value of type <code class="docutils literal notranslate"><span class="pre">p-2.0.0:T</span></code>:
<code class="docutils literal notranslate"><span class="pre">T</span> <span class="pre">{</span> <span class="pre">sig</span> <span class="pre">=</span> <span class="pre">'Alice',</span> <span class="pre">i</span> <span class="pre">=</span> <span class="pre">42,</span> <span class="pre">j</span> <span class="pre">=</span> <span class="pre">None</span> <span class="pre">}</span></code> and its view is computed again, this
time according to <code class="docutils literal notranslate"><span class="pre">p-2.0.0</span></code>: <code class="docutils literal notranslate"><span class="pre">IView</span> <span class="pre">42</span></code>. Because the two views agree, the
fetch is successful.</p>
<p>On the other hand, below, the template on the right is <strong>not</strong> a valid upgrade
of the template on the left.</p>
<table border="1" class="colwidths-given diff-block docutils align-default" style="width: 100%">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>In <code class="docutils literal notranslate"><span class="pre">p-1.0.0</span></code>:</td>
<td>In <code class="docutils literal notranslate"><span class="pre">p-2.0.0</span></code>:</td>
</tr>
<tr class="row-even"><td><div class="first last highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="kr">template</span><span class="w"> </span><span class="kt">T</span>
<span class="w">  </span><span class="kr">with</span>
<span class="w">    </span><span class="n">p</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Party</span>
<span class="w">    </span><span class="n">i</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Int</span>
<span class="w">  </span><span class="kr">where</span>
<span class="w">    </span><span class="kr">signatory</span><span class="w"> </span><span class="n">p</span>

<span class="w">    </span><span class="kr">interface</span><span class="w"> </span><span class="kr">instance</span><span class="w"> </span><span class="kt">I</span><span class="w"> </span><span class="kr">for</span><span class="w"> </span><span class="kt">T</span><span class="w"> </span><span class="kr">where</span>
<span class="w">      </span><span class="n">view</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="kt">IView</span><span class="w"> </span><span class="n">i</span>
<span class="w">      </span><span class="n">m</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="n">i</span>
</pre></div>
</div>
</td>
<td><div class="first last highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="kr">template</span><span class="w"> </span><span class="kt">T</span>
<span class="w">  </span><span class="kr">with</span>
<span class="w">    </span><span class="n">p</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Party</span>
<span class="w">    </span><span class="n">i</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Int</span>
<span class="w">  </span><span class="kr">where</span>
<span class="w">    </span><span class="kr">signatory</span><span class="w"> </span><span class="n">p</span>

<span class="w">    </span><span class="kr">interface</span><span class="w"> </span><span class="kr">instance</span><span class="w"> </span><span class="kt">I</span><span class="w"> </span><span class="kr">for</span><span class="w"> </span><span class="kt">T</span><span class="w"> </span><span class="kr">where</span>
<span class="w">      </span><span class="n">view</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="kt">IView</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>
<span class="w">      </span><span class="n">m</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="n">i</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
<p>Assume the same ledger as above. Fetching contract <code class="docutils literal notranslate"><span class="pre">1234</span></code> by interface with
package preference <code class="docutils literal notranslate"><span class="pre">p-2.0.0</span></code> again retrieves the contract and computes its
view according to <code class="docutils literal notranslate"><span class="pre">p-1.0.0</span></code>: <code class="docutils literal notranslate"><span class="pre">IView</span> <span class="pre">42</span></code>. The contract is then transformed
into a value of type <code class="docutils literal notranslate"><span class="pre">p-2.0.0:T</span></code>: <code class="docutils literal notranslate"><span class="pre">T</span> <span class="pre">{</span> <span class="pre">sig</span> <span class="pre">=</span> <span class="pre">'Alice',</span> <span class="pre">i</span> <span class="pre">=</span> <span class="pre">42</span> <span class="pre">}</span></code> and its view
is computed again, this time according to <code class="docutils literal notranslate"><span class="pre">p-2.0.0</span></code>: <code class="docutils literal notranslate"><span class="pre">IView</span> <span class="pre">43</span></code>. Because the
two views differ, the fetch is rejected at runtime.</p>
</div>
<div class="section" id="key-transformation-in-fetchbykey-and-lookupbykey">
<h3>Key Transformation in FetchByKey and LookupByKey<a class="headerlink" href="#key-transformation-in-fetchbykey-and-lookupbykey" title="Permalink to this headline">¶</a></h3>
<p>When fetching or looking up a contract by key in the body of a choice, the type
of the key expression is known at compile time. Let us call it the target type.
The returned contract, if any, verifies that its key, after
transformation to the target type, matches the key used for querying.</p>
<p><strong>Example</strong></p>
<p>Below the module on the right is a valid upgrade of the module on the left:</p>
<table border="1" class="colwidths-given diff-block docutils align-default" style="width: 100%">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>In <code class="docutils literal notranslate"><span class="pre">p-1.0.0</span></code>:</td>
<td>In <code class="docutils literal notranslate"><span class="pre">p-2.0.0</span></code>:</td>
</tr>
<tr class="row-even"><td><div class="first last highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="kr">module</span><span class="w"> </span><span class="nn">M</span><span class="w"> </span><span class="kr">where</span>

<span class="kr">data</span><span class="w"> </span><span class="kt">MyKey</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="kt">MyKey</span>
<span class="w">  </span><span class="kr">with</span>
<span class="w">    </span><span class="n">p</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Party</span>

<span class="kr">template</span><span class="w"> </span><span class="kt">T</span>
<span class="w">  </span><span class="kr">with</span>
<span class="w">    </span><span class="n">sig</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Party</span>
<span class="w">  </span><span class="kr">where</span>
<span class="w">    </span><span class="kr">signatory</span><span class="w"> </span><span class="n">sig</span>
<span class="w">    </span><span class="kr">key</span><span class="w"> </span><span class="kt">MyKey</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">MyKey</span>
<span class="w">    </span><span class="kr">maintainer</span><span class="w"> </span><span class="kr">key</span><span class="o">.</span><span class="n">p</span>
</pre></div>
</div>
</td>
<td><div class="first last highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="kr">module</span><span class="w"> </span><span class="nn">M</span><span class="w"> </span><span class="kr">where</span>

<span class="kr">data</span><span class="w"> </span><span class="kt">MyKey</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="kt">MyKey</span>
<span class="w">  </span><span class="kr">with</span>
<span class="w">    </span><span class="n">p</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Party</span>
<span class="w">    </span><span class="n">i</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Optional</span><span class="w"> </span><span class="kt">Int</span>

<span class="kr">template</span><span class="w"> </span><span class="kt">T</span>
<span class="w">  </span><span class="kr">with</span>
<span class="w">    </span><span class="n">sig</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Party</span>
<span class="w">    </span><span class="n">i</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Optional</span><span class="w"> </span><span class="kt">Int</span>
<span class="w">  </span><span class="kr">where</span>
<span class="w">    </span><span class="kr">signatory</span><span class="w"> </span><span class="n">sig</span>
<span class="w">    </span><span class="kr">key</span><span class="w"> </span><span class="kt">MyKey</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">MyKey</span>
<span class="w">    </span><span class="kr">maintainer</span><span class="w"> </span><span class="kr">key</span><span class="o">.</span><span class="n">p</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
<p>Assume a ledger that contains a contract of type <code class="docutils literal notranslate"><span class="pre">T</span></code> written by
<code class="docutils literal notranslate"><span class="pre">p-1.0.0</span></code>.</p>
<table border="1" class="docutils align-default">
<colgroup>
<col width="16%" />
<col width="19%" />
<col width="34%" />
<col width="31%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Contract ID</th>
<th class="head">Contract Type</th>
<th class="head">Contract Key</th>
<th class="head">Contract</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">1234</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">p-1.0.0:T</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">MyKey</span> <span class="pre">{</span> <span class="pre">p</span> <span class="pre">=</span> <span class="pre">'Alice'</span> <span class="pre">}</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">T</span> <span class="pre">{</span> <span class="pre">sig</span> <span class="pre">=</span> <span class="pre">'Alice'</span> <span class="pre">}</span></code></td>
</tr>
</tbody>
</table>
<p>Finally, assume a third package which depends on <code class="docutils literal notranslate"><span class="pre">p-2.0.0</span></code> and defines a
choice involving the following lookup by key:</p>
<div class="highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="kr">choice</span><span class="w"> </span><span class="kt">C</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="nb">()</span>
<span class="w">  </span><span class="kr">controller</span><span class="w"> </span><span class="n">ctl</span>
<span class="w">  </span><span class="kr">do</span>
<span class="w">    </span><span class="n">cid</span><span class="w"> </span><span class="ow">&lt;-</span><span class="w"> </span><span class="n">lookupByKey</span><span class="w"> </span><span class="o">@</span><span class="kt">T</span><span class="w"> </span><span class="p">(</span><span class="kt">MyKey</span><span class="w"> </span><span class="n">alice</span><span class="w"> </span><span class="kt">None</span><span class="p">)</span>
<span class="w">    </span><span class="o">...</span>
</pre></div>
</div>
<p>The static type of the key being looked up is thus <code class="docutils literal notranslate"><span class="pre">p-2.0.0:MyKey</span></code>. The key of
contract <code class="docutils literal notranslate"><span class="pre">1234</span></code>, once transformed to a value of type <code class="docutils literal notranslate"><span class="pre">p-2.0.0:MyKey</span></code>,
becomes <code class="docutils literal notranslate"><span class="pre">MyKey</span> <span class="pre">{</span> <span class="pre">p</span> <span class="pre">=</span> <span class="pre">'Alice',</span> <span class="pre">i</span> <span class="pre">=</span> <span class="pre">None</span> <span class="pre">}</span></code>. This matches the key being looked
up, so <code class="docutils literal notranslate"><span class="pre">cid</span></code> is bound to <code class="docutils literal notranslate"><span class="pre">Some</span> <span class="pre">1234</span></code>.</p>
</div>
</div>
<div class="section" id="lf-1-17-values-in-the-ledger-api">
<h2>LF 1.17 Values in the Ledger API<a class="headerlink" href="#lf-1-17-values-in-the-ledger-api" title="Permalink to this headline">¶</a></h2>
<p>Commands and queries that involve LF 1.17 templates or interfaces have relaxed
validation rules for ingested values. Returned values are subject
to normalization.</p>
<div class="section" id="value-validation-in-commands">
<h3>Value Validation in Commands<a class="headerlink" href="#value-validation-in-commands" title="Permalink to this headline">¶</a></h3>
<p>In the following examples, the <em>target template</em> of a command is the template or
interface identified by the <code class="docutils literal notranslate"><span class="pre">template_id</span></code> field of the command after
<a class="reference internal" href="../../upgrade/smart-contract-upgrades.html#dynamic-package-resolution-in-command-submission"><span class="std std-ref">dynamic package
resolution</span></a>.</p>
<p>A value featured in a command (e.g. <code class="docutils literal notranslate"><span class="pre">create_arguments</span></code>) has
<em>expected type</em> <code class="docutils literal notranslate"><span class="pre">T</span></code> if the value needs to type-check against <code class="docutils literal notranslate"><span class="pre">T</span></code> in order to
satisfy the type signatures of the target template of the command. Note that
this definition necessarily extends to sub-values.</p>
<p>In a record value of the form <code class="docutils literal notranslate"><span class="pre">Constructor</span> <span class="pre">{</span> <span class="pre">field1</span> <span class="pre">=</span> <span class="pre">v1,</span> <span class="pre">...,</span> <span class="pre">fieldn</span> <span class="pre">=</span> <span class="pre">vn</span> <span class="pre">}</span></code>, <code class="docutils literal notranslate"><span class="pre">vi</span></code> is a <em>trailing None</em> if for all <code class="docutils literal notranslate"><span class="pre">n</span> <span class="pre">&gt;=</span> <span class="pre">j</span> <span class="pre">&gt;=</span> <span class="pre">i</span></code>, <code class="docutils literal notranslate"><span class="pre">vj</span> <span class="pre">=</span> <span class="pre">None</span></code>.</p>
<p>On submission of a command whose target template is defined in an LF 1.17
package, the validation rules for values are relaxed as follows:</p>
<blockquote>
<div><ul class="simple">
<li>The <code class="docutils literal notranslate"><span class="pre">record_id</span></code>, <code class="docutils literal notranslate"><span class="pre">variant_id</span></code>, and <code class="docutils literal notranslate"><span class="pre">enum_id</span></code> fields of values,
if present, are only checked against the module and type name of the
expected type for that value. The package ID component of these fields is
ignored.</li>
<li>In record values where all field names are provided, <em>any</em> fields of value None
may be omitted.</li>
<li>In record values where not all field names are provided, fields must be
provided in the same order as that of the record type definition, and
trailing Nones may be omitted.</li>
</ul>
</div></blockquote>
<p>These rules apply for all sub-values, even those whose type is defined in an
LF 1.15 or earlier package.</p>
<p><strong>Example 1</strong></p>
<p>Assume a LF 1.17 package called <code class="docutils literal notranslate"><span class="pre">example1-1.0.0</span></code> which defines a template called
<code class="docutils literal notranslate"><span class="pre">T</span></code> in a module called <code class="docutils literal notranslate"><span class="pre">Main</span></code>.</p>
<div class="highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="kr">module</span><span class="w"> </span><span class="nn">Main</span><span class="w"> </span><span class="kr">where</span>

<span class="kr">template</span><span class="w"> </span><span class="kt">T</span>
<span class="w">  </span><span class="kr">with</span>
<span class="w">    </span><span class="n">p</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Party</span>
<span class="w">  </span><span class="kr">where</span>
<span class="w">    </span><span class="kr">signatory</span><span class="w"> </span><span class="n">p</span>
</pre></div>
</div>
<p>Assume another package called <code class="docutils literal notranslate"><span class="pre">other-1.0.0</span></code> which defines a different template
also called <code class="docutils literal notranslate"><span class="pre">T</span></code> in a module also called <code class="docutils literal notranslate"><span class="pre">Main</span></code>.</p>
<div class="highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="kr">module</span><span class="w"> </span><span class="nn">Main</span><span class="w"> </span><span class="kr">where</span>

<span class="kr">template</span><span class="w"> </span><span class="kt">T</span>
<span class="w">  </span><span class="kr">with</span>
<span class="w">    </span><span class="n">s</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Party</span>
<span class="w">    </span><span class="n">i</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Int</span>
<span class="w">  </span><span class="kr">where</span>
<span class="w">    </span><span class="kr">signatory</span><span class="w"> </span><span class="n">s</span>
</pre></div>
</div>
<p>Then the ledger API will accept Create commands for <code class="docutils literal notranslate"><span class="pre">example1-1.0.0:Main.T</span></code> whose
create arguments are annotated with type <code class="docutils literal notranslate"><span class="pre">other-1.0.0:T:Main.T</span></code>, even though
the type annotation is wrong. In other words, the following console commands
succeed:</p>
<div class="highlight-scala notranslate"><div class="highlight"><pre><span></span><span class="o">@</span><span class="w"> </span><span class="kd">val</span><span class="w"> </span><span class="n">createCmd</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Command</span><span class="p">(</span>
<span class="w">    </span><span class="n">command</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Command</span><span class="p">.</span><span class="nc">Command</span><span class="p">.</span><span class="nc">Create</span><span class="p">(</span>
<span class="w">      </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">CreateCommand</span><span class="p">(</span>
<span class="w">        </span><span class="n">templateId</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Some</span><span class="p">(</span>
<span class="w">          </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Identifier</span><span class="p">(</span><span class="n">packageId</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">packageIdExample1</span><span class="p">,</span><span class="w"> </span><span class="n">moduleName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Main&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">entityName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;T&quot;</span><span class="p">)),</span>
<span class="w">        </span><span class="n">createArguments</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Some</span><span class="p">(</span>
<span class="w">          </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Record</span><span class="p">(</span>
<span class="w">            </span><span class="n">recordId</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Some</span><span class="p">(</span>
<span class="w">              </span><span class="nc">Identifier</span><span class="p">(</span>
<span class="w">                </span><span class="n">packageId</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">packageIdOther</span><span class="p">,</span>
<span class="w">                </span><span class="n">moduleName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Main&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="n">entityName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;T&quot;</span>
<span class="w">              </span><span class="p">)</span>
<span class="w">            </span><span class="p">),</span>
<span class="w">            </span><span class="n">fields</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Seq</span><span class="p">(</span>
<span class="w">              </span><span class="nc">RecordField</span><span class="p">(</span>
<span class="w">                </span><span class="n">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;p&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Some</span><span class="p">(</span>
<span class="w">                  </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Value</span><span class="p">(</span><span class="n">sum</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Value</span><span class="p">.</span><span class="nc">Sum</span><span class="p">.</span><span class="nc">Party</span><span class="p">(</span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sandbox</span><span class="p">.</span><span class="n">adminParty</span><span class="p">.</span><span class="n">toLf</span><span class="p">))</span>
<span class="w">                </span><span class="p">)</span>
<span class="w">              </span><span class="p">)</span>
<span class="w">            </span><span class="p">)</span>
<span class="w">          </span><span class="p">)</span>
<span class="w">        </span><span class="p">)</span>
<span class="w">      </span><span class="p">)</span>
<span class="w">    </span><span class="p">)</span>
<span class="w">  </span><span class="p">)</span>

<span class="o">@</span><span class="w"> </span><span class="n">sandbox</span><span class="p">.</span><span class="n">ledger_api</span><span class="p">.</span><span class="n">commands</span><span class="p">.</span><span class="n">submit</span><span class="p">(</span><span class="nc">Seq</span><span class="p">(</span><span class="n">sandbox</span><span class="p">.</span><span class="n">adminParty</span><span class="p">),</span><span class="w"> </span><span class="nc">Seq</span><span class="p">(</span><span class="n">createCmd</span><span class="p">))</span>
</pre></div>
</div>
<p>This is because the module and type names of the type annotation, <code class="docutils literal notranslate"><span class="pre">Main</span></code> and
<code class="docutils literal notranslate"><span class="pre">T</span></code>, match those of the expected type: <code class="docutils literal notranslate"><span class="pre">example1-1.0.0:Main.T</span></code>.</p>
<p>Assume now a LF 1.15 package called <code class="docutils literal notranslate"><span class="pre">example1-lf115-1.0.0</span></code> with the same contents as
<code class="docutils literal notranslate"><span class="pre">example1-1.0.0</span></code>. Trying to submit a Create command for <code class="docutils literal notranslate"><span class="pre">example1-1.0.0:Main.T</span></code>
whose create argument are annotated with type <code class="docutils literal notranslate"><span class="pre">other-1.0.0:T:Main.T</span></code> fails:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ERROR</span> <span class="n">c</span><span class="o">.</span><span class="n">d</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">e</span><span class="o">.</span><span class="n">CommunityConsoleEnvironment</span> <span class="o">-</span> <span class="n">Request</span> <span class="n">failed</span> <span class="k">for</span> <span class="n">sandbox</span><span class="o">.</span>
  <span class="n">GrpcClientError</span><span class="p">:</span> <span class="n">INVALID_ARGUMENT</span><span class="o">/</span><span class="n">COMMAND_PREPROCESSING_FAILED</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span><span class="n">e448b57c</span><span class="p">):</span>
    <span class="n">Mismatching</span> <span class="n">variant</span> <span class="nb">id</span><span class="p">,</span> <span class="n">the</span> <span class="nb">type</span> <span class="n">tells</span> <span class="n">us</span> <span class="n">ba561ce9adfc91b583752a842e72530f10ee0d93e729d19ef3179cd80daf43ca</span><span class="p">:</span><span class="n">Main</span><span class="p">:</span><span class="n">T</span><span class="p">,</span>
    <span class="n">but</span> <span class="n">the</span> <span class="n">value</span> <span class="n">tells</span> <span class="n">us</span> <span class="mi">39</span><span class="n">fb87e17e104daeaf10fdbc32d282d004a29d5ec14db6579605456c42d5678d</span><span class="p">:</span><span class="n">Main</span><span class="p">:</span><span class="n">T</span>
  <span class="n">Request</span><span class="p">:</span> <span class="n">SubmitAndWaitTransactionTree</span><span class="p">(</span>
  <span class="n">actAs</span> <span class="o">=</span> <span class="n">sandbox</span><span class="p">::</span><span class="mf">12208e04</span><span class="n">d297</span><span class="o">...</span><span class="p">,</span>
  <span class="n">readAs</span> <span class="o">=</span> <span class="n">Seq</span><span class="p">(),</span>
  <span class="n">commandId</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
  <span class="n">workflowId</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
  <span class="n">submissionId</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
  <span class="n">deduplicationPeriod</span> <span class="o">=</span> <span class="kc">None</span><span class="p">(),</span>
  <span class="n">applicationId</span> <span class="o">=</span> <span class="s1">&#39;CantonConsole&#39;</span><span class="p">,</span>
  <span class="n">commands</span> <span class="o">=</span> <span class="o">...</span>
<span class="p">)</span>
<span class="o">...</span>
</pre></div>
</div>
<p>This is because the relaxed validation rules only apply to LF 1.17 templates.
The behavior for LF 1.15 and earlier remains unchanged.</p>
<p><strong>Example 2</strong></p>
<p>Assume a LF 1.17 package called <code class="docutils literal notranslate"><span class="pre">example2-1.0.0</span></code> which defines a template with
two optional fields: one in leading position, and one in trailing position.</p>
<div class="highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="kr">module</span><span class="w"> </span><span class="nn">Main</span><span class="w"> </span><span class="kr">where</span>

<span class="kr">template</span><span class="w"> </span><span class="kt">T</span>
<span class="w">  </span><span class="kr">with</span>
<span class="w">    </span><span class="n">i</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Optional</span><span class="w"> </span><span class="kt">Int</span>
<span class="w">    </span><span class="n">p</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Party</span>
<span class="w">    </span><span class="n">j</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Optional</span><span class="w"> </span><span class="kt">Int</span>
<span class="w">  </span><span class="kr">where</span>
<span class="w">    </span><span class="kr">signatory</span><span class="w"> </span><span class="n">p</span>
</pre></div>
</div>
<p>Then submitting a Create command for <code class="docutils literal notranslate"><span class="pre">example2-1.0.0:Main.T</span></code> which only
provides <code class="docutils literal notranslate"><span class="pre">p</span></code> by name and no other field succeeds:</p>
<div class="highlight-scala notranslate"><div class="highlight"><pre><span></span><span class="o">@</span><span class="w"> </span><span class="kd">val</span><span class="w"> </span><span class="n">createCmd</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Command</span><span class="p">(</span>
<span class="w">    </span><span class="n">command</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Command</span><span class="p">.</span><span class="nc">Command</span><span class="p">.</span><span class="nc">Create</span><span class="p">(</span>
<span class="w">      </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">CreateCommand</span><span class="p">(</span>
<span class="w">        </span><span class="n">templateId</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Some</span><span class="p">(</span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Identifier</span><span class="p">(</span><span class="n">packageId</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">packageIdExample2</span><span class="p">,</span><span class="w"> </span><span class="n">moduleName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Main&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">entityName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;T&quot;</span><span class="p">)),</span>
<span class="w">        </span><span class="n">createArguments</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Some</span><span class="p">(</span>
<span class="w">          </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Record</span><span class="p">(</span>
<span class="w">            </span><span class="n">recordId</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">None</span><span class="p">,</span>
<span class="w">            </span><span class="n">fields</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Seq</span><span class="p">(</span>
<span class="w">              </span><span class="nc">RecordField</span><span class="p">(</span>
<span class="w">                </span><span class="n">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;p&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Some</span><span class="p">(</span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Value</span><span class="p">(</span><span class="n">sum</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Value</span><span class="p">.</span><span class="nc">Sum</span><span class="p">.</span><span class="nc">Party</span><span class="p">(</span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sandbox</span><span class="p">.</span><span class="n">adminParty</span><span class="p">.</span><span class="n">toLf</span><span class="p">)))</span>
<span class="w">              </span><span class="p">)</span>
<span class="w">            </span><span class="p">)</span>
<span class="w">          </span><span class="p">)</span>
<span class="w">        </span><span class="p">)</span>
<span class="w">      </span><span class="p">)</span>
<span class="w">    </span><span class="p">)</span>
<span class="w">  </span><span class="p">)</span>

<span class="o">@</span><span class="w"> </span><span class="n">sandbox</span><span class="p">.</span><span class="n">ledger_api</span><span class="p">.</span><span class="n">commands</span><span class="p">.</span><span class="n">submit</span><span class="p">(</span><span class="nc">Seq</span><span class="p">(</span><span class="n">sandbox</span><span class="p">.</span><span class="n">adminParty</span><span class="p">),</span><span class="w"> </span><span class="nc">Seq</span><span class="p">(</span><span class="n">createCmd</span><span class="p">))</span>
<span class="n">res13</span><span class="p">:</span><span class="w"> </span><span class="n">com</span><span class="p">.</span><span class="n">daml</span><span class="p">.</span><span class="n">ledger</span><span class="p">.</span><span class="n">api</span><span class="p">.</span><span class="n">v1</span><span class="p">.</span><span class="n">transaction</span><span class="p">.</span><span class="nc">TransactionTree</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">TransactionTree</span><span class="p">(</span>
<span class="w">  </span><span class="p">...</span>
<span class="w">  </span><span class="n">eventsById</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Map</span><span class="p">(</span>
<span class="w">    </span><span class="s">&quot;#122062d3d0b89f011ac651ea0139f381a73fe080ab215e5970a8c7bf804edeec932c:0&quot;</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="nc">TreeEvent</span><span class="p">(</span>
<span class="w">      </span><span class="n">kind</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Created</span><span class="p">(</span>
<span class="w">        </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">CreatedEvent</span><span class="p">(</span>
<span class="w">          </span><span class="p">...</span>
<span class="w">          </span><span class="n">createArguments</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Some</span><span class="p">(</span>
<span class="w">            </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Record</span><span class="p">(</span>
<span class="w">              </span><span class="n">recordId</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Some</span><span class="p">(</span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Identifier</span><span class="p">(</span><span class="n">packageId</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;627f4ad4df901b80bae208eded1c03932f38ed9c1f44c50468f27c88ef988e25&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">moduleName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Main&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">entityName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;T&quot;</span><span class="p">)),</span>
<span class="w">              </span><span class="n">fields</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Vector</span><span class="p">(</span>
<span class="w">                </span><span class="nc">RecordField</span><span class="p">(</span><span class="n">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;i&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Some</span><span class="p">(</span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Value</span><span class="p">(</span><span class="n">sum</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Optional</span><span class="p">(</span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Optional</span><span class="p">(</span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">None</span><span class="p">))))),</span>
<span class="w">                </span><span class="nc">RecordField</span><span class="p">(</span><span class="n">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;p&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Some</span><span class="p">(</span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Value</span><span class="p">(</span><span class="n">sum</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Party</span><span class="p">(</span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;sandbox::1220077e3366037ffce33cba97d757506fc1c72ad957a9b86c6bf137404637c7fee3&quot;</span><span class="p">)))),</span>
<span class="w">                </span><span class="nc">RecordField</span><span class="p">(</span><span class="n">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;j&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Some</span><span class="p">(</span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Value</span><span class="p">(</span><span class="n">sum</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Optional</span><span class="p">(</span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Optional</span><span class="p">(</span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">None</span><span class="p">)))))</span>
<span class="w">              </span><span class="p">)</span>
<span class="w">            </span><span class="p">)</span>
<span class="w">          </span><span class="p">),</span>
<span class="w">          </span><span class="p">...</span>
<span class="w">        </span><span class="p">)</span>
<span class="w">      </span><span class="p">)</span>
<span class="w">    </span><span class="p">)</span>
<span class="w">  </span><span class="p">),</span>
<span class="w">  </span><span class="p">...</span>
<span class="p">)</span>
</pre></div>
</div>
<p>Submitting the same command but with no label for field <code class="docutils literal notranslate"><span class="pre">p</span></code> fails:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">@</span> <span class="n">val</span> <span class="n">createCmd</span> <span class="o">=</span> <span class="n">Command</span><span class="p">(</span>
    <span class="n">command</span> <span class="o">=</span> <span class="n">Command</span><span class="o">.</span><span class="n">Command</span><span class="o">.</span><span class="n">Create</span><span class="p">(</span>
      <span class="n">value</span> <span class="o">=</span> <span class="n">CreateCommand</span><span class="p">(</span>
        <span class="n">templateId</span> <span class="o">=</span> <span class="n">Some</span><span class="p">(</span><span class="n">value</span> <span class="o">=</span> <span class="n">Identifier</span><span class="p">(</span><span class="n">packageId</span> <span class="o">=</span> <span class="n">packageIdExample2</span><span class="p">,</span> <span class="n">moduleName</span> <span class="o">=</span> <span class="s2">&quot;Main&quot;</span><span class="p">,</span> <span class="n">entityName</span> <span class="o">=</span> <span class="s2">&quot;T&quot;</span><span class="p">)),</span>
        <span class="n">createArguments</span> <span class="o">=</span> <span class="n">Some</span><span class="p">(</span>
          <span class="n">value</span> <span class="o">=</span> <span class="n">Record</span><span class="p">(</span>
            <span class="n">recordId</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
            <span class="n">fields</span> <span class="o">=</span> <span class="n">Seq</span><span class="p">(</span>
              <span class="n">RecordField</span><span class="p">(</span>
                <span class="n">label</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
                <span class="n">value</span> <span class="o">=</span> <span class="n">Some</span><span class="p">(</span><span class="n">value</span> <span class="o">=</span> <span class="n">Value</span><span class="p">(</span><span class="nb">sum</span> <span class="o">=</span> <span class="n">Value</span><span class="o">.</span><span class="n">Sum</span><span class="o">.</span><span class="n">Party</span><span class="p">(</span><span class="n">value</span> <span class="o">=</span> <span class="n">sandbox</span><span class="o">.</span><span class="n">adminParty</span><span class="o">.</span><span class="n">toLf</span><span class="p">)))</span>
              <span class="p">)</span>
            <span class="p">)</span>
          <span class="p">)</span>
        <span class="p">)</span>
      <span class="p">)</span>
    <span class="p">)</span>
  <span class="p">)</span>

<span class="o">@</span> <span class="n">sandbox</span><span class="o">.</span><span class="n">ledger_api</span><span class="o">.</span><span class="n">commands</span><span class="o">.</span><span class="n">submit</span><span class="p">(</span><span class="n">Seq</span><span class="p">(</span><span class="n">sandbox</span><span class="o">.</span><span class="n">adminParty</span><span class="p">),</span> <span class="n">Seq</span><span class="p">(</span><span class="n">createCmd</span><span class="p">))</span>

<span class="n">ERROR</span> <span class="n">c</span><span class="o">.</span><span class="n">d</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">e</span><span class="o">.</span><span class="n">CommunityConsoleEnvironment</span> <span class="o">-</span> <span class="n">Request</span> <span class="n">failed</span> <span class="k">for</span> <span class="n">sandbox</span><span class="o">.</span>
  <span class="n">GrpcClientError</span><span class="p">:</span> <span class="n">INVALID_ARGUMENT</span><span class="o">/</span><span class="n">COMMAND_PREPROCESSING_FAILED</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span><span class="n">b880be91</span><span class="p">):</span> <span class="n">Missing</span> <span class="n">non</span><span class="o">-</span><span class="n">optional</span> <span class="n">field</span> <span class="s2">&quot;p&quot;</span><span class="p">,</span> <span class="n">cannot</span> <span class="n">upgrade</span> <span class="n">non</span><span class="o">-</span><span class="n">optional</span> <span class="n">fields</span><span class="o">.</span>
  <span class="n">Request</span><span class="p">:</span> <span class="n">SubmitAndWaitTransactionTree</span><span class="p">(</span>
  <span class="n">actAs</span> <span class="o">=</span> <span class="n">sandbox</span><span class="p">::</span><span class="mf">1220077e3366</span><span class="o">...</span><span class="p">,</span>
  <span class="n">readAs</span> <span class="o">=</span> <span class="n">Seq</span><span class="p">(),</span>
  <span class="n">commandId</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
  <span class="n">workflowId</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
  <span class="n">submissionId</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
  <span class="n">deduplicationPeriod</span> <span class="o">=</span> <span class="kc">None</span><span class="p">(),</span>
  <span class="n">applicationId</span> <span class="o">=</span> <span class="s1">&#39;CantonConsole&#39;</span><span class="p">,</span>
  <span class="n">commands</span> <span class="o">=</span> <span class="o">...</span>
<span class="p">)</span>
<span class="o">...</span>
</pre></div>
</div>
<p>However, providing all but the trailing optional field <code class="docutils literal notranslate"><span class="pre">j</span></code> suceeds, even without labels:</p>
<div class="highlight-scala notranslate"><div class="highlight"><pre><span></span><span class="o">@</span><span class="w"> </span><span class="kd">val</span><span class="w"> </span><span class="n">createCmd</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Command</span><span class="p">(</span>
<span class="w">    </span><span class="n">command</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Command</span><span class="p">.</span><span class="nc">Command</span><span class="p">.</span><span class="nc">Create</span><span class="p">(</span>
<span class="w">      </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">CreateCommand</span><span class="p">(</span>
<span class="w">        </span><span class="n">templateId</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Some</span><span class="p">(</span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Identifier</span><span class="p">(</span><span class="n">packageId</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">packageIdExample2</span><span class="p">,</span><span class="w"> </span><span class="n">moduleName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Main&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">entityName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;T&quot;</span><span class="p">)),</span>
<span class="w">        </span><span class="n">createArguments</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Some</span><span class="p">(</span>
<span class="w">          </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Record</span><span class="p">(</span>
<span class="w">            </span><span class="n">recordId</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">None</span><span class="p">,</span>
<span class="w">            </span><span class="n">fields</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Seq</span><span class="p">(</span>
<span class="w">              </span><span class="nc">RecordField</span><span class="p">(</span><span class="n">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Some</span><span class="p">(</span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Value</span><span class="p">(</span><span class="n">sum</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Value</span><span class="p">.</span><span class="nc">Sum</span><span class="p">.</span><span class="nc">Optional</span><span class="p">(</span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Optional</span><span class="p">(</span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">None</span><span class="p">))))),</span>
<span class="w">              </span><span class="nc">RecordField</span><span class="p">(</span>
<span class="w">                </span><span class="n">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Some</span><span class="p">(</span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Value</span><span class="p">(</span><span class="n">sum</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Value</span><span class="p">.</span><span class="nc">Sum</span><span class="p">.</span><span class="nc">Party</span><span class="p">(</span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sandbox</span><span class="p">.</span><span class="n">adminParty</span><span class="p">.</span><span class="n">toLf</span><span class="p">)))</span>
<span class="w">              </span><span class="p">)</span>
<span class="w">            </span><span class="p">)</span>
<span class="w">          </span><span class="p">)</span>
<span class="w">        </span><span class="p">)</span>
<span class="w">      </span><span class="p">)</span>
<span class="w">    </span><span class="p">)</span>
<span class="w">  </span><span class="p">)</span>

<span class="o">@</span><span class="w"> </span><span class="n">sandbox</span><span class="p">.</span><span class="n">ledger_api</span><span class="p">.</span><span class="n">commands</span><span class="p">.</span><span class="n">submit</span><span class="p">(</span><span class="nc">Seq</span><span class="p">(</span><span class="n">sandbox</span><span class="p">.</span><span class="n">adminParty</span><span class="p">),</span><span class="w"> </span><span class="nc">Seq</span><span class="p">(</span><span class="n">createCmd</span><span class="p">))</span>
<span class="n">res22</span><span class="p">:</span><span class="w"> </span><span class="n">com</span><span class="p">.</span><span class="n">daml</span><span class="p">.</span><span class="n">ledger</span><span class="p">.</span><span class="n">api</span><span class="p">.</span><span class="n">v1</span><span class="p">.</span><span class="n">transaction</span><span class="p">.</span><span class="nc">TransactionTree</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">TransactionTree</span><span class="p">(</span>
<span class="w">  </span><span class="p">...</span>
<span class="w">  </span><span class="n">eventsById</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Map</span><span class="p">(</span>
<span class="w">    </span><span class="s">&quot;#12203bb4082d4868c393ca2c969bb639757d21992cbac2a1abad271d688a30dbcae6:0&quot;</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="nc">TreeEvent</span><span class="p">(</span>
<span class="w">      </span><span class="n">kind</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Created</span><span class="p">(</span>
<span class="w">        </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">CreatedEvent</span><span class="p">(</span>
<span class="w">          </span><span class="p">...</span>
<span class="w">          </span><span class="n">createArguments</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Some</span><span class="p">(</span>
<span class="w">            </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Record</span><span class="p">(</span>
<span class="w">              </span><span class="n">recordId</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Some</span><span class="p">(</span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Identifier</span><span class="p">(</span><span class="n">packageId</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;627f4ad4df901b80bae208eded1c03932f38ed9c1f44c50468f27c88ef988e25&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">moduleName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Main&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">entityName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;T&quot;</span><span class="p">)),</span>
<span class="w">              </span><span class="n">fields</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Vector</span><span class="p">(</span>
<span class="w">                </span><span class="nc">RecordField</span><span class="p">(</span><span class="n">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;i&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Some</span><span class="p">(</span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Value</span><span class="p">(</span><span class="n">sum</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Optional</span><span class="p">(</span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Optional</span><span class="p">(</span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">None</span><span class="p">))))),</span>
<span class="w">                </span><span class="nc">RecordField</span><span class="p">(</span><span class="n">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;p&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Some</span><span class="p">(</span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Value</span><span class="p">(</span><span class="n">sum</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Party</span><span class="p">(</span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;sandbox::1220077e3366037ffce33cba97d757506fc1c72ad957a9b86c6bf137404637c7fee3&quot;</span><span class="p">)))),</span>
<span class="w">                </span><span class="nc">RecordField</span><span class="p">(</span><span class="n">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;j&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Some</span><span class="p">(</span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Value</span><span class="p">(</span><span class="n">sum</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Optional</span><span class="p">(</span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Optional</span><span class="p">(</span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">None</span><span class="p">)))))</span>
<span class="w">              </span><span class="p">)</span>
<span class="w">            </span><span class="p">)</span>
<span class="w">          </span><span class="p">),</span>
<span class="w">          </span><span class="p">...</span>
<span class="w">        </span><span class="p">)</span>
<span class="w">      </span><span class="p">)</span>
<span class="w">    </span><span class="p">)</span>
<span class="w">  </span><span class="p">),</span>
<span class="w">  </span><span class="p">...</span>
<span class="p">)</span>
</pre></div>
</div>
<p>Finally, assume a package called <code class="docutils literal notranslate"><span class="pre">example2-lf115-1.0.0</span></code> which defines the same
<code class="docutils literal notranslate"><span class="pre">Main</span></code> module as <code class="docutils literal notranslate"><span class="pre">example2-1.0.0</span></code> but compiles to LF 1.15. Submitting a command
that misses the field <code class="docutils literal notranslate"><span class="pre">j</span></code> results in an error:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">@</span> <span class="n">val</span> <span class="n">createCmd</span> <span class="o">=</span> <span class="n">Command</span><span class="p">(</span>
    <span class="n">command</span> <span class="o">=</span> <span class="n">Command</span><span class="o">.</span><span class="n">Command</span><span class="o">.</span><span class="n">Create</span><span class="p">(</span>
      <span class="n">value</span> <span class="o">=</span> <span class="n">CreateCommand</span><span class="p">(</span>
        <span class="n">templateId</span> <span class="o">=</span> <span class="n">Some</span><span class="p">(</span><span class="n">value</span> <span class="o">=</span> <span class="n">Identifier</span><span class="p">(</span><span class="n">packageId</span> <span class="o">=</span> <span class="n">packageIdExample2Lf115</span><span class="p">,</span> <span class="n">moduleName</span> <span class="o">=</span> <span class="s2">&quot;Main&quot;</span><span class="p">,</span> <span class="n">entityName</span> <span class="o">=</span> <span class="s2">&quot;T&quot;</span><span class="p">)),</span>
        <span class="n">createArguments</span> <span class="o">=</span> <span class="n">Some</span><span class="p">(</span>
          <span class="n">value</span> <span class="o">=</span> <span class="n">Record</span><span class="p">(</span>
            <span class="n">recordId</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
            <span class="n">fields</span> <span class="o">=</span> <span class="n">Seq</span><span class="p">(</span>
              <span class="n">RecordField</span><span class="p">(</span><span class="n">label</span> <span class="o">=</span> <span class="s2">&quot;i&quot;</span><span class="p">,</span> <span class="n">value</span> <span class="o">=</span> <span class="n">Some</span><span class="p">(</span><span class="n">value</span> <span class="o">=</span> <span class="n">Value</span><span class="p">(</span><span class="nb">sum</span> <span class="o">=</span> <span class="n">Value</span><span class="o">.</span><span class="n">Sum</span><span class="o">.</span><span class="n">Optional</span><span class="p">(</span><span class="n">value</span> <span class="o">=</span> <span class="n">Optional</span><span class="p">(</span><span class="n">value</span> <span class="o">=</span> <span class="kc">None</span><span class="p">))))),</span>
              <span class="n">RecordField</span><span class="p">(</span>
                <span class="n">label</span> <span class="o">=</span> <span class="s2">&quot;p&quot;</span><span class="p">,</span>
                <span class="n">value</span> <span class="o">=</span> <span class="n">Some</span><span class="p">(</span><span class="n">value</span> <span class="o">=</span> <span class="n">Value</span><span class="p">(</span><span class="nb">sum</span> <span class="o">=</span> <span class="n">Value</span><span class="o">.</span><span class="n">Sum</span><span class="o">.</span><span class="n">Party</span><span class="p">(</span><span class="n">value</span> <span class="o">=</span> <span class="n">sandbox</span><span class="o">.</span><span class="n">adminParty</span><span class="o">.</span><span class="n">toLf</span><span class="p">)))</span>
              <span class="p">)</span>
            <span class="p">)</span>
          <span class="p">)</span>
        <span class="p">)</span>
      <span class="p">)</span>
    <span class="p">)</span>
  <span class="p">)</span>

<span class="o">@</span> <span class="n">sandbox</span><span class="o">.</span><span class="n">ledger_api</span><span class="o">.</span><span class="n">commands</span><span class="o">.</span><span class="n">submit</span><span class="p">(</span><span class="n">Seq</span><span class="p">(</span><span class="n">sandbox</span><span class="o">.</span><span class="n">adminParty</span><span class="p">),</span> <span class="n">Seq</span><span class="p">(</span><span class="n">createCmd</span><span class="p">))</span>
<span class="n">ERROR</span> <span class="n">c</span><span class="o">.</span><span class="n">d</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">e</span><span class="o">.</span><span class="n">CommunityConsoleEnvironment</span> <span class="o">-</span> <span class="n">Request</span> <span class="n">failed</span> <span class="k">for</span> <span class="n">sandbox</span><span class="o">.</span>
  <span class="n">GrpcClientError</span><span class="p">:</span> <span class="n">INVALID_ARGUMENT</span><span class="o">/</span><span class="n">COMMAND_PREPROCESSING_FAILED</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span><span class="n">a144d39d</span><span class="p">):</span> <span class="n">Expecting</span> <span class="mi">3</span> <span class="n">field</span> <span class="k">for</span> <span class="n">record</span> <span class="mi">6</span><span class="n">c247f322c1a84610a5a015d5d713f2c8c0f33290d6b154de212fce228aa522b</span><span class="p">:</span><span class="n">Main</span><span class="p">:</span><span class="n">T</span><span class="p">,</span> <span class="n">but</span> <span class="n">got</span> <span class="mi">2</span>
  <span class="n">Request</span><span class="p">:</span> <span class="n">SubmitAndWaitTransactionTree</span><span class="p">(</span>
  <span class="n">actAs</span> <span class="o">=</span> <span class="n">sandbox</span><span class="p">::</span><span class="mi">12204</span><span class="n">b23b351</span><span class="o">...</span><span class="p">,</span>
  <span class="n">readAs</span> <span class="o">=</span> <span class="n">Seq</span><span class="p">(),</span>
  <span class="n">commandId</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
  <span class="n">workflowId</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
  <span class="n">submissionId</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
  <span class="n">deduplicationPeriod</span> <span class="o">=</span> <span class="kc">None</span><span class="p">(),</span>
  <span class="n">applicationId</span> <span class="o">=</span> <span class="s1">&#39;CantonConsole&#39;</span><span class="p">,</span>
  <span class="n">commands</span> <span class="o">=</span> <span class="o">...</span>
<span class="p">)</span>
<span class="o">...</span>
</pre></div>
</div>
</div>
<div class="section" id="value-normalization-in-ledger-api-responses">
<h3>Value normalization in Ledger API responses<a class="headerlink" href="#value-normalization-in-ledger-api-responses" title="Permalink to this headline">¶</a></h3>
<p>A Ledger API value (e.g. <code class="docutils literal notranslate"><span class="pre">create_arguments</span></code> in a <code class="docutils literal notranslate"><span class="pre">CreatedEvent</span></code>) is said to
be in normal form if none of its sub-values (itself included) has trailing
Nones.</p>
<p>Starting with Daml 2.10, values in Ledger API non-verbose responses are subject
to normalization whenever the transaction involves an LF 1.17 template or
interface. The normalization extends to all sub-values, including those whose
type is defined in an LF 1.15 or earlier package.</p>
<p>When no LF 1.17 package is involved in a transaction or when verbose mode is
requested, then the values in Ledger API responses are guaranteed <strong>not</strong> to be
in normal form.</p>
<p><strong>Example 1</strong></p>
<p>Assume a LF 1.17 package called <code class="docutils literal notranslate"><span class="pre">example1-1.0.0</span></code> which defines a template
<code class="docutils literal notranslate"><span class="pre">T</span></code> and a record <code class="docutils literal notranslate"><span class="pre">Record</span></code> in a module called <code class="docutils literal notranslate"><span class="pre">Main</span></code>.</p>
<div class="highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="kr">module</span><span class="w"> </span><span class="nn">Main</span><span class="w"> </span><span class="kr">where</span>

<span class="kr">data</span><span class="w"> </span><span class="kt">Record</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="kt">Record</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">ri</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Optional</span><span class="w"> </span><span class="kt">Int</span><span class="p">,</span><span class="w"> </span><span class="n">rj</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Int</span><span class="p">,</span><span class="w"> </span><span class="n">rk</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Optional</span><span class="w"> </span><span class="kt">Int</span><span class="w"> </span><span class="p">}</span>
<span class="w">  </span><span class="kr">deriving</span><span class="w"> </span><span class="p">(</span><span class="kt">Eq</span><span class="p">,</span><span class="w"> </span><span class="kt">Show</span><span class="p">)</span>

<span class="kr">template</span><span class="w"> </span><span class="kt">T</span>
<span class="w">  </span><span class="kr">with</span>
<span class="w">    </span><span class="n">p</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Party</span>
<span class="w">    </span><span class="n">i</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Optional</span><span class="w"> </span><span class="kt">Int</span>
<span class="w">    </span><span class="n">r</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Record</span>
<span class="w">    </span><span class="n">j</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Optional</span><span class="w"> </span><span class="kt">Int</span>
<span class="w">  </span><span class="kr">where</span>
<span class="w">    </span><span class="kr">signatory</span><span class="w"> </span><span class="n">p</span>
</pre></div>
</div>
<p>Also assume a ledger that contains a contract of type <code class="docutils literal notranslate"><span class="pre">T</span></code> written by
<code class="docutils literal notranslate"><span class="pre">example1-1.0.0</span></code> where all the optional fields are set to <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p>
<div class="highlight-scala notranslate"><div class="highlight"><pre><span></span><span class="kd">val</span><span class="w"> </span><span class="n">createCmd</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ledger_api_utils</span><span class="p">.</span><span class="n">create</span><span class="p">(</span>
<span class="w">  </span><span class="n">packageIdExample1</span><span class="p">,</span>
<span class="w">  </span><span class="s">&quot;Main&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="s">&quot;T&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nc">Map</span><span class="p">(</span>
<span class="w">    </span><span class="s">&quot;p&quot;</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">sandbox</span><span class="p">.</span><span class="n">adminParty</span><span class="p">,</span>
<span class="w">    </span><span class="s">&quot;i&quot;</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="nc">None</span><span class="p">,</span>
<span class="w">    </span><span class="s">&quot;r&quot;</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="nc">Map</span><span class="p">(</span><span class="s">&quot;ri&quot;</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="nc">None</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;rj&quot;</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;rk&quot;</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="nc">None</span><span class="p">),</span>
<span class="w">    </span><span class="s">&quot;j&quot;</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="nc">None</span><span class="p">))</span>

<span class="n">sandbox</span><span class="p">.</span><span class="n">ledger_api</span><span class="p">.</span><span class="n">commands</span><span class="p">.</span><span class="n">submit</span><span class="p">(</span><span class="nc">Seq</span><span class="p">(</span><span class="n">sandbox</span><span class="p">.</span><span class="n">adminParty</span><span class="p">),</span><span class="w"> </span><span class="nc">Seq</span><span class="p">(</span><span class="n">createCmd</span><span class="p">))</span>
</pre></div>
</div>
<p>Then querying the ledger’s active contract set in non-verbose mode returns the
following:</p>
<div class="highlight-scala notranslate"><div class="highlight"><pre><span></span><span class="o">@</span><span class="w"> </span><span class="n">sandbox</span><span class="p">.</span><span class="n">ledger_api</span><span class="p">.</span><span class="n">acs</span><span class="p">.</span><span class="n">of_party</span><span class="p">(</span><span class="n">sandbox</span><span class="p">.</span><span class="n">adminParty</span><span class="p">,</span><span class="w"> </span><span class="n">verbose</span><span class="o">=</span><span class="kc">false</span><span class="p">)</span>
<span class="n">res15</span><span class="p">:</span><span class="w"> </span><span class="nc">Seq</span><span class="p">[</span><span class="n">com</span><span class="p">.</span><span class="n">digitalasset</span><span class="p">.</span><span class="n">canton</span><span class="p">.</span><span class="n">admin</span><span class="p">.</span><span class="n">api</span><span class="p">.</span><span class="n">client</span><span class="p">.</span><span class="n">commands</span><span class="p">.</span><span class="nc">LedgerApiTypeWrappers</span><span class="p">.</span><span class="nc">WrappedCreatedEvent</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">List</span><span class="p">(</span>
<span class="w">  </span><span class="nc">WrappedCreatedEvent</span><span class="p">(</span>
<span class="w">    </span><span class="n">event</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">CreatedEvent</span><span class="p">(</span>
<span class="w">      </span><span class="p">...</span>
<span class="w">      </span><span class="n">createArguments</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Some</span><span class="p">(</span>
<span class="w">        </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Record</span><span class="p">(</span>
<span class="w">          </span><span class="n">recordId</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">None</span><span class="p">,</span>
<span class="w">          </span><span class="n">fields</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Vector</span><span class="p">(</span>
<span class="w">            </span><span class="nc">RecordField</span><span class="p">(</span>
<span class="w">              </span><span class="n">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="p">,</span>
<span class="w">              </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Some</span><span class="p">(</span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Value</span><span class="p">(</span><span class="n">sum</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Party</span><span class="p">(</span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;sandbox::122010fdef685011beecd318f03c9d82bf1e2d45950bdb0fceb3497a112ee17f9476&quot;</span><span class="p">)))</span>
<span class="w">            </span><span class="p">),</span>
<span class="w">            </span><span class="nc">RecordField</span><span class="p">(</span><span class="n">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Some</span><span class="p">(</span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Value</span><span class="p">(</span><span class="n">sum</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Optional</span><span class="p">(</span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Optional</span><span class="p">(</span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">None</span><span class="p">))))),</span>
<span class="w">            </span><span class="nc">RecordField</span><span class="p">(</span>
<span class="w">              </span><span class="n">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="p">,</span>
<span class="w">              </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Some</span><span class="p">(</span>
<span class="w">                </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Value</span><span class="p">(</span>
<span class="w">                  </span><span class="n">sum</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Record</span><span class="p">(</span>
<span class="w">                    </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Record</span><span class="p">(</span>
<span class="w">                      </span><span class="n">recordId</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">None</span><span class="p">,</span>
<span class="w">                      </span><span class="n">fields</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Vector</span><span class="p">(</span>
<span class="w">                        </span><span class="nc">RecordField</span><span class="p">(</span><span class="n">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Some</span><span class="p">(</span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Value</span><span class="p">(</span><span class="n">sum</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Optional</span><span class="p">(</span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Optional</span><span class="p">(</span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">None</span><span class="p">))))),</span>
<span class="w">                        </span><span class="nc">RecordField</span><span class="p">(</span><span class="n">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Some</span><span class="p">(</span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Value</span><span class="p">(</span><span class="n">sum</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Int64</span><span class="p">(</span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="il">1L</span><span class="p">))))</span>
<span class="w">                      </span><span class="p">)</span>
<span class="w">                    </span><span class="p">)</span>
<span class="w">                  </span><span class="p">)</span>
<span class="w">                </span><span class="p">)</span>
<span class="w">              </span><span class="p">)</span>
<span class="w">            </span><span class="p">)</span>
<span class="w">          </span><span class="p">)</span>
<span class="w">        </span><span class="p">)</span>
<span class="w">      </span><span class="p">),</span>
<span class="w">      </span><span class="p">...</span>
<span class="w">    </span><span class="p">)</span>
<span class="w">  </span><span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
<p>Note that not only has the third template argument (originally <code class="docutils literal notranslate"><span class="pre">j</span></code>) been
omitted from the response, but also the third field of the nested record
(originally <code class="docutils literal notranslate"><span class="pre">rk</span></code>). Note also that despite being optional fields of value
<code class="docutils literal notranslate"><span class="pre">None</span></code>, the second template argument (originally <code class="docutils literal notranslate"><span class="pre">i</span></code>) and the first nested
record field (originally <code class="docutils literal notranslate"><span class="pre">ri</span></code>) are present in the response because they are
not in trailing positions.</p>
<p><strong>Example 2</strong></p>
<p>Assume a LF 1.15 package called <code class="docutils literal notranslate"><span class="pre">record-lf115-1.0.0</span></code> which defines a
record <code class="docutils literal notranslate"><span class="pre">Record</span></code> with a trailing optional field in a module called <code class="docutils literal notranslate"><span class="pre">LF115</span></code>.</p>
<div class="highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="kr">module</span><span class="w"> </span><span class="nn">LF115</span><span class="w"> </span><span class="kr">where</span>

<span class="kr">data</span><span class="w"> </span><span class="kt">Record</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="kt">Record</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">ri</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Int</span><span class="p">,</span><span class="w"> </span><span class="n">rj</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Optional</span><span class="w"> </span><span class="kt">Int</span><span class="w"> </span><span class="p">}</span>
<span class="w">  </span><span class="kr">deriving</span><span class="w"> </span><span class="p">(</span><span class="kt">Eq</span><span class="p">,</span><span class="w"> </span><span class="kt">Show</span><span class="p">)</span>
</pre></div>
</div>
<p>Also assume a LF 1.17 package called <code class="docutils literal notranslate"><span class="pre">example2-1.0.0</span></code> which defines a template
<code class="docutils literal notranslate"><span class="pre">T</span></code> in a module called <code class="docutils literal notranslate"><span class="pre">Main</span></code>. The template has a field of type
<code class="docutils literal notranslate"><span class="pre">record-lf115-1.0.0:LF115.Record</span></code>.</p>
<div class="highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="kr">module</span><span class="w"> </span><span class="nn">Main</span><span class="w"> </span><span class="kr">where</span>

<span class="kr">template</span><span class="w"> </span><span class="kt">T</span>
<span class="w">  </span><span class="kr">with</span>
<span class="w">    </span><span class="n">p</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Party</span>
<span class="w">    </span><span class="n">r</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">LF115</span><span class="o">.</span><span class="kt">Record</span>
<span class="w">  </span><span class="kr">where</span>
<span class="w">    </span><span class="kr">signatory</span><span class="w"> </span><span class="n">p</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">It is not recommended for LF 1.17 templates to depend on LF 1.15 serializable values.</p>
</div>
<p>Finally, assume a ledger that contains a contract of type <code class="docutils literal notranslate"><span class="pre">T</span></code> written by
<code class="docutils literal notranslate"><span class="pre">example2-1.0.0</span></code> where the trailing optional field of <code class="docutils literal notranslate"><span class="pre">r</span></code> is set to <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p>
<div class="highlight-scala notranslate"><div class="highlight"><pre><span></span><span class="kd">val</span><span class="w"> </span><span class="n">createCmd</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ledger_api_utils</span><span class="p">.</span><span class="n">create</span><span class="p">(</span>
<span class="w">  </span><span class="n">packageIdExample2</span><span class="p">,</span>
<span class="w">  </span><span class="s">&quot;Main&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="s">&quot;T&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nc">Map</span><span class="p">(</span>
<span class="w">    </span><span class="s">&quot;p&quot;</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">sandbox</span><span class="p">.</span><span class="n">adminParty</span><span class="p">,</span>
<span class="w">    </span><span class="s">&quot;r&quot;</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="nc">Map</span><span class="p">(</span><span class="s">&quot;ri&quot;</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;rj&quot;</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="nc">None</span><span class="p">)))</span>

<span class="n">sandbox</span><span class="p">.</span><span class="n">ledger_api</span><span class="p">.</span><span class="n">commands</span><span class="p">.</span><span class="n">submit</span><span class="p">(</span><span class="nc">Seq</span><span class="p">(</span><span class="n">sandbox</span><span class="p">.</span><span class="n">adminParty</span><span class="p">),</span><span class="w"> </span><span class="nc">Seq</span><span class="p">(</span><span class="n">createCmd</span><span class="p">))</span>
</pre></div>
</div>
<p>Then querying the ledger’s active contract set in non-verbose mode returns the
following:</p>
<div class="highlight-scala notranslate"><div class="highlight"><pre><span></span><span class="n">sandbox</span><span class="p">.</span><span class="n">ledger_api</span><span class="p">.</span><span class="n">acs</span><span class="p">.</span><span class="n">of_party</span><span class="p">(</span><span class="n">sandbox</span><span class="p">.</span><span class="n">adminParty</span><span class="p">,</span><span class="w"> </span><span class="n">verbose</span><span class="o">=</span><span class="kc">false</span><span class="p">)</span>

<span class="n">res15</span><span class="p">:</span><span class="w"> </span><span class="nc">Seq</span><span class="p">[</span><span class="n">com</span><span class="p">.</span><span class="n">digitalasset</span><span class="p">.</span><span class="n">canton</span><span class="p">.</span><span class="n">admin</span><span class="p">.</span><span class="n">api</span><span class="p">.</span><span class="n">client</span><span class="p">.</span><span class="n">commands</span><span class="p">.</span><span class="nc">LedgerApiTypeWrappers</span><span class="p">.</span><span class="nc">WrappedCreatedEvent</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">List</span><span class="p">(</span>
<span class="w">  </span><span class="nc">WrappedCreatedEvent</span><span class="p">(</span>
<span class="w">    </span><span class="n">event</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">CreatedEvent</span><span class="p">(</span>
<span class="w">      </span><span class="p">...</span>
<span class="w">      </span><span class="n">createArguments</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Some</span><span class="p">(</span>
<span class="w">        </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Record</span><span class="p">(</span>
<span class="w">          </span><span class="n">recordId</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">None</span><span class="p">,</span>
<span class="w">          </span><span class="n">fields</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Vector</span><span class="p">(</span>
<span class="w">            </span><span class="nc">RecordField</span><span class="p">(</span>
<span class="w">              </span><span class="n">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="p">,</span>
<span class="w">              </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Some</span><span class="p">(</span>
<span class="w">                </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Value</span><span class="p">(</span><span class="n">sum</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Party</span><span class="p">(</span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;sandbox::1220c70e4430e82758d9377f86a4f87e1d98d8b1f259bb71a0e099e886608844fbf0&quot;</span><span class="p">))</span>
<span class="w">              </span><span class="p">)</span>
<span class="w">            </span><span class="p">),</span>
<span class="w">            </span><span class="nc">RecordField</span><span class="p">(</span>
<span class="w">              </span><span class="n">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="p">,</span>
<span class="w">              </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Some</span><span class="p">(</span>
<span class="w">                </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Value</span><span class="p">(</span>
<span class="w">                  </span><span class="n">sum</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Record</span><span class="p">(</span>
<span class="w">                    </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Record</span><span class="p">(</span>
<span class="w">                      </span><span class="n">recordId</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">None</span><span class="p">,</span>
<span class="w">                      </span><span class="n">fields</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Vector</span><span class="p">(</span><span class="nc">RecordField</span><span class="p">(</span><span class="n">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Some</span><span class="p">(</span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Value</span><span class="p">(</span><span class="n">sum</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Int64</span><span class="p">(</span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="il">1L</span><span class="p">)))))</span>
<span class="w">                    </span><span class="p">)</span>
<span class="w">                  </span><span class="p">)</span>
<span class="w">                </span><span class="p">)</span>
<span class="w">              </span><span class="p">)</span>
<span class="w">            </span><span class="p">)</span>
<span class="w">          </span><span class="p">)</span>
<span class="w">        </span><span class="p">)</span>
<span class="w">      </span><span class="p">),</span>
<span class="w">      </span><span class="p">...</span>
<span class="w">    </span><span class="p">)</span>
<span class="w">  </span><span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
<p>Note that the trailing <code class="docutils literal notranslate"><span class="pre">None</span></code> field in the nested LF 1.15 record has
been omitted from the response. This is because the normalization of LF 1.17
values extends to all subvalues, including those defined in LF 1.15 packages.</p>
<p><strong>Example 3</strong></p>
<p>Assume the same LF 1.15 package <code class="docutils literal notranslate"><span class="pre">record-lf115-1.0.0</span></code> as in Example 2.</p>
<div class="highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="kr">module</span><span class="w"> </span><span class="nn">LF115</span><span class="w"> </span><span class="kr">where</span>

<span class="kr">data</span><span class="w"> </span><span class="kt">Record</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="kt">Record</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">ri</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Int</span><span class="p">,</span><span class="w"> </span><span class="n">rj</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Optional</span><span class="w"> </span><span class="kt">Int</span><span class="w"> </span><span class="p">}</span>
<span class="w">  </span><span class="kr">deriving</span><span class="w"> </span><span class="p">(</span><span class="kt">Eq</span><span class="p">,</span><span class="w"> </span><span class="kt">Show</span><span class="p">)</span>
</pre></div>
</div>
<p>Also assume a LF 1.17 package called <code class="docutils literal notranslate"><span class="pre">example3-1.0.0</span></code> which defines a template
<code class="docutils literal notranslate"><span class="pre">T</span></code> in a module called <code class="docutils literal notranslate"><span class="pre">Main</span></code>. The template defines a choice <code class="docutils literal notranslate"><span class="pre">C</span></code> which
returns a value of type <code class="docutils literal notranslate"><span class="pre">record-lf115-1.0.0:LF115.Record</span></code> with a trailing
None.</p>
<div class="highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="kr">module</span><span class="w"> </span><span class="nn">Main</span><span class="w"> </span><span class="kr">where</span>

<span class="kr">template</span><span class="w"> </span><span class="kt">T</span>
<span class="w">  </span><span class="kr">with</span>
<span class="w">    </span><span class="n">p</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Party</span>
<span class="w">  </span><span class="kr">where</span>
<span class="w">    </span><span class="kr">signatory</span><span class="w"> </span><span class="n">p</span>

<span class="w">    </span><span class="kr">nonconsuming</span><span class="w"> </span><span class="kr">choice</span><span class="w"> </span><span class="kt">C</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">LF115</span><span class="o">.</span><span class="kt">Record</span>
<span class="w">      </span><span class="kr">controller</span><span class="w"> </span><span class="n">p</span>
<span class="w">      </span><span class="kr">do</span><span class="w"> </span><span class="n">pure</span><span class="w"> </span><span class="p">(</span><span class="kt">LF115</span><span class="o">.</span><span class="kt">Record</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">ri</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">rj</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="kt">None</span><span class="w"> </span><span class="p">})</span>
</pre></div>
</div>
<p>Finally, assume a creation event <code class="docutils literal notranslate"><span class="pre">createdEvent</span></code> for this template. Exercising
choice <code class="docutils literal notranslate"><span class="pre">C</span></code> on this contract yields the following response:</p>
<div class="highlight-scala notranslate"><div class="highlight"><pre><span></span><span class="kd">val</span><span class="w"> </span><span class="n">createdEvent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sandbox</span><span class="p">.</span><span class="n">ledger_api</span><span class="p">.</span><span class="n">acs</span><span class="p">.</span><span class="n">of_party</span><span class="p">(</span><span class="n">sandbox</span><span class="p">.</span><span class="n">adminParty</span><span class="p">,</span><span class="w"> </span><span class="n">verbose</span><span class="o">=</span><span class="kc">false</span><span class="p">).</span><span class="n">head</span><span class="p">.</span><span class="n">event</span>
<span class="kd">val</span><span class="w"> </span><span class="n">exCmd</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ledger_api_utils</span><span class="p">.</span><span class="n">exercise</span><span class="p">(</span><span class="s">&quot;C&quot;</span><span class="p">,</span><span class="w"> </span><span class="nc">Map</span><span class="p">(),</span><span class="w"> </span><span class="n">createdEvent</span><span class="p">)</span>
<span class="kd">val</span><span class="w"> </span><span class="n">exercisedEvent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sandbox</span><span class="p">.</span><span class="n">ledger_api</span><span class="p">.</span><span class="n">commands</span><span class="p">.</span><span class="n">submit</span><span class="p">(</span><span class="nc">Seq</span><span class="p">(</span><span class="n">sandbox</span><span class="p">.</span><span class="n">adminParty</span><span class="p">),</span><span class="w"> </span><span class="nc">Seq</span><span class="p">(</span><span class="n">exCmd</span><span class="p">))</span>
<span class="n">sandbox</span><span class="p">.</span><span class="n">ledger_api</span><span class="p">.</span><span class="n">transactions</span><span class="p">.</span><span class="n">trees</span><span class="p">(</span><span class="nc">Set</span><span class="p">(</span><span class="n">sandbox</span><span class="p">.</span><span class="n">adminParty</span><span class="p">),</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="n">verbose</span><span class="o">=</span><span class="kc">false</span><span class="p">)(</span><span class="mi">1</span><span class="p">)</span>

<span class="n">res18</span><span class="p">:</span><span class="w"> </span><span class="n">com</span><span class="p">.</span><span class="n">daml</span><span class="p">.</span><span class="n">ledger</span><span class="p">.</span><span class="n">api</span><span class="p">.</span><span class="n">v1</span><span class="p">.</span><span class="n">transaction</span><span class="p">.</span><span class="nc">TransactionTree</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">TransactionTree</span><span class="p">(</span>
<span class="w">  </span><span class="p">...</span>
<span class="w">  </span><span class="n">eventsById</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Map</span><span class="p">(</span>
<span class="w">    </span><span class="s">&quot;#1220be66a5da4596a4a14fbeec9c3e020760b895040f2478a4d0f43387a5711554d4:0&quot;</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="nc">TreeEvent</span><span class="p">(</span>
<span class="w">      </span><span class="n">kind</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Exercised</span><span class="p">(</span>
<span class="w">        </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">ExercisedEvent</span><span class="p">(</span>
<span class="w">          </span><span class="p">...</span>
<span class="w">          </span><span class="n">exerciseResult</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Some</span><span class="p">(</span>
<span class="w">            </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Value</span><span class="p">(</span>
<span class="w">              </span><span class="n">sum</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Record</span><span class="p">(</span>
<span class="w">                </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Record</span><span class="p">(</span>
<span class="w">                  </span><span class="n">recordId</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">None</span><span class="p">,</span>
<span class="w">                  </span><span class="n">fields</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Vector</span><span class="p">(</span><span class="nc">RecordField</span><span class="p">(</span><span class="n">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Some</span><span class="p">(</span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Value</span><span class="p">(</span><span class="n">sum</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Int64</span><span class="p">(</span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="il">1L</span><span class="p">)))))</span>
<span class="w">                </span><span class="p">)</span>
<span class="w">              </span><span class="p">)</span>
<span class="w">            </span><span class="p">)</span>
<span class="w">          </span><span class="p">),</span>
<span class="w">          </span><span class="p">...</span>
<span class="w">        </span><span class="p">)</span>
<span class="w">      </span><span class="p">)</span>
<span class="w">    </span><span class="p">)</span>
<span class="w">  </span><span class="p">),</span>
<span class="w">  </span><span class="p">...</span>
<span class="p">)</span>
</pre></div>
</div>
<p>Note that the trailing optional field <code class="docutils literal notranslate"><span class="pre">rj</span></code> is omitted from the response. This
is because the transaction created by the exercise involves a LF 1.17 template.
All of the transaction’s subvalues are therefore normalized. This includes
values of types defined in LF 1.15 packages.</p>
</div>
</div>
</div>


              
            </div>
            
            
              <!-- Copyright (c) 2023 Digital Asset (Switzerland) GmbH and/or its affiliates. All rights reserved. -->
<!-- SPDX-License-Identifier: Apache-2.0 -->

<footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../time.html" class="da-btn da-btn-label btn-prev" title="Time on Daml Ledgers" accesskey="p" rel="prev">Previous</a>
      
      
        <a href="../../reference/canton-advanced-architecture.html" class="da-btn da-btn-label btn-next" title="Canton Advanced Architecture" accesskey="n" rel="next">Next</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        Copyright (c) 2025 Digital Asset (Switzerland) GmbH and/or its affiliates. All rights reserved. Any unauthorized use, duplication or distribution is strictly prohibited. &#34;Digital Asset&#34; and &#34;Daml&#34; are Registered in the U.S. Patent and Trademark Office.

    </p>
  </div> 

</footer>
            
          </div>
        </div>
      </div>
    </section>
  </div>

  <!-- Copyright (c) 2023 Digital Asset (Switzerland) GmbH and/or its affiliates. All rights reserved. -->
<!-- SPDX-License-Identifier: Apache-2.0 -->





  <script type="text/javascript">
    jQuery(function () {
      SphinxRtdTheme.Navigation.enable(true);
      });
  </script>


  
    
  
  <div id="inpageContent"></div>
  

</body>
</html>