<!-- Copyright (c) 2023 Digital Asset (Switzerland) GmbH and/or its affiliates. All rights reserved. -->
<!-- SPDX-License-Identifier: Apache-2.0 -->



<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js" lang="en">
<!--<![endif]-->

<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>PQS &mdash; Daml SDK 2.10.1 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
  
  <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
  <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
  <script src="../_static/jquery.js"></script>
  <script src="../_static/underscore.js"></script>
  <script src="../_static/doctools.js"></script>
  <script src="../_static/clipboard.min.js"></script>
  <script src="../_static/copybutton.js"></script>
  
  <script type="text/javascript" src="../_static/js/theme.js"></script>

  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/copybutton.css" type="text/css" />
  <link rel="index" title="Index" href="../genindex.html" />
  <link rel="search" title="Search" href="../search.html" />
  <link rel="next" title="Identity Management" href="../canton/usermanual/identity_management.html" />
  <link rel="prev" title="Glossary" href="../canton/usermanual/monitoring_glossary.html" /> 

  
  <link rel="icon" type="image/svg+xml"  href="../_static/images/daml-logo-mark-light.svg">
  <link rel="alternate icon" href="../_static/images/daml-favicon-1.ico">

  <!-- Google Tag Manager -->
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-MSWJMNX');</script>
  <!-- End Google Tag Manager -->

</head>

<body class="wy-body-for-nav">
  <!-- Google Tag Manager (noscript) -->
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-MSWJMNX"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <!-- End Google Tag Manager (noscript) -->
   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-nav-side-shadow"></div>
      <div class="wy-side-scroll">

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
          
          
          
          
          
          <ul>
<li class="toctree-l1"><a class="reference external" href="https://docs.daml.com/">Daml Documentation</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Home</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../multiparty-application-intro.html">Introduction to Multi-Party Applications and Daml</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../multiparty-application-intro.html#multi-party-applications">Multi-Party Applications</a></li>
<li class="toctree-l2"><a class="reference internal" href="../multiparty-application-intro.html#why-do-multi-party-applications-matter">Why Do Multi-Party Applications Matter?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../multiparty-application-intro.html#what-is-a-multi-party-application">What Is a Multi-Party Application?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../multiparty-application-intro.html#important-concepts-in-multi-party-applications">Important Concepts in Multi-Party Applications</a></li>
<li class="toctree-l2"><a class="reference internal" href="../multiparty-application-intro.html#key-architectural-concepts-in-daml">Key Architectural Concepts in Daml</a></li>
<li class="toctree-l2"><a class="reference internal" href="../multiparty-application-intro.html#transfer-example-using-daml">Transfer Example Using Daml</a></li>
<li class="toctree-l2"><a class="reference internal" href="../multiparty-application-intro.html#next-steps">Next Steps</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Set Up Your Developer Environment</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../ops/requirements.html">System Requirements</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../ops/requirements.html#feature-component-system-requirements">Feature/Component System Requirements</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../getting-started/installation.html">Install the SDK</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../getting-started/installation.html#install-the-dependencies">Install the Dependencies</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting-started/installation.html#choose-daml-enterprise-or-daml-open-source">Choose Daml Enterprise or Daml Open Source</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting-started/installation.html#install-daml-open-source-sdk">Install Daml Open Source SDK</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../getting-started/installation.html#windows-10">Windows 10</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting-started/installation.html#mac-and-linux">Mac and Linux</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../getting-started/installation.html#install-daml-enterprise">Install Daml Enterprise</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting-started/installation.html#download-manually">Download Manually</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting-started/installation.html#next-steps">Next Steps</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../getting-started/path-variables.html">Set JAVA_HOME and PATH Variables</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../getting-started/path-variables.html#windows">Windows</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../getting-started/path-variables.html#set-the-java-home-variable">Set the JAVA_HOME Variable</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting-started/path-variables.html#set-the-path-variable">Set the PATH Variable</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../getting-started/path-variables.html#mac-os">Mac OS</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting-started/path-variables.html#linux">Linux</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../getting-started/path-variables.html#id2">Set the JAVA_HOME Variable</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting-started/path-variables.html#id3">Set the PATH Variable</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting-started/path-variables.html#verify-the-changes">Verify the Changes</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../getting-started/manual-download.html">Manual Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../getting-started/manual-download.html#install-the-sdk-from-a-tarball">Install the SDK from a Tarball</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting-started/manual-download.html#verify-the-integrity-of-a-tarball">Verify the Integrity of a Tarball</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Tutorial: Write Your First Daml App</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../getting-started/index.html">Getting Started with Daml</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../getting-started/index.html#prerequisites">Prerequisites</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting-started/index.html#run-the-app">Run the App</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../getting-started/app-architecture.html">App Architecture</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../getting-started/app-architecture.html#the-daml-model">The Daml Model</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting-started/app-architecture.html#typescript-code-generation">TypeScript Code Generation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting-started/app-architecture.html#the-ui">The UI</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../getting-started/first-feature.html">Your First Feature</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../getting-started/first-feature.html#daml-changes">Daml Changes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting-started/first-feature.html#messaging-ui">Messaging UI</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../getting-started/first-feature.html#messagelist-component">MessageList Component</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting-started/first-feature.html#messageedit-component">MessageEdit Component</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting-started/first-feature.html#mainview-component">MainView Component</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../getting-started/first-feature.html#run-the-updated-ui">Run the Updated UI</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting-started/first-feature.html#next-steps">Next Steps</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../getting-started/testing.html">Test Your App</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../getting-started/testing.html#set-up-the-tests">Set Up the Tests</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting-started/testing.html#example-log-in-and-out">Example: Log In and Out</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting-started/testing.html#accessing-ui-elements">Accessing UI Elements</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting-started/testing.html#writing-css-selectors">Writing CSS Selectors</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting-started/testing.html#the-full-test-suite">The Full Test Suite</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Create Daml Apps</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../daml/considerations.html">Important Considerations When Building Applications With Daml</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../daml/considerations.html#overall-considerations">Overall Considerations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../daml/considerations.html#developer-considerations">Developer Considerations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../daml/considerations.html#operational-considerations">Operational Considerations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../daml/considerations.html#next-steps">Next Steps</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../create-daml-apps/intro/index.html">Write Smart Contracts with Daml</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../daml/intro/0_Intro.html">An Introduction to Daml</a></li>
<li class="toctree-l2"><a class="reference internal" href="../daml/intro/1_Contracts.html">Basic Contracts</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../daml/intro/1_Contracts.html#daml-ledger-basics">Daml Ledger Basics</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/intro/1_Contracts.html#daml-modules-and-files">Daml Modules and Files</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/intro/1_Contracts.html#templates">Templates</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/intro/1_Contracts.html#signatories">Signatories</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/intro/1_Contracts.html#next-up">Next Up</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../daml/intro/2_DamlScript.html">Test Templates Using Daml Script</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../daml/intro/2_DamlScript.html#script-basics">Script Basics</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/intro/2_DamlScript.html#run-the-scripts">Run the Scripts</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/intro/2_DamlScript.html#test-for-failure">Test for Failure</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/intro/2_DamlScript.html#archive-contracts">Archive Contracts</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/intro/2_DamlScript.html#view-the-ledger-and-ledger-history">View the Ledger and Ledger History</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/intro/2_DamlScript.html#exercises">Exercises</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/intro/2_DamlScript.html#next-up">Next Up</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../daml/intro/3_Data.html">Data Types</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../daml/intro/3_Data.html#native-types">Native Types</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/intro/3_Data.html#assemble-types">Assemble Types</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml/intro/3_Data.html#tuples">Tuples</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/intro/3_Data.html#lists">Lists</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/intro/3_Data.html#records">Records</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/intro/3_Data.html#variants-and-pattern-matching">Variants and Pattern Matching</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml/intro/3_Data.html#manipulate-data">Manipulate Data</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/intro/3_Data.html#contract-keys">Contract Keys</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/intro/3_Data.html#next-up">Next Up</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../daml/intro/4_Transformations.html">Transform Data Using Choices</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../daml/intro/4_Transformations.html#choices-as-methods">Choices as Methods</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/intro/4_Transformations.html#choices-as-delegation">Choices as Delegation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/intro/4_Transformations.html#choices-in-the-ledger-model">Choices In the Ledger Model</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml/intro/4_Transformations.html#the-archive-choice">The Archive Choice</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml/intro/4_Transformations.html#a-simple-cash-model">A Simple Cash Model</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/intro/4_Transformations.html#next-up">Next Up</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../daml/intro/5_Constraints.html">Add Constraints to a Contract</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../daml/intro/5_Constraints.html#template-preconditions">Template Preconditions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/intro/5_Constraints.html#assertions">Assertions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/intro/5_Constraints.html#time-on-daml-ledgers">Time on Daml Ledgers</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml/intro/5_Constraints.html#time-in-test-scripts">Time in Test Scripts</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml/intro/5_Constraints.html#actions-and-do-blocks">Actions and <code class="docutils literal notranslate"><span class="pre">do</span></code> Blocks</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml/intro/5_Constraints.html#pure-expressions-compared-to-actions">Pure Expressions Compared to Actions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/intro/5_Constraints.html#actions-and-impurity">Actions and Impurity</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/intro/5_Constraints.html#chain-actions-with-do-blocks">Chain Actions With <code class="docutils literal notranslate"><span class="pre">do</span></code> Blocks</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/intro/5_Constraints.html#wrap-values-in-actions">Wrap Values in Actions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml/intro/5_Constraints.html#failing-actions">Failing Actions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/intro/5_Constraints.html#a-sample-action">A Sample Action</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/intro/5_Constraints.html#errors">Errors</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/intro/5_Constraints.html#next-up">Next Up</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../daml/intro/6_Parties.html">Parties and Authority</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../daml/intro/6_Parties.html#preventing-iou-revocation">Preventing IOU Revocation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/intro/6_Parties.html#use-propose-accept-workflows-for-one-off-authorization">Use Propose-Accept Workflows for One-Off Authorization</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/intro/6_Parties.html#use-role-contracts-for-ongoing-authorization">Use Role Contracts for Ongoing Authorization</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/intro/6_Parties.html#daml-s-authorization-model">Daml’s Authorization Model</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml/intro/6_Parties.html#an-authorization-example">An Authorization Example</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml/intro/6_Parties.html#next-up">Next Up</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../daml/intro/7_Composing.html">Composing Choices</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../daml/intro/7_Composing.html#daml-projects">Daml Projects</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/intro/7_Composing.html#project-structure">Project Structure</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/intro/7_Composing.html#project-overview">Project Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/intro/7_Composing.html#composed-choices-and-scripts">Composed Choices and Scripts</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/intro/7_Composing.html#daml-s-execution-model">Daml’s Execution Model</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/intro/7_Composing.html#observers">Observers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/intro/7_Composing.html#privacy">Privacy</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml/intro/7_Composing.html#divulgence">Divulgence</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml/intro/7_Composing.html#next-up">Next Up</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../daml/intro/13_Interfaces.html">Daml Interfaces</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../daml/intro/13_Interfaces.html#context">Context</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/intro/13_Interfaces.html#interface-definition">Interface Definition</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/intro/13_Interfaces.html#interface-instances">Interface Instances</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/intro/13_Interfaces.html#using-an-interface">Using an Interface</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../daml/intro/8_Exceptions.html">Exception Handling</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../daml/intro/8_Exceptions.html#next-up">Next Up</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../daml/intro/9_Dependencies.html">Work With Dependencies</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../daml/intro/9_Dependencies.html#dar-dalf-daml-lf-and-the-engine">DAR, DALF, Daml-LF, and the Engine</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/intro/9_Dependencies.html#hashes-and-identifiers">Hashes and Identifiers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/intro/9_Dependencies.html#dependencies-and-data-dependencies">Dependencies and Data Dependencies</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/intro/9_Dependencies.html#structuring-projects">Structuring Projects</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/intro/9_Dependencies.html#building-multiple-packages">Building Multiple Packages</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/intro/9_Dependencies.html#next-up">Next Up</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../daml/intro/10_Functional101.html">Functional Programming 101</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../daml/intro/10_Functional101.html#the-haskell-connection">The Haskell Connection</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/intro/10_Functional101.html#functions">Functions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml/intro/10_Functional101.html#function-application">Function Application</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/intro/10_Functional101.html#infix-functions">Infix Functions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/intro/10_Functional101.html#type-constraints">Type Constraints</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/intro/10_Functional101.html#pattern-matching-in-arguments">Pattern Matching in Arguments</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/intro/10_Functional101.html#functions-everywhere">Functions Everywhere</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/intro/10_Functional101.html#lambdas">Lambdas</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml/intro/10_Functional101.html#control-flow">Control Flow</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml/intro/10_Functional101.html#branching">Branching</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/intro/10_Functional101.html#looping">Looping</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml/intro/10_Functional101.html#next-up">Next Up</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../daml/intro/11_StdLib.html">The Daml Standard Library</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../daml/intro/11_StdLib.html#the-prelude">The Prelude</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/intro/11_StdLib.html#important-types-from-the-prelude">Important Types From the Prelude</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml/intro/11_StdLib.html#lists">Lists</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/intro/11_StdLib.html#tuples">Tuples</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/intro/11_StdLib.html#optional">Optional</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/intro/11_StdLib.html#either">Either</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml/intro/11_StdLib.html#typeclasses">Typeclasses</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/intro/11_StdLib.html#important-typeclasses-from-the-prelude">Important Typeclasses From the Prelude</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml/intro/11_StdLib.html#eq">Eq</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/intro/11_StdLib.html#ord">Ord</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/intro/11_StdLib.html#show">Show</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/intro/11_StdLib.html#functor">Functor</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/intro/11_StdLib.html#applicative-functor">Applicative Functor</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/intro/11_StdLib.html#actions">Actions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/intro/11_StdLib.html#semigroups-and-monoids">Semigroups and Monoids</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/intro/11_StdLib.html#additive-and-multiplicative">Additive and Multiplicative</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml/intro/11_StdLib.html#important-modules-in-the-standard-library">Important Modules in the Standard Library</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/intro/11_StdLib.html#search-the-standard-library">Search the Standard Library</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml/intro/11_StdLib.html#search-for-functions-by-name">Search for Functions by Name</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/intro/11_StdLib.html#search-for-functions-by-signature">Search for Functions by Signature</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml/intro/11_StdLib.html#next-up">Next Up</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../daml/patterns.html">Good Design Patterns</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../daml/patterns/propose-accept.html">The Propose and Accept Pattern</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml/patterns/propose-accept.html#motivation">Motivation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/patterns/propose-accept.html#implementation">Implementation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/patterns/propose-accept.html#trade-offs">Trade-offs</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml/patterns/multiparty-agreement.html">The Multiple Party Agreement Pattern</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml/patterns/multiparty-agreement.html#motivation">Motivation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/patterns/multiparty-agreement.html#implementation">Implementation</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml/patterns/delegation.html">The Delegation Pattern</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml/patterns/delegation.html#motivation">Motivation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/patterns/delegation.html#implementation">Implementation</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml/patterns/authorization.html">The Authorization Pattern</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml/patterns/authorization.html#motivation">Motivation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/patterns/authorization.html#authorization">Authorization</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml/patterns/locking.html">The Locking Pattern</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml/patterns/locking.html#motivation">Motivation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/patterns/locking.html#implementation">Implementation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/patterns/locking/locking-by-archiving.html">Lock by Archiving</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/patterns/locking/locking-by-state.html">Lock by State</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/patterns/locking/locking-by-safekeeping.html">Lock by Safekeeping</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml/patterns/legends.html">Diagram Legends</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../daml/intro/12_Testing.html">Test Daml Contracts</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../daml/intro/12_Testing.html#daml-test-tooling">Daml Test Tooling</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/intro/12_Testing.html#debug-trace-and-stacktraces">Debug, Trace, and Stacktraces</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/intro/12_Testing.html#diagnose-contention-errors">Diagnose Contention Errors</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml/intro/12_Testing.html#common-errors">Common Errors</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/intro/12_Testing.html#avoid-race-conditions-and-stale-references">Avoid Race Conditions and Stale References</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/intro/12_Testing.html#collisions-due-to-ignorance">Collisions Due to Ignorance</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml/intro/12_Testing.html#checking-coverage">Checking Coverage</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml/intro/12_Testing.html#flags-controlling-test-set">Flags Controlling Test Set</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/intro/12_Testing.html#flags-controlling-serialization">Flags Controlling Serialization</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/intro/12_Testing.html#flags-controlling-report">Flags Controlling Report</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/intro/12_Testing.html#define-templates-choices-and-interfaces">Define templates, choices, and interfaces</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/intro/12_Testing.html#start-testing">Start testing</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/intro/12_Testing.html#template-creation-coverage">Template creation coverage</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/intro/12_Testing.html#template-choice-exercise-coverage">Template choice exercise coverage</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/intro/12_Testing.html#interface-choice-exercise-coverage">Interface choice exercise coverage</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml/intro/12_Testing.html#checking-coverage-of-external-dependencies">Checking Coverage of External Dependencies</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml/intro/12_Testing.html#definitions">Definitions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/intro/12_Testing.html#local-definitions">Local Definitions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/intro/12_Testing.html#external-definitions">External Definitions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/intro/12_Testing.html#external-internal-and-any-coverage">External, Internal, and “Any” Coverage</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/intro/12_Testing.html#serializing-results-workflows">Serializing Results Workflows</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/intro/12_Testing.html#single-test-iteration">Single Test Iteration</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/intro/12_Testing.html#multiple-test-aggregation">Multiple Test Aggregation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/intro/12_Testing.html#test-failure-recovery">Test Failure Recovery</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml/intro/12_Testing.html#excluding-choices-from-the-coverage-report">Excluding Choices from the Coverage Report</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml/intro/12_Testing.html#example-excluding-archive-choices">Example: Excluding Archive Choices</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/intro/12_Testing.html#example-excluding-choices-from-a-specific-module">Example: Excluding Choices from a Specific Module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/intro/12_Testing.html#excluding-choices-from-serialized-reports">Excluding Choices from Serialized Reports</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml/intro/12_Testing.html#next-up">Next Up</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../daml/intro/99_NextSteps.html">Next Steps</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../create-daml-apps/off-ledger/index.html">Integrate Daml with Off-Ledger Services</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../building-applications.html">Build Applications</a></li>
<li class="toctree-l2"><a class="reference internal" href="../app-dev/app-arch.html">Daml Application Architecture</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../app-dev/app-arch.html#backend">Backend</a></li>
<li class="toctree-l3"><a class="reference internal" href="../app-dev/app-arch.html#frontend">Frontend</a></li>
<li class="toctree-l3"><a class="reference internal" href="../app-dev/app-arch.html#authorization">Authorization</a></li>
<li class="toctree-l3"><a class="reference internal" href="../app-dev/app-arch.html#developer-workflow">Developer Workflow</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../app-dev/app-arch.html#command-deduplication">Command Deduplication</a></li>
<li class="toctree-l4"><a class="reference internal" href="../app-dev/app-arch.html#deal-with-failures">Deal With Failures</a></li>
<li class="toctree-l4"><a class="reference internal" href="../app-dev/app-arch.html#deal-with-time">Deal With Time</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../app-dev/parties-users.html">Parties and Users On a Daml Ledger</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../app-dev/parties-users.html#parties-in-sdk-2-0-and-subsequent">Parties in SDK 2.0 and Subsequent</a></li>
<li class="toctree-l3"><a class="reference internal" href="../app-dev/parties-users.html#party-id-hints-and-display-names">Party ID Hints and Display Names</a></li>
<li class="toctree-l3"><a class="reference internal" href="../app-dev/parties-users.html#authorization-and-user-management">Authorization and User Management</a></li>
<li class="toctree-l3"><a class="reference internal" href="../app-dev/parties-users.html#working-with-parties">Working with Parties</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../app-dev/parties-users.html#daml-script">Daml Script</a></li>
<li class="toctree-l4"><a class="reference internal" href="../app-dev/parties-users.html#daml-triggers-deprecated">Daml Triggers (Deprecated)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../app-dev/parties-users.html#navigator-deprecated">Navigator (Deprecated)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../app-dev/parties-users.html#java-bindings">Java Bindings</a></li>
<li class="toctree-l4"><a class="reference internal" href="../app-dev/parties-users.html#create-daml-app-and-uis">Create-daml-app and UIs</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../create-daml-apps/off-ledger/json-api/index.html">Access Active Contracts with the HTTP JSON API Service</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../json-api/index.html">HTTP JSON API Service</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../json-api/index.html#run-the-json-api">Run the JSON API</a></li>
<li class="toctree-l4"><a class="reference internal" href="../json-api/index.html#http-status-codes">HTTP Status Codes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../json-api/index.html#create-a-new-contract">Create a New Contract</a></li>
<li class="toctree-l4"><a class="reference internal" href="../json-api/index.html#create-a-contract-with-a-command-id">Create a Contract with a Command ID</a></li>
<li class="toctree-l4"><a class="reference internal" href="../json-api/index.html#exercise-by-contract-id">Exercise by Contract ID</a></li>
<li class="toctree-l4"><a class="reference internal" href="../json-api/index.html#exercise-by-contract-key">Exercise by Contract Key</a></li>
<li class="toctree-l4"><a class="reference internal" href="../json-api/index.html#create-and-exercise-in-the-same-transaction">Create and Exercise in the Same Transaction</a></li>
<li class="toctree-l4"><a class="reference internal" href="../json-api/index.html#fetch-contract-by-contract-id">Fetch Contract by Contract ID</a></li>
<li class="toctree-l4"><a class="reference internal" href="../json-api/index.html#fetch-contract-by-key">Fetch Contract by Key</a></li>
<li class="toctree-l4"><a class="reference internal" href="../json-api/index.html#get-all-active-contracts">Get All Active Contracts</a></li>
<li class="toctree-l4"><a class="reference internal" href="../json-api/index.html#get-all-active-contracts-matching-a-given-query">Get All Active Contracts Matching a Given Query</a></li>
<li class="toctree-l4"><a class="reference internal" href="../json-api/index.html#fetch-parties-by-identifiers">Fetch Parties by Identifiers</a></li>
<li class="toctree-l4"><a class="reference internal" href="../json-api/index.html#fetch-all-known-parties">Fetch All Known Parties</a></li>
<li class="toctree-l4"><a class="reference internal" href="../json-api/index.html#allocate-a-new-party">Allocate a New Party</a></li>
<li class="toctree-l4"><a class="reference internal" href="../json-api/index.html#create-a-new-user">Create a New User</a></li>
<li class="toctree-l4"><a class="reference internal" href="../json-api/index.html#get-authenticated-user-information">Get Authenticated User Information</a></li>
<li class="toctree-l4"><a class="reference internal" href="../json-api/index.html#get-specific-user-information">Get Specific User Information</a></li>
<li class="toctree-l4"><a class="reference internal" href="../json-api/index.html#delete-specific-user">Delete Specific User</a></li>
<li class="toctree-l4"><a class="reference internal" href="../json-api/index.html#list-users">List Users</a></li>
<li class="toctree-l4"><a class="reference internal" href="../json-api/index.html#grant-user-rights">Grant User Rights</a></li>
<li class="toctree-l4"><a class="reference internal" href="../json-api/index.html#revoke-user-rights">Revoke User Rights</a></li>
<li class="toctree-l4"><a class="reference internal" href="../json-api/index.html#list-authenticated-user-rights">List Authenticated User Rights</a></li>
<li class="toctree-l4"><a class="reference internal" href="../json-api/index.html#list-specific-user-rights">List Specific User Rights</a></li>
<li class="toctree-l4"><a class="reference internal" href="../json-api/index.html#list-all-dalf-packages">List All DALF Packages</a></li>
<li class="toctree-l4"><a class="reference internal" href="../json-api/index.html#download-a-dalf-package">Download a DALF Package</a></li>
<li class="toctree-l4"><a class="reference internal" href="../json-api/index.html#upload-a-dar-file">Upload a DAR File</a></li>
<li class="toctree-l4"><a class="reference internal" href="../json-api/index.html#metering-report">Metering Report</a></li>
<li class="toctree-l4"><a class="reference internal" href="../json-api/index.html#streaming-api">Streaming API</a></li>
<li class="toctree-l4"><a class="reference internal" href="../json-api/index.html#healthcheck-endpoints">Healthcheck Endpoints</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../json-api/lf-value-specification.html">Daml-LF JSON Encoding</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../json-api/lf-value-specification.html#codec-library">Codec Library</a></li>
<li class="toctree-l4"><a class="reference internal" href="../json-api/lf-value-specification.html#type-directed-parsing">Type-directed Parsing</a></li>
<li class="toctree-l4"><a class="reference internal" href="../json-api/lf-value-specification.html#contractid">ContractId</a></li>
<li class="toctree-l4"><a class="reference internal" href="../json-api/lf-value-specification.html#decimal">Decimal</a></li>
<li class="toctree-l4"><a class="reference internal" href="../json-api/lf-value-specification.html#int64">Int64</a></li>
<li class="toctree-l4"><a class="reference internal" href="../json-api/lf-value-specification.html#timestamp">Timestamp</a></li>
<li class="toctree-l4"><a class="reference internal" href="../json-api/lf-value-specification.html#party">Party</a></li>
<li class="toctree-l4"><a class="reference internal" href="../json-api/lf-value-specification.html#unit">Unit</a></li>
<li class="toctree-l4"><a class="reference internal" href="../json-api/lf-value-specification.html#date">Date</a></li>
<li class="toctree-l4"><a class="reference internal" href="../json-api/lf-value-specification.html#text">Text</a></li>
<li class="toctree-l4"><a class="reference internal" href="../json-api/lf-value-specification.html#bool">Bool</a></li>
<li class="toctree-l4"><a class="reference internal" href="../json-api/lf-value-specification.html#record">Record</a></li>
<li class="toctree-l4"><a class="reference internal" href="../json-api/lf-value-specification.html#list">List</a></li>
<li class="toctree-l4"><a class="reference internal" href="../json-api/lf-value-specification.html#textmap">TextMap</a></li>
<li class="toctree-l4"><a class="reference internal" href="../json-api/lf-value-specification.html#genmap">GenMap</a></li>
<li class="toctree-l4"><a class="reference internal" href="../json-api/lf-value-specification.html#optional">Optional</a></li>
<li class="toctree-l4"><a class="reference internal" href="../json-api/lf-value-specification.html#variant">Variant</a></li>
<li class="toctree-l4"><a class="reference internal" href="../json-api/lf-value-specification.html#enum">Enum</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../json-api/search-query-language.html">Query Language</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../json-api/search-query-language.html#fallback-rule">Fallback Rule</a></li>
<li class="toctree-l4"><a class="reference internal" href="../json-api/search-query-language.html#simple-equality">Simple Equality</a></li>
<li class="toctree-l4"><a class="reference internal" href="../json-api/search-query-language.html#comparison-query">Comparison Query</a></li>
<li class="toctree-l4"><a class="reference internal" href="../json-api/search-query-language.html#appendix-type-aware-queries">Appendix: Type-aware Queries</a></li>
<li class="toctree-l4"><a class="reference internal" href="../json-api/search-query-language.html#appendix-known-issues">Appendix: Known Issues</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../app-dev/bindings-ts/index.html">Use JavaScript Client Libraries with Daml</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../app-dev/bindings-ts/daml2js.html">Use the JavaScript Code Generator</a></li>
<li class="toctree-l4"><a class="reference internal" href="../app-dev/bindings-ts/daml-react.html">&#64;daml/react</a></li>
<li class="toctree-l4"><a class="reference internal" href="../app-dev/bindings-ts/daml-ledger.html">&#64;daml/ledger</a></li>
<li class="toctree-l4"><a class="reference internal" href="../app-dev/bindings-ts/daml-types.html">&#64;daml/types</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../create-daml-apps/off-ledger/json-api/production-setup/index.html">JSON API Production Setup</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../json-api/production-setup.html">Production Setup</a></li>
<li class="toctree-l4"><a class="reference internal" href="../json-api/production-setup/query-store.html">Query Store</a></li>
<li class="toctree-l4"><a class="reference internal" href="../json-api/production-setup/security-and-privacy.html">Security and Privacy</a></li>
<li class="toctree-l4"><a class="reference internal" href="../json-api/production-setup/architecture.html">Architecture</a></li>
<li class="toctree-l4"><a class="reference internal" href="../json-api/production-setup/scaling-and-redundancy.html">Scaling and Redundancy</a></li>
<li class="toctree-l4"><a class="reference internal" href="../json-api/production-setup/logging.html">Logging</a></li>
<li class="toctree-l4"><a class="reference internal" href="../json-api/production-setup/metrics.html">Metrics</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../app-dev/ledger-api.html">Build Integration with the Ledger API</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../app-dev/ledger-api.html#what-s-in-the-ledger-api">What’s in the Ledger API</a></li>
<li class="toctree-l3"><a class="reference internal" href="../app-dev/ledger-api.html#how-to-access-the-ledger-api">How to Access the Ledger API</a></li>
<li class="toctree-l3"><a class="reference internal" href="../app-dev/ledger-api.html#daml-lf">Daml-LF</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../app-dev/ledger-api.html#when-you-need-to-know-about-daml-lf">When You Need to Know About Daml-LF</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../app-dev/services.html">The Ledger API Services</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../app-dev/services.html#overview">Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="../app-dev/services.html#submit-commands-to-the-ledger">Submit Commands to the Ledger</a></li>
<li class="toctree-l4"><a class="reference internal" href="../app-dev/services.html#read-from-the-ledger">Read From the Ledger</a></li>
<li class="toctree-l4"><a class="reference internal" href="../app-dev/services.html#utility-services">Utility Services</a></li>
<li class="toctree-l4"><a class="reference internal" href="../app-dev/services.html#testing-services">Testing Services</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../app-dev/bindings-java/index.html">Java Bindings</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../app-dev/bindings-java/index.html#overview">Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="../app-dev/bindings-java/index.html#reference-documentation">Reference Documentation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../app-dev/bindings-java/index.html#get-started">Get Started</a></li>
<li class="toctree-l4"><a class="reference internal" href="../app-dev/bindings-java/index.html#example-projects">Example Projects</a></li>
<li class="toctree-l4"><a class="reference internal" href="../app-dev/bindings-java/codegen.html">Generate Java Code from Daml</a></li>
<li class="toctree-l4"><a class="reference internal" href="../app-dev/bindings-java/example.html">Java Bindings Example Project</a></li>
<li class="toctree-l4"><a class="reference internal" href="../app-dev/bindings-java/quickstart.html">Iou Quickstart Tutorial</a></li>
<li class="toctree-l4"><a class="reference internal" href="../app-dev/bindings-java/open-tracing.html">Open Tracing in Ledger API Client Applications</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../app-dev/bindings-python.html">Python Bindings</a></li>
<li class="toctree-l3"><a class="reference internal" href="../app-dev/grpc/index.html">Use the Ledger API With gRPC</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../app-dev/grpc/index.html#get-started">Get Started</a></li>
<li class="toctree-l4"><a class="reference internal" href="../app-dev/grpc/index.html#protobuf-reference-documentation">Protobuf Reference Documentation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../app-dev/grpc/index.html#example-project">Example Project</a></li>
<li class="toctree-l4"><a class="reference internal" href="../app-dev/grpc/index.html#daml-types-and-protobuf">Daml Types and Protobuf</a></li>
<li class="toctree-l4"><a class="reference internal" href="../app-dev/grpc/index.html#error-handling">Error Handling</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../app-dev/grpc/proto-docs.html">Ledger API Reference</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../app-dev/grpc/proto-docs.html#activecontractsservice-version-com-daml-ledger-api-v1">ActiveContractsService, v1</a></li>
<li class="toctree-l4"><a class="reference internal" href="../app-dev/grpc/proto-docs.html#commandinspectionservice-version-com-daml-ledger-api-v1-admin">CommandInspectionService, v1/admin</a></li>
<li class="toctree-l4"><a class="reference internal" href="../app-dev/grpc/proto-docs.html#configmanagementservice-version-com-daml-ledger-api-v1-admin">ConfigManagementService, v1/admin</a></li>
<li class="toctree-l4"><a class="reference internal" href="../app-dev/grpc/proto-docs.html#com-daml-ledger-api-v1-admin-identityproviderconfigservice">IdentityProviderConfigService, v1/admin</a></li>
<li class="toctree-l4"><a class="reference internal" href="../app-dev/grpc/proto-docs.html#meteringreportservice-version-com-daml-ledger-api-v1-admin">MeteringReportService, v1/admin</a></li>
<li class="toctree-l4"><a class="reference internal" href="../app-dev/grpc/proto-docs.html#packagemanagementservice-version-com-daml-ledger-api-v1-admin">PackageManagementService, v1/admin</a></li>
<li class="toctree-l4"><a class="reference internal" href="../app-dev/grpc/proto-docs.html#participantpruningservice-version-com-daml-ledger-api-v1-admin">ParticipantPruningService, v1/admin</a></li>
<li class="toctree-l4"><a class="reference internal" href="../app-dev/grpc/proto-docs.html#partymanagementservice-version-com-daml-ledger-api-v1-admin">PartyManagementService, v1/admin</a></li>
<li class="toctree-l4"><a class="reference internal" href="../app-dev/grpc/proto-docs.html#usermanagementservice-version-com-daml-ledger-api-v1-admin">UserManagementService, v1/admin</a></li>
<li class="toctree-l4"><a class="reference internal" href="../app-dev/grpc/proto-docs.html#commandcompletionservice-version-com-daml-ledger-api-v1">CommandCompletionService, v1</a></li>
<li class="toctree-l4"><a class="reference internal" href="../app-dev/grpc/proto-docs.html#commandservice-version-com-daml-ledger-api-v1">CommandService, v1</a></li>
<li class="toctree-l4"><a class="reference internal" href="../app-dev/grpc/proto-docs.html#commandsubmissionservice-version-com-daml-ledger-api-v1">CommandSubmissionService, v1</a></li>
<li class="toctree-l4"><a class="reference internal" href="../app-dev/grpc/proto-docs.html#eventqueryservice-version-com-daml-ledger-api-v1">EventQueryService, v1</a></li>
<li class="toctree-l4"><a class="reference internal" href="../app-dev/grpc/proto-docs.html#ledgerconfigurationservice-version-com-daml-ledger-api-v1">LedgerConfigurationService, v1</a></li>
<li class="toctree-l4"><a class="reference internal" href="../app-dev/grpc/proto-docs.html#ledgeridentityservice-version-com-daml-ledger-api-v1">LedgerIdentityService, v1</a></li>
<li class="toctree-l4"><a class="reference internal" href="../app-dev/grpc/proto-docs.html#packageservice-version-com-daml-ledger-api-v1">PackageService, v1</a></li>
<li class="toctree-l4"><a class="reference internal" href="../app-dev/grpc/proto-docs.html#timeservice-version-com-daml-ledger-api-v1-testing">TimeService, v1/testing</a></li>
<li class="toctree-l4"><a class="reference internal" href="../app-dev/grpc/proto-docs.html#transactionservice-version-com-daml-ledger-api-v1">TransactionService, v1</a></li>
<li class="toctree-l4"><a class="reference internal" href="../app-dev/grpc/proto-docs.html#versionservice-version-com-daml-ledger-api-v1">VersionService, v1</a></li>
<li class="toctree-l4"><a class="reference internal" href="../app-dev/grpc/proto-docs.html#commandcompletionservice-version-com-daml-ledger-api-v2">CommandCompletionService, v2</a></li>
<li class="toctree-l4"><a class="reference internal" href="../app-dev/grpc/proto-docs.html#commandservice-version-com-daml-ledger-api-v2">CommandService, v2</a></li>
<li class="toctree-l4"><a class="reference internal" href="../app-dev/grpc/proto-docs.html#commandsubmissionservice-version-com-daml-ledger-api-v2">CommandSubmissionService, v2</a></li>
<li class="toctree-l4"><a class="reference internal" href="../app-dev/grpc/proto-docs.html#eventqueryservice-version-com-daml-ledger-api-v2">EventQueryService, v2</a></li>
<li class="toctree-l4"><a class="reference internal" href="../app-dev/grpc/proto-docs.html#packageservice-version-com-daml-ledger-api-v2">PackageService, v2</a></li>
<li class="toctree-l4"><a class="reference internal" href="../app-dev/grpc/proto-docs.html#stateservice-version-com-daml-ledger-api-v2">StateService, v2</a></li>
<li class="toctree-l4"><a class="reference internal" href="../app-dev/grpc/proto-docs.html#timeservice-version-com-daml-ledger-api-v2-testing">TimeService, v2/testing</a></li>
<li class="toctree-l4"><a class="reference internal" href="../app-dev/grpc/proto-docs.html#updateservice-version-com-daml-ledger-api-v2">UpdateService, v2</a></li>
<li class="toctree-l4"><a class="reference internal" href="../app-dev/grpc/proto-docs.html#versionservice-version-com-daml-ledger-api-v2">VersionService, v2</a></li>
<li class="toctree-l4"><a class="reference internal" href="../app-dev/grpc/proto-docs.html#scalar-value-types">Scalar Value Types</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../app-dev/grpc/daml-to-ledger-api.html">How Daml Types are Translated to Protobuf</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../app-dev/grpc/daml-to-ledger-api.html#notation">Notation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../app-dev/grpc/daml-to-ledger-api.html#records-and-primitive-types">Records and Primitive Types</a></li>
<li class="toctree-l4"><a class="reference internal" href="../app-dev/grpc/daml-to-ledger-api.html#variants">Variants</a></li>
<li class="toctree-l4"><a class="reference internal" href="../app-dev/grpc/daml-to-ledger-api.html#contract-templates">Contract Templates</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../app-dev/daml-lf-translation.html">How Daml Types are Translated to Daml-LF</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../app-dev/daml-lf-translation.html#primitive-types">Primitive Types</a></li>
<li class="toctree-l4"><a class="reference internal" href="../app-dev/daml-lf-translation.html#tuple-types">Tuple Types</a></li>
<li class="toctree-l4"><a class="reference internal" href="../app-dev/daml-lf-translation.html#data-types">Data Types</a></li>
<li class="toctree-l4"><a class="reference internal" href="../app-dev/daml-lf-translation.html#type-synonyms">Type Synonyms</a></li>
<li class="toctree-l4"><a class="reference internal" href="../app-dev/daml-lf-translation.html#template-types">Template Types</a></li>
<li class="toctree-l4"><a class="reference internal" href="../app-dev/daml-lf-translation.html#names-with-special-characters">Names with Special Characters</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../app-dev/bindings-x-lang/index.html">Create Your Own Bindings</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../app-dev/bindings-x-lang/index.html#build-ledger-commands">Build Ledger Commands</a></li>
<li class="toctree-l4"><a class="reference internal" href="../app-dev/bindings-x-lang/index.html#summary">Summary</a></li>
<li class="toctree-l4"><a class="reference internal" href="../app-dev/bindings-x-lang/index.html#links">Links</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../create-daml-apps/off-ledger/daml-off-ledger/index.html">Write Off-Ledger Automation Using Daml</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../daml-off-ledger.html">Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-script/index.html">React to Off-Ledger Events: Daml Script</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml-script/index.html#usage">Usage</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml-script/index.html#use-daml-script-for-ledger-initialization">Use Daml Script for Ledger Initialization</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml-script/index.html#use-daml-script-with-the-ide-ledger">Use Daml Script with the IDE Ledger</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml-script/index.html#use-daml-script-in-canton">Use Daml Script in Canton</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml-script/index.html#run-daml-script-against-ledgers-with-authorization">Run Daml Script Against Ledgers with Authorization</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml-script/index.html#run-daml-script-against-the-http-json-api">Run Daml Script Against the HTTP JSON API</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../triggers/index.html">React to On-Ledger Events: Daml Triggers</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../triggers/index.html#how-to-think-about-triggers">How To Think About Triggers</a></li>
<li class="toctree-l4"><a class="reference internal" href="../triggers/index.html#sample-trigger">Sample Trigger</a></li>
<li class="toctree-l4"><a class="reference internal" href="../triggers/index.html#daml-trigger-basics">Daml Trigger Basics</a></li>
<li class="toctree-l4"><a class="reference internal" href="../triggers/index.html#run-a-no-op-trigger">Run a No-Op Trigger</a></li>
<li class="toctree-l4"><a class="reference internal" href="../triggers/index.html#diversion-updating-message">Diversion: Updating <code class="docutils literal notranslate"><span class="pre">Message</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../triggers/index.html#autoreply">AutoReply</a></li>
<li class="toctree-l4"><a class="reference internal" href="../triggers/index.html#command-deduplication">Command Deduplication</a></li>
<li class="toctree-l4"><a class="reference internal" href="../triggers/index.html#authorization">Authorization</a></li>
<li class="toctree-l4"><a class="reference internal" href="../triggers/index.html#when-not-to-use-daml-triggers">When Not to Use Daml Triggers</a></li>
<li class="toctree-l4"><a class="reference internal" href="../tools/trigger-service/index.html">Trigger Service</a></li>
<li class="toctree-l4"><a class="reference internal" href="../tools/auth-middleware/index.html">Auth Middleware</a></li>
<li class="toctree-l4"><a class="reference internal" href="../tools/auth-middleware/oauth2.html">OAuth 2.0 Auth Middleware</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../create-daml-apps/off-ledger/errors/index.html">Handle Errors</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../app-dev/command-deduplication.html">Command Deduplication</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../app-dev/command-deduplication.html#how-command-deduplication-works">How Command Deduplication Works</a></li>
<li class="toctree-l4"><a class="reference internal" href="../app-dev/command-deduplication.html#how-to-use-command-deduplication">How to Use Command Deduplication</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../app-dev/authorization.html">Authorization</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../app-dev/authorization.html#introduction">Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../app-dev/authorization.html#acquire-and-use-access-tokens">Acquire and Use Access Tokens</a></li>
<li class="toctree-l3"><a class="reference internal" href="../app-dev/authorization.html#access-tokens-and-rights">Access Tokens and Rights</a></li>
<li class="toctree-l3"><a class="reference internal" href="../app-dev/authorization.html#access-token-formats">Access Token Formats</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../app-dev/authorization.html#user-access-tokens">User Access Tokens</a></li>
<li class="toctree-l4"><a class="reference internal" href="../app-dev/authorization.html#custom-daml-claims-access-tokens">Custom Daml Claims Access Tokens</a></li>
<li class="toctree-l4"><a class="reference internal" href="../app-dev/authorization.html#encoding-and-signature">Encoding and Signature</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../app-dev/explicit-contract-disclosure.html">Explicit Contract Disclosure</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../app-dev/explicit-contract-disclosure.html#contract-read-delegation">Contract Read Delegation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../app-dev/explicit-contract-disclosure.html#read-delegation-using-explicit-contract-disclosure">Read delegation using explicit contract disclosure</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../app-dev/explicit-contract-disclosure.html#how-do-stakeholders-disclose-contracts-to-submitters">How do stakeholders disclose contracts to submitters?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../app-dev/explicit-contract-disclosure.html#attaching-a-disclosed-contract-to-a-command-submission">Attaching a disclosed contract to a command submission</a></li>
<li class="toctree-l3"><a class="reference internal" href="../app-dev/explicit-contract-disclosure.html#trading-the-stock-with-explicit-disclosure">Trading the stock with explicit disclosure</a></li>
<li class="toctree-l3"><a class="reference internal" href="../app-dev/explicit-contract-disclosure.html#safeguards">Safeguards</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../app-dev/explicit-contract-disclosure.html#contract-authentication">Contract authentication</a></li>
<li class="toctree-l4"><a class="reference internal" href="../app-dev/explicit-contract-disclosure.html#business-logic-safeguards">Business logic safeguards</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../daml/resource-management/index.html">Resource Management in Daml Application Design</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../daml/resource-management/latency-and-throughput.html">Managing Latency and Throughput</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../daml/resource-management/latency-and-throughput.html#problem-definition">Problem Definition</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml/resource-management/latency-and-throughput.html#possible-throughput-bottlenecks-in-order-of-likelihood">Possible Throughput Bottlenecks in Order of Likelihood</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/resource-management/latency-and-throughput.html#solutions">Solutions</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../daml/resource-management/contention-avoiding.html">Avoid Contention Issues</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../daml/resource-management/contention-avoiding.html#contention-in-daml">Contention in Daml</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/resource-management/contention-reducing.html">Reduce Contention</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/resource-management/contention-techniques.html">Example Application with Techniques for Reducing Contention</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml/resource-management/contention-techniques.html#the-example-minimal-settlement-system">The Example Minimal Settlement System</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/resource-management/contention-techniques.html#prepare-transactions-for-contention-free-parallelism">Prepare Transactions for Contention-Free Parallelism</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/resource-management/contention-techniques.html#non-utxo-alternative-ledger-models">Non-UTXO Alternative Ledger Models</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/resource-management/contention-techniques.html#simple-strategies-for-utxo-ledger-models">Simple Strategies for UTXO Ledger Models</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/resource-management/contention-techniques.html#shard-asset-positions-for-utxo-ledger-models">Shard Asset Positions for UTXO Ledger Models</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../daml/resource-management/active-contract-set.html">Managing Active Contract Set (ACS) Size</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../daml/resource-management/active-contract-set.html#problem-definition">Problem Definition</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/resource-management/active-contract-set.html#relational-databases">Relational Databases</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml/resource-management/active-contract-set.html#solutions">Solutions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml/resource-management/active-contract-set.html#http-json-api-service">HTTP JSON API Service</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../upgrade/index.html">Upgrading and Extending Daml Applications</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../upgrade/extend.html">Extending Daml Applications</a></li>
<li class="toctree-l2"><a class="reference internal" href="../upgrade/upgrade.html">Upgrading Daml Applications</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../upgrade/upgrade.html#daml-upgrade-overview">Daml Upgrade Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="../upgrade/upgrade.html#structure-upgrade-contracts">Structure Upgrade Contracts</a></li>
<li class="toctree-l3"><a class="reference internal" href="../upgrade/upgrade.html#build-and-deploy-carbon-1-0-0">Build and Deploy <code class="docutils literal notranslate"><span class="pre">carbon-1.0.0</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../upgrade/upgrade.html#create-carbon-1-0-0-certificates">Create carbon-1.0.0 Certificates</a></li>
<li class="toctree-l3"><a class="reference internal" href="../upgrade/upgrade.html#build-and-deploy-carbon-2-0-0">Build and Deploy <code class="docutils literal notranslate"><span class="pre">carbon-2.0.0</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../upgrade/upgrade.html#build-and-deploy-carbon-upgrade">Build and Deploy <code class="docutils literal notranslate"><span class="pre">carbon-upgrade</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../upgrade/upgrade.html#upgrade-existing-certificates-from-carbon-1-0-0-to-carbon-2-0-0">Upgrade Existing Certificates from carbon-1.0.0 to carbon-2.0.0</a></li>
<li class="toctree-l3"><a class="reference internal" href="../upgrade/upgrade.html#further-steps">Further Steps</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../upgrade/smart-contract-upgrades.html">Smart Contract Upgrade</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../upgrade/smart-contract-upgrades.html#overview">Overview</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../upgrade/smart-contract-upgrades.html#what-is-smart-contract-upgrade-scu">What is Smart Contract Upgrade (SCU)?</a></li>
<li class="toctree-l4"><a class="reference internal" href="../upgrade/smart-contract-upgrades.html#requirements">Requirements</a></li>
<li class="toctree-l4"><a class="reference internal" href="../upgrade/smart-contract-upgrades.html#smart-contract-upgrade-basics">Smart Contract Upgrade Basics</a></li>
<li class="toctree-l4"><a class="reference internal" href="../upgrade/smart-contract-upgrades.html#upgrading-across-the-stack">Upgrading Across the Stack</a></li>
<li class="toctree-l4"><a class="reference internal" href="../upgrade/smart-contract-upgrades.html#limitations">Limitations</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../upgrade/smart-contract-upgrades.html#the-programming-model-by-example">The Programming Model by Example</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../upgrade/smart-contract-upgrades.html#writing-your-first-smart-contract-upgrade">Writing Your First Smart Contract Upgrade</a></li>
<li class="toctree-l4"><a class="reference internal" href="../upgrade/smart-contract-upgrades.html#deploying-your-first-upgrade">Deploying Your First Upgrade</a></li>
<li class="toctree-l4"><a class="reference internal" href="../upgrade/smart-contract-upgrades.html#continuing-to-write-your-upgrades">Continuing to Write Your Upgrades</a></li>
<li class="toctree-l4"><a class="reference internal" href="../upgrade/smart-contract-upgrades.html#developer-workflow">Developer Workflow</a></li>
<li class="toctree-l4"><a class="reference internal" href="../upgrade/smart-contract-upgrades.html#the-upgrade-model-in-depth-reference">The Upgrade Model in Depth - Reference</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../upgrade/smart-contract-upgrades.html#package-selection-in-the-ledger-api">Package Selection in the Ledger API</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../upgrade/smart-contract-upgrades.html#package-preference">Package Preference</a></li>
<li class="toctree-l4"><a class="reference internal" href="../upgrade/smart-contract-upgrades.html#dynamic-package-resolution-in-command-submission">Dynamic Package Resolution in Command Submission</a></li>
<li class="toctree-l4"><a class="reference internal" href="../upgrade/smart-contract-upgrades.html#dynamic-package-resolution-in-ledger-api-queries">Dynamic Package Resolution in Ledger API Queries</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../upgrade/smart-contract-upgrades.html#migrating-to-scu">Migrating to SCU</a></li>
<li class="toctree-l3"><a class="reference internal" href="../upgrade/smart-contract-upgrades.html#best-practices">Best Practices</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../upgrade/smart-contract-upgrades.html#separate-interfaces-exceptions-from-templates">Separate Interfaces/Exceptions from Templates</a></li>
<li class="toctree-l4"><a class="reference internal" href="../upgrade/smart-contract-upgrades.html#remove-retroactive-instances">Remove Retroactive Instances</a></li>
<li class="toctree-l4"><a class="reference internal" href="../upgrade/smart-contract-upgrades.html#avoid-contract-metadata-changes">Avoid Contract Metadata Changes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../upgrade/smart-contract-upgrades.html#breaking-changes-via-explicit-package-version">Breaking Changes via Explicit Package Version</a></li>
<li class="toctree-l4"><a class="reference internal" href="../upgrade/smart-contract-upgrades.html#avoid-depending-on-lf-1-15-packages">Avoid Depending on LF 1.15 Packages</a></li>
<li class="toctree-l4"><a class="reference internal" href="../upgrade/smart-contract-upgrades.html#avoid-depending-on-daml-script-packages">Avoid Depending on Daml Script Packages</a></li>
<li class="toctree-l4"><a class="reference internal" href="../upgrade/smart-contract-upgrades.html#operational-design-guideline-for-upgrading-daml-apps">Operational Design Guideline for Upgrading Daml Apps</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../upgrade/smart-contract-upgrades.html#testing">Testing</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../upgrade/smart-contract-upgrades.html#standalone-upgradeability-checks">Standalone Upgradeability Checks</a></li>
<li class="toctree-l4"><a class="reference internal" href="../upgrade/smart-contract-upgrades.html#dry-run-uploading-to-a-test-environment">Dry Run Uploading to a Test Environment</a></li>
<li class="toctree-l4"><a class="reference internal" href="../upgrade/smart-contract-upgrades.html#daml-script-testing">Daml Script Testing</a></li>
<li class="toctree-l4"><a class="reference internal" href="../upgrade/smart-contract-upgrades.html#multi-package-builds-for-upgrades">Multi-package builds for upgrades</a></li>
<li class="toctree-l4"><a class="reference internal" href="../upgrade/smart-contract-upgrades.html#workflow-testing">Workflow Testing</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../upgrade/smart-contract-upgrades.html#scu-support-in-daml-tooling">SCU Support in Daml Tooling</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../upgrade/smart-contract-upgrades.html#codegen">Codegen</a></li>
<li class="toctree-l4"><a class="reference internal" href="../upgrade/smart-contract-upgrades.html#json-api-server-1">JSON API Server</a></li>
<li class="toctree-l4"><a class="reference internal" href="../upgrade/smart-contract-upgrades.html#pqs">PQS</a></li>
<li class="toctree-l4"><a class="reference internal" href="../upgrade/smart-contract-upgrades.html#daml-shell">Daml Shell</a></li>
<li class="toctree-l4"><a class="reference internal" href="../upgrade/smart-contract-upgrades.html#id5">Daml-Script</a></li>
<li class="toctree-l4"><a class="reference internal" href="../upgrade/smart-contract-upgrades.html#daml-studio-support">Daml Studio support</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../upgrade/automation.html">Automating the Upgrade Process</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../upgrade/automation.html#structure-the-upgrade">Structure the Upgrade</a></li>
<li class="toctree-l3"><a class="reference internal" href="../upgrade/automation.html#implementation-of-the-daml-script">Implementation of the Daml Script</a></li>
<li class="toctree-l3"><a class="reference internal" href="../upgrade/automation.html#implementation-of-the-daml-trigger">Implementation of the Daml Trigger</a></li>
<li class="toctree-l3"><a class="reference internal" href="../upgrade/automation.html#deploy-and-execute-the-upgrade">Deploy and Execute the Upgrade</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../create-daml-apps/developer-tools/index.html">Developer Tools</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../tools/assistant.html">Daml Assistant</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../tools/assistant.html#command-help">Command Help</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tools/assistant.html#configuration-files">Configuration Files</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../tools/assistant.html#global-config-file-daml-config-yaml">Global Config File (<code class="docutils literal notranslate"><span class="pre">daml-config.yaml</span></code>)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../tools/assistant.html#project-config-file-daml-yaml">Project Config File (<code class="docutils literal notranslate"><span class="pre">daml.yaml</span></code>)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../tools/assistant.html#recommended-build-options">Recommended <code class="docutils literal notranslate"><span class="pre">build-options</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../tools/assistant.html#multi-package-config-file-multi-package-yaml">Multi-Package Config File (<code class="docutils literal notranslate"><span class="pre">multi-package.yaml</span></code>)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../tools/assistant.html#environment-variable-interpolation">Environment Variable Interpolation</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../tools/assistant-install.html">Manage SDK Versions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tools/assistant-build.html">Build Daml Projects</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../tools/assistant-build.html#build-a-project">Build a project</a></li>
<li class="toctree-l4"><a class="reference internal" href="../tools/assistant-build.html#build-multiple-packages">Build multiple packages</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../tools/assistant-commands.html">Run Assistant Commands</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../tools/assistant-commands.html#terminal-command-completion">Terminal command completion</a></li>
<li class="toctree-l4"><a class="reference internal" href="../tools/assistant-commands.html#run-commands-outside-of-the-project-directory">Run commands outside of the project directory</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../tools/daml-shell/index.html">Daml Shell</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../tools/daml-shell/index.html#getting-started">Getting started</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../tools/daml-shell/index.html#prerequisites">Prerequisites</a></li>
<li class="toctree-l4"><a class="reference internal" href="../tools/daml-shell/index.html#running-daml-shell">Running Daml Shell</a></li>
<li class="toctree-l4"><a class="reference internal" href="../tools/daml-shell/index.html#commands">Commands</a></li>
<li class="toctree-l4"><a class="reference internal" href="../tools/daml-shell/index.html#filters">Filters</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../tools/daml-shell/index.html#configuration">Configuration</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../tools/daml-shell/index.html#command-line-arguments">Command line arguments</a></li>
<li class="toctree-l4"><a class="reference internal" href="../tools/daml-shell/index.html#configuration-file">Configuration file</a></li>
<li class="toctree-l4"><a class="reference internal" href="../tools/daml-shell/index.html#interactive-configuration">Interactive configuration</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../tools/daml-shell/index.html#usage">Usage</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../tools/daml-shell/index.html#connecting">Connecting</a></li>
<li class="toctree-l4"><a class="reference internal" href="../tools/daml-shell/index.html#offsets">Offsets</a></li>
<li class="toctree-l4"><a class="reference internal" href="../tools/daml-shell/index.html#summary-information">Summary information</a></li>
<li class="toctree-l4"><a class="reference internal" href="../tools/daml-shell/index.html#payloads-by-fully-qualified-name">Payloads by fully qualified name</a></li>
<li class="toctree-l4"><a class="reference internal" href="../tools/daml-shell/index.html#filtering-with-where-clauses">Filtering with <code class="docutils literal notranslate"><span class="pre">where</span></code> clauses</a></li>
<li class="toctree-l4"><a class="reference internal" href="../tools/daml-shell/index.html#contract-lookup">Contract lookup</a></li>
<li class="toctree-l4"><a class="reference internal" href="../tools/daml-shell/index.html#transaction-lookup">Transaction lookup</a></li>
<li class="toctree-l4"><a class="reference internal" href="../tools/daml-shell/index.html#exercise-lookup">Exercise lookup</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../tools/daml-shell/index.html#transforming-and-exporting-command-output">Transforming and exporting command output</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../tools/daml-shell/index.html#setting-offset-bounds">Setting offset bounds</a></li>
<li class="toctree-l4"><a class="reference internal" href="../tools/daml-shell/index.html#finding-transactions-that-created-or-archived-a-contract">Finding transactions that created or archived a contract</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../tools/daml-shell/index.html#faq">FAQ</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../tools/daml-shell/index.html#why-don-t-i-see-any-archived-contracts">Why don’t I see any archived contracts?</a></li>
<li class="toctree-l4"><a class="reference internal" href="../tools/daml-shell/index.html#why-don-t-i-see-any-choices">Why don’t I see any choices?</a></li>
<li class="toctree-l4"><a class="reference internal" href="../tools/daml-shell/index.html#why-don-t-i-see-any-interface-views">Why don’t I see any interface views?</a></li>
<li class="toctree-l4"><a class="reference internal" href="../tools/daml-shell/index.html#why-do-all-contracts-show-the-same-ledger-offset">Why do all contracts show the same ledger offset?</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../tools/canton-console.html">Canton Console</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../tools/canton-console.html#introduction">Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tools/canton-console.html#run-the-canton-console-against-the-sandbox">Run the Canton Console Against the Sandbox</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tools/canton-console.html#built-in-documentation">Built-in Documentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tools/canton-console.html#interact-with-the-sandbox">Interact With the Sandbox</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../deploy/generic_ledger.html">Deploy to Generic Daml Ledger</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../deploy/generic_ledger.html#connect-via-tls">Connect via TLS</a></li>
<li class="toctree-l3"><a class="reference internal" href="../deploy/generic_ledger.html#configure-request-timeouts">Configure Request Timeouts</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../daml-repl/index.html">Experiment: Daml REPL (Deprecated)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../daml-repl/index.html#usage">Usage</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-repl/index.html#what-is-in-scope-at-the-prompt">What Is in Scope at the Prompt?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-repl/index.html#using-daml-repl-without-a-ledger">Using Daml REPL Without a Ledger</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-repl/index.html#connecting-via-tls">Connecting via TLS</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-repl/index.html#connection-to-a-ledger-with-authorization">Connection to a Ledger With Authorization</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-repl/index.html#using-daml-repl-to-convert-to-json">Using Daml REPL to Convert to JSON</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../daml/daml-studio.html">Write: Daml Studio</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../daml/daml-studio.html#install">Install</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/daml-studio.html#create-your-first-daml-file">Create Your First Daml File</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/daml-studio.html#supported-features">Supported Features</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml/daml-studio.html#symbols-and-problem-reporting">Symbols and Problem Reporting</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/daml-studio.html#hover-tooltips">Hover Tooltips</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/daml-studio.html#daml-script-results">Daml Script Results</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/daml-studio.html#daml-snippets">Daml Snippets</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml/daml-studio.html#common-script-errors">Common Script Errors</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml/daml-studio.html#abort-assert-and-debug">Abort, Assert, and Debug</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/daml-studio.html#missing-authorization-on-create">Missing Authorization on Create</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/daml-studio.html#missing-authorization-on-exercise">Missing Authorization on Exercise</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/daml-studio.html#contract-not-visible">Contract Not Visible</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml/daml-studio.html#multi-package-support">Multi-Package Support</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml/daml-studio.html#multi-package-yaml-location">Multi-package.yaml Location</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/daml-studio.html#package-environments-and-hot-loading">Package Environments and Hot-Loading</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/daml-studio.html#multiple-daml-sdk-versions">Multiple Daml SDK Versions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/daml-studio.html#directory-envrionment-tools-direnv">Directory Envrionment Tools (direnv)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/daml-studio.html#limitations-in-2-10-0-rc">Limitations in 2.10.0-rc</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/daml-studio.html#setting-multi-ide-sdk-version">Setting Multi-IDE SDK Version</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/daml-studio.html#deactivating-multi-ide">Deactivating Multi-IDE</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../tools/sandbox.html">Test: Daml Sandbox</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../tools/sandbox.html#run-with-authorization">Run With Authorization</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../tools/sandbox.html#generate-json-web-tokens-jwt">Generate JSON Web Tokens (JWT)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../tools/sandbox.html#generate-rsa-keys">Generate RSA keys</a></li>
<li class="toctree-l4"><a class="reference internal" href="../tools/sandbox.html#generate-ec-keys">Generate EC keys</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../tools/sandbox.html#run-with-tls">Run With TLS</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tools/sandbox.html#command-line-reference">Command-line Reference</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tools/sandbox.html#metrics">Metrics</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../tools/sandbox.html#enable-and-configure-reporting">Enable and Configure Reporting</a></li>
<li class="toctree-l4"><a class="reference internal" href="../tools/sandbox.html#types-of-metrics">Types of Metrics</a></li>
<li class="toctree-l4"><a class="reference internal" href="../tools/sandbox.html#list-of-metrics">List of Metrics</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../tools/navigator/index.html">Visualize: Daml Navigator (Deprecated)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../tools/navigator/index.html#navigator-functionality">Navigator Functionality</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tools/navigator/index.html#starting-navigator">Starting Navigator</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tools/navigator/index.html#logging-in">Logging In</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../tools/navigator/index.html#logging-in-as-a-party">Logging in as a Party</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../tools/navigator/index.html#viewing-templates-or-contracts">Viewing Templates or Contracts</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../tools/navigator/index.html#listing-templates">Listing templates</a></li>
<li class="toctree-l4"><a class="reference internal" href="../tools/navigator/index.html#listing-contracts">Listing contracts</a></li>
<li class="toctree-l4"><a class="reference internal" href="../tools/navigator/index.html#viewing-contracts-based-on-a-template">Viewing contracts based on a template</a></li>
<li class="toctree-l4"><a class="reference internal" href="../tools/navigator/index.html#viewing-template-and-contract-details">Viewing template and contract details</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../tools/navigator/index.html#using-navigator">Using Navigator</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../tools/navigator/index.html#creating-contracts">Creating contracts</a></li>
<li class="toctree-l4"><a class="reference internal" href="../tools/navigator/index.html#exercising-choices">Exercising choices</a></li>
<li class="toctree-l4"><a class="reference internal" href="../tools/navigator/index.html#advancing-time">Advancing time</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../tools/navigator/index.html#authorizing-navigator">Authorizing Navigator</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tools/navigator/index.html#advanced-usage">Advanced Usage</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../tools/navigator/index.html#customizable-table-views">Customizable table views</a></li>
<li class="toctree-l4"><a class="reference internal" href="../tools/navigator/index.html#using-navigator-with-a-daml-ledger">Using Navigator with a Daml Ledger</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../tools/profiler.html">Measure: Daml Profiler</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../tools/profiler.html#usage">Usage</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tools/profiler.html#caveats">Caveats</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../tools/codegen.html">Daml Codegen</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../tools/codegen.html#introduction">Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tools/codegen.html#run-the-daml-codegen">Run the Daml Codegen</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../tools/codegen.html#command-line-configuration">Command Line Configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="../tools/codegen.html#project-file-configuration-java">Project File Configuration (Java)</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Daml Finance</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../daml-finance/index.html">Daml Finance Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../daml-finance/overview/index.html">Overview</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../daml-finance/overview/intro.html">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../daml-finance/overview/architecture.html">Architecture</a></li>
<li class="toctree-l2"><a class="reference internal" href="../daml-finance/overview/building-applications.html">Building Applications</a></li>
<li class="toctree-l2"><a class="reference internal" href="../daml-finance/overview/extending-daml-finance.html">Extending Daml Finance</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../daml-finance/concepts/index.html">Concepts</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../daml-finance/concepts/asset-model.html">Asset Model</a></li>
<li class="toctree-l2"><a class="reference internal" href="../daml-finance/concepts/settlement.html">Settlement</a></li>
<li class="toctree-l2"><a class="reference internal" href="../daml-finance/concepts/lifecycling.html">Lifecycling</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../daml-finance/instruments/intro.html">Instruments</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../daml-finance/instruments/token.html">Token Instrument</a></li>
<li class="toctree-l2"><a class="reference internal" href="../daml-finance/instruments/bond.html">Bond Instrument</a></li>
<li class="toctree-l2"><a class="reference internal" href="../daml-finance/instruments/equity.html">Equity Instrument</a></li>
<li class="toctree-l2"><a class="reference internal" href="../daml-finance/instruments/option.html">Option Instrument</a></li>
<li class="toctree-l2"><a class="reference internal" href="../daml-finance/instruments/structured-product.html">Structured Product</a></li>
<li class="toctree-l2"><a class="reference internal" href="../daml-finance/instruments/swap.html">Swap Instrument</a></li>
<li class="toctree-l2"><a class="reference internal" href="../daml-finance/instruments/generic.html">Generic Instrument</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/instruments/generic/contingent-claims.html">Contingent Claims</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../daml-finance/packages/index.html">Packages</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../daml-finance/packages/interfaces/index.html">Interface Packages</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/packages/interfaces/daml-finance-interface-holding.html">Daml.Finance.Interface.Holding.V4</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml-finance/packages/interfaces/changelogs/daml-finance-interface-holding.html">Changelog</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/packages/interfaces/daml-finance-interface-account.html">Daml.Finance.Interface.Account.V4</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml-finance/packages/interfaces/changelogs/daml-finance-interface-account.html">Changelog</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/packages/interfaces/daml-finance-interface-settlement.html">Daml.Finance.Interface.Settlement.V4</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml-finance/packages/interfaces/changelogs/daml-finance-interface-settlement.html">Changelog</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/packages/interfaces/daml-finance-interface-lifecycle.html">Daml.Finance.Interface.Lifecycle.V4</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml-finance/packages/interfaces/changelogs/daml-finance-interface-lifecycle.html">Changelog</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/packages/interfaces/daml-finance-interface-instrument-base.html">Daml.Finance.Interface.Instrument.Base.V4</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml-finance/packages/interfaces/changelogs/daml-finance-interface-instrument-base.html">Changelog</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/packages/interfaces/daml-finance-interface-claims.html">Daml.Finance.Interface.Claims.V4</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml-finance/packages/interfaces/changelogs/daml-finance-interface-claims.html">Changelog</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/packages/interfaces/daml-finance-interface-data.html">Daml.Finance.Interface.Data.V4</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml-finance/packages/interfaces/changelogs/daml-finance-interface-data.html">Changelog</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/packages/interfaces/daml-finance-interface-types-common.html">Daml.Finance.Interface.Types.Common.V3</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml-finance/packages/interfaces/changelogs/daml-finance-interface-types-common.html">Changelog</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/packages/interfaces/daml-finance-interface-types-date.html">Daml.Finance.Interface.Types.Date.V3</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml-finance/packages/interfaces/changelogs/daml-finance-interface-types-date.html">Changelog</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/packages/interfaces/daml-finance-interface-util.html">Daml.Finance.Interface.Util.V3</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml-finance/packages/interfaces/changelogs/daml-finance-interface-util.html">Changelog</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/packages/interfaces/contingent-claims-core.html">ContingentClaims.Core.V3</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml-finance/packages/interfaces/changelogs/contingent-claims-core.html">Changelog</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/packages/interfaces/daml-finance-interface-instrument-bond.html">Daml.Finance.Interface.Instrument.Bond.V3</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml-finance/packages/interfaces/changelogs/daml-finance-interface-instrument-bond.html">Changelog</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/packages/interfaces/daml-finance-interface-instrument-equity.html">Daml.Finance.Interface.Instrument.Equity.V0</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml-finance/packages/interfaces/changelogs/daml-finance-interface-instrument-equity.html">Changelog</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/packages/interfaces/daml-finance-interface-instrument-generic.html">Daml.Finance.Interface.Instrument.Generic.V4</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml-finance/packages/interfaces/changelogs/daml-finance-interface-instrument-generic.html">Changelog</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/packages/interfaces/daml-finance-interface-instrument-option.html">Daml.Finance.Interface.Instrument.Option.V0</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml-finance/packages/interfaces/changelogs/daml-finance-interface-instrument-option.html">Changelog</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/packages/interfaces/daml-finance-interface-instrument-structuredproduct.html">Daml.Finance.Interface.Instrument.StructuredProduct.V0</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml-finance/packages/interfaces/changelogs/daml-finance-interface-instrument-structuredproduct.html">Changelog</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/packages/interfaces/daml-finance-interface-instrument-swap.html">Daml.Finance.Interface.Instrument.Swap.V0</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml-finance/packages/interfaces/changelogs/daml-finance-interface-instrument-swap.html">Changelog</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/packages/interfaces/daml-finance-interface-instrument-token.html">Daml.Finance.Interface.Instrument.Token.V4</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml-finance/packages/interfaces/changelogs/daml-finance-interface-instrument-token.html">Changelog</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/packages/interfaces/daml-finance-interface-instrument-types.html">Daml.Finance.Interface.Instrument.Types.V2</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml-finance/packages/interfaces/changelogs/daml-finance-interface-instrument-types.html">Changelog</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../daml-finance/packages/implementations/index.html">Implementation Packages</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/packages/implementations/daml-finance-holding.html">Daml.Finance.Holding.V4</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml-finance/packages/implementations/changelogs/daml-finance-holding.html">Changelog</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/packages/implementations/daml-finance-account.html">Daml.Finance.Account.V4</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml-finance/packages/implementations/changelogs/daml-finance-account.html">Changelog</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/packages/implementations/daml-finance-settlement.html">Daml.Finance.Settlement.V4</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml-finance/packages/implementations/changelogs/daml-finance-settlement.html">Changelog</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/packages/implementations/daml-finance-lifecycle.html">Daml.Finance.Lifecycle.V4</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml-finance/packages/implementations/changelogs/daml-finance-lifecycle.html">Changelog</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/packages/implementations/daml-finance-data.html">Daml.Finance.Data.V4</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml-finance/packages/implementations/changelogs/daml-finance-data.html">Changelog</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/packages/implementations/daml-finance-claims.html">Daml.Finance.Claims.V3</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml-finance/packages/implementations/changelogs/daml-finance-claims.html">Changelog</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/packages/implementations/daml-finance-util.html">Daml.Finance.Util.V4</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml-finance/packages/implementations/changelogs/daml-finance-util.html">Changelog</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/packages/implementations/contingent-claims-lifecycle.html">ContingentClaims.Lifecycle.V3</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml-finance/packages/implementations/changelogs/contingent-claims-lifecycle.html">Changelog</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/packages/implementations/contingent-claims-valuation.html">ContingentClaims.Valuation.V0</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml-finance/packages/implementations/changelogs/contingent-claims-valuation.html">Changelog</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/packages/implementations/daml-finance-instrument-bond.html">Daml.Finance.Instrument.Bond.V3</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml-finance/packages/implementations/changelogs/daml-finance-instrument-bond.html">Changelog</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/packages/implementations/daml-finance-instrument-equity.html">Daml.Finance.Instrument.Equity.V0</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml-finance/packages/implementations/changelogs/daml-finance-instrument-equity.html">Changelog</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/packages/implementations/daml-finance-instrument-generic.html">Daml.Finance.Instrument.Generic.V4</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml-finance/packages/implementations/changelogs/daml-finance-instrument-generic.html">Changelog</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/packages/implementations/daml-finance-instrument-option.html">Daml.Finance.Instrument.Option.V0</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml-finance/packages/implementations/changelogs/daml-finance-instrument-option.html">Changelog</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/packages/implementations/daml-finance-instrument-structuredproduct.html">Daml.Finance.Instrument.StructuredProduct.V0</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml-finance/packages/implementations/changelogs/daml-finance-instrument-structuredproduct.html">Changelog</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/packages/implementations/daml-finance-instrument-swap.html">Daml.Finance.Instrument.Swap.V0</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml-finance/packages/implementations/changelogs/daml-finance-instrument-swap.html">Changelog</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/packages/implementations/daml-finance-instrument-token.html">Daml.Finance.Instrument.Token.V4</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml-finance/packages/implementations/changelogs/daml-finance-instrument-token.html">Changelog</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../daml-finance/tutorials/index.html">Tutorials</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../daml-finance/tutorials/getting-started/intro.html">Getting Started</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/tutorials/getting-started/holdings.html">Holdings</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/tutorials/getting-started/transfer.html">Transfer</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/tutorials/getting-started/settlement.html">Settlement</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/tutorials/getting-started/lifecycling.html">Lifecycling</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../daml-finance/tutorials/settlement/intro.html">Settlement</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/tutorials/settlement/transfer.html">Enhanced Transfers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/tutorials/settlement/internal.html">Internal Settlement</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/tutorials/settlement/intermediated.html">Intermediated Settlement</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../daml-finance/tutorials/lifecycling/intro.html">Lifecycling</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/tutorials/lifecycling/fixed-rate-bond.html">Time-based lifecycling (using a fixed rate bond)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/tutorials/lifecycling/floating-rate-bond.html">Observations (using a floating rate bond)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/tutorials/lifecycling/callable-bond.html">Election-based lifecycling (using a callable bond)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../daml-finance/tutorials/upgrade/intro.html">Upgrade</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/tutorials/upgrade/account.html">Account Upgrade</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/tutorials/upgrade/holding.html">Holding Upgrade</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../daml-finance/tutorials/payoff-modeling/intro.html">Payoff Modeling</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/tutorials/payoff-modeling/basic-builders.html">Basic Builders</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/tutorials/payoff-modeling/observations.html">Observations</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../daml-finance/tutorials/advanced-topics/intro.html">Advanced Topics</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/tutorials/advanced-topics/lifecycling/intermediated-lifecycling.html">Intermediated Lifecycling of an Instrument</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/tutorials/advanced-topics/instrument-modeling/contingent-claims-instrument.html">Leverage Contingent Claims in Custom Instrument Implementations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/tutorials/advanced-topics/instrument-modeling/date-utilities.html">Date Utility Functions: Calendar, Schedule, and Day Count</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../daml-finance/reference/index.html">Reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../daml-finance/reference/glossary.html">Glossary</a></li>
<li class="toctree-l2"><a class="reference internal" href="../daml-finance/reference/patterns.html">Patterns</a></li>
<li class="toctree-l2"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/index.html">Daml Finance</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/ContingentClaims-Core-V3-Builders.html">ContingentClaims.Core.V3.Builders</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/ContingentClaims-Core-V3-Claim.html">ContingentClaims.Core.V3.Claim</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/ContingentClaims-Core-V3-Internal-Claim.html">ContingentClaims.Core.V3.Internal.Claim</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/ContingentClaims-Core-V3-Observation.html">ContingentClaims.Core.V3.Observation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/ContingentClaims-Core-V3-Util-Recursion.html">ContingentClaims.Core.V3.Util.Recursion</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/ContingentClaims-Lifecycle-V3-Lifecycle.html">ContingentClaims.Lifecycle.V3.Lifecycle</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/ContingentClaims-Lifecycle-V3-Util.html">ContingentClaims.Lifecycle.V3.Util</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/ContingentClaims-Valuation-V0-MathML.html">ContingentClaims.Valuation.V0.MathML</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/ContingentClaims-Valuation-V0-Stochastic.html">ContingentClaims.Valuation.V0.Stochastic</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Account-V4-Account.html">Daml.Finance.Account.V4.Account</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Claims-V3-Lifecycle-Rule.html">Daml.Finance.Claims.V3.Lifecycle.Rule</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Claims-V3-Util.html">Daml.Finance.Claims.V3.Util</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Claims-V3-Util-Builders.html">Daml.Finance.Claims.V3.Util.Builders</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Claims-V3-Util-Date.html">Daml.Finance.Claims.V3.Util.Date</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Claims-V3-Util-Lifecycle.html">Daml.Finance.Claims.V3.Util.Lifecycle</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Data-V4-Numeric-Observation.html">Daml.Finance.Data.V4.Numeric.Observation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Data-V4-Reference-HolidayCalendar.html">Daml.Finance.Data.V4.Reference.HolidayCalendar</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Data-V4-Time-DateClock.html">Daml.Finance.Data.V4.Time.DateClock</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Data-V4-Time-DateClock-Types.html">Daml.Finance.Data.V4.Time.DateClock.Types</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Data-V4-Time-DateClockUpdate.html">Daml.Finance.Data.V4.Time.DateClockUpdate</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Data-V4-Time-LedgerTime.html">Daml.Finance.Data.V4.Time.LedgerTime</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Holding-V4-BaseHolding.html">Daml.Finance.Holding.V4.BaseHolding</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Holding-V4-Factory.html">Daml.Finance.Holding.V4.Factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Holding-V4-Fungible.html">Daml.Finance.Holding.V4.Fungible</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Holding-V4-Transferable.html">Daml.Finance.Holding.V4.Transferable</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Holding-V4-TransferableFungible.html">Daml.Finance.Holding.V4.TransferableFungible</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Holding-V4-Util.html">Daml.Finance.Holding.V4.Util</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Instrument-Bond-V3-Callable-Factory.html">Daml.Finance.Instrument.Bond.V3.Callable.Factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Instrument-Bond-V3-Callable-Instrument.html">Daml.Finance.Instrument.Bond.V3.Callable.Instrument</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Instrument-Bond-V3-FixedRate-Factory.html">Daml.Finance.Instrument.Bond.V3.FixedRate.Factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Instrument-Bond-V3-FixedRate-Instrument.html">Daml.Finance.Instrument.Bond.V3.FixedRate.Instrument</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Instrument-Bond-V3-FloatingRate-Factory.html">Daml.Finance.Instrument.Bond.V3.FloatingRate.Factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Instrument-Bond-V3-FloatingRate-Instrument.html">Daml.Finance.Instrument.Bond.V3.FloatingRate.Instrument</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Instrument-Bond-V3-InflationLinked-Factory.html">Daml.Finance.Instrument.Bond.V3.InflationLinked.Factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Instrument-Bond-V3-InflationLinked-Instrument.html">Daml.Finance.Instrument.Bond.V3.InflationLinked.Instrument</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Instrument-Bond-V3-Util.html">Daml.Finance.Instrument.Bond.V3.Util</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Instrument-Bond-V3-ZeroCoupon-Factory.html">Daml.Finance.Instrument.Bond.V3.ZeroCoupon.Factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Instrument-Bond-V3-ZeroCoupon-Instrument.html">Daml.Finance.Instrument.Bond.V3.ZeroCoupon.Instrument</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Instrument-Equity-V0-Factory.html">Daml.Finance.Instrument.Equity.V0.Factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Instrument-Equity-V0-Instrument.html">Daml.Finance.Instrument.Equity.V0.Instrument</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Instrument-Generic-V4-Factory.html">Daml.Finance.Instrument.Generic.V4.Factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Instrument-Generic-V4-Instrument.html">Daml.Finance.Instrument.Generic.V4.Instrument</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Instrument-Generic-V4-Lifecycle-Rule.html">Daml.Finance.Instrument.Generic.V4.Lifecycle.Rule</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Instrument-Option-V0-BarrierEuropeanCash-Factory.html">Daml.Finance.Instrument.Option.V0.BarrierEuropeanCash.Factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Instrument-Option-V0-BarrierEuropeanCash-Instrument.html">Daml.Finance.Instrument.Option.V0.BarrierEuropeanCash.Instrument</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Instrument-Option-V0-Dividend-Factory.html">Daml.Finance.Instrument.Option.V0.Dividend.Factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Instrument-Option-V0-Dividend-Instrument.html">Daml.Finance.Instrument.Option.V0.Dividend.Instrument</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Instrument-Option-V0-Dividend-Election.html">Daml.Finance.Instrument.Option.V0.Dividend.Election</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Instrument-Option-V0-EuropeanCash-Factory.html">Daml.Finance.Instrument.Option.V0.EuropeanCash.Factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Instrument-Option-V0-EuropeanCash-Instrument.html">Daml.Finance.Instrument.Option.V0.EuropeanCash.Instrument</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Instrument-Option-V0-EuropeanPhysical-Factory.html">Daml.Finance.Instrument.Option.V0.EuropeanPhysical.Factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Instrument-Option-V0-EuropeanPhysical-Instrument.html">Daml.Finance.Instrument.Option.V0.EuropeanPhysical.Instrument</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Instrument-StructuredProduct-V0-AutoCallable-Factory.html">Daml.Finance.Instrument.StructuredProduct.V0.AutoCallable.Factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Instrument-StructuredProduct-V0-AutoCallable-Instrument.html">Daml.Finance.Instrument.StructuredProduct.V0.AutoCallable.Instrument</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Instrument-StructuredProduct-V0-BarrierReverseConvertible-Factory.html">Daml.Finance.Instrument.StructuredProduct.V0.BarrierReverseConvertible.Factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Instrument-StructuredProduct-V0-BarrierReverseConvertible-Instrument.html">Daml.Finance.Instrument.StructuredProduct.V0.BarrierReverseConvertible.Instrument</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Instrument-StructuredProduct-V0-Util.html">Daml.Finance.Instrument.StructuredProduct.V0.Util</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Instrument-Swap-V0-Asset-Factory.html">Daml.Finance.Instrument.Swap.V0.Asset.Factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Instrument-Swap-V0-Asset-Instrument.html">Daml.Finance.Instrument.Swap.V0.Asset.Instrument</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Instrument-Swap-V0-Asset-DistributionRule.html">Daml.Finance.Instrument.Swap.V0.Asset.DistributionRule</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Instrument-Swap-V0-CreditDefault-Factory.html">Daml.Finance.Instrument.Swap.V0.CreditDefault.Factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Instrument-Swap-V0-CreditDefault-Instrument.html">Daml.Finance.Instrument.Swap.V0.CreditDefault.Instrument</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Instrument-Swap-V0-Currency-Factory.html">Daml.Finance.Instrument.Swap.V0.Currency.Factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Instrument-Swap-V0-Currency-Instrument.html">Daml.Finance.Instrument.Swap.V0.Currency.Instrument</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Instrument-Swap-V0-ForeignExchange-Factory.html">Daml.Finance.Instrument.Swap.V0.ForeignExchange.Factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Instrument-Swap-V0-ForeignExchange-Instrument.html">Daml.Finance.Instrument.Swap.V0.ForeignExchange.Instrument</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Instrument-Swap-V0-Fpml-Factory.html">Daml.Finance.Instrument.Swap.V0.Fpml.Factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Instrument-Swap-V0-Fpml-Instrument.html">Daml.Finance.Instrument.Swap.V0.Fpml.Instrument</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Instrument-Swap-V0-Fpml-Util.html">Daml.Finance.Instrument.Swap.V0.Fpml.Util</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Instrument-Swap-V0-InterestRate-Factory.html">Daml.Finance.Instrument.Swap.V0.InterestRate.Factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Instrument-Swap-V0-InterestRate-Instrument.html">Daml.Finance.Instrument.Swap.V0.InterestRate.Instrument</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Instrument-Token-V4-Factory.html">Daml.Finance.Instrument.Token.V4.Factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Instrument-Token-V4-Instrument.html">Daml.Finance.Instrument.Token.V4.Instrument</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Account-V4-Account.html">Daml.Finance.Interface.Account.V4.Account</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Account-V4-Factory.html">Daml.Finance.Interface.Account.V4.Factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Account-V4-Util.html">Daml.Finance.Interface.Account.V4.Util</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Claims-V4-Claim.html">Daml.Finance.Interface.Claims.V4.Claim</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Claims-V4-Dynamic-Instrument.html">Daml.Finance.Interface.Claims.V4.Dynamic.Instrument</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Claims-V4-Types.html">Daml.Finance.Interface.Claims.V4.Types</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Data-V4-Numeric-Observation.html">Daml.Finance.Interface.Data.V4.Numeric.Observation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Data-V4-Numeric-Observation-Factory.html">Daml.Finance.Interface.Data.V4.Numeric.Observation.Factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Data-V4-Reference-HolidayCalendar.html">Daml.Finance.Interface.Data.V4.Reference.HolidayCalendar</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Data-V4-Reference-HolidayCalendar-Factory.html">Daml.Finance.Interface.Data.V4.Reference.HolidayCalendar.Factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Data-V4-Reference-Time.html">Daml.Finance.Interface.Data.V4.Reference.Time</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Holding-V4-Factory.html">Daml.Finance.Interface.Holding.V4.Factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Holding-V4-Fungible.html">Daml.Finance.Interface.Holding.V4.Fungible</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Holding-V4-Holding.html">Daml.Finance.Interface.Holding.V4.Holding</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Holding-V4-Transferable.html">Daml.Finance.Interface.Holding.V4.Transferable</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Holding-V4-Util.html">Daml.Finance.Interface.Holding.V4.Util</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Base-V4-Instrument.html">Daml.Finance.Interface.Instrument.Base.V4.Instrument</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Bond-V3-Callable-Factory.html">Daml.Finance.Interface.Instrument.Bond.V3.Callable.Factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Bond-V3-Callable-Instrument.html">Daml.Finance.Interface.Instrument.Bond.V3.Callable.Instrument</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Bond-V3-Callable-Types.html">Daml.Finance.Interface.Instrument.Bond.V3.Callable.Types</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Bond-V3-FixedRate-Factory.html">Daml.Finance.Interface.Instrument.Bond.V3.FixedRate.Factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Bond-V3-FixedRate-Instrument.html">Daml.Finance.Interface.Instrument.Bond.V3.FixedRate.Instrument</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Bond-V3-FixedRate-Types.html">Daml.Finance.Interface.Instrument.Bond.V3.FixedRate.Types</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Bond-V3-FloatingRate-Factory.html">Daml.Finance.Interface.Instrument.Bond.V3.FloatingRate.Factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Bond-V3-FloatingRate-Instrument.html">Daml.Finance.Interface.Instrument.Bond.V3.FloatingRate.Instrument</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Bond-V3-FloatingRate-Types.html">Daml.Finance.Interface.Instrument.Bond.V3.FloatingRate.Types</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Bond-V3-InflationLinked-Factory.html">Daml.Finance.Interface.Instrument.Bond.V3.InflationLinked.Factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Bond-V3-InflationLinked-Instrument.html">Daml.Finance.Interface.Instrument.Bond.V3.InflationLinked.Instrument</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Bond-V3-InflationLinked-Types.html">Daml.Finance.Interface.Instrument.Bond.V3.InflationLinked.Types</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Bond-V3-ZeroCoupon-Factory.html">Daml.Finance.Interface.Instrument.Bond.V3.ZeroCoupon.Factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Bond-V3-ZeroCoupon-Instrument.html">Daml.Finance.Interface.Instrument.Bond.V3.ZeroCoupon.Instrument</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Bond-V3-ZeroCoupon-Types.html">Daml.Finance.Interface.Instrument.Bond.V3.ZeroCoupon.Types</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Equity-V0-Factory.html">Daml.Finance.Interface.Instrument.Equity.V0.Factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Equity-V0-Instrument.html">Daml.Finance.Interface.Instrument.Equity.V0.Instrument</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Generic-V4-Factory.html">Daml.Finance.Interface.Instrument.Generic.V4.Factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Generic-V4-Instrument.html">Daml.Finance.Interface.Instrument.Generic.V4.Instrument</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Option-V0-BarrierEuropeanCash-Factory.html">Daml.Finance.Interface.Instrument.Option.V0.BarrierEuropeanCash.Factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Option-V0-BarrierEuropeanCash-Instrument.html">Daml.Finance.Interface.Instrument.Option.V0.BarrierEuropeanCash.Instrument</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Option-V0-BarrierEuropeanCash-Types.html">Daml.Finance.Interface.Instrument.Option.V0.BarrierEuropeanCash.Types</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Option-V0-Dividend-Factory.html">Daml.Finance.Interface.Instrument.Option.V0.Dividend.Factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Option-V0-Dividend-Instrument.html">Daml.Finance.Interface.Instrument.Option.V0.Dividend.Instrument</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Option-V0-Dividend-Types.html">Daml.Finance.Interface.Instrument.Option.V0.Dividend.Types</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Option-V0-Dividend-Election-Factory.html">Daml.Finance.Interface.Instrument.Option.V0.Dividend.Election.Factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Option-V0-EuropeanCash-Factory.html">Daml.Finance.Interface.Instrument.Option.V0.EuropeanCash.Factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Option-V0-EuropeanCash-Instrument.html">Daml.Finance.Interface.Instrument.Option.V0.EuropeanCash.Instrument</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Option-V0-EuropeanCash-Types.html">Daml.Finance.Interface.Instrument.Option.V0.EuropeanCash.Types</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Option-V0-EuropeanPhysical-Factory.html">Daml.Finance.Interface.Instrument.Option.V0.EuropeanPhysical.Factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Option-V0-EuropeanPhysical-Instrument.html">Daml.Finance.Interface.Instrument.Option.V0.EuropeanPhysical.Instrument</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Option-V0-EuropeanPhysical-Types.html">Daml.Finance.Interface.Instrument.Option.V0.EuropeanPhysical.Types</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Option-V0-Types.html">Daml.Finance.Interface.Instrument.Option.V0.Types</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-StructuredProduct-V0-AutoCallable-Factory.html">Daml.Finance.Interface.Instrument.StructuredProduct.V0.AutoCallable.Factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-StructuredProduct-V0-AutoCallable-Instrument.html">Daml.Finance.Interface.Instrument.StructuredProduct.V0.AutoCallable.Instrument</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-StructuredProduct-V0-AutoCallable-Types.html">Daml.Finance.Interface.Instrument.StructuredProduct.V0.AutoCallable.Types</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-StructuredProduct-V0-BarrierReverseConvertible-Factory.html">Daml.Finance.Interface.Instrument.StructuredProduct.V0.BarrierReverseConvertible.Factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-StructuredProduct-V0-BarrierReverseConvertible-Instrument.html">Daml.Finance.Interface.Instrument.StructuredProduct.V0.BarrierReverseConvertible.Instrument</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-StructuredProduct-V0-BarrierReverseConvertible-Types.html">Daml.Finance.Interface.Instrument.StructuredProduct.V0.BarrierReverseConvertible.Types</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-StructuredProduct-V0-Types.html">Daml.Finance.Interface.Instrument.StructuredProduct.V0.Types</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Swap-V0-Asset-Factory.html">Daml.Finance.Interface.Instrument.Swap.V0.Asset.Factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Swap-V0-Asset-Instrument.html">Daml.Finance.Interface.Instrument.Swap.V0.Asset.Instrument</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Swap-V0-Asset-Types.html">Daml.Finance.Interface.Instrument.Swap.V0.Asset.Types</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Swap-V0-CreditDefault-Factory.html">Daml.Finance.Interface.Instrument.Swap.V0.CreditDefault.Factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Swap-V0-CreditDefault-Instrument.html">Daml.Finance.Interface.Instrument.Swap.V0.CreditDefault.Instrument</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Swap-V0-CreditDefault-Types.html">Daml.Finance.Interface.Instrument.Swap.V0.CreditDefault.Types</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Swap-V0-Currency-Factory.html">Daml.Finance.Interface.Instrument.Swap.V0.Currency.Factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Swap-V0-Currency-Instrument.html">Daml.Finance.Interface.Instrument.Swap.V0.Currency.Instrument</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Swap-V0-Currency-Types.html">Daml.Finance.Interface.Instrument.Swap.V0.Currency.Types</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Swap-V0-ForeignExchange-Factory.html">Daml.Finance.Interface.Instrument.Swap.V0.ForeignExchange.Factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Swap-V0-ForeignExchange-Instrument.html">Daml.Finance.Interface.Instrument.Swap.V0.ForeignExchange.Instrument</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Swap-V0-ForeignExchange-Types.html">Daml.Finance.Interface.Instrument.Swap.V0.ForeignExchange.Types</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Swap-V0-Fpml-Factory.html">Daml.Finance.Interface.Instrument.Swap.V0.Fpml.Factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Swap-V0-Fpml-FpmlTypes.html">Daml.Finance.Interface.Instrument.Swap.V0.Fpml.FpmlTypes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Swap-V0-Fpml-Instrument.html">Daml.Finance.Interface.Instrument.Swap.V0.Fpml.Instrument</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Swap-V0-Fpml-Types.html">Daml.Finance.Interface.Instrument.Swap.V0.Fpml.Types</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Swap-V0-InterestRate-Factory.html">Daml.Finance.Interface.Instrument.Swap.V0.InterestRate.Factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Swap-V0-InterestRate-Instrument.html">Daml.Finance.Interface.Instrument.Swap.V0.InterestRate.Instrument</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Swap-V0-InterestRate-Types.html">Daml.Finance.Interface.Instrument.Swap.V0.InterestRate.Types</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Token-V4-Factory.html">Daml.Finance.Interface.Instrument.Token.V4.Factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Token-V4-Instrument.html">Daml.Finance.Interface.Instrument.Token.V4.Instrument</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Token-V4-Types.html">Daml.Finance.Interface.Instrument.Token.V4.Types</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Types-V2-FloatingRate.html">Daml.Finance.Interface.Instrument.Types.V2.FloatingRate</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Lifecycle-V4-Effect.html">Daml.Finance.Interface.Lifecycle.V4.Effect</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Lifecycle-V4-Election.html">Daml.Finance.Interface.Lifecycle.V4.Election</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Lifecycle-V4-Election-Factory.html">Daml.Finance.Interface.Lifecycle.V4.Election.Factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Lifecycle-V4-Event.html">Daml.Finance.Interface.Lifecycle.V4.Event</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Lifecycle-V4-Event-Distribution.html">Daml.Finance.Interface.Lifecycle.V4.Event.Distribution</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Lifecycle-V4-Event-Replacement.html">Daml.Finance.Interface.Lifecycle.V4.Event.Replacement</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Lifecycle-V4-Event-Time.html">Daml.Finance.Interface.Lifecycle.V4.Event.Time</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Lifecycle-V4-Observable-NumericObservable.html">Daml.Finance.Interface.Lifecycle.V4.Observable.NumericObservable</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Lifecycle-V4-Observable-TimeObservable.html">Daml.Finance.Interface.Lifecycle.V4.Observable.TimeObservable</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Lifecycle-V4-Rule-Claim.html">Daml.Finance.Interface.Lifecycle.V4.Rule.Claim</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Lifecycle-V4-Rule-Lifecycle.html">Daml.Finance.Interface.Lifecycle.V4.Rule.Lifecycle</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Settlement-V4-Batch.html">Daml.Finance.Interface.Settlement.V4.Batch</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Settlement-V4-Factory.html">Daml.Finance.Interface.Settlement.V4.Factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Settlement-V4-Instruction.html">Daml.Finance.Interface.Settlement.V4.Instruction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Settlement-V4-RouteProvider.html">Daml.Finance.Interface.Settlement.V4.RouteProvider</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Settlement-V4-Types.html">Daml.Finance.Interface.Settlement.V4.Types</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Types-Common-V3-Types.html">Daml.Finance.Interface.Types.Common.V3.Types</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Types-Date-V3-Calendar.html">Daml.Finance.Interface.Types.Date.V3.Calendar</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Types-Date-V3-Classes.html">Daml.Finance.Interface.Types.Date.V3.Classes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Types-Date-V3-DateOffset.html">Daml.Finance.Interface.Types.Date.V3.DateOffset</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Types-Date-V3-DayCount.html">Daml.Finance.Interface.Types.Date.V3.DayCount</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Types-Date-V3-RollConvention.html">Daml.Finance.Interface.Types.Date.V3.RollConvention</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Types-Date-V3-Schedule.html">Daml.Finance.Interface.Types.Date.V3.Schedule</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Util-V3-Common.html">Daml.Finance.Interface.Util.V3.Common</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Util-V3-Disclosure.html">Daml.Finance.Interface.Util.V3.Disclosure</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Util-V3-InterfaceKey.html">Daml.Finance.Interface.Util.V3.InterfaceKey</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Util-V3-Lockable.html">Daml.Finance.Interface.Util.V3.Lockable</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Lifecycle-V4-Effect.html">Daml.Finance.Lifecycle.V4.Effect</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Lifecycle-V4-Election.html">Daml.Finance.Lifecycle.V4.Election</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Lifecycle-V4-ElectionEffect.html">Daml.Finance.Lifecycle.V4.ElectionEffect</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Lifecycle-V4-Event-Distribution.html">Daml.Finance.Lifecycle.V4.Event.Distribution</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Lifecycle-V4-Event-Replacement.html">Daml.Finance.Lifecycle.V4.Event.Replacement</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Lifecycle-V4-Rule-Claim.html">Daml.Finance.Lifecycle.V4.Rule.Claim</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Lifecycle-V4-Rule-Distribution.html">Daml.Finance.Lifecycle.V4.Rule.Distribution</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Lifecycle-V4-Rule-Replacement.html">Daml.Finance.Lifecycle.V4.Rule.Replacement</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Lifecycle-V4-Rule-Util.html">Daml.Finance.Lifecycle.V4.Rule.Util</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Settlement-V4-Batch.html">Daml.Finance.Settlement.V4.Batch</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Settlement-V4-Factory.html">Daml.Finance.Settlement.V4.Factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Settlement-V4-Hierarchy.html">Daml.Finance.Settlement.V4.Hierarchy</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Settlement-V4-Instruction.html">Daml.Finance.Settlement.V4.Instruction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Settlement-V4-RouteProvider-IntermediatedStatic.html">Daml.Finance.Settlement.V4.RouteProvider.IntermediatedStatic</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Settlement-V4-RouteProvider-SingleCustodian.html">Daml.Finance.Settlement.V4.RouteProvider.SingleCustodian</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Util-V4-Common.html">Daml.Finance.Util.V4.Common</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Util-V4-Date-Calendar.html">Daml.Finance.Util.V4.Date.Calendar</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Util-V4-Date-DayCount.html">Daml.Finance.Util.V4.Date.DayCount</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Util-V4-Date-RollConvention.html">Daml.Finance.Util.V4.Date.RollConvention</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Util-V4-Date-Schedule.html">Daml.Finance.Util.V4.Date.Schedule</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Util-V4-Disclosure.html">Daml.Finance.Util.V4.Disclosure</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Util-V4-Lockable.html">Daml.Finance.Util.V4.Lockable</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Deploy Daml</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../deploy-daml/intro/index.html">Canton</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../canton/about.html">Introduction to Canton</a></li>
<li class="toctree-l2"><a class="reference internal" href="../canton/architecture/overview.html">Overview and Assumptions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../canton/architecture/overview.html#canton-101">Canton 101</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/architecture/overview.html#a-basic-example">A Basic Example</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/architecture/overview.html#transaction-processing-in-canton">Transaction Processing in Canton</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/architecture/overview.html#conflict-detection">Conflict Detection</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/architecture/overview.html#time-in-canton">Time in Canton</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/architecture/overview.html#subtransaction-privacy">Subtransaction Privacy</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/architecture/overview.html#synchronization-domain-entities">Synchronization Domain Entities</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/architecture/overview.html#sequencer">Sequencer</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/architecture/overview.html#mediator">Mediator</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/architecture/overview.html#topology-manager">Topology Manager</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/architecture/overview.html#participant-internal-canton-components">Participant-Internal Canton Components</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/architecture/overview.html#trust-assumptions">Trust Assumptions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/architecture/overview.html#general-trust-assumptions">General Trust Assumptions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/architecture/overview.html#assumptions-relevant-for-privacy">Assumptions Relevant for Privacy</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/architecture/overview.html#assumptions-relevant-for-liveness">Assumptions Relevant for Liveness</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../canton/tutorials/demo.html">Canton Demo</a></li>
<li class="toctree-l2"><a class="reference internal" href="../canton/tutorials/getting_started.html">Getting Started</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../canton/tutorials/getting_started.html#installation">Installation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/tutorials/getting_started.html#starting-canton">Starting Canton</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/tutorials/getting_started.html#the-example-topology">The Example Topology</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/tutorials/getting_started.html#connecting-the-participant-nodes-and-synchronization-domains">Connecting The Participant Nodes and Synchronization Domains</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/tutorials/getting_started.html#canton-identities-and-provisioning-parties">Canton Identities and Provisioning Parties</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/tutorials/getting_started.html#creating-parties">Creating Parties</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/tutorials/getting_started.html#extracting-identifiers">Extracting Identifiers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/tutorials/getting_started.html#provisioning-smart-contract-code">Provisioning Smart Contract Code</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/tutorials/getting_started.html#executing-smart-contracts">Executing Smart Contracts</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/tutorials/getting_started.html#privacy">Privacy</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/tutorials/getting_started.html#your-development-choices">Your Development Choices</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/tutorials/getting_started.html#automation-using-bootstrap-scripts">Automation Using Bootstrap Scripts</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/tutorials/getting_started.html#what-next">What Next?</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../canton/tutorials/use_daml_sdk.html">Daml SDK and Canton</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../canton/tutorials/use_daml_sdk.html#starting-canton">Starting Canton</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/tutorials/use_daml_sdk.html#running-the-create-daml-app-example">Running the Create Daml App Example</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/tutorials/use_daml_sdk.html#connecting-to-participant2">Connecting to participant2</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/tutorials/use_daml_sdk.html#what-next">What Next?</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../canton/tutorials/composability.html">Composability</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../canton/tutorials/composability.html#part-1-a-multi-synchronization-domain-workflow">Part 1: A multi-synchronization-domain workflow</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/tutorials/composability.html#setting-up-the-topology">Setting up the topology</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/tutorials/composability.html#creating-the-iou-and-the-paint-offer">Creating the IOU and the paint offer</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/tutorials/composability.html#contracts-and-their-synchronization-domains">Contracts and Their Synchronization Domains</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/tutorials/composability.html#transferring-a-contract">Transferring a contract</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/tutorials/composability.html#atomic-acceptance">Atomic acceptance</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/tutorials/composability.html#completing-the-workflow">Completing the workflow</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/tutorials/composability.html#performing-transfers-automatically">Performing transfers automatically</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/tutorials/composability.html#takeaways">Takeaways</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/tutorials/composability.html#part-2-composing-existing-workflows">Part 2: Composing existing workflows</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/tutorials/composability.html#existing-workflows">Existing workflows</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/tutorials/composability.html#required-changes">Required changes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/tutorials/composability.html#preparation-using-the-existing-workflows">Preparation using the existing workflows</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/tutorials/composability.html#the-paint-offer-accept-workflow">The paint offer-accept workflow</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/tutorials/composability.html#continuing-the-existing-workflows">Continuing the existing workflows</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/tutorials/composability.html#id1">Takeaways</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../canton/usermanual/versioning.html">Versioning</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/versioning.html#canton-release-version">Canton release version</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/versioning.html#for-application-developers-and-operators">For application developers and operators</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/versioning.html#for-canton-participant-and-synchronization-domain-operators">For Canton participant and synchronization domain operators</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/versioning.html#canton-protocol-version">Canton protocol version</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/versioning.html#features-and-protocol-versions">Features and protocol versions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/versioning.html#configuring-the-protocol-version">Configuring the protocol version</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/versioning.html#minimum-protocol-version">Minimum protocol version</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/versioning.html#support-and-bug-fixes">Support and bug fixes</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../canton/usermanual/downloading.html">Download and Install Canton</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../canton/usermanual/downloading.html#choosing-open-source-or-enterprise-edition">Choosing Open-Source or Enterprise Edition</a></li>
<li class="toctree-l2"><a class="reference internal" href="../canton/usermanual/downloading.html#downloading-the-open-source-edition">Downloading the Open Source Edition</a></li>
<li class="toctree-l2"><a class="reference internal" href="../canton/usermanual/downloading.html#downloading-the-enterprise-edition">Downloading the Enterprise Edition</a></li>
<li class="toctree-l2"><a class="reference internal" href="../canton/usermanual/installation.html">Install Canton</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/installation.html#hardware-resources">Hardware Resources</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/installation.html#downloading-canton">Downloading Canton</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/installation.html#your-topology">Your Topology</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/installation.html#the-config-directory-contents">The Config Directory Contents</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/installation.html#selecting-your-storage-layer">Selecting your Storage Layer</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/installation.html#persistence-using-postgres">Persistence using Postgres</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/installation.html#generate-the-tls-certificates">Generate the TLS Certificates</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/installation.html#setting-up-a-participant">Setting up a Participant</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/installation.html#secure-the-apis">Secure the APIs</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/installation.html#configure-applications-users-and-connection">Configure Applications, Users and Connection</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/installation.html#setting-up-a-synchronization-domain">Setting up a Synchronization Domain</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/installation.html#using-an-embedded-synchronization-domain">Using an Embedded Synchronization Domain</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/installation.html#using-microservices">Using Microservices</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/installation.html#id3">Secure the APIs</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/installation.html#next-steps">Next Steps</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/installation.html#multi-node-setup">Multi-Node Setup</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../canton/usermanual/docker.html">Work With the Docker Containers</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/docker.html#obtaining-the-docker-images">Obtaining the Docker Images</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/docker.html#starting-canton">Starting Canton</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/docker.html#configuring-logging-and-health-probes">Configuring Logging and Health Probes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/docker.html#administrating-the-running-node">Administrating the Running Node</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/docker.html#exposing-the-ledger-api-or-admin-api-to-the-host-machine">Exposing the Ledger API or Admin API to the host machine</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/docker.html#supplying-custom-configuration-and-dars">Supplying custom configuration and DARs</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/docker.html#running-postgres-in-docker">Running Postgres in Docker</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../canton/usermanual/static_conf.html">Set Configuration Options</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/static_conf.html#configuration-reference">Configuration reference</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/static_conf.html#configuration-compatibility">Configuration Compatibility</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/static_conf.html#advanced-configurations">Advanced Configurations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/static_conf.html#configuration-mixin">Configuration Mixin</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/static_conf.html#multiple-synchronization-domains">Multiple Synchronization Domains</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/static_conf.html#fail-fast-mode">Fail Fast Mode</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/static_conf.html#init-configuration">Init Configuration</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../canton/usermanual/domains/domains.html">Set Up A Daml Domain With Enterprise Drivers</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/domains/oracle.html">Oracle Domain</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/domains/fabric.html">Fabric Domain</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/domains/fabric.html#tutorial">Tutorial</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/domains/fabric.html#user-manual">User Manual</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/domains/fabric.html#fabric-setup">Fabric Setup</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/domains/ethereum.html">Ethereum Domain</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/domains/ethereum.html#introduction">Introduction</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/domains/ethereum.html#the-ethereum-demo">The Ethereum Demo</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/domains/ethereum.html#error-codes">Error Codes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/domains/ethereum.html#tls-configuration">TLS Configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/domains/ethereum.html#ethereum-accounts-and-wallets">Ethereum Accounts and Wallets</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/domains/ethereum.html#deployment-of-the-sequencer-contract">Deployment of the Sequencer Contract</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/domains/ethereum.html#requirements-for-the-ethereum-network">Requirements for the Ethereum Network</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/domains/ethereum.html#trust-properties-of-the-ethereum-sequencer-integration">Trust Properties of the Ethereum Sequencer Integration</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/domains/ethereum.html#high-availability">High Availability</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../deploy-daml/infrastructure-architecture/high-availability/main-menu.html">High Availability (HA)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../deploy-daml/infrastructure-architecture/high-availability/basic-ha/intro.html">Intro to HA in Canton</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../deploy-daml/infrastructure-architecture/high-availability/basic-ha/overview.html">Overview</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../deploy-daml/infrastructure-architecture/high-availability/basic-ha/overview.html#participant-nodes">Participant Nodes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../deploy-daml/infrastructure-architecture/high-availability/basic-ha/overview.html#synchronization-domains">Synchronization Domains</a></li>
<li class="toctree-l4"><a class="reference internal" href="../deploy-daml/infrastructure-architecture/high-availability/basic-ha/overview.html#replication">Replication</a></li>
<li class="toctree-l4"><a class="reference internal" href="../deploy-daml/infrastructure-architecture/high-availability/basic-ha/overview.html#databases">Databases</a></li>
<li class="toctree-l4"><a class="reference internal" href="../deploy-daml/infrastructure-architecture/high-availability/basic-ha/overview.html#health-check">Health Check</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../deploy-daml/infrastructure-architecture/high-availability/basic-ha/participant.html">Active-Passive Participant Node Configuration</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../deploy-daml/infrastructure-architecture/high-availability/basic-ha/participant.html#high-level-system-design">High-Level System Design</a></li>
<li class="toctree-l4"><a class="reference internal" href="../deploy-daml/infrastructure-architecture/high-availability/basic-ha/participant.html#leader-election">Leader Election</a></li>
<li class="toctree-l4"><a class="reference internal" href="../deploy-daml/infrastructure-architecture/high-availability/basic-ha/participant.html#prevent-passive-node-replica-activity">Prevent Passive Node Replica Activity</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../deploy-daml/infrastructure-architecture/high-availability/basic-ha/domain.html">HA on the Synchronization Domain</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../deploy-daml/infrastructure-architecture/high-availability/basic-ha/domain.html#sequencer">Sequencer</a></li>
<li class="toctree-l4"><a class="reference internal" href="../deploy-daml/infrastructure-architecture/high-availability/basic-ha/domain.html#mediator">Mediator</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../deploy-daml/infrastructure-architecture/high-availability/production.html">HA for Production Systems</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../deploy-daml/infrastructure-architecture/high-availability/ha-and-scaling/introduction.html">HA and Horizontal Scaling</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../deploy-daml/infrastructure-architecture/high-availability/ha-and-scaling/introduction.html#introduction">Introduction</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../deploy-daml/infrastructure-architecture/high-availability/ha-and-scaling/understanding-ha.html">High Availability From a Business Perspective</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../deploy-daml/infrastructure-architecture/high-availability/ha-and-scaling/understanding-ha.html#availability">Availability</a></li>
<li class="toctree-l4"><a class="reference internal" href="../deploy-daml/infrastructure-architecture/high-availability/ha-and-scaling/understanding-ha.html#resiliency">Resiliency</a></li>
<li class="toctree-l4"><a class="reference internal" href="../deploy-daml/infrastructure-architecture/high-availability/ha-and-scaling/understanding-ha.html#other-common-metrics-rto-and-rpo">Other Common Metrics / RTO and RPO</a></li>
<li class="toctree-l4"><a class="reference internal" href="../deploy-daml/infrastructure-architecture/high-availability/ha-and-scaling/understanding-ha.html#ha-cost-trade-offs">HA Cost Trade-Offs</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../deploy-daml/infrastructure-architecture/high-availability/ha-and-scaling/use-cases.html">Use Cases By Role</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../deploy-daml/infrastructure-architecture/high-availability/ha-and-scaling/use-cases.html#distributed-application-provider">Distributed Application Provider</a></li>
<li class="toctree-l4"><a class="reference internal" href="../deploy-daml/infrastructure-architecture/high-availability/ha-and-scaling/use-cases.html#distributed-application-user">Distributed Application User</a></li>
<li class="toctree-l4"><a class="reference internal" href="../deploy-daml/infrastructure-architecture/high-availability/ha-and-scaling/use-cases.html#site-reliability-engineer-sre">Site Reliability Engineer (SRE)</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../deploy-daml/infrastructure-architecture/high-availability/ha-and-scaling/implementing-ha.html">Implementing HA and Scaling Deployments</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../deploy-daml/infrastructure-architecture/high-availability/ha-and-scaling/implementing-ha.html#basic-daml-deployment">Basic Daml Deployment</a></li>
<li class="toctree-l4"><a class="reference internal" href="../deploy-daml/infrastructure-architecture/high-availability/ha-and-scaling/implementing-ha.html#architecture-for-ha-and-scaling">Architecture for HA and Scaling</a></li>
<li class="toctree-l4"><a class="reference internal" href="../deploy-daml/infrastructure-architecture/high-availability/ha-and-scaling/implementing-ha.html#http-json-api-and-participant-node-services">HTTP JSON API and Participant Node Services</a></li>
<li class="toctree-l4"><a class="reference internal" href="../deploy-daml/infrastructure-architecture/high-availability/ha-and-scaling/implementing-ha.html#sequencer-service">Sequencer Service</a></li>
<li class="toctree-l4"><a class="reference internal" href="../deploy-daml/infrastructure-architecture/high-availability/ha-and-scaling/implementing-ha.html#mediator-service">Mediator Service</a></li>
<li class="toctree-l4"><a class="reference internal" href="../deploy-daml/infrastructure-architecture/high-availability/ha-and-scaling/implementing-ha.html#synchronization-domain-manager-service">Synchronization Domain Manager Service</a></li>
<li class="toctree-l4"><a class="reference internal" href="../deploy-daml/infrastructure-architecture/high-availability/ha-and-scaling/implementing-ha.html#trigger-service-deprecated">Trigger Service (Deprecated)</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../deploy-daml/infrastructure-architecture/high-availability/ha-and-scaling/deployment-solution.html">HA Deployment Solution for Production</a></li>
<li class="toctree-l3"><a class="reference internal" href="../deploy-daml/infrastructure-architecture/high-availability/ha-and-scaling/ha-in-the-cloud.html">HA in the Cloud</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../deploy-daml/infrastructure-architecture/high-availability/ha-and-scaling/ha-in-the-cloud.html#database-options">Database Options</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../canton/usermanual/ha.html">High Availability Usage</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/ha.html#synchronization-domain-manager">Synchronization Domain Manager</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/ha.html#ha-setup-on-oracle">HA Setup on Oracle</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/ha.html#mediator">Mediator</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/ha.html#running-a-stand-alone-mediator-node">Running a Stand-Alone Mediator Node</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/ha.html#ha-configuration">HA Configuration</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/ha.html#sequencer">Sequencer</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/ha.html#total-node-count">Total node count</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/ha.html#external-load-balancer">External load balancer</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/ha.html#client-side-load-balancing">Client-side load balancing</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/ha.html#participant">Participant</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/ha.html#synchronization-domain-connectivity-during-fail-over">Synchronization domain connectivity during fail-over</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/ha.html#manual-trigger-of-a-fail-over">Manual trigger of a fail-over</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/ha.html#load-balancer-configuration">Load balancer configuration</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../deploy-daml/infrastructure-architecture/disaster-recovery.html">Disaster Recovery (DR)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../canton/usermanual/persistence.html">Persistence</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../canton/usermanual/persistence.html#id1">Postgres</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/persistence.html#ssl">SSL</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/persistence.html#sizing-and-performance">Sizing and Performance</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/persistence.html#predictability-of-shared-environments">Predictability of Shared Environments</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/persistence.html#postgres-configuration">Postgres Configuration</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../canton/usermanual/persistence.html#oracle">Oracle</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/persistence.html#installation-and-setup-of-oracle">Installation and Setup of Oracle</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/persistence.html#default-character-set-and-collations">Default Character Set and Collations</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/persistence.html#database-replication">Database Replication</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/persistence.html#setup-oracle-schemas">Setup Oracle Schemas</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/persistence.html#configuring-canton-nodes-for-oracle">Configuring Canton Nodes for Oracle</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/persistence.html#performance-tuning">Performance Tuning</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/persistence.html#operating-system-modifications">Operating System Modifications</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/persistence.html#system-container-configuration-cdb">System Container Configuration (CDB)</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../canton/usermanual/persistence.html#general-settings">General Settings</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/persistence.html#max-connection-settings">Max Connection Settings</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/persistence.html#queue-size">Queue Size</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../canton/usermanual/persistence.html#backup-and-restore">Backup and Restore</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/persistence.html#order-of-backups">Order of Backups</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/persistence.html#restore-caveats">Restore Caveats</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/persistence.html#incomplete-command-deduplication-state">Incomplete Command Deduplication State</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/persistence.html#application-state-reset">Application State Reset</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/persistence.html#private-keys">Private Keys</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/persistence.html#postgres-example">Postgres Example</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../canton/usermanual/persistence.html#database-replication-for-disaster-recovery">Database Replication for Disaster Recovery</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/persistence.html#synchronous-replication">Synchronous Replication</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Operate a Daml Ledger</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../operate-a-daml-ledger/canton-administration-quickstart/index.html">Canton Administration Quick Start</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../canton/usermanual/command_line.html">Use the Canton Command Line</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/command_line.html#selecting-a-configuration">Selecting a Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/command_line.html#run-modes">Run Modes</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/command_line.html#interactive-console">Interactive Console</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/command_line.html#daemon">Daemon</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/command_line.html#headless-script-mode">Headless Script Mode</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/command_line.html#interactive-server-process-using-screen">Interactive Server Process using Screen</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/command_line.html#java-virtual-machine-arguments">Java Virtual Machine Arguments</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../canton/usermanual/console.html">Canton Console</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/console.html#remote-administration">Remote Administration</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/console.html#tls-and-authorization">TLS and Authorization</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/console.html#node-references">Node References</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/console.html#help">Help</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/console.html#lifecycle-operations">Lifecycle Operations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/console.html#timeouts">Timeouts</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/console.html#code-generation-in-console">Code-Generation in Console</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/console.html#canton-administration-apis">Canton Administration APIs</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../canton/reference/console.html">Console Commands</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/console.html#top-level-commands">Top-level Commands</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/console.html#participant-commands">Participant Commands</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/console.html#database">Database</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/console.html#health">Health</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/console.html#domain-connectivity">Domain Connectivity</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/console.html#packages">Packages</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/console.html#dar-management">DAR Management</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/console.html#party-management">Party Management</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/console.html#key-administration">Key Administration</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/console.html#topology-administration">Topology Administration</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/console.html#ledger-api-access">Ledger API Access</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/console.html#composability">Composability</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/console.html#ledger-pruning">Ledger Pruning</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/console.html#bilateral-commitments">Bilateral Commitments</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/console.html#participant-repair">Participant Repair</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/console.html#resource-management">Resource Management</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/console.html#replication">Replication</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/console.html#multiple-participants">Multiple Participants</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/console.html#domain-administration-commands">Domain Administration Commands</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/console.html#id267">Health</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/console.html#id269">Database</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/console.html#participants">Participants</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/console.html#sequencer">Sequencer</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/console.html#mediator">Mediator</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/console.html#domain-keys-admin">Key Administration</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/console.html#parties">Parties</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/console.html#service">Service</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/console.html#domain-topology-admin">Topology Administration</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/console.html#domain-manager-administration-commands">Domain Manager Administration Commands</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/console.html#setup">Setup</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/console.html#id418">Health</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/console.html#id420">Database</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/console.html#sequencer-connection">Sequencer Connection</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/console.html#id423">Key Administration</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/console.html#id452">Parties</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/console.html#id455">Service</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/console.html#id473">Topology Administration</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/console.html#sequencer-administration-commands">Sequencer Administration Commands</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/console.html#id474">Sequencer</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/console.html#id486">Health</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/console.html#id488">Database</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/console.html#mediator-administration-commands">Mediator Administration Commands</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/console.html#id490">Mediator</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/console.html#id511">Health</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/console.html#id513">Database</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/console.html#id514">Sequencer Connection</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../canton/usermanual/monitoring.html">Monitoring Best Practices</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../canton/usermanual/monitoring.html#introduction">Introduction</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/monitoring.html#hands-on-with-the-daml-enterprise-observability-example">Hands-On with the Daml Enterprise - Observability Example</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../canton/usermanual/monitoring.html#golden-signals-and-key-metrics-quick-start">Golden Signals and Key Metrics Quick Start</a></li>
<li class="toctree-l2"><a class="reference internal" href="../canton/usermanual/monitoring.html#set-up-metrics-scraping">Set Up Metrics Scraping</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/monitoring.html#enable-the-prometheus-reporter">Enable the Prometheus Reporter</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/monitoring.html#prometheus-only-metrics">Prometheus-Only Metrics</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/monitoring.html#deprecated-reporters">Deprecated Reporters</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../canton/usermanual/monitoring.html#metrics">Metrics</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/monitoring.html#participant-metrics">Participant Metrics</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-domain-conflict-detection-sequencer-counter-queue">canton.&lt;domain&gt;.conflict-detection.sequencer-counter-queue</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-domain-conflict-detection-task-queue">canton.&lt;domain&gt;.conflict-detection.task-queue</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-domain-protocol-messages-confirmation-request-creation">canton.&lt;domain&gt;.protocol-messages.confirmation-request-creation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-domain-protocol-messages-confirmation-request-size">canton.&lt;domain&gt;.protocol-messages.confirmation-request-size</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-domain-protocol-messages-transaction-message-receipt">canton.&lt;domain&gt;.protocol-messages.transaction-message-receipt</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-domain-request-tracker-sequencer-counter-queue">canton.&lt;domain&gt;.request-tracker.sequencer-counter-queue</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-domain-request-tracker-task-queue">canton.&lt;domain&gt;.request-tracker.task-queue</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-domain-sequencer-client-application-handle">canton.&lt;domain&gt;.sequencer-client.application-handle</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-domain-sequencer-client-delay">canton.&lt;domain&gt;.sequencer-client.delay</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-domain-sequencer-client-event-handle">canton.&lt;domain&gt;.sequencer-client.event-handle</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-domain-sequencer-client-handler-actual-in-flight-event-batches">canton.&lt;domain&gt;.sequencer-client.handler.actual-in-flight-event-batches</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-domain-sequencer-client-handler-max-in-flight-event-batches">canton.&lt;domain&gt;.sequencer-client.handler.max-in-flight-event-batches</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-domain-sequencer-client-submissions-dropped">canton.&lt;domain&gt;.sequencer-client.submissions.dropped</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-domain-sequencer-client-submissions-in-flight">canton.&lt;domain&gt;.sequencer-client.submissions.in-flight</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-domain-sequencer-client-submissions-overloaded">canton.&lt;domain&gt;.sequencer-client.submissions.overloaded</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-domain-sequencer-client-submissions-sends">canton.&lt;domain&gt;.sequencer-client.submissions.sends</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-domain-sequencer-client-submissions-sequencing">canton.&lt;domain&gt;.sequencer-client.submissions.sequencing</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-domain-traffic-control-event-above-traffic-limit">canton.&lt;domain&gt;.traffic-control.event-above-traffic-limit</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-domain-traffic-control-event-delivered">canton.&lt;domain&gt;.traffic-control.event-delivered</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-domain-traffic-control-extra-traffic-credit-available">canton.&lt;domain&gt;.traffic-control.extra-traffic-credit-available</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-domain-traffic-control-traffic-state-topology-transaction">canton.&lt;domain&gt;.traffic-control.traffic-state-topology-transaction</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-commitments-catchup-mode-enabled">canton.commitments.catchup-mode-enabled</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-commitments-compute">canton.commitments.compute</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-commitments-sequencing-time">canton.commitments.sequencing-time</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-db-storage-service-executor-exectime">canton.db-storage.&lt;service&gt;.executor.exectime</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-db-storage-service-executor-load">canton.db-storage.&lt;service&gt;.executor.load</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-db-storage-service-executor-queued">canton.db-storage.&lt;service&gt;.executor.queued</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-db-storage-service-executor-running">canton.db-storage.&lt;service&gt;.executor.running</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-db-storage-service-executor-waittime">canton.db-storage.&lt;service&gt;.executor.waittime</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-db-storage-storage">canton.db-storage.&lt;storage&gt;</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-db-storage-storage-load">canton.db-storage.&lt;storage&gt;.load</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-db-storage-alerts-multi-domain-event-log">canton.db-storage.alerts.multi-domain-event-log</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-db-storage-alerts-single-dimension-event-log">canton.db-storage.alerts.single-dimension-event-log</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-dirty-requests">canton.dirty_requests*</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-max-dirty-requests">canton.max_dirty_requests*</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-prune">canton.prune</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-prune-max-event-age">canton.prune.max-event-age</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-updates-published">canton.updates-published</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-cache-evicted-weight">daml.cache.evicted_weight*</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-cache-evictions">daml.cache.evictions*</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-cache-hits">daml.cache.hits*</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-cache-misses">daml.cache.misses*</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-commands-delayed-submissions">daml.commands.delayed_submissions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-commands-failed-command-interpretations">daml.commands.failed_command_interpretations</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-commands-max-in-flight-capacity">daml.commands.max_in_flight_capacity</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-commands-max-in-flight-length">daml.commands.max_in_flight_length</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-commands-reassignment-validation">daml.commands.reassignment_validation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-commands-submissions">daml.commands.submissions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-commands-submissions-running">daml.commands.submissions_running</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-commands-valid-submissions">daml.commands.valid_submissions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-commands-validation">daml.commands.validation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-db-commit-duration-seconds">daml.db.commit.duration.seconds*</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-db-compression-duration-seconds">daml.db.compression.duration.seconds*</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-db-exec-duration-seconds">daml.db.exec.duration.seconds*</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-db-query-duration-seconds">daml.db.query.duration.seconds*</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-db-translation-duration-seconds">daml.db.translation.duration.seconds*</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-db-wait-duration-seconds">daml.db.wait.duration.seconds*</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-execution-cache-contract-state-register-update">daml.execution.cache.contract_state.register_update</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-execution-cache-key-state-register-update">daml.execution.cache.key_state.register_update</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-execution-cache-read-through-not-found">daml.execution.cache.read_through_not_found</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-execution-cache-resolve-divulgence-lookup">daml.execution.cache.resolve_divulgence_lookup</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-execution-cache-resolve-full-lookup">daml.execution.cache.resolve_full_lookup</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-execution-engine">daml.execution.engine</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-execution-engine-running">daml.execution.engine_running</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-execution-get-lf-package">daml.execution.get_lf_package</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-execution-lookup-active-contract">daml.execution.lookup_active_contract</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-execution-lookup-active-contract-count-per-execution">daml.execution.lookup_active_contract_count_per_execution</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-execution-lookup-active-contract-per-execution">daml.execution.lookup_active_contract_per_execution</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-execution-lookup-contract-key">daml.execution.lookup_contract_key</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-execution-lookup-contract-key-count-per-execution">daml.execution.lookup_contract_key_count_per_execution</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-execution-lookup-contract-key-per-execution">daml.execution.lookup_contract_key_per_execution</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-execution-retry">daml.execution.retry</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-execution-total">daml.execution.total</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-execution-total-running">daml.execution.total_running</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-executor-runtime-completed">daml.executor.runtime.completed*</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-executor-runtime-duration">daml.executor.runtime.duration*</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-executor-runtime-idle">daml.executor.runtime.idle*</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-executor-runtime-running">daml.executor.runtime.running*</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-executor-runtime-submitted">daml.executor.runtime.submitted*</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-index-active-contracts-buffer-size">daml.index.active_contracts_buffer_size</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-index-completions-buffer-size">daml.index.completions_buffer_size</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-index-db-active-contract-keys-lookup-batch-active-contract-lookup-batch-size">daml.index.db.active_contract_keys_lookup.batch.active_contract_lookup.batch_size</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-index-db-active-contract-keys-lookup-batch-active-contract-lookup-buffer-capacity">daml.index.db.active_contract_keys_lookup.batch.active_contract_lookup.buffer_capacity</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-index-db-active-contract-keys-lookup-batch-active-contract-lookup-buffer-delay-duration-seconds">daml.index.db.active_contract_keys_lookup.batch.active_contract_lookup.buffer_delay.duration.seconds</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-index-db-active-contract-keys-lookup-batch-active-contract-lookup-buffer-length">daml.index.db.active_contract_keys_lookup.batch.active_contract_lookup.buffer_length</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-index-db-active-contract-lookup-batch-active-contract-lookup-batch-size">daml.index.db.active_contract_lookup.batch.active_contract_lookup.batch_size</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-index-db-active-contract-lookup-batch-active-contract-lookup-buffer-capacity">daml.index.db.active_contract_lookup.batch.active_contract_lookup.buffer_capacity</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-index-db-active-contract-lookup-batch-active-contract-lookup-buffer-delay-duration-seconds">daml.index.db.active_contract_lookup.batch.active_contract_lookup.buffer_delay.duration.seconds</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-index-db-active-contract-lookup-batch-active-contract-lookup-buffer-length">daml.index.db.active_contract_lookup.batch.active_contract_lookup.buffer_length</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-index-db-compression-create-argument-compressed">daml.index.db.compression.create_argument_compressed</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-index-db-compression-create-argument-uncompressed">daml.index.db.compression.create_argument_uncompressed</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-index-db-compression-create-key-value-compressed">daml.index.db.compression.create_key_value_compressed</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-index-db-compression-create-key-value-uncompressed">daml.index.db.compression.create_key_value_uncompressed</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-index-db-compression-exercise-argument-compressed">daml.index.db.compression.exercise_argument_compressed</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-index-db-compression-exercise-argument-uncompressed">daml.index.db.compression.exercise_argument_uncompressed</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-index-db-compression-exercise-result-compressed">daml.index.db.compression.exercise_result_compressed</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-index-db-compression-exercise-result-uncompressed">daml.index.db.compression.exercise_result_uncompressed</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-index-db-flat-transactions-stream-translation">daml.index.db.flat_transactions_stream.translation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-index-db-lookup-active-contract">daml.index.db.lookup_active_contract</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-index-db-lookup-key">daml.index.db.lookup_key</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-index-db-reassignment-stream-translation">daml.index.db.reassignment_stream.translation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-index-db-translation-get-lf-package">daml.index.db.translation.get_lf_package</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-index-db-tree-transactions-stream-translation">daml.index.db.tree_transactions_stream.translation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-index-flat-transactions-buffer-size">daml.index.flat_transactions_buffer_size</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-index-ledger-end-sequential-id">daml.index.ledger_end_sequential_id</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-index-lf-value-compute-interface-view">daml.index.lf_value.compute_interface_view</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-index-package-metadata-decode-archive">daml.index.package_metadata.decode_archive</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-index-package-metadata-view-init">daml.index.package_metadata.view_init</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-index-transaction-trees-buffer-size">daml.index.transaction_trees_buffer_size</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-indexer-current-record-time-lag">daml.indexer.current_record_time_lag</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-indexer-events">daml.indexer.events*</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-indexer-last-received-record-time">daml.indexer.last_received_record_time</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-indexer-ledger-end-sequential-id">daml.indexer.ledger_end_sequential_id</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-indexer-metered-events">daml.indexer.metered_events*</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-lapi-streams-acs-sent">daml.lapi.streams.acs_sent</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-lapi-streams-active">daml.lapi.streams.active</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-lapi-streams-completions-sent">daml.lapi.streams.completions_sent</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-lapi-streams-transaction-trees-sent">daml.lapi.streams.transaction_trees_sent</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-lapi-streams-transactions-sent">daml.lapi.streams.transactions_sent</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-lapi-streams-update-trees-sent">daml.lapi.streams.update_trees_sent</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-parallel-indexer-archivals">daml.parallel_indexer.archivals</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-parallel-indexer-creates">daml.parallel_indexer.creates</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-parallel-indexer-input-buffer-length">daml.parallel_indexer.input_buffer_length</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-parallel-indexer-inputmapping-batch-size">daml.parallel_indexer.inputmapping.batch_size</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-parallel-indexer-output-batched-buffer-length">daml.parallel_indexer.output_batched_buffer_length</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-parallel-indexer-seqmapping-duration">daml.parallel_indexer.seqmapping.duration</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-parallel-indexer-updates">daml.parallel_indexer.updates</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-services-index-operation">daml.services.index.&lt;operation&gt;</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-services-index-in-memory-fan-out-buffer-prune">daml.services.index.in_memory_fan_out_buffer.prune</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-services-index-in-memory-fan-out-buffer-push">daml.services.index.in_memory_fan_out_buffer.push</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-services-index-in-memory-fan-out-buffer-size">daml.services.index.in_memory_fan_out_buffer.size</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-services-read-operation">daml.services.read.&lt;operation&gt;</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-services-write-operation">daml.services.write.&lt;operation&gt;</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-services-write-submit-transaction-count">daml.services.write.submit_transaction.count</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/monitoring.html#synchronization-domain-metrics">Synchronization Domain Metrics</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-component-sequencer-client-application-handle">canton.&lt;component&gt;.sequencer-client.application-handle</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-component-sequencer-client-delay">canton.&lt;component&gt;.sequencer-client.delay</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-component-sequencer-client-event-handle">canton.&lt;component&gt;.sequencer-client.event-handle</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#id1">canton.db-storage.&lt;service&gt;.executor.exectime</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#id2">canton.db-storage.&lt;service&gt;.executor.load</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#id3">canton.db-storage.&lt;service&gt;.executor.queued</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#id4">canton.db-storage.&lt;service&gt;.executor.running</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#id5">canton.db-storage.&lt;service&gt;.executor.waittime</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#id6">canton.db-storage.&lt;storage&gt;</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#id7">canton.db-storage.&lt;storage&gt;.load</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#id8">canton.db-storage.alerts.multi-domain-event-log</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#id9">canton.db-storage.alerts.single-dimension-event-log</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-mediator-event-rejected">canton.mediator.event-rejected</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-mediator-max-event-age">canton.mediator.max-event-age</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-mediator-outstanding-requests">canton.mediator.outstanding-requests</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-mediator-requests">canton.mediator.requests</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-mediator-sequencer-client-handler-actual-in-flight-event-batches">canton.mediator.sequencer-client.handler.actual-in-flight-event-batches</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-mediator-sequencer-client-handler-max-in-flight-event-batches">canton.mediator.sequencer-client.handler.max-in-flight-event-batches</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-mediator-sequencer-client-submissions-dropped">canton.mediator.sequencer-client.submissions.dropped</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-mediator-sequencer-client-submissions-in-flight">canton.mediator.sequencer-client.submissions.in-flight</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-mediator-sequencer-client-submissions-overloaded">canton.mediator.sequencer-client.submissions.overloaded</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-mediator-sequencer-client-submissions-sends">canton.mediator.sequencer-client.submissions.sends</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-mediator-sequencer-client-submissions-sequencing">canton.mediator.sequencer-client.submissions.sequencing</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-sequencer-block-event-bytes">canton.sequencer.block.event-bytes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-sequencer-block-events">canton.sequencer.block.events</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-sequencer-block-height">canton.sequencer.block.height</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-sequencer-db-storage-storage">canton.sequencer.db-storage.&lt;storage&gt;</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-sequencer-db-storage-storage-load">canton.sequencer.db-storage.&lt;storage&gt;.load</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-sequencer-db-storage-alerts-multi-domain-event-log">canton.sequencer.db-storage.alerts.multi-domain-event-log</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-sequencer-db-storage-alerts-single-dimension-event-log">canton.sequencer.db-storage.alerts.single-dimension-event-log</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-sequencer-db-storage-general-executor-exectime">canton.sequencer.db-storage.general.executor.exectime</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-sequencer-db-storage-general-executor-load">canton.sequencer.db-storage.general.executor.load</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-sequencer-db-storage-general-executor-queued">canton.sequencer.db-storage.general.executor.queued</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-sequencer-db-storage-general-executor-running">canton.sequencer.db-storage.general.executor.running</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-sequencer-db-storage-general-executor-waittime">canton.sequencer.db-storage.general.executor.waittime</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-sequencer-db-storage-locks-executor-exectime">canton.sequencer.db-storage.locks.executor.exectime</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-sequencer-db-storage-locks-executor-load">canton.sequencer.db-storage.locks.executor.load</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-sequencer-db-storage-locks-executor-queued">canton.sequencer.db-storage.locks.executor.queued</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-sequencer-db-storage-locks-executor-running">canton.sequencer.db-storage.locks.executor.running</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-sequencer-db-storage-locks-executor-waittime">canton.sequencer.db-storage.locks.executor.waittime</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-sequencer-db-storage-write-executor-exectime">canton.sequencer.db-storage.write.executor.exectime</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-sequencer-db-storage-write-executor-load">canton.sequencer.db-storage.write.executor.load</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-sequencer-db-storage-write-executor-queued">canton.sequencer.db-storage.write.executor.queued</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-sequencer-db-storage-write-executor-running">canton.sequencer.db-storage.write.executor.running</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-sequencer-db-storage-write-executor-waittime">canton.sequencer.db-storage.write.executor.waittime</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-sequencer-max-event-age">canton.sequencer.max-event-age</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-sequencer-processed">canton.sequencer.processed</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-sequencer-processed-bytes">canton.sequencer.processed-bytes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-sequencer-sequencer-client-handler-actual-in-flight-event-batches">canton.sequencer.sequencer-client.handler.actual-in-flight-event-batches</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-sequencer-sequencer-client-handler-max-in-flight-event-batches">canton.sequencer.sequencer-client.handler.max-in-flight-event-batches</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-sequencer-sequencer-client-submissions-dropped">canton.sequencer.sequencer-client.submissions.dropped</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-sequencer-sequencer-client-submissions-in-flight">canton.sequencer.sequencer-client.submissions.in-flight</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-sequencer-sequencer-client-submissions-overloaded">canton.sequencer.sequencer-client.submissions.overloaded</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-sequencer-sequencer-client-submissions-sends">canton.sequencer.sequencer-client.submissions.sends</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-sequencer-sequencer-client-submissions-sequencing">canton.sequencer.sequencer-client.submissions.sequencing</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-sequencer-subscriptions">canton.sequencer.subscriptions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-sequencer-time-requests">canton.sequencer.time-requests</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-sequencer-traffic-control-event-delivered-cost">canton.sequencer.traffic-control.event-delivered-cost</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-sequencer-traffic-control-event-received-size">canton.sequencer.traffic-control.event-received-size</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-sequencer-traffic-control-event-rejected-cost">canton.sequencer.traffic-control.event-rejected-cost</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-topology-manager-sequencer-client-handler-actual-in-flight-event-batches">canton.topology-manager.sequencer-client.handler.actual-in-flight-event-batches</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-topology-manager-sequencer-client-handler-max-in-flight-event-batches">canton.topology-manager.sequencer-client.handler.max-in-flight-event-batches</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-topology-manager-sequencer-client-submissions-dropped">canton.topology-manager.sequencer-client.submissions.dropped</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-topology-manager-sequencer-client-submissions-in-flight">canton.topology-manager.sequencer-client.submissions.in-flight</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-topology-manager-sequencer-client-submissions-overloaded">canton.topology-manager.sequencer-client.submissions.overloaded</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-topology-manager-sequencer-client-submissions-sends">canton.topology-manager.sequencer-client.submissions.sends</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-topology-manager-sequencer-client-submissions-sequencing">canton.topology-manager.sequencer-client.submissions.sequencing</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/monitoring.html#health-metrics">Health Metrics</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-health-status">daml_health_status</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/monitoring.html#grpc-metrics">gRPC Metrics</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-grpc-server-duration-seconds">daml_grpc_server_duration_seconds</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-grpc-server-messages-sent-total">daml_grpc_server_messages_sent_total</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-grpc-server-messages-received-total">daml_grpc_server_messages_received_total</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-grpc-server-started-total">daml_grpc_server_started_total</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-grpc-server-handled-total">daml_grpc_server_handled_total</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-grpc-server-messages-sent-bytes">daml_grpc_server_messages_sent_bytes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-grpc-server-messages-received-bytes">daml_grpc_server_messages_received_bytes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/monitoring.html#http-metrics">HTTP Metrics</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-http-requests-duration-seconds">daml_http_requests_duration_seconds</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-http-requests-total">daml_http_requests_total</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-http-websocket-messages-received-total">daml_http_websocket_messages_received_total</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-http-websocket-messages-sent-total">daml_http_websocket_messages_sent_total</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-http-requests-payload-bytes">daml_http_requests_payload_bytes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-http-responses-payload-bytes">daml_http_responses_payload_bytes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-http-websocket-messages-received-bytes">daml_http_websocket_messages_received_bytes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-http-websocket-messages-sent-bytes">daml_http_websocket_messages_sent_bytes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/monitoring.html#pruning-metrics">Pruning Metrics</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-services-pruning-prune-started-total">daml_services_pruning_prune_started_total</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-services-pruning-prune-completed-total">daml_services_pruning_prune_completed_total</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/monitoring.html#jvm-metrics">JVM Metrics</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#runtime-jvm-gc-time">runtime_jvm_gc_time</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#runtime-jvm-gc-count">runtime_jvm_gc_count</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#runtime-jvm-memory-area">runtime_jvm_memory_area</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#runtime-jvm-memory-pool">runtime_jvm_memory_pool</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../canton/usermanual/monitoring.html#logging">Logging</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/monitoring.html#viewing-logs">Viewing Logs</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/monitoring.html#detailed-logging">Detailed Logging</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../canton/usermanual/monitoring.html#tracing">Tracing</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/monitoring.html#sampling">Sampling</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/monitoring.html#known-limitations">Known Limitations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/monitoring.html#traces">Traces</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../canton/usermanual/monitoring.html#node-health-status">Node Health Status</a></li>
<li class="toctree-l2"><a class="reference internal" href="../canton/usermanual/monitoring.html#health-checks">Health Checks</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/monitoring.html#grpc-health-check-service">gRPC Health Check Service</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/monitoring.html#http-health-check">HTTP Health Check</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../canton/usermanual/monitoring.html#health-dumps">Health Dumps</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/monitoring.html#remote-health-dumps">Remote Health Dumps</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../canton/usermanual/example_monitoring_setup.html">Example Monitoring Setup</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/example_monitoring_setup.html#container-setup">Container Setup</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/example_monitoring_setup.html#intended-use">Intended Use</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/example_monitoring_setup.html#network-configuration">Network Configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/example_monitoring_setup.html#postgres-setup">Postgres Setup</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/example_monitoring_setup.html#synchronization-domain-setup">Synchronization Domain Setup</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/example_monitoring_setup.html#participant-setup">Participant Setup</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/example_monitoring_setup.html#logstash">Logstash</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/example_monitoring_setup.html#elasticsearch">Elasticsearch</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/example_monitoring_setup.html#kibana">Kibana</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/example_monitoring_setup.html#cadvisor">cAdvisor</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/example_monitoring_setup.html#prometheus">Prometheus</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/example_monitoring_setup.html#grafana">Grafana</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/example_monitoring_setup.html#dependencies">Dependencies</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/example_monitoring_setup.html#docker-images">Docker Images</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/example_monitoring_setup.html#running-docker-compose">Running Docker Compose</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/example_monitoring_setup.html#connecting-to-nodes">Connecting to Nodes</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/example_monitoring_setup.html#remote-configurations">Remote Configurations</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/example_monitoring_setup.html#getting-started">Getting Started</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/example_monitoring_setup.html#kibana-log-monitoring">Kibana Log Monitoring</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/example_monitoring_setup.html#grafana-metric-monitoring">Grafana Metric Monitoring</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/example_monitoring_setup.html#monitoring-choices">Monitoring Choices</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/example_monitoring_setup.html#use-docker-log-drivers">Use Docker Log Drivers</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/example_monitoring_setup.html#use-gelf-docker-log-driver">Use GELF Docker Log Driver</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/example_monitoring_setup.html#use-logstash">Use Logstash</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/example_monitoring_setup.html#use-elasticsearch-kibana">Use Elasticsearch/Kibana</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/example_monitoring_setup.html#use-prometheus-grafana">Use Prometheus/Grafana</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/example_monitoring_setup.html#logging-improvements">Logging Improvements</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../canton/usermanual/monitoring_glossary.html">Glossary</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/monitoring_glossary.html#cadvisor">cAdvisor</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/monitoring_glossary.html#docker-log-driver">Docker Log Driver</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/monitoring_glossary.html#docker-plugins">Docker Plugins</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/monitoring_glossary.html#ecs">ECS</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/monitoring_glossary.html#elasticsearch">Elasticsearch</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/monitoring_glossary.html#elk">ELK</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/monitoring_glossary.html#gelf">GELF</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/monitoring_glossary.html#grafana">Grafana</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/monitoring_glossary.html#graylog">Graylog</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/monitoring_glossary.html#logstash">Logstash</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/monitoring_glossary.html#loki">Loki</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/monitoring_glossary.html#loki-log-driver">Loki Log Driver</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/monitoring_glossary.html#minio">MinIO</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/monitoring_glossary.html#opentelemetry">OpenTelemetry</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/monitoring_glossary.html#prometheus">Prometheus</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/monitoring_glossary.html#syslog">Syslog</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Participant Query Store</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#introduction">Introduction</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#audience">Audience</a></li>
<li class="toctree-l3"><a class="reference internal" href="#purpose">Purpose</a></li>
<li class="toctree-l3"><a class="reference internal" href="#operational-architecture">Operational Architecture</a></li>
<li class="toctree-l3"><a class="reference internal" href="#key-feature-summary">Key Feature Summary</a></li>
<li class="toctree-l3"><a class="reference internal" href="#sections">Sections</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#getting-started">Getting Started</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#pre-requisites">Pre-requisites</a></li>
<li class="toctree-l3"><a class="reference internal" href="#running-pqs">Running PQS</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#daml-platform-support">Daml Platform Support</a></li>
<li class="toctree-l4"><a class="reference internal" href="#preparing-the-database">Preparing the Database</a></li>
<li class="toctree-l4"><a class="reference internal" href="#running-the-pipeline">Running the Pipeline</a></li>
<li class="toctree-l4"><a class="reference internal" href="#auth">Auth</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#database">Database</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#ledger-source">Ledger Source</a></li>
<li class="toctree-l3"><a class="reference internal" href="#transaction-data-source">Transaction Data Source</a></li>
<li class="toctree-l3"><a class="reference internal" href="#postgresql-schema">PostgreSQL Schema</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#objectives">Objectives</a></li>
<li class="toctree-l4"><a class="reference internal" href="#design">Design</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#configuration">Configuration</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#pqs-configuration">PQS Configuration</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#applying-configuration-changes">Applying Configuration Changes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#contract-filters">Contract Filters</a></li>
<li class="toctree-l3"><a class="reference internal" href="#party-filtering">Party Filtering</a></li>
<li class="toctree-l3"><a class="reference internal" href="#java-virtual-machine-jvm-configuration">Java Virtual Machine (JVM) Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="#postgresql-configuration">PostgreSQL Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="#postgresql-users">PostgreSQL Users</a></li>
<li class="toctree-l3"><a class="reference internal" href="#host-infrastructure">Host Infrastructure</a></li>
<li class="toctree-l3"><a class="reference internal" href="#host-environment">Host Environment</a></li>
<li class="toctree-l3"><a class="reference internal" href="#testing">Testing</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#resilience">Resilience</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#high-availability">High Availability</a></li>
<li class="toctree-l3"><a class="reference internal" href="#retries">Retries</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#configuration-1">Configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="#logging">Logging</a></li>
<li class="toctree-l4"><a class="reference internal" href="#metrics">Metrics</a></li>
<li class="toctree-l4"><a class="reference internal" href="#retry-counters-reset">Retry Counters Reset</a></li>
<li class="toctree-l4"><a class="reference internal" href="#exit-codes">Exit codes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#ledger-streaming-recovery">Ledger Streaming &amp; Recovery</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#read-api">Read API</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#how-the-ledger-models-time">How The Ledger Models Time</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#offset">Offset</a></li>
<li class="toctree-l4"><a class="reference internal" href="#ledger-time">Ledger Time</a></li>
<li class="toctree-l4"><a class="reference internal" href="#tranasction-id">Tranasction ID</a></li>
<li class="toctree-l4"><a class="reference internal" href="#which-should-i-use">Which should I use?</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#time-model">Time Model</a></li>
<li class="toctree-l3"><a class="reference internal" href="#offset-management">Offset Management</a></li>
<li class="toctree-l3"><a class="reference internal" href="#jsonb-encoding">JSONB Encoding</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#primitive-types">Primitive Types</a></li>
<li class="toctree-l4"><a class="reference internal" href="#user-defined-types">User-Defined Types</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#querying-patterns">Querying Patterns</a></li>
<li class="toctree-l3"><a class="reference internal" href="#summary-functions">Summary functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#lookup-functions">Lookup functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#optimization">Optimization</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#indexing">Indexing</a></li>
<li class="toctree-l4"><a class="reference internal" href="#pagination">Pagination</a></li>
<li class="toctree-l4"><a class="reference internal" href="#psql-tips">psql Tips</a></li>
<li class="toctree-l4"><a class="reference internal" href="#query-analysis">Query Analysis</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#pruning">Pruning</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#data-deletion-and-changes">Data Deletion and Changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#constraints">Constraints</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pruning-from-the-command-line">Pruning from the command line</a></li>
<li class="toctree-l3"><a class="reference internal" href="#example-with-timestamp-and-duration">Example with Timestamp and Duration</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pruning-from-sql">Pruning from SQL</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#authentication">Authentication</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#audience-based-token">Audience-Based Token</a></li>
<li class="toctree-l3"><a class="reference internal" href="#scope-based-token">Scope-Based Token</a></li>
<li class="toctree-l3"><a class="reference internal" href="#custom-daml-claims-tokens">Custom Daml Claims Tokens</a></li>
<li class="toctree-l3"><a class="reference internal" href="#static-access-token">Static Access Token</a></li>
<li class="toctree-l3"><a class="reference internal" href="#ledger-api-users-and-daml-parties">Ledger API Users and Daml Parties</a></li>
<li class="toctree-l3"><a class="reference internal" href="#token-expiry">Token expiry</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#history-slicing">History Slicing</a></li>
<li class="toctree-l2"><a class="reference internal" href="#reset-procedure">Reset Procedure</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#reset">Reset</a></li>
<li class="toctree-l3"><a class="reference internal" href="#constraints-1">Constraints</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#logging-1">Logging</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#log-level">Log Level</a></li>
<li class="toctree-l3"><a class="reference internal" href="#per-logger-log-level">Per-Logger Log Level</a></li>
<li class="toctree-l3"><a class="reference internal" href="#log-pattern">Log Pattern</a></li>
<li class="toctree-l3"><a class="reference internal" href="#log-format-for-console-output">Log Format for Console Output</a></li>
<li class="toctree-l3"><a class="reference internal" href="#log-format-for-file-output">Log Format for File Output</a></li>
<li class="toctree-l3"><a class="reference internal" href="#destination-file-for-file-output">Destination File for File Output</a></li>
<li class="toctree-l3"><a class="reference internal" href="#log-format-and-log-pattern-combinations">Log Format and Log Pattern Combinations</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#database-schema-evolution">Database Schema Evolution</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#baselining">Baselining</a></li>
<li class="toctree-l3"><a class="reference internal" href="#schema-upgrades">Schema Upgrades</a></li>
<li class="toctree-l3"><a class="reference internal" href="#schema-dump">Schema Dump</a></li>
<li class="toctree-l3"><a class="reference internal" href="#monitoring-progress">Monitoring Progress</a></li>
<li class="toctree-l3"><a class="reference internal" href="#troubleshooting">Troubleshooting</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#problem-1-an-application-s-flyway-conflicts-with-pqs-s-flyway">Problem 1: An application’s Flyway conflicts with PQS’s Flyway</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#mapping-daml-models-to-relational-world">Mapping Daml Models to Relational World</a></li>
<li class="toctree-l3"><a class="reference internal" href="#considerations">Considerations</a></li>
<li class="toctree-l3"><a class="reference internal" href="#definitions">Definitions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#queries-results">Queries &amp; Results</a></li>
<li class="toctree-l3"><a class="reference internal" href="#performance-optimizations">Performance Optimizations</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#materialized-views">Materialized Views</a></li>
<li class="toctree-l4"><a class="reference internal" href="#custom-triggers">Custom Triggers</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#trade-offs-summary">Trade-Offs Summary</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#observability">Observability</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#underlying-mechanism">Underlying Mechanism</a></li>
<li class="toctree-l3"><a class="reference internal" href="#provided-metrics">Provided Metrics</a></li>
<li class="toctree-l3"><a class="reference internal" href="#example-dashboard">Example Dashboard</a></li>
<li class="toctree-l3"><a class="reference internal" href="#health-check">Health Check</a></li>
<li class="toctree-l3"><a class="reference internal" href="#tracing-of-pipeline-execution">Tracing of Pipeline Execution</a></li>
<li class="toctree-l3"><a class="reference internal" href="#trace-context-propagation">Trace Context Propagation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#redaction">Redaction</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#conditions-for-redaction">Conditions for Redaction</a></li>
<li class="toctree-l3"><a class="reference internal" href="#examples">Examples</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#redacting-an-archived-contract">Redacting an Archived Contract</a></li>
<li class="toctree-l4"><a class="reference internal" href="#redacting-a-choice-exercise">Redacting a Choice Exercise</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#accessing-redaction-information">Accessing Redaction Information</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../canton/usermanual/identity_management.html">Identity Management</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../canton/usermanual/identity_management.html#introduction">Introduction</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/identity_management.html#what-is-a-canton-identity">What is a Canton Identity?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/identity_management.html#unique-identifier">Unique Identifier</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/identity_management.html#topology-transactions">Topology Transactions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/identity_management.html#legal-identities">Legal Identities</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/identity_management.html#life-of-a-party">Life of a Party</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/identity_management.html#participant-onboarding">Participant Onboarding</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/identity_management.html#default-initialization">Default Initialization</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/identity_management.html#identity-setup-guide">Identity Setup Guide</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../canton/usermanual/identity_management.html#user-identity-management">User Identity Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="../canton/usermanual/identity_management.html#cookbook">Cookbook</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/identity_management.html#manage-users">Manage Users</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/identity_management.html#create">Create</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/identity_management.html#update">Update</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/identity_management.html#inspect">Inspect</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/identity_management.html#decommission">Decommission</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/identity_management.html#configure-a-default-participant-admin">Configure a default Participant Admin</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/identity_management.html#adding-a-new-party-to-a-participant">Adding a new Party to a Participant</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/identity_management.html#client-controlled-party">Client Controlled Party</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/identity_management.html#replicate-party-to-another-participant-node">Replicate Party to Another Participant Node</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/identity_management.html#party-on-multiple-nodes">Party on Multiple Nodes</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../operate-a-daml-ledger/common-tasks/index.html">Common Operational Tasks</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../canton/usermanual/packagemanagement.html">Manage DARs and Packages</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/packagemanagement.html#uploading-dars">Uploading DARs</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/packagemanagement.html#inspecting-dars-and-packages">Inspecting DARs and Packages</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/packagemanagement.html#understanding-package-vetting">Understanding Package Vetting</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/packagemanagement.html#dar-vetting-lifecycle">DAR vetting lifecycle</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/packagemanagement.html#advanced-vetting-concepts">Advanced vetting concepts</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../canton/usermanual/upgrading.html">Upgrade To a New Release</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/upgrading.html#upgrade-canton-binary">Upgrade Canton Binary</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/upgrading.html#preparation">Preparation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/upgrading.html#back-up-your-database">Back Up Your Database</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/upgrading.html#test-your-configuration">Test your Configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/upgrading.html#migrating-the-database">Migrating the Database</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/upgrading.html#test-your-upgrade">Test Your Upgrade</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/upgrading.html#version-specific-notes">Version Specific Notes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/upgrading.html#change-the-canton-protocol-version">Change the Canton Protocol Version</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/upgrading.html#upgrade-the-synchronization-domain-to-a-new-protocol-version">Upgrade the Synchronization Domain to a new Protocol Version</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/upgrading.html#hard-synchronization-domain-migration">Hard Synchronization Domain Migration</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/upgrading.html#one-step-migration">One-Step Migration</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/upgrading.html#one-step-migration-recipe-for-2-10">One-Step Migration Recipe for 2.10</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../canton/usermanual/security.html">Security &amp; Key Management</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/security.html#cryptographic-key-usage">Cryptographic Key Usage</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/security.html#supported-cryptographic-schemes-in-canton">Supported Cryptographic Schemes in Canton</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/security.html#key-generation-and-storage">Key Generation and Storage</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/security.html#public-key-distribution-using-topology-management">Public Key Distribution using Topology Management</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/security.html#common-node-keys">Common Node Keys</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/security.html#participant-node-keys">Participant Node Keys</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/security.html#synchronization-domain-topology-manager-keys">Synchronization Domain Topology Manager Keys</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/security.html#sequencer-node-keys">Sequencer Node Keys</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/security.html#mediator-node-keys">Mediator Node Keys</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/security.html#synchronizer-domain-node-keys">Synchronizer Domain Node Keys</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/security.html#canton-console-keys">Canton Console Keys</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/security.html#cryptographic-key-management">Cryptographic Key Management</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/security.html#rotating-canton-node-keys">Rotating Canton Node Keys</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/security.html#deleting-canton-node-keys">Deleting Canton Node Keys</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/security.html#namespace-intermediate-key-management">Namespace Intermediate Key Management</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/security.html#moving-the-namespace-secret-key-to-offline-storage">Moving the Namespace Secret Key to Offline Storage</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/security.html#identifier-delegation-key-management">Identifier Delegation Key Management</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/security.html#ledger-api-authorization">Ledger-API Authorization</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../canton/usermanual/kms/kms.html">Key Management Service (KMS) Setup</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/kms/kms_setup.html">Canton Configuration of a KMS</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/kms/kms_aws_setup.html">Configure Amazon Web Services (AWS) KMS</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/kms/kms_gcp_setup.html">Configure Google Cloud Provider (GCP) KMS</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/kms/encrypted_private_key_storage/encrypted_private_key_storage.html">Configure Encrypted Private Key Storage with a Key Management Service (KMS)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/kms/encrypted_private_key_storage/encrypted_private_key_storage_aws.html">Configure Encrypted Private Key Storage with AWS KMS</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/kms/encrypted_private_key_storage/encrypted_private_key_storage_gcp.html">Configure Encrypted Private Key Storage with GCP KMS</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/kms/external_key_storage/external_key_storage.html">Configure External Key Storage with a Key Management Service (KMS)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/kms/external_key_storage/external_key_storage_aws.html">Configure External Key Storage with AWS KMS</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/kms/external_key_storage/external_key_storage_gcp.html">Configure External Key Storage with GCP KMS</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/kms/external_key_storage/interoperability.html">Interoperability with other nodes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/kms/external_key_storage/participant_kms_migration/participant_kms_migration.html">Participant Node Migration to KMS</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/kms/external_key_storage/manual_kms_key_rotation.html">Manual KMS key rotation</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/kms/kms_driver_guide.html">Canton KMS Driver API Developer Guide</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/kms/kms_driver_guide.html#introduction">Introduction</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/kms/kms_driver_guide.html#kms-driver-api">KMS Driver API</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/kms/kms_driver_guide.html#develop-and-test-a-kms-driver">Develop and Test a KMS Driver</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/kms/kms_driver_guide.html#run-canton-with-a-kms-driver">Run Canton with a KMS Driver</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../canton/usermanual/performance.html">Scaling and Performance</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../canton/usermanual/performance.html#network-scaling">Network Scaling</a></li>
<li class="toctree-l2"><a class="reference internal" href="../canton/usermanual/performance.html#node-scaling">Node Scaling</a></li>
<li class="toctree-l2"><a class="reference internal" href="../canton/usermanual/performance.html#performance-and-sizing">Performance and Sizing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../canton/usermanual/performance.html#batching">Batching</a></li>
<li class="toctree-l2"><a class="reference internal" href="../canton/usermanual/performance.html#asynchronous-submissions">Asynchronous Submissions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../canton/usermanual/performance.html#storage-estimation">Storage Estimation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../canton/usermanual/performance.html#set-up-canton-to-get-the-best-performance">Set Up Canton to Get the Best Performance</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/performance.html#system-design-architecture">System Design / Architecture</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/performance.html#hardware-and-database">Hardware and Database</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/performance.html#configuration">Configuration</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../canton/usermanual/performance.html#model-tuning">Model Tuning</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/performance.html#reduce-the-number-of-views">Reduce the Number of Views</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/performance.html#strategy-for-protocol-version-7">Strategy for Protocol Version 7</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/performance.html#strategy-for-protocol-versions-5-and-lower">Strategy for Protocol Versions 5 and Lower</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/performance.html#reduce-ledger-events">Reduce Ledger Events</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../operate-a-daml-ledger/advanced-operations/index.html">Advanced Ledger Operations</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../canton/usermanual/manage_domains.html">Manage Domains</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/manage_domains.html#permissioned-synchronization-domains">Permissioned Synchronization Domains</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/manage_domains.html#synchronization-domain-rules">Synchronization Domain Rules</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/manage_domains.html#dynamic-synchronization-domain-parameters">Dynamic synchronization domain parameters</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/manage_domains.html#recover-from-a-small-max-request-size">Recover From a Small Max Request Size</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../canton/usermanual/manage_domain_entities.html">Manage Domain Entities</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/manage_domain_entities.html#manual-vs-automatic-initialization">Manual vs Automatic Initialization</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/manage_domain_entities.html#keys-initialization">Keys Initialization</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/manage_domain_entities.html#embedded-synchronization-domain-initialization">Embedded Synchronization Domain Initialization</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/manage_domain_entities.html#set-up-a-distributed-synchronization-domain-with-a-single-console">Set up a Distributed Synchronization Domain With a Single Console</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/manage_domain_entities.html#set-up-a-distributed-synchronization-domain-with-separate-consoles">Set Up a Distributed Synchronization Domain With Separate Consoles</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/manage_domain_entities.html#add-new-sequencers-to-a-distributed-synchronization-domain">Add New Sequencers to a Distributed Synchronization Domain</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../canton/usermanual/manage_participants.html">Manage Participants</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/manage_participants.html#manual-vs-automatic-identity-initialization">Manual vs Automatic Identity Initialization</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/manage_participants.html#keys-initialization">Keys Initialization</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/manage_participants.html#participant-manual-initialization">Participant Manual Initialization</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../canton/usermanual/pruning.html">Ledger Pruning</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/pruning.html#enable-automatic-pruning">Enable Automatic Pruning</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/pruning.html#schedule-format">Schedule format</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/pruning.html#advanced-schedule-formatting">Advanced schedule formatting</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/pruning.html#monitor-pruning-progress">Monitor Pruning Progress</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/pruning.html#best-practices">Best Practices</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/pruning.html#current-limitations">Current Limitations</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../ops/pruning.html">Participant Pruning</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../ops/pruning.html#impacts-on-daml-applications">Impacts on Daml Applications</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ops/pruning.html#how-the-daml-ledger-api-is-affected">How the Daml Ledger API is Affected</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ops/pruning.html#other-limitations">Other Limitations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ops/pruning.html#how-pruning-affects-index-db-administration">How Pruning Affects Index DB Administration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ops/pruning.html#determine-a-suitable-pruning-offset">Determine a Suitable Pruning Offset</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../ops/metering.html">Participant Metering</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../ops/metering.html#generate-a-metering-report">Generate a Metering Report</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ops/metering.html#example">Example</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ops/metering.html#output">Output</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../canton/usermanual/apis.html">Api Configuration</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/apis.html#default-ports">Default Ports</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/apis.html#administration-api">Administration API</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/apis.html#tls-configuration">TLS Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/apis.html#keep-alive">Keep Alive</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/apis.html#max-inbound-message-size">Max Inbound Message Size</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/apis.html#participant-configuration">Participant Configuration</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/apis.html#ledger-api">Ledger Api</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/apis.html#synchronization-domain-configurations">Synchronization Domain Configurations</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/apis.html#public-api">Public API</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/apis.html#usage-of-native-libraries-by-netty">Usage of native libraries by Netty</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../canton/usermanual/connectivity.html">Sequencer Connections</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/connectivity.html#participant-connections">Participant Connections</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/connectivity.html#connect-using-macros">Connect Using Macros</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/connectivity.html#inspect-connections">Inspect Connections</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/connectivity.html#modify-connections">Modify Connections</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/connectivity.html#enable-and-disable-connections">Enable and Disable Connections</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/connectivity.html#mediator-and-synchronization-domain-manager">Mediator and Synchronization Domain Manager</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../canton/usermanual/repairing.html">Repair Nodes</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/repairing.html#preparation">Preparation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/repairing.html#importing-an-actual-ledger">Importing an actual Ledger</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/repairing.html#repairing-participants">Repairing Participants</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/repairing.html#recovering-from-a-lost-synchronization-domain">Recovering from a Lost Synchronization Domain</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/repairing.html#repairing-an-actual-topology">Repairing an actual Topology</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/repairing.html#repair-macros">Repair Macros</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/repairing.html#clone-identity">Clone Identity</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/repairing.html#importing-existing-contracts">Importing Existing Contracts</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../canton/usermanual/decommissioning.html">Decommission Nodes</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/decommissioning.html#decommissioning-a-participant-node">Decommissioning a Participant Node</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/decommissioning.html#prerequisites">Prerequisites</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/decommissioning.html#decommissioning-a-participant-once-the-prerequisites-are-met">Decommissioning a participant once the prerequisites are met</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/decommissioning.html#decommissioning-a-sequencer">Decommissioning a Sequencer</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/decommissioning.html#disconnecting-all-nodes-from-the-sequencer-to-be-decommissioned">Disconnecting all nodes from the sequencer to be decommissioned</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/decommissioning.html#decommissioning-the-sequencer">Decommissioning the sequencer</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/decommissioning.html#decommissioning-a-mediator">Decommissioning a Mediator</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../canton/usermanual/troubleshooting_guide.html">Troubleshooting Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../canton/usermanual/troubleshooting_guide.html#introduction">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../canton/usermanual/troubleshooting_guide.html#enable-information-gathering">Enable Information Gathering</a></li>
<li class="toctree-l2"><a class="reference internal" href="../canton/usermanual/troubleshooting_guide.html#key-knowledge">Key Knowledge</a></li>
<li class="toctree-l2"><a class="reference internal" href="../canton/usermanual/troubleshooting_guide.html#log-files">Log Files</a></li>
<li class="toctree-l2"><a class="reference internal" href="../canton/usermanual/troubleshooting_guide.html#using-lnav-to-view-log-files">Using LNAV to View Log Files</a></li>
<li class="toctree-l2"><a class="reference internal" href="../canton/usermanual/troubleshooting_guide.html#setup-issues">Setup Issues</a></li>
<li class="toctree-l2"><a class="reference internal" href="../canton/usermanual/troubleshooting_guide.html#timeout-errors">Timeout Errors</a></li>
<li class="toctree-l2"><a class="reference internal" href="../canton/usermanual/troubleshooting_guide.html#auth-errors">Auth Errors</a></li>
<li class="toctree-l2"><a class="reference internal" href="../canton/usermanual/troubleshooting_guide.html#disconnections">Disconnections</a></li>
<li class="toctree-l2"><a class="reference internal" href="../canton/usermanual/troubleshooting_guide.html#performance-issues">Performance Issues</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/troubleshooting_guide.html#how-to-measure-database-performance">How to Measure Database Performance</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/troubleshooting_guide.html#how-to-diagnose-slow-database-queries">How to Diagnose Slow Database Queries</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/troubleshooting_guide.html#how-to-find-the-bottleneck">How to find the Bottleneck</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/troubleshooting_guide.html#theory">Theory</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/troubleshooting_guide.html#practical">Practical</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../canton/usermanual/troubleshooting_guide.html#contention">Contention</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/troubleshooting_guide.html#why-do-you-get-contention">Why do you get contention</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/troubleshooting_guide.html#how-to-change-your-model-to-avoid-undesired-contention">How To Change Your Model To Avoid Undesired Contention</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/troubleshooting_guide.html#how-to-find-contention">How To Find Contention</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../canton/usermanual/troubleshooting_guide.html#use-bisection-to-narrow-down-the-root-cause">Use Bisection to Narrow Down the Root Cause</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../canton/usermanual/support_checklist.html">Support Checklist</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../canton/usermanual/support_checklist.html#remote-console-access">Remote Console Access</a></li>
<li class="toctree-l2"><a class="reference internal" href="../canton/usermanual/support_checklist.html#logging">Logging</a></li>
<li class="toctree-l2"><a class="reference internal" href="../canton/usermanual/support_checklist.html#metrics">Metrics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../canton/usermanual/support_checklist.html#configuration-and-patching">Configuration and Patching</a></li>
<li class="toctree-l2"><a class="reference internal" href="../canton/usermanual/support_checklist.html#database-access">Database Access</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Help</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../canton/reference/error_codes.html">Error Codes</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../canton/reference/error_codes.html#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../canton/reference/error_codes.html#glossary">Glossary</a></li>
<li class="toctree-l2"><a class="reference internal" href="../canton/reference/error_codes.html#anatomy-of-an-error">Anatomy of an Error</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#error-description">Error Description</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#additional-machine-readable-information">Additional Machine-Readable Information</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#prevent-security-leaks-in-error-codes">Prevent Security Leaks in Error Codes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#work-with-error-codes">Work With Error Codes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../canton/reference/error_codes.html#error-codes-in-canton-operations">Error Codes In Canton Operations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../canton/reference/error_codes.html#error-categories">Error Categories</a></li>
<li class="toctree-l2"><a class="reference internal" href="../canton/reference/error_codes.html#machine-readable-information">Machine Readable Information</a></li>
<li class="toctree-l2"><a class="reference internal" href="../canton/reference/error_codes.html#example">Example</a></li>
<li class="toctree-l2"><a class="reference internal" href="../canton/reference/error_codes.html#error-categories-inventory">Error Categories Inventory</a></li>
<li class="toctree-l2"><a class="reference internal" href="../canton/reference/error_codes.html#error-codes-inventory-daml">Error Codes Inventory - Daml</a></li>
<li class="toctree-l2"><a class="reference internal" href="../canton/reference/error_codes.html#error-codes-inventory-canton">Error Codes Inventory - Canton</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#grpcerrors">1. GrpcErrors</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#aborted-due-to-shutdown">ABORTED_DUE_TO_SHUTDOWN</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#authorizationcheckserrors">2. AuthorizationChecksErrors</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#access-token-expired">ACCESS_TOKEN_EXPIRED</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#internal-authorization-error">INTERNAL_AUTHORIZATION_ERROR</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#invalid-token">INVALID_TOKEN</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#permission-denied">PERMISSION_DENIED</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#stale-stream-authorization">STALE_STREAM_AUTHORIZATION</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#unauthenticated">UNAUTHENTICATED</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#participanterrorgroup">3. ParticipantErrorGroup</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#errors">3.1. Errors</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#acs-commitment-internal-error">ACS_COMMITMENT_INTERNAL_ERROR</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#mismatcherror">3.1.1. MismatchError</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#acs-commitment-alarm">ACS_COMMITMENT_ALARM</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#acs-commitment-mismatch">ACS_COMMITMENT_MISMATCH</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#acs-mismatch-no-shared-contracts">ACS_MISMATCH_NO_SHARED_CONTRACTS</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#degradationerror">3.1.2. DegradationError</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#acs-commitment-degradation">ACS_COMMITMENT_DEGRADATION</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#acs-commitment-degradation-with-ineffective-config">ACS_COMMITMENT_DEGRADATION_WITH_INEFFECTIVE_CONFIG</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#ledgerapierrorgroup">3.2. LedgerApiErrorGroup</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#commandexecutionerrors">3.2.1. CommandExecutionErrors</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#failed-to-determine-ledger-time">FAILED_TO_DETERMINE_LEDGER_TIME</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#interpretation-time-exceeded">INTERPRETATION_TIME_EXCEEDED</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#package">3.2.1.1. Package</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#allowed-language-versions">ALLOWED_LANGUAGE_VERSIONS</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#package-validation-failed">PACKAGE_VALIDATION_FAILED</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#preprocessing">3.2.1.2. Preprocessing</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#command-preprocessing-failed">COMMAND_PREPROCESSING_FAILED</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#interpreter">3.2.1.3. Interpreter</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#contract-does-not-implement-interface">CONTRACT_DOES_NOT_IMPLEMENT_INTERFACE</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#contract-does-not-implement-requiring-interface">CONTRACT_DOES_NOT_IMPLEMENT_REQUIRING_INTERFACE</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#contract-id-comparability">CONTRACT_ID_COMPARABILITY</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#contract-id-in-contract-key">CONTRACT_ID_IN_CONTRACT_KEY</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#contract-not-active">CONTRACT_NOT_ACTIVE</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#create-empty-contract-key-maintainers">CREATE_EMPTY_CONTRACT_KEY_MAINTAINERS</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#daml-authorization-error">DAML_AUTHORIZATION_ERROR</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#daml-interpretation-error">DAML_INTERPRETATION_ERROR</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#daml-interpreter-invalid-argument">DAML_INTERPRETER_INVALID_ARGUMENT</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#disallowed-interface-exercise">DISALLOWED_INTERFACE_EXERCISE</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#disclosed-contract-key-hashing-error">DISCLOSED_CONTRACT_KEY_HASHING_ERROR</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#fetch-empty-contract-key-maintainers">FETCH_EMPTY_CONTRACT_KEY_MAINTAINERS</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#interpretation-dev-error">INTERPRETATION_DEV_ERROR</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#interpretation-user-error">INTERPRETATION_USER_ERROR</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#non-comparable-values">NON_COMPARABLE_VALUES</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#template-precondition-violated">TEMPLATE_PRECONDITION_VIOLATED</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#unhandled-exception">UNHANDLED_EXCEPTION</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#value-nesting">VALUE_NESTING</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#wrongly-typed-contract">WRONGLY_TYPED_CONTRACT</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#lookuperrors">3.2.1.3.1. LookupErrors</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#contract-key-not-found">CONTRACT_KEY_NOT_FOUND</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#upgradeerror">3.2.1.3.2. UpgradeError</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#contract-not-upgradable">CONTRACT_NOT_UPGRADABLE</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#interpretation-upgrade-error-downgrade-drop-defined-field">INTERPRETATION_UPGRADE_ERROR_DOWNGRADE_DROP_DEFINED_FIELD</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#interpretation-upgrade-error-downgrade-failed">INTERPRETATION_UPGRADE_ERROR_DOWNGRADE_FAILED</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#interpretation-upgrade-error-validation-failed">INTERPRETATION_UPGRADE_ERROR_VALIDATION_FAILED</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#interpretation-upgrade-error-view-mismatch">INTERPRETATION_UPGRADE_ERROR_VIEW_MISMATCH</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#adminserviceserrorgroup">3.2.2. AdminServicesErrorGroup</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#partymanagementserviceerrors">3.2.2.1. PartyManagementServiceErrors</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#concurrent-party-details-update-detected">CONCURRENT_PARTY_DETAILS_UPDATE_DETECTED</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#internal-party-record-already-exists">INTERNAL_PARTY_RECORD_ALREADY_EXISTS</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#internal-party-record-not-found">INTERNAL_PARTY_RECORD_NOT_FOUND</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#invalid-party-details-update-request">INVALID_PARTY_DETAILS_UPDATE_REQUEST</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#max-party-details-annotations-size-exceeded">MAX_PARTY_DETAILS_ANNOTATIONS_SIZE_EXCEEDED</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#party-not-found">PARTY_NOT_FOUND</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#usermanagementserviceerrors">3.2.2.2. UserManagementServiceErrors</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#concurrent-user-update-detected">CONCURRENT_USER_UPDATE_DETECTED</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#invalid-user-update-request">INVALID_USER_UPDATE_REQUEST</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#max-user-annotations-size-exceeded">MAX_USER_ANNOTATIONS_SIZE_EXCEEDED</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#too-many-user-rights">TOO_MANY_USER_RIGHTS</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#user-already-exists">USER_ALREADY_EXISTS</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#user-not-found">USER_NOT_FOUND</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#identityproviderconfigserviceerrors-canton-error-codes">3.2.2.3. IdentityProviderConfigServiceErrors</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#idp-config-already-exists-canton-error-codes">IDP_CONFIG_ALREADY_EXISTS</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#idp-config-by-issuer-not-found-canton-error-codes">IDP_CONFIG_BY_ISSUER_NOT_FOUND</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#idp-config-issuer-already-exists-canton-error-codes">IDP_CONFIG_ISSUER_ALREADY_EXISTS</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#idp-config-not-found-canton-error-codes">IDP_CONFIG_NOT_FOUND</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#invalid-identity-provider-update-request">INVALID_IDENTITY_PROVIDER_UPDATE_REQUEST</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#too-many-identity-provider-configs">TOO_MANY_IDENTITY_PROVIDER_CONFIGS</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#adminserviceerrors">3.2.3. AdminServiceErrors</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#configuration-entry-rejected">CONFIGURATION_ENTRY_REJECTED</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#internally-invalid-key">INTERNALLY_INVALID_KEY</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#package-upload-rejected">PACKAGE_UPLOAD_REJECTED</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#consistencyerrors">3.2.4. ConsistencyErrors</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#contract-not-found">CONTRACT_NOT_FOUND</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#disclosed-contract-invalid">DISCLOSED_CONTRACT_INVALID</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#duplicate-command">DUPLICATE_COMMAND</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#duplicate-contract-key">DUPLICATE_CONTRACT_KEY</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#inconsistent">INCONSISTENT</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#inconsistent-contracts">INCONSISTENT_CONTRACTS</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#inconsistent-contract-key">INCONSISTENT_CONTRACT_KEY</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#invalid-ledger-time">INVALID_LEDGER_TIME</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#submission-already-in-flight">SUBMISSION_ALREADY_IN_FLIGHT</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#packageserviceerrors">3.2.5. PackageServiceErrors</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#dar-not-self-consistent">DAR_NOT_SELF_CONSISTENT</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#dar-not-valid-upgrade">DAR_NOT_VALID_UPGRADE</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#dar-validation-error">DAR_VALIDATION_ERROR</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#known-dar-version">KNOWN_DAR_VERSION</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#package-service-internal-error">PACKAGE_SERVICE_INTERNAL_ERROR</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#shutdown-interrupted-package-vetting">SHUTDOWN_INTERRUPTED_PACKAGE_VETTING</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#reading">3.2.5.1. Reading</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#dar-parse-error">DAR_PARSE_ERROR</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#invalid-dar">INVALID_DAR</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#invalid-dar-file-name">INVALID_DAR_FILE_NAME</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#invalid-legacy-dar">INVALID_LEGACY_DAR</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#invalid-zip-entry">INVALID_ZIP_ENTRY</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#zip-bomb">ZIP_BOMB</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#writeservicerejectionerrors">3.2.6. WriteServiceRejectionErrors</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#disputed">DISPUTED</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#out-of-quota">OUT_OF_QUOTA</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#party-not-known-on-ledger">PARTY_NOT_KNOWN_ON_LEDGER</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#submitter-cannot-act-via-participant">SUBMITTER_CANNOT_ACT_VIA_PARTICIPANT</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#submitting-party-not-known-on-ledger">SUBMITTING_PARTY_NOT_KNOWN_ON_LEDGER</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#internal">3.2.6.1. Internal</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#internally-duplicate-keys">INTERNALLY_DUPLICATE_KEYS</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#internally-inconsistent-keys">INTERNALLY_INCONSISTENT_KEYS</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#requestvalidationerrors">3.2.7. RequestValidationErrors</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#invalid-argument">INVALID_ARGUMENT</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#invalid-deduplication-period">INVALID_DEDUPLICATION_PERIOD</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#invalid-field">INVALID_FIELD</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#ledger-id-mismatch">LEDGER_ID_MISMATCH</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#missing-field">MISSING_FIELD</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#non-hexadecimal-offset">NON_HEXADECIMAL_OFFSET</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#offset-after-ledger-end">OFFSET_AFTER_LEDGER_END</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#offset-out-of-range">OFFSET_OUT_OF_RANGE</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#participant-pruned-data-accessed">PARTICIPANT_PRUNED_DATA_ACCESSED</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#notfound">3.2.7.1. NotFound</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#ledger-configuration-not-found">LEDGER_CONFIGURATION_NOT_FOUND</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#no-templates-for-package-name-and-qualified-name">NO_TEMPLATES_FOR_PACKAGE_NAME_AND_QUALIFIED_NAME</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#package-names-not-found">PACKAGE_NAMES_NOT_FOUND</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#package-not-found">PACKAGE_NOT_FOUND</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#templates-or-interfaces-not-found">TEMPLATES_OR_INTERFACES_NOT_FOUND</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#transaction-not-found">TRANSACTION_NOT_FOUND</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#transactionerrorgroup">3.3. TransactionErrorGroup</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#transactionroutingerror">3.3.1. TransactionRoutingError</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#automatic-transfer-for-transaction-failed">AUTOMATIC_TRANSFER_FOR_TRANSACTION_FAILED</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#routing-internal-error">ROUTING_INTERNAL_ERROR</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#unable-to-get-topology-snapshot">UNABLE_TO_GET_TOPOLOGY_SNAPSHOT</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#malformedinputerrors">3.3.1.1. MalformedInputErrors</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#disclosed-contract-authentication-failed">DISCLOSED_CONTRACT_AUTHENTICATION_FAILED</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#invalid-disclosed-contract">INVALID_DISCLOSED_CONTRACT</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#invalid-domain-alias">INVALID_DOMAIN_ALIAS</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#invalid-domain-id">INVALID_DOMAIN_ID</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#invalid-party-identifier">INVALID_PARTY_IDENTIFIER</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#invalid-submitter">INVALID_SUBMITTER</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#topologyerrors">3.3.1.2. TopologyErrors</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#informees-not-active">INFORMEES_NOT_ACTIVE</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#not-connected-to-all-contract-domains">NOT_CONNECTED_TO_ALL_CONTRACT_DOMAINS</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#no-common-domain">NO_COMMON_DOMAIN</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#no-domain-for-submission">NO_DOMAIN_FOR_SUBMISSION</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#no-domain-on-which-all-submitters-can-submit">NO_DOMAIN_ON_WHICH_ALL_SUBMITTERS_CAN_SUBMIT</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#submitters-not-active">SUBMITTERS_NOT_ACTIVE</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#submitter-always-stakeholder">SUBMITTER_ALWAYS_STAKEHOLDER</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#unknown-contract-domains">UNKNOWN_CONTRACT_DOMAINS</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#unknown-informees">UNKNOWN_INFORMEES</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#unknown-submitters">UNKNOWN_SUBMITTERS</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#configurationerrors">3.3.1.3. ConfigurationErrors</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#input-contract-has-unauthenticated-id">INPUT_CONTRACT_HAS_UNAUTHENTICATED_ID</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#invalid-prescribed-domain-id">INVALID_PRESCRIBED_DOMAIN_ID</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#multi-domain-support-not-enabled">MULTI_DOMAIN_SUPPORT_NOT_ENABLED</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#submission-domain-not-ready">SUBMISSION_DOMAIN_NOT_READY</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#submissionerrors">3.3.2. SubmissionErrors</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#chosen-mediator-is-inactive">CHOSEN_MEDIATOR_IS_INACTIVE</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#contract-authentication-failed">CONTRACT_AUTHENTICATION_FAILED</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#domain-backpressure">DOMAIN_BACKPRESSURE</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#domain-without-mediator">DOMAIN_WITHOUT_MEDIATOR</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#malformed-request">MALFORMED_REQUEST</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#not-sequenced-timeout">NOT_SEQUENCED_TIMEOUT</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#package-not-vetted-by-recipients">PACKAGE_NOT_VETTED_BY_RECIPIENTS</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#participant-overloaded">PARTICIPANT_OVERLOADED</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#sequencer-request-failed">SEQUENCER_REQUEST_FAILED</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#submission-during-shutdown">SUBMISSION_DURING_SHUTDOWN</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#unknown-contract-domain">UNKNOWN_CONTRACT_DOMAIN</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#syncserviceinjectionerror">3.3.3. SyncServiceInjectionError</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#command-injection-failure">COMMAND_INJECTION_FAILURE</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#node-is-passive-replica">NODE_IS_PASSIVE_REPLICA</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#not-connected-to-any-domain">NOT_CONNECTED_TO_ANY_DOMAIN</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#localreject">3.3.4. LocalReject</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#malformedrejects">3.3.4.1. MalformedRejects</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#local-verdict-bad-root-hash-messages">LOCAL_VERDICT_BAD_ROOT_HASH_MESSAGES</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#local-verdict-creates-existing-contracts">LOCAL_VERDICT_CREATES_EXISTING_CONTRACTS</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#local-verdict-failed-model-conformance-check">LOCAL_VERDICT_FAILED_MODEL_CONFORMANCE_CHECK</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#local-verdict-malformed-payload">LOCAL_VERDICT_MALFORMED_PAYLOAD</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#local-verdict-malformed-request">LOCAL_VERDICT_MALFORMED_REQUEST</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#consistencyrejections">3.3.4.2. ConsistencyRejections</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#local-verdict-duplicate-key">LOCAL_VERDICT_DUPLICATE_KEY</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#local-verdict-inactive-contracts">LOCAL_VERDICT_INACTIVE_CONTRACTS</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#local-verdict-inconsistent-key">LOCAL_VERDICT_INCONSISTENT_KEY</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#local-verdict-locked-contracts">LOCAL_VERDICT_LOCKED_CONTRACTS</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#local-verdict-locked-keys">LOCAL_VERDICT_LOCKED_KEYS</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#timerejects">3.3.4.3. TimeRejects</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#local-verdict-ledger-time-out-of-bound">LOCAL_VERDICT_LEDGER_TIME_OUT_OF_BOUND</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#local-verdict-submission-time-out-of-bound">LOCAL_VERDICT_SUBMISSION_TIME_OUT_OF_BOUND</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#local-verdict-timeout">LOCAL_VERDICT_TIMEOUT</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#transferinrejects">3.3.4.4. TransferInRejects</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#transfer-in-already-completed">TRANSFER_IN_ALREADY_COMPLETED</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#transfer-in-contract-already-active">TRANSFER_IN_CONTRACT_ALREADY_ACTIVE</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#transfer-in-contract-already-archived">TRANSFER_IN_CONTRACT_ALREADY_ARCHIVED</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#transfer-in-contract-is-locked">TRANSFER_IN_CONTRACT_IS_LOCKED</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#transferoutrejects">3.3.4.5. TransferOutRejects</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#transfer-out-activeness-check-failed">TRANSFER_OUT_ACTIVENESS_CHECK_FAILED</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#commanddeduplicationerror">3.3.5. CommandDeduplicationError</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#malformed-deduplication-offset">MALFORMED_DEDUPLICATION_OFFSET</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#syncserviceerror">3.4. SyncServiceError</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#party-allocation-without-connected-domain">PARTY_ALLOCATION_WITHOUT_CONNECTED_DOMAIN</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#sync-service-alarm">SYNC_SERVICE_ALARM</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#sync-service-already-added">SYNC_SERVICE_ALREADY_ADDED</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#sync-service-domain-became-passive">SYNC_SERVICE_DOMAIN_BECAME_PASSIVE</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#sync-service-domain-disabled-us">SYNC_SERVICE_DOMAIN_DISABLED_US</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#sync-service-domain-disconnected">SYNC_SERVICE_DOMAIN_DISCONNECTED</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#sync-service-domain-must-be-offline">SYNC_SERVICE_DOMAIN_MUST_BE_OFFLINE</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#sync-service-domain-must-not-have-in-flight-transactions">SYNC_SERVICE_DOMAIN_MUST_NOT_HAVE_IN_FLIGHT_TRANSACTIONS</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#sync-service-domain-status-must-be-inactive">SYNC_SERVICE_DOMAIN_STATUS_MUST_BE_INACTIVE</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#sync-service-domain-status-not-active">SYNC_SERVICE_DOMAIN_STATUS_NOT_ACTIVE</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#sync-service-internal-error">SYNC_SERVICE_INTERNAL_ERROR</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#sync-service-unknown-domain">SYNC_SERVICE_UNKNOWN_DOMAIN</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#syncdomainmigrationerror">3.4.1. SyncDomainMigrationError</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#broken-domain-migration">BROKEN_DOMAIN_MIGRATION</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#invalid-domain-migration-request">INVALID_DOMAIN_MIGRATION_REQUEST</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#domainregistryerror">3.4.2. DomainRegistryError</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#domain-registry-internal-error">DOMAIN_REGISTRY_INTERNAL_ERROR</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#topology-conversion-error">TOPOLOGY_CONVERSION_ERROR</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#id183">3.4.2.1. ConfigurationErrors</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#cannot-issue-domain-trust-certificate">CANNOT_ISSUE_DOMAIN_TRUST_CERTIFICATE</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#domain-parameters-changed">DOMAIN_PARAMETERS_CHANGED</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#incompatible-unique-contract-keys-mode">INCOMPATIBLE_UNIQUE_CONTRACT_KEYS_MODE</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#invalid-domain-connection">INVALID_DOMAIN_CONNECTION</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#misconfigured-static-domain-parameters">MISCONFIGURED_STATIC_DOMAIN_PARAMETERS</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#sequencers-from-different-domains-are-configured">SEQUENCERS_FROM_DIFFERENT_DOMAINS_ARE_CONFIGURED</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#handshakeerrors">3.4.2.2. HandshakeErrors</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#domain-alias-duplication">DOMAIN_ALIAS_DUPLICATION</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#domain-crypto-handshake-failed">DOMAIN_CRYPTO_HANDSHAKE_FAILED</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#domain-handshake-failed">DOMAIN_HANDSHAKE_FAILED</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#domain-id-mismatch">DOMAIN_ID_MISMATCH</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#service-agreement-acceptance-failed">SERVICE_AGREEMENT_ACCEPTANCE_FAILED</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#connectionerrors">3.4.2.3. ConnectionErrors</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#domain-is-not-available">DOMAIN_IS_NOT_AVAILABLE</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#failed-to-connect-to-sequencer">FAILED_TO_CONNECT_TO_SEQUENCER</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#failed-to-connect-to-sequencers">FAILED_TO_CONNECT_TO_SEQUENCERS</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#grpc-connection-failure">GRPC_CONNECTION_FAILURE</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#participant-is-not-active">PARTICIPANT_IS_NOT_ACTIVE</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#adminworkflowservices">3.5. AdminWorkflowServices</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#can-not-automatically-vet-admin-workflow-package">CAN_NOT_AUTOMATICALLY_VET_ADMIN_WORKFLOW_PACKAGE</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#repairserviceerror">3.6. RepairServiceError</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#contract-purge-error">CONTRACT_PURGE_ERROR</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#contract-serialization-error">CONTRACT_SERIALIZATION_ERROR</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#import-acs-error">IMPORT_ACS_ERROR</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#inconsistent-acs-snapshot">INCONSISTENT_ACS_SNAPSHOT</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#invalid-acs-snapshot-timestamp">INVALID_ACS_SNAPSHOT_TIMESTAMP</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#invalid-argument-repair">INVALID_ARGUMENT_REPAIR</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#unavailable-acs-snapshot">UNAVAILABLE_ACS_SNAPSHOT</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#unsupported-protocol-version-participant">UNSUPPORTED_PROTOCOL_VERSION_PARTICIPANT</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#cantonpackageserviceerror">3.7. CantonPackageServiceError</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#dar-not-found">DAR_NOT_FOUND</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#package-missing-dependencies">PACKAGE_MISSING_DEPENDENCIES</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#package-or-dar-removal-error">PACKAGE_OR_DAR_REMOVAL_ERROR</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#ledgerapierrors">3.8. LedgerApiErrors</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#heap-memory-over-limit">HEAP_MEMORY_OVER_LIMIT</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#ledger-api-internal-error">LEDGER_API_INTERNAL_ERROR</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#maximum-number-of-streams">MAXIMUM_NUMBER_OF_STREAMS</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#participant-backpressure">PARTICIPANT_BACKPRESSURE</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#threadpool-overloaded">THREADPOOL_OVERLOADED</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#indexerrors">3.9. IndexErrors</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#databaseerrors">3.9.1. DatabaseErrors</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#index-db-invalid-result-set">INDEX_DB_INVALID_RESULT_SET</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#index-db-sql-non-transient-error">INDEX_DB_SQL_NON_TRANSIENT_ERROR</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#index-db-sql-transient-error">INDEX_DB_SQL_TRANSIENT_ERROR</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#pruningserviceerror">3.10. PruningServiceError</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#internal-pruning-error">INTERNAL_PRUNING_ERROR</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#non-canton-offset">NON_CANTON_OFFSET</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#no-internal-participant-data-before">NO_INTERNAL_PARTICIPANT_DATA_BEFORE</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#pruning-not-supported-in-community-edition">PRUNING_NOT_SUPPORTED_IN_COMMUNITY_EDITION</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#shutdown-interrupted-pruning">SHUTDOWN_INTERRUPTED_PRUNING</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#unsafe-to-prune">UNSAFE_TO_PRUNE</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#participantreplicationserviceerror">3.11. ParticipantReplicationServiceError</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#participant-replication-internal-error">PARTICIPANT_REPLICATION_INTERNAL_ERROR</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#participant-replication-not-supported-by-storage">PARTICIPANT_REPLICATION_NOT_SUPPORTED_BY_STORAGE</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#commonerrors">3.12. CommonErrors</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#request-deadline-exceeded">REQUEST_DEADLINE_EXCEEDED</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#request-time-out">REQUEST_TIME_OUT</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#server-is-shutting-down">SERVER_IS_SHUTTING_DOWN</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#service-internal-error">SERVICE_INTERNAL_ERROR</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#service-not-running">SERVICE_NOT_RUNNING</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#unsupported-operation">UNSUPPORTED_OPERATION</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#ethereumerrors">4. EthereumErrors</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#id235">4.1. ConfigurationErrors</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#ahead-of-head">AHEAD_OF_HEAD</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#attempt-to-change-immutable-value">ATTEMPT_TO_CHANGE_IMMUTABLE_VALUE</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#besu-version-mismatch">BESU_VERSION_MISMATCH</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#ethereum-cant-query-version">ETHEREUM_CANT_QUERY_VERSION</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#many-blocks-behind-head">MANY_BLOCKS_BEHIND_HEAD</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#not-free-gas-network">NOT_FREE_GAS_NETWORK</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#wrong-evm-bytecode">WRONG_EVM_BYTECODE</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#transactionerrors">4.2. TransactionErrors</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#ethereum-transaction-invalid">ETHEREUM_TRANSACTION_INVALID</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#ethereum-transaction-receipt-fetching-failed">ETHEREUM_TRANSACTION_RECEIPT_FETCHING_FAILED</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#ethereum-transaction-submission-failed">ETHEREUM_TRANSACTION_SUBMISSION_FAILED</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#topologymanagementerrorgroup">5. TopologyManagementErrorGroup</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#topologymanagererror">5.1. TopologyManagerError</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#duplicate-topology-transaction">DUPLICATE_TOPOLOGY_TRANSACTION</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#illegal-removal-of-domain-trust-certificate">ILLEGAL_REMOVAL_OF_DOMAIN_TRUST_CERTIFICATE</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#increase-of-ledger-time-record-time-tolerance">INCREASE_OF_LEDGER_TIME_RECORD_TIME_TOLERANCE</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#insufficient-keys">INSUFFICIENT_KEYS</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#invalid-domain">INVALID_DOMAIN</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#invalid-threshold">INVALID_THRESHOLD</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#invalid-topology-tx-signature-error">INVALID_TOPOLOGY_TX_SIGNATURE_ERROR</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#invalid-traffic-limit">INVALID_TRAFFIC_LIMIT</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#no-appropriate-signing-key-in-store">NO_APPROPRIATE_SIGNING_KEY_IN_STORE</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#no-corresponding-active-tx-to-revoke">NO_CORRESPONDING_ACTIVE_TX_TO_REVOKE</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#public-key-not-in-store">PUBLIC_KEY_NOT_IN_STORE</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#removing-key-dangling-transactions-must-be-forced">REMOVING_KEY_DANGLING_TRANSACTIONS_MUST_BE_FORCED</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#removing-last-key-must-be-forced">REMOVING_LAST_KEY_MUST_BE_FORCED</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#secret-key-not-in-store">SECRET_KEY_NOT_IN_STORE</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#serial-mismatch">SERIAL_MISMATCH</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#topology-manager-alarm">TOPOLOGY_MANAGER_ALARM</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#topology-manager-internal-error">TOPOLOGY_MANAGER_INTERNAL_ERROR</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#topology-mapping-already-exists">TOPOLOGY_MAPPING_ALREADY_EXISTS</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#unauthorized-topology-transaction">UNAUTHORIZED_TOPOLOGY_TRANSACTION</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#unknown-members">UNKNOWN_MEMBERS</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#domaintopologymanagererror">5.1.1. DomainTopologyManagerError</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#alien-domain-entities">ALIEN_DOMAIN_ENTITIES</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#failed-to-add-member">FAILED_TO_ADD_MEMBER</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#malicous-or-faulty-onboarding-request">MALICOUS_OR_FAULTY_ONBOARDING_REQUEST</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#participant-not-initialized">PARTICIPANT_NOT_INITIALIZED</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#wrong-domain">WRONG_DOMAIN</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#wrong-protocol-version">WRONG_PROTOCOL_VERSION</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#participanttopologymanagererror">5.1.2. ParticipantTopologyManagerError</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#cannot-vet-due-to-missing-packages">CANNOT_VET_DUE_TO_MISSING_PACKAGES</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#dangerous-key-use-command-requires-force">DANGEROUS_KEY_USE_COMMAND_REQUIRES_FORCE</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#dangerous-vetting-commands-require-force">DANGEROUS_VETTING_COMMANDS_REQUIRE_FORCE</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#dependencies-not-check-only-or-vetted">DEPENDENCIES_NOT_CHECK_ONLY_OR_VETTED</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#dependencies-not-vetted">DEPENDENCIES_NOT_VETTED</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#disable-party-with-active-contracts-requires-force">DISABLE_PARTY_WITH_ACTIVE_CONTRACTS_REQUIRES_FORCE</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#main-dar-package-referenced-externally">MAIN_DAR_PACKAGE_REFERENCED_EXTERNALLY</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#package-topology-state-update-timeout">PACKAGE_TOPOLOGY_STATE_UPDATE_TIMEOUT</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#uninitialized-participant">UNINITIALIZED_PARTICIPANT</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#domain">5.1.3. Domain</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#domain-node-initialisation-failed">DOMAIN_NODE_INITIALISATION_FAILED</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#grpcsequencerauthenticationservice">5.1.3.1. GrpcSequencerAuthenticationService</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#client-authentication-faulty">CLIENT_AUTHENTICATION_FAULTY</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#client-authentication-rejected">CLIENT_AUTHENTICATION_REJECTED</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#domaintopologysender">5.2. DomainTopologySender</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#topology-dispatching-degradation">TOPOLOGY_DISPATCHING_DEGRADATION</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#topology-dispatching-internal-error">TOPOLOGY_DISPATCHING_INTERNAL_ERROR</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#configerrors">6. ConfigErrors</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#cannot-parse-config-files">CANNOT_PARSE_CONFIG_FILES</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#cannot-read-config-files">CANNOT_READ_CONFIG_FILES</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#config-substitution-error">CONFIG_SUBSTITUTION_ERROR</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#config-validation-error">CONFIG_VALIDATION_ERROR</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#generic-config-error">GENERIC_CONFIG_ERROR</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#no-config-files">NO_CONFIG_FILES</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#commanderrors">7. CommandErrors</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#console-command-internal-error">CONSOLE_COMMAND_INTERNAL_ERROR</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#console-command-timed-out">CONSOLE_COMMAND_TIMED_OUT</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#node-not-started">NODE_NOT_STARTED</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#databasestorageerror">8. DatabaseStorageError</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#db-connection-lost">DB_CONNECTION_LOST</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#db-storage-degradation">DB_STORAGE_DEGRADATION</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#id298">9. HandshakeErrors</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#deprecated-protocol-version">DEPRECATED_PROTOCOL_VERSION</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#deprecating-protocol-version">DEPRECATING_PROTOCOL_VERSION</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#envelopeopenererror">10. EnvelopeOpenerError</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#event-deserialization-error">EVENT_DESERIALIZATION_ERROR</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#fabricerrors">11. FabricErrors</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#id303">11.1. ConfigurationErrors</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#fabric-ahead-of-head">FABRIC_AHEAD_OF_HEAD</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#fabric-many-blocks-behind-head">FABRIC_MANY_BLOCKS_BEHIND_HEAD</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#id307">11.2. TransactionErrors</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#fabric-transaction-invalid">FABRIC_TRANSACTION_INVALID</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#fabric-transaction-proposal-submission-failed">FABRIC_TRANSACTION_PROPOSAL_SUBMISSION_FAILED</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#fabric-transaction-submission-failed">FABRIC_TRANSACTION_SUBMISSION_FAILED</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#sequencererror">12. SequencerError</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#invalid-acknowledgement-signature">INVALID_ACKNOWLEDGEMENT_SIGNATURE</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#invalid-acknowledgement-timestamp">INVALID_ACKNOWLEDGEMENT_TIMESTAMP</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#invalid-envelope-signature">INVALID_ENVELOPE_SIGNATURE</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#invalid-ledger-event">INVALID_LEDGER_EVENT</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#invalid-sequencer-pruning-request-on-chain">INVALID_SEQUENCER_PRUNING_REQUEST_ON_CHAIN</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#invalid-submission-request-signature">INVALID_SUBMISSION_REQUEST_SIGNATURE</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#max-request-size-exceeded">MAX_REQUEST_SIZE_EXCEEDED</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#max-sequencing-time-exceeded">MAX_SEQUENCING_TIME_EXCEEDED</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#missing-submission-request-signature-timestamp">MISSING_SUBMISSION_REQUEST_SIGNATURE_TIMESTAMP</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#multiple-mediator-recipients">MULTIPLE_MEDIATOR_RECIPIENTS</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#payload-to-event-time-bound-exceeded">PAYLOAD_TO_EVENT_TIME_BOUND_EXCEEDED</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#enterprisegrpcvaultserviceerror">13. EnterpriseGrpcVaultServiceError</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#invalid-kms-key-id">INVALID_KMS_KEY_ID</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#no-encrypted-private-key-store-error">NO_ENCRYPTED_PRIVATE_KEY_STORE_ERROR</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#register-kms-key-internal-error">REGISTER_KMS_KEY_INTERNAL_ERROR</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#wrapper-key-already-in-use-error">WRAPPER_KEY_ALREADY_IN_USE_ERROR</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#wrapper-key-disabled-or-deleted-error">WRAPPER_KEY_DISABLED_OR_DELETED_ERROR</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#wrapper-key-not-exist-error">WRAPPER_KEY_NOT_EXIST_ERROR</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#wrapper-key-rotation-internal-error">WRAPPER_KEY_ROTATION_INTERNAL_ERROR</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#mediatorerror">14. MediatorError</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#mediator-internal-error">MEDIATOR_INTERNAL_ERROR</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#mediator-invalid-message">MEDIATOR_INVALID_MESSAGE</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#mediator-received-malformed-message">MEDIATOR_RECEIVED_MALFORMED_MESSAGE</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#mediator-says-tx-timed-out">MEDIATOR_SAYS_TX_TIMED_OUT</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#protodeserializationerror">15. ProtoDeserializationError</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#proto-deserialization-failure">PROTO_DESERIALIZATION_FAILURE</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#sequencererrors">16. SequencerErrors</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#sequencer-aggregate-submission-already-sent">SEQUENCER_AGGREGATE_SUBMISSION_ALREADY_SENT</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#sequencer-aggregate-submission-stuffing">SEQUENCER_AGGREGATE_SUBMISSION_STUFFING</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#sequencer-max-sequencing-time-too-far">SEQUENCER_MAX_SEQUENCING_TIME_TOO_FAR</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#sequencer-not-enough-traffic-credit">SEQUENCER_NOT_ENOUGH_TRAFFIC_CREDIT</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#sequencer-signing-timestamp-after-sequencing-timestamp">SEQUENCER_SIGNING_TIMESTAMP_AFTER_SEQUENCING_TIMESTAMP</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#sequencer-signing-timestamp-missing">SEQUENCER_SIGNING_TIMESTAMP_MISSING</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#sequencer-signing-timestamp-too-early">SEQUENCER_SIGNING_TIMESTAMP_TOO_EARLY</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#sequencer-submission-request-malformed">SEQUENCER_SUBMISSION_REQUEST_MALFORMED</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#sequencer-submission-request-refused">SEQUENCER_SUBMISSION_REQUEST_REFUSED</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#sequencer-tombstone-persisted">SEQUENCER_TOMBSTONE_PERSISTED</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#sequencer-unknown-recipients">SEQUENCER_UNKNOWN_RECIPIENTS</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#resilientsequencersubscription">17. ResilientSequencerSubscription</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#sequencer-fork-detected">SEQUENCER_FORK_DETECTED</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#sequencer-subscription-lost">SEQUENCER_SUBSCRIPTION_LOST</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#sequencersubscriptionerror">18. SequencerSubscriptionError</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#sequencer-tombstone-encountered">SEQUENCER_TOMBSTONE_ENCOUNTERED</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#clock">19. Clock</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#system-clock-running-backwards">SYSTEM_CLOCK_RUNNING_BACKWARDS</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../daml/troubleshooting.html">Troubleshooting</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../daml/troubleshooting.html#error-x-is-not-authorized-to-commit-an-update">Error: “&lt;X&gt; is not authorized to commit an update”</a></li>
<li class="toctree-l2"><a class="reference internal" href="../daml/troubleshooting.html#error-argument-is-not-of-serializable-type">Error: “Argument is not of serializable type”</a></li>
<li class="toctree-l2"><a class="reference internal" href="../daml/troubleshooting.html#error-recursion-limit-overflow-in-module">Error: “Recursion limit overflow in module”</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../daml/troubleshooting.html#solving-script-recursion-limits">Solving script recursion limits</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/troubleshooting.html#solving-datatype-recursion-limits">Solving datatype recursion limits</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../daml/troubleshooting.html#modeling-questions">Modeling Questions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../daml/troubleshooting.html#how-to-model-an-agreement-with-another-party">How To Model an Agreement With Another Party</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/troubleshooting.html#how-to-model-rights">How To Model Rights</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/troubleshooting.html#how-to-void-a-contract">How To Void a Contract</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/troubleshooting.html#how-to-represent-off-ledger-parties">How To Represent Off-ledger Parties</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/troubleshooting.html#how-to-limit-a-choice-by-time">How To Limit a Choice by Time</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/troubleshooting.html#how-to-model-a-mandatory-action">How To Model a Mandatory Action</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/troubleshooting.html#when-to-use-optional">When to Use Optional</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../daml/troubleshooting.html#testing-questions">Testing Questions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../daml/troubleshooting.html#how-to-test-that-a-contract-is-visible-to-a-party">How To Test That a Contract Is Visible to a Party</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/troubleshooting.html#how-to-test-that-an-update-action-cannot-be-committed">How To Test That an Update Action Cannot Be Committed</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../support/support.html">Get Help</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../support/support.html#support-expectations">Support Expectations</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../support/compatibility.html">Portability, Compatibility, and Support Durations</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../support/compatibility.html#ledger-api-compatibility-application-portability">Ledger API Compatibility: Application Portability</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../support/compatibility.html#list-of-ledger-api-versions-supported-by-daml">List of Ledger API Versions Supported by Daml</a></li>
<li class="toctree-l3"><a class="reference internal" href="../support/compatibility.html#summary-of-ledger-api-changes">Summary of Ledger API Changes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../support/compatibility.html#driver-and-participant-compatibility-network-upgradeability">Driver and Participant Compatibility: Network Upgradeability</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../support/compatibility.html#participant-database-migration">Participant database migration</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../support/compatibility.html#sdk-runtime-component-and-library-compatibility-daml-upgradeability">SDK, Runtime Component, and Library Compatibility: Daml Upgradeability</a></li>
<li class="toctree-l2"><a class="reference internal" href="../support/compatibility.html#ledger-api-support-duration">Ledger API Support Duration</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../support/overview.html">Daml Ecosystem Overview</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../support/overview.html#architecture">Architecture</a></li>
<li class="toctree-l2"><a class="reference internal" href="../support/overview.html#daml-networks">Daml Networks</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../support/overview.html#daml-drivers">Daml drivers</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../support/overview.html#participant-nodes">Participant Nodes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../support/overview.html#ledger-api">Ledger API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../support/overview.html#daml-components">Daml Components</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../support/overview.html#runtime-components">Runtime components</a></li>
<li class="toctree-l3"><a class="reference internal" href="../support/overview.html#libraries">Libraries</a></li>
<li class="toctree-l3"><a class="reference internal" href="../support/overview.html#generated-code">Generated code</a></li>
<li class="toctree-l3"><a class="reference internal" href="../support/overview.html#developer-tools-sdk">Developer tools / SDK</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../support/status-definitions.html">Status Definitions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../support/status-definitions.html#early-access-features">Early Access Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="../support/status-definitions.html#deprecation">Deprecation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../support/status-definitions.html#comparison-of-statuses">Comparison of Statuses</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../support/releases.html">Releases and Versioning</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../support/releases.html#versioning">Versioning</a></li>
<li class="toctree-l2"><a class="reference internal" href="../support/releases.html#cadence">Cadence</a></li>
<li class="toctree-l2"><a class="reference internal" href="../support/releases.html#support-duration">Support Duration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../support/releases.html#release-notes">Release Notes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../support/releases.html#process">Process</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../concepts/glossary.html">Glossary of Concepts</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../concepts/glossary.html#key-concepts">Key Concepts</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../concepts/glossary.html#daml">Daml</a></li>
<li class="toctree-l3"><a class="reference internal" href="../concepts/glossary.html#daml-language">Daml Language</a></li>
<li class="toctree-l3"><a class="reference internal" href="../concepts/glossary.html#daml-ledger">Daml Ledger</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../concepts/glossary.html#canton-ledger">Canton Ledger</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../concepts/glossary.html#canton-protocol">Canton Protocol</a></li>
<li class="toctree-l3"><a class="reference internal" href="../concepts/glossary.html#synchronization-technology">Synchronization Technology</a></li>
<li class="toctree-l3"><a class="reference internal" href="../concepts/glossary.html#daml-drivers">Daml Drivers</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../concepts/glossary.html#daml-language-concepts">Daml Language Concepts</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../concepts/glossary.html#contract">Contract</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../concepts/glossary.html#active-contract-archived-contract">Active Contract, Archived Contract</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../concepts/glossary.html#template">Template</a></li>
<li class="toctree-l3"><a class="reference internal" href="../concepts/glossary.html#choice">Choice</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../concepts/glossary.html#consuming-choice">Consuming Choice</a></li>
<li class="toctree-l4"><a class="reference internal" href="../concepts/glossary.html#nonconsuming-choice">Nonconsuming Choice</a></li>
<li class="toctree-l4"><a class="reference internal" href="../concepts/glossary.html#disjunction-choice-flexible-controllers">Disjunction Choice, Flexible Controllers</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../concepts/glossary.html#party">Party</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../concepts/glossary.html#signatory">Signatory</a></li>
<li class="toctree-l4"><a class="reference internal" href="../concepts/glossary.html#observer">Observer</a></li>
<li class="toctree-l4"><a class="reference internal" href="../concepts/glossary.html#controller">Controller</a></li>
<li class="toctree-l4"><a class="reference internal" href="../concepts/glossary.html#choice-observer">Choice Observer</a></li>
<li class="toctree-l4"><a class="reference internal" href="../concepts/glossary.html#stakeholder">Stakeholder</a></li>
<li class="toctree-l4"><a class="reference internal" href="../concepts/glossary.html#maintainer">Maintainer</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../concepts/glossary.html#authorization-signing">Authorization, Signing</a></li>
<li class="toctree-l3"><a class="reference internal" href="../concepts/glossary.html#standard-library">Standard Library</a></li>
<li class="toctree-l3"><a class="reference internal" href="../concepts/glossary.html#agreement">Agreement</a></li>
<li class="toctree-l3"><a class="reference internal" href="../concepts/glossary.html#create">Create</a></li>
<li class="toctree-l3"><a class="reference internal" href="../concepts/glossary.html#exercise">Exercise</a></li>
<li class="toctree-l3"><a class="reference internal" href="../concepts/glossary.html#daml-script">Daml Script</a></li>
<li class="toctree-l3"><a class="reference internal" href="../concepts/glossary.html#contract-key">Contract Key</a></li>
<li class="toctree-l3"><a class="reference internal" href="../concepts/glossary.html#dar-file-dalf-file">DAR File, DALF File</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../concepts/glossary.html#developer-tools">Developer Tools</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../concepts/glossary.html#assistant">Assistant</a></li>
<li class="toctree-l3"><a class="reference internal" href="../concepts/glossary.html#studio">Studio</a></li>
<li class="toctree-l3"><a class="reference internal" href="../concepts/glossary.html#sandbox">Sandbox</a></li>
<li class="toctree-l3"><a class="reference internal" href="../concepts/glossary.html#navigator-deprecated">Navigator (Deprecated)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../concepts/glossary.html#navigator-gui">Navigator GUI</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../concepts/glossary.html#building-applications">Building Applications</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../concepts/glossary.html#application-ledger-client-integration">Application, Ledger Client, Integration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../concepts/glossary.html#ledger-api">Ledger API</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../concepts/glossary.html#command-submission-service">Command Submission Service</a></li>
<li class="toctree-l4"><a class="reference internal" href="../concepts/glossary.html#command-completion-service">Command Completion Service</a></li>
<li class="toctree-l4"><a class="reference internal" href="../concepts/glossary.html#command-service">Command Service</a></li>
<li class="toctree-l4"><a class="reference internal" href="../concepts/glossary.html#transaction-service">Transaction Service</a></li>
<li class="toctree-l4"><a class="reference internal" href="../concepts/glossary.html#active-contract-service">Active Contract Service</a></li>
<li class="toctree-l4"><a class="reference internal" href="../concepts/glossary.html#package-service">Package Service</a></li>
<li class="toctree-l4"><a class="reference internal" href="../concepts/glossary.html#ledger-identity-service">Ledger Identity Service</a></li>
<li class="toctree-l4"><a class="reference internal" href="../concepts/glossary.html#ledger-configuration-service">Ledger Configuration Service</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../concepts/glossary.html#ledger-api-libraries">Ledger API Libraries</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../concepts/glossary.html#java-bindings">Java Bindings</a></li>
<li class="toctree-l4"><a class="reference internal" href="../concepts/glossary.html#python-bindings">Python Bindings</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../concepts/glossary.html#reading-from-the-ledger">Reading From the Ledger</a></li>
<li class="toctree-l3"><a class="reference internal" href="../concepts/glossary.html#submitting-commands-writing-to-the-ledger">Submitting Commands, Writing To the Ledger</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../concepts/glossary.html#commands">Commands</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../concepts/glossary.html#participant-node">Participant Node</a></li>
<li class="toctree-l3"><a class="reference internal" href="../concepts/glossary.html#sub-transaction-privacy">Sub-transaction Privacy</a></li>
<li class="toctree-l3"><a class="reference internal" href="../concepts/glossary.html#id2">Daml-LF</a></li>
<li class="toctree-l3"><a class="reference internal" href="../concepts/glossary.html#composability">Composability</a></li>
<li class="toctree-l3"><a class="reference internal" href="../concepts/glossary.html#trust-domain">Trust Domain</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../concepts/glossary.html#canton-concepts">Canton Concepts</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../concepts/glossary.html#synchronization-domain">Synchronization Domain</a></li>
<li class="toctree-l3"><a class="reference internal" href="../concepts/glossary.html#private-contract-store">Private Contract Store</a></li>
<li class="toctree-l3"><a class="reference internal" href="../concepts/glossary.html#virtual-global-ledger">Virtual Global Ledger</a></li>
<li class="toctree-l3"><a class="reference internal" href="../concepts/glossary.html#mediator">Mediator</a></li>
<li class="toctree-l3"><a class="reference internal" href="../concepts/glossary.html#sequencer">Sequencer</a></li>
<li class="toctree-l3"><a class="reference internal" href="../concepts/glossary.html#synchronization-domain-identity-manager">Synchronization Domain Identity Manager</a></li>
<li class="toctree-l3"><a class="reference internal" href="../concepts/glossary.html#consensus">Consensus</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../reference/example-applications.html">Daml Example Applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/daml-language-references.html">Daml Language References</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../reference/cheat-sheet.html">Daml Language Cheat Sheet</a></li>
<li class="toctree-l2"><a class="reference internal" href="../daml/reference/index.html">Language Reference</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../daml/reference/structure.html">Overview: Template Structure</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml/reference/structure.html#template-outline-structure">Template Outline Structure</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/reference/structure.html#choice-structure">Choice Structure</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/reference/structure.html#choice-body-structure">Choice Body Structure</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml/reference/templates.html">Reference: Templates</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml/reference/templates.html#template-name">Template Name</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/reference/templates.html#template-parameters">Template Parameters</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/reference/templates.html#implicit-record">Implicit Record</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/reference/templates.html#this-and-self"><code class="docutils literal notranslate"><span class="pre">this</span></code> and <code class="docutils literal notranslate"><span class="pre">self</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/reference/templates.html#template-local-definitions-deprecated">Template-local Definitions (Deprecated)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/reference/templates.html#signatory-parties">Signatory Parties</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/reference/templates.html#observers">Observers</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/reference/templates.html#choices">Choices</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/reference/templates.html#serializable-types">Serializable Types</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/reference/templates.html#agreements-deprecated">Agreements (Deprecated)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/reference/templates.html#preconditions">Preconditions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/reference/templates.html#contract-keys-and-maintainers">Contract Keys and Maintainers</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/reference/templates.html#interface-instances">Interface Instances</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml/reference/choices.html">Reference: Choices</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml/reference/choices.html#choice-name">Choice Name</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/reference/choices.html#controllers">Controllers</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/reference/choices.html#choice-observers">Choice Observers</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/reference/choices.html#preconsuming-choices">Preconsuming Choices</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/reference/choices.html#postconsuming-choices">Postconsuming Choices</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/reference/choices.html#non-consuming-choices">Non-consuming Choices</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/reference/choices.html#choice-arguments">Choice Arguments</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/reference/choices.html#choice-body">Choice Body</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml/reference/updates.html">Reference: Updates</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml/reference/updates.html#background">Background</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/reference/updates.html#binding-variables">Binding Variables</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/reference/updates.html#do">do</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/reference/updates.html#archive">archive</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/reference/updates.html#create">create</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/reference/updates.html#exercise">exercise</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/reference/updates.html#exercisebykey">exerciseByKey</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/reference/updates.html#fetch">fetch</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/reference/updates.html#fetchbykey">fetchByKey</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/reference/updates.html#visiblebykey">visibleByKey</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/reference/updates.html#lookupbykey">lookupByKey</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/reference/updates.html#abort">abort</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/reference/updates.html#assert">assert</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/reference/updates.html#gettime">getTime</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/reference/updates.html#return">return</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/reference/updates.html#let">let</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/reference/updates.html#this">this</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml/reference/data-types.html">Reference: Data types</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml/reference/data-types.html#built-in-types">Built-in Types</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/reference/data-types.html#lists">Lists</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/reference/data-types.html#records-and-record-types">Records and Record Types</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/reference/data-types.html#type-synonyms">Type Synonyms</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/reference/data-types.html#algebraic-data-types">Algebraic Data Types</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml/reference/working-with.html">Reference: Built-in functions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml/reference/working-with.html#work-with-time">Work with Time</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/reference/working-with.html#work-with-numbers">Work with Numbers</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/reference/working-with.html#work-with-text">Work with Text</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/reference/working-with.html#work-with-lists">Work with Lists</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml/reference/expressions.html">Reference: Expressions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml/reference/expressions.html#definitions">Definitions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/reference/expressions.html#arithmetic-operators">Arithmetic Operators</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/reference/expressions.html#comparison-operators">Comparison Operators</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/reference/expressions.html#logical-operators">Logical Operators</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/reference/expressions.html#if-then-else">If-then-else</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/reference/expressions.html#let">Let</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml/reference/functions.html">Reference: Functions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml/reference/functions.html#defining-functions">Defining Functions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/reference/functions.html#partial-application">Partial Application</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/reference/functions.html#functions-are-values">Functions are Values</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/reference/functions.html#generic-functions">Generic Functions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml/reference/file-structure.html">Reference: File structure</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml/reference/file-structure.html#file-structure">File Structure</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/reference/file-structure.html#imports">Imports</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/reference/file-structure.html#libraries">Libraries</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/reference/file-structure.html#comments">Comments</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/reference/file-structure.html#contract-identifiers">Contract Identifiers</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml/reference/packages.html">Reference: Packages</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml/reference/packages.html#building-daml-archives">Building Daml Archives</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/reference/packages.html#inspecting-dars">Inspecting DARs</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/reference/packages.html#import-daml-packages">Import Daml Packages</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/reference/packages.html#handling-module-name-collisions">Handling Module Name Collisions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml/reference/contract-keys.html">Reference: Contract keys</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml/reference/contract-keys.html#what-can-be-a-contract-key">What Can Be a Contract Key</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/reference/contract-keys.html#specify-maintainers">Specify Maintainers</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/reference/contract-keys.html#contract-lookups">Contract Lookups</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/reference/contract-keys.html#exercisebykey">exerciseByKey</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/reference/contract-keys.html#example">Example</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml/reference/exceptions.html">Reference: Exceptions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml/reference/exceptions.html#builtin-errors">Builtin Errors</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/reference/exceptions.html#user-defined-exceptions">User-defined Exceptions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/reference/exceptions.html#throw-exceptions">Throw Exceptions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/reference/exceptions.html#catch-exceptions">Catch Exceptions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml/reference/interfaces.html">Reference: Interfaces</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml/reference/interfaces.html#configuration">Configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/reference/interfaces.html#interface-declaration">Interface Declaration</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/reference/interfaces.html#interface-instances">Interface Instances</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/reference/interfaces.html#interface-functions">Interface Functions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/reference/interfaces.html#required-interfaces">Required Interfaces</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../daml/stdlib/index.html">The Standard Library</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../daml/stdlib/Prelude.html">Prelude</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml/stdlib/Prelude.html#typeclasses">Typeclasses</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/stdlib/Prelude.html#data-types">Data Types</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/stdlib/Prelude.html#functions">Functions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml/stdlib/DA-Action.html">DA.Action</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml/stdlib/DA-Action.html#functions">Functions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml/stdlib/DA-Action-State.html">DA.Action.State</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml/stdlib/DA-Action-State.html#data-types">Data Types</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/stdlib/DA-Action-State.html#functions">Functions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml/stdlib/DA-Action-State-Class.html">DA.Action.State.Class</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml/stdlib/DA-Action-State-Class.html#typeclasses">Typeclasses</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml/stdlib/DA-Assert.html">DA.Assert</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml/stdlib/DA-Assert.html#functions">Functions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml/stdlib/DA-Bifunctor.html">DA.Bifunctor</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml/stdlib/DA-Bifunctor.html#typeclasses">Typeclasses</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml/stdlib/DA-BigNumeric.html">DA.BigNumeric</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml/stdlib/DA-BigNumeric.html#functions">Functions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml/stdlib/DA-Date.html">DA.Date</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml/stdlib/DA-Date.html#data-types">Data Types</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/stdlib/DA-Date.html#functions">Functions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml/stdlib/DA-Either.html">DA.Either</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml/stdlib/DA-Either.html#functions">Functions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml/stdlib/DA-Exception.html">DA.Exception</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml/stdlib/DA-Exception.html#typeclasses">Typeclasses</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/stdlib/DA-Exception.html#data-types">Data Types</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml/stdlib/DA-Foldable.html">DA.Foldable</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml/stdlib/DA-Foldable.html#typeclasses">Typeclasses</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/stdlib/DA-Foldable.html#functions">Functions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml/stdlib/DA-Functor.html">DA.Functor</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml/stdlib/DA-Functor.html#functions">Functions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml/stdlib/DA-Internal-Interface-AnyView.html">DA.Internal.Interface.AnyView</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml/stdlib/DA-Internal-Interface-AnyView.html#typeclasses">Typeclasses</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/stdlib/DA-Internal-Interface-AnyView.html#functions">Functions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml/stdlib/DA-Internal-Interface-AnyView-Types.html">DA.Internal.Interface.AnyView.Types</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml/stdlib/DA-Internal-Interface-AnyView-Types.html#data-types">Data Types</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml/stdlib/DA-List.html">DA.List</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml/stdlib/DA-List.html#functions">Functions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml/stdlib/DA-List-BuiltinOrder.html">DA.List.BuiltinOrder</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml/stdlib/DA-List-BuiltinOrder.html#functions">Functions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml/stdlib/DA-List-Total.html">DA.List.Total</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml/stdlib/DA-List-Total.html#functions">Functions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml/stdlib/DA-Logic.html">DA.Logic</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml/stdlib/DA-Logic.html#data-types">Data Types</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/stdlib/DA-Logic.html#functions">Functions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml/stdlib/DA-Map.html">DA.Map</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml/stdlib/DA-Map.html#functions">Functions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml/stdlib/DA-Math.html">DA.Math</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml/stdlib/DA-Math.html#functions">Functions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml/stdlib/DA-Monoid.html">DA.Monoid</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml/stdlib/DA-Monoid.html#data-types">Data Types</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml/stdlib/DA-NonEmpty.html">DA.NonEmpty</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml/stdlib/DA-NonEmpty.html#functions">Functions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml/stdlib/DA-NonEmpty-Types.html">DA.NonEmpty.Types</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml/stdlib/DA-NonEmpty-Types.html#data-types">Data Types</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml/stdlib/DA-Numeric.html">DA.Numeric</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml/stdlib/DA-Numeric.html#functions">Functions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml/stdlib/DA-Optional.html">DA.Optional</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml/stdlib/DA-Optional.html#functions">Functions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml/stdlib/DA-Record.html">DA.Record</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml/stdlib/DA-Record.html#typeclasses">Typeclasses</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml/stdlib/DA-Semigroup.html">DA.Semigroup</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml/stdlib/DA-Semigroup.html#data-types">Data Types</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml/stdlib/DA-Set.html">DA.Set</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml/stdlib/DA-Set.html#data-types">Data Types</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/stdlib/DA-Set.html#functions">Functions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml/stdlib/DA-Stack.html">DA.Stack</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml/stdlib/DA-Stack.html#data-types">Data Types</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/stdlib/DA-Stack.html#functions">Functions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml/stdlib/DA-Text.html">DA.Text</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml/stdlib/DA-Text.html#functions">Functions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml/stdlib/DA-TextMap.html">DA.TextMap</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml/stdlib/DA-TextMap.html#functions">Functions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml/stdlib/DA-Time.html">DA.Time</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml/stdlib/DA-Time.html#data-types">Data Types</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/stdlib/DA-Time.html#functions">Functions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml/stdlib/DA-Traversable.html">DA.Traversable</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml/stdlib/DA-Traversable.html#typeclasses">Typeclasses</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/stdlib/DA-Traversable.html#functions">Functions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml/stdlib/DA-Tuple.html">DA.Tuple</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml/stdlib/DA-Tuple.html#functions">Functions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml/stdlib/DA-Validation.html">DA.Validation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml/stdlib/DA-Validation.html#data-types">Data Types</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/stdlib/DA-Validation.html#functions">Functions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml/stdlib/GHC-Show-Text.html">GHC.Show.Text</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml/stdlib/GHC-Show-Text.html#functions">Functions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml/stdlib/GHC-Tuple-Check.html">GHC.Tuple.Check</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml/stdlib/GHC-Tuple-Check.html#functions">Functions</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../daml-script/api/index.html">Daml Script Library</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../daml-script/api/Daml-Script.html">Daml.Script</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml-script/api/Daml-Script.html#data-types">Data Types</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml-script/api/Daml-Script.html#functions">Functions</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../triggers/api/index.html">Daml Trigger Library</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../triggers/api/Daml-Trigger.html">Daml.Trigger</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../triggers/api/Daml-Trigger.html#typeclasses">Typeclasses</a></li>
<li class="toctree-l4"><a class="reference internal" href="../triggers/api/Daml-Trigger.html#data-types">Data Types</a></li>
<li class="toctree-l4"><a class="reference internal" href="../triggers/api/Daml-Trigger.html#functions">Functions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../triggers/api/Daml-Trigger-Assert.html">Daml.Trigger.Assert</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../triggers/api/Daml-Trigger-Assert.html#data-types">Data Types</a></li>
<li class="toctree-l4"><a class="reference internal" href="../triggers/api/Daml-Trigger-Assert.html#functions">Functions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../triggers/api/Daml-Trigger-LowLevel.html">Daml.Trigger.LowLevel</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../triggers/api/Daml-Trigger-LowLevel.html#typeclasses">Typeclasses</a></li>
<li class="toctree-l4"><a class="reference internal" href="../triggers/api/Daml-Trigger-LowLevel.html#data-types">Data Types</a></li>
<li class="toctree-l4"><a class="reference internal" href="../triggers/api/Daml-Trigger-LowLevel.html#functions">Functions</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../reference/daml-ledger-references.html">Daml Ledger References</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../concepts/ledger-model/index.html">Daml Ledger Model Concepts</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../concepts/ledger-model/ledger-structure.html">Structure</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../concepts/ledger-model/ledger-structure.html#actions-and-transactions">Actions and Transactions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../concepts/ledger-model/ledger-structure.html#ledgers">Ledgers</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../concepts/ledger-model/ledger-integrity.html">Integrity</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../concepts/ledger-model/ledger-integrity.html#valid-ledgers">Valid Ledgers</a></li>
<li class="toctree-l4"><a class="reference internal" href="../concepts/ledger-model/ledger-integrity.html#consistency">Consistency</a></li>
<li class="toctree-l4"><a class="reference internal" href="../concepts/ledger-model/ledger-integrity.html#conformance">Conformance</a></li>
<li class="toctree-l4"><a class="reference internal" href="../concepts/ledger-model/ledger-integrity.html#authorization">Authorization</a></li>
<li class="toctree-l4"><a class="reference internal" href="../concepts/ledger-model/ledger-integrity.html#valid-ledgers-obligations-offers-and-rights">Valid Ledgers, Obligations, Offers and Rights</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../concepts/local-ledger.html">Causality and Local Daml Ledgers</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../concepts/local-ledger.html#causality-examples">Causality Examples</a></li>
<li class="toctree-l4"><a class="reference internal" href="../concepts/local-ledger.html#causality-graphs">Causality Graphs</a></li>
<li class="toctree-l4"><a class="reference internal" href="../concepts/local-ledger.html#local-ledgers">Local Ledgers</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../concepts/ledger-model/ledger-privacy.html">Privacy</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../concepts/ledger-model/ledger-privacy.html#contract-observers-and-stakeholders">Contract Observers and Stakeholders</a></li>
<li class="toctree-l4"><a class="reference internal" href="../concepts/ledger-model/ledger-privacy.html#choice-observers">Choice Observers</a></li>
<li class="toctree-l4"><a class="reference internal" href="../concepts/ledger-model/ledger-privacy.html#projections">Projections</a></li>
<li class="toctree-l4"><a class="reference internal" href="../concepts/ledger-model/ledger-privacy.html#privacy-through-authorization">Privacy Through Authorization</a></li>
<li class="toctree-l4"><a class="reference internal" href="../concepts/ledger-model/ledger-privacy.html#divulgence-when-non-stakeholders-see-contracts">Divulgence: When Non-Stakeholders See Contracts</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../concepts/ledger-model/ledger-daml.html">Daml: Define Contract Models Compactly</a></li>
<li class="toctree-l3"><a class="reference internal" href="../concepts/ledger-model/ledger-exceptions.html">Exceptions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../concepts/ledger-model/ledger-exceptions.html#structure">Structure</a></li>
<li class="toctree-l4"><a class="reference internal" href="../concepts/ledger-model/ledger-exceptions.html#consistency">Consistency</a></li>
<li class="toctree-l4"><a class="reference internal" href="../concepts/ledger-model/ledger-exceptions.html#transaction-normalization">Transaction Normalization</a></li>
<li class="toctree-l4"><a class="reference internal" href="../concepts/ledger-model/ledger-exceptions.html#authorization">Authorization</a></li>
<li class="toctree-l4"><a class="reference internal" href="../concepts/ledger-model/ledger-exceptions.html#privacy">Privacy</a></li>
<li class="toctree-l4"><a class="reference internal" href="../concepts/ledger-model/ledger-exceptions.html#relation-to-daml-exceptions">Relation to Daml Exceptions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../concepts/identity-and-package-management.html">Identity and Package Management</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../concepts/identity-and-package-management.html#identity-management">Identity Management</a></li>
<li class="toctree-l4"><a class="reference internal" href="../concepts/identity-and-package-management.html#package-management">Package Management</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../concepts/time.html">Time on Daml Ledgers</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../concepts/time.html#ledger-time">Ledger Time</a></li>
<li class="toctree-l4"><a class="reference internal" href="../concepts/time.html#record-time">Record Time</a></li>
<li class="toctree-l4"><a class="reference internal" href="../concepts/time.html#guarantees">Guarantees</a></li>
<li class="toctree-l4"><a class="reference internal" href="../concepts/time.html#ledger-time-model">Ledger Time Model</a></li>
<li class="toctree-l4"><a class="reference internal" href="../concepts/time.html#assign-ledger-time">Assign Ledger Time</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../concepts/ledger-model/upgrade-model-in-depth.html">Smart Contract Upgrade In Depth</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../concepts/ledger-model/upgrade-model-in-depth.html#static-checks">Static Checks</a></li>
<li class="toctree-l4"><a class="reference internal" href="../concepts/ledger-model/upgrade-model-in-depth.html#data-transformation-runtime-semantics">Data Transformation: Runtime Semantics</a></li>
<li class="toctree-l4"><a class="reference internal" href="../concepts/ledger-model/upgrade-model-in-depth.html#lf-1-17-values-in-the-ledger-api">LF 1.17 Values in the Ledger API</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../reference/canton-advanced-architecture.html">Canton Advanced Architecture</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/contract_keys.html">Contract Keys in Canton</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/contract_keys.html#synchronization-domains-with-uniqueness-guarantees">Synchronization Domains with Uniqueness Guarantees</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/contract_keys.html#non-unique-contract-keys-mode">Non-Unique Contract Keys Mode</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/architecture/domains/domains.html">Domain Architecture and Integrations</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/architecture/domains/domains.html#synchronization-domain-specific-requirements">Synchronization Domain-Specific Requirements</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/architecture/domains/domains.html#synchronization-domain-internal-components">Synchronization Domain-Internal Components</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/architecture/domains/domains.html#drivers">Drivers</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/architecture/domains/ethereum.html">Canton Domain on Ethereum</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/architecture/domains/fabric.html">Canton Domain on Fabric</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/architecture/identity.html">Identity Management</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/architecture/identity.html#identity-providing-service">Identity Providing Service</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/architecture/identity.html#identity-management-design">Identity Management Design</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/architecture/identity.html#implementation">Implementation</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/architecture/requirements/requirements.html">Canton High-Level Requirements</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/architecture/requirements/requirements.html#functional-requirements">Functional requirements</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/architecture/requirements/requirements.html#resource-limits">Resource limits</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/architecture/requirements/requirements.html#non-functional-requirements">Non-functional requirements</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/architecture/requirements/requirements.html#known-limitations">Known limitations</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/architecture/requirements/requirements.html#requirement-exceptions-notes">Requirement Exceptions: Notes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/architecture/research.html">Research Publications</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/architecture/security.html">Security Architecture</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/architecture/security.html#secure-cryptographic-private-key-storage">Secure Cryptographic Private Key Storage</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/architecture/security.html#resilience-to-malicious-participants">Resilience to Malicious Participants</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/architecture/security.html#consensus-transparency">Consensus &amp; Transparency</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../ops/system_architecture_faq.html">System Architecture FAQ</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../ops/system_architecture_faq.html#what-does-the-sequencer-do">What does the Sequencer do?</a></li>
<li class="toctree-l4"><a class="reference internal" href="../ops/system_architecture_faq.html#how-does-canton-process-a-transaction">How does Canton process a transaction?</a></li>
<li class="toctree-l4"><a class="reference internal" href="../ops/system_architecture_faq.html#how-does-canton-ensure-privacy">How does Canton ensure privacy?</a></li>
<li class="toctree-l4"><a class="reference internal" href="../ops/system_architecture_faq.html#where-does-the-golden-source-of-daml-ledger-data-live-in-canton">Where does “the golden source” of Daml Ledger data live in Canton?</a></li>
<li class="toctree-l4"><a class="reference internal" href="../ops/system_architecture_faq.html#how-is-canton-able-to-recover-from-data-loss">How is Canton able to recover from data loss?</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../canton/usermanual/FAQ.html">Canton Frequently Asked Questions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/FAQ.html#log-messages">Log Messages</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/FAQ.html#database-task-queue-full">Database task queue full</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/FAQ.html#serialization-exception">Serialization Exception</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/FAQ.html#console-commands">Console Commands</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/FAQ.html#i-received-an-error-saying-that-the-domainalias-i-used-was-too-long-where-i-can-see-the-limits-of-string-types-in-canton">I received an error saying that the DomainAlias I used was too long. Where I can see the limits of String types in Canton?</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/FAQ.html#bootstrap-scripts">Bootstrap Scripts</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/FAQ.html#why-do-you-have-an-additional-new-line-between-each-line-in-your-example-scripts">Why do you have an additional new line between each line in your example scripts?</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/FAQ.html#how-can-i-use-nested-import-statements-to-split-my-script-into-multiple-files">How can I use nested import statements to split my script into multiple files?</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/FAQ.html#how-do-i-write-data-to-a-file-and-how-do-i-read-it-back">How do I write data to a file and how do I read it back?</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/FAQ.html#why-is-canton-complaining-about-my-database-version">Why is Canton complaining about my database version?</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/FAQ.html#postgres">Postgres</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/FAQ.html#oracle">Oracle</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/FAQ.html#using-non-standard-database-versions">Using non-standard database versions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/FAQ.html#how-do-i-enable-unsupported-features">How do I enable unsupported features?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/FAQ.html#how-do-i-enable-beta-features">How do I enable beta features?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/FAQ.html#how-to-troubleshoot-included-configuration-files">How to troubleshoot included configuration files?</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../concepts/test-evidence.html">Test Evidence</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Early Access</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../concepts/interoperability.html">Daml Ledger Interoperability</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../concepts/interoperability.html#interoperability-examples">Interoperability Examples</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../concepts/interoperability.html#topology">Topology</a></li>
<li class="toctree-l3"><a class="reference internal" href="../concepts/interoperability.html#aggregation-at-the-participant">Aggregation at the Participant</a></li>
<li class="toctree-l3"><a class="reference internal" href="../concepts/interoperability.html#enter-and-leave-events">Enter and Leave Events</a></li>
<li class="toctree-l3"><a class="reference internal" href="../concepts/interoperability.html#cross-ledger-transactions">Cross-ledger Transactions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../concepts/interoperability.html#multi-ledger-causality-graphs">Multi-ledger Causality Graphs</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../concepts/interoperability.html#consistency">Consistency</a></li>
<li class="toctree-l3"><a class="reference internal" href="../concepts/interoperability.html#minimality-and-reduction">Minimality and Reduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../concepts/interoperability.html#from-multi-ledger-causality-graphs-to-ledgers">From Multi-ledger Causality Graphs to Ledgers</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../concepts/interoperability.html#ledger-aware-projection">Ledger-aware Projection</a></li>
<li class="toctree-l2"><a class="reference internal" href="../concepts/interoperability.html#ledger-api-ordering-guarantees">Ledger API Ordering Guarantees</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../tools/non-repudiation.html">Non-repudiation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../tools/non-repudiation.html#architecture">Architecture</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tools/non-repudiation.html#run-the-server-side-components">Run the Server-side Components</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tools/non-repudiation.html#use-the-client">Use the Client</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tools/non-repudiation.html#non-repudiation-over-the-http-json-api">Non-repudiation Over the HTTP JSON API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tools/non-repudiation.html#tls-support">TLS Support</a></li>
</ul>
</li>
</ul>

          
          
          
          <div class="pdf-download"><a href="../_downloads/DamlEnterprise2.10.1.pdf" download>Download as PDF</a></div>
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <div class="topbar fixed">
        
        <nav class="wy-nav-top" aria-label="top navigation">
          
          <i data-toggle="wy-nav-top" class="wy-nav-top-toggle"></i>
          
        </nav>
        <!-- Copyright (c) 2023 Digital Asset (Switzerland) GmbH and/or its affiliates. All rights reserved. -->
<!-- SPDX-License-Identifier: Apache-2.0 -->

<div class="navbar">
    <h1><img src="../_static/images/Daml_Logo_Blue.svg"></h1>
    <div class="navbar-menu">
        <div class="da-menu-item da-menu-depth-1" role="menu">
            <a href="https://www.digitalasset.com/developers" role="menuitem" class="da-menu-link">Developers</a>
        </div>
        <div class="da-menu-item da-menu-depth-1" role="menu">
            <a href="https://www.digitalasset.com/products" role="menuitem" class="da-menu-link">Products</a>
        </div>
        <div class="da-menu-item da-menu-depth-1" role="menu">
            <a href="https://www.digitalasset.com" role="menuitem" class="da-menu-link">Company</a>
        </div>
    </div>
</div>

        <div class="version ">
          <span class="hide-mobile">Version&nbsp;</span><span class="version_switcher_placeholder"></span>
          
        </div>


        <!-- Copyright (c) 2023 Digital Asset (Switzerland) GmbH and/or its affiliates. All rights reserved. -->
<!-- SPDX-License-Identifier: Apache-2.0 -->
<div class="search-inline">
    <div id="rtd-search-inline-form" class="wy-form">
        <input type="text" class="search-inline-input" placeholder="Search" name="q">
        <img src="../_static/images/Search.svg" class="search-inline-img"/>
    </div>
    <div class="search-alert">
        Please enter at least 3 letters.
    </div>
    <div id="search-inline-results" class="search-inline-results">
        
    </div>
</div>
          <!-- Copyright (c) 2023 Digital Asset (Switzerland) GmbH and/or its affiliates. All rights reserved. -->
<!-- SPDX-License-Identifier: Apache-2.0 -->

<div class="content-menu collapsed">
    <span class="content-menu-title">In This Section</span>
    <span class="content-menu-expand"></span>
    <div class="content-menu-wrapper">
        
        <!-- Local TOC -->
        <div class="content-menu-toc"><ul>
<li><a class="reference internal" href="#">PQS</a><ul>
<li><a class="reference internal" href="#introduction">Introduction</a><ul>
<li><a class="reference internal" href="#audience">Audience</a></li>
<li><a class="reference internal" href="#purpose">Purpose</a></li>
<li><a class="reference internal" href="#operational-architecture">Operational Architecture</a></li>
<li><a class="reference internal" href="#key-feature-summary">Key Feature Summary</a></li>
<li><a class="reference internal" href="#sections">Sections</a></li>
</ul>
</li>
<li><a class="reference internal" href="#getting-started">Getting Started</a><ul>
<li><a class="reference internal" href="#pre-requisites">Pre-requisites</a></li>
<li><a class="reference internal" href="#running-pqs">Running PQS</a><ul>
<li><a class="reference internal" href="#daml-platform-support">Daml Platform Support</a></li>
<li><a class="reference internal" href="#preparing-the-database">Preparing the Database</a></li>
<li><a class="reference internal" href="#running-the-pipeline">Running the Pipeline</a></li>
<li><a class="reference internal" href="#auth">Auth</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#database">Database</a><ul>
<li><a class="reference internal" href="#ledger-source">Ledger Source</a></li>
<li><a class="reference internal" href="#transaction-data-source">Transaction Data Source</a></li>
<li><a class="reference internal" href="#postgresql-schema">PostgreSQL Schema</a><ul>
<li><a class="reference internal" href="#objectives">Objectives</a></li>
<li><a class="reference internal" href="#design">Design</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#configuration">Configuration</a><ul>
<li><a class="reference internal" href="#pqs-configuration">PQS Configuration</a><ul>
<li><a class="reference internal" href="#applying-configuration-changes">Applying Configuration Changes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#contract-filters">Contract Filters</a></li>
<li><a class="reference internal" href="#party-filtering">Party Filtering</a></li>
<li><a class="reference internal" href="#java-virtual-machine-jvm-configuration">Java Virtual Machine (JVM) Configuration</a></li>
<li><a class="reference internal" href="#postgresql-configuration">PostgreSQL Configuration</a></li>
<li><a class="reference internal" href="#postgresql-users">PostgreSQL Users</a></li>
<li><a class="reference internal" href="#host-infrastructure">Host Infrastructure</a></li>
<li><a class="reference internal" href="#host-environment">Host Environment</a></li>
<li><a class="reference internal" href="#testing">Testing</a></li>
</ul>
</li>
<li><a class="reference internal" href="#resilience">Resilience</a><ul>
<li><a class="reference internal" href="#high-availability">High Availability</a></li>
<li><a class="reference internal" href="#retries">Retries</a><ul>
<li><a class="reference internal" href="#configuration-1">Configuration</a></li>
<li><a class="reference internal" href="#logging">Logging</a></li>
<li><a class="reference internal" href="#metrics">Metrics</a></li>
<li><a class="reference internal" href="#retry-counters-reset">Retry Counters Reset</a></li>
<li><a class="reference internal" href="#exit-codes">Exit codes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#ledger-streaming-recovery">Ledger Streaming &amp; Recovery</a></li>
</ul>
</li>
<li><a class="reference internal" href="#read-api">Read API</a><ul>
<li><a class="reference internal" href="#how-the-ledger-models-time">How The Ledger Models Time</a><ul>
<li><a class="reference internal" href="#offset">Offset</a></li>
<li><a class="reference internal" href="#ledger-time">Ledger Time</a></li>
<li><a class="reference internal" href="#tranasction-id">Tranasction ID</a></li>
<li><a class="reference internal" href="#which-should-i-use">Which should I use?</a></li>
</ul>
</li>
<li><a class="reference internal" href="#time-model">Time Model</a></li>
<li><a class="reference internal" href="#offset-management">Offset Management</a></li>
<li><a class="reference internal" href="#jsonb-encoding">JSONB Encoding</a><ul>
<li><a class="reference internal" href="#primitive-types">Primitive Types</a></li>
<li><a class="reference internal" href="#user-defined-types">User-Defined Types</a></li>
</ul>
</li>
<li><a class="reference internal" href="#querying-patterns">Querying Patterns</a></li>
<li><a class="reference internal" href="#summary-functions">Summary functions</a></li>
<li><a class="reference internal" href="#lookup-functions">Lookup functions</a></li>
<li><a class="reference internal" href="#optimization">Optimization</a><ul>
<li><a class="reference internal" href="#indexing">Indexing</a></li>
<li><a class="reference internal" href="#pagination">Pagination</a></li>
<li><a class="reference internal" href="#psql-tips">psql Tips</a></li>
<li><a class="reference internal" href="#query-analysis">Query Analysis</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#pruning">Pruning</a><ul>
<li><a class="reference internal" href="#data-deletion-and-changes">Data Deletion and Changes</a></li>
<li><a class="reference internal" href="#constraints">Constraints</a></li>
<li><a class="reference internal" href="#pruning-from-the-command-line">Pruning from the command line</a></li>
<li><a class="reference internal" href="#example-with-timestamp-and-duration">Example with Timestamp and Duration</a></li>
<li><a class="reference internal" href="#pruning-from-sql">Pruning from SQL</a></li>
</ul>
</li>
<li><a class="reference internal" href="#authentication">Authentication</a><ul>
<li><a class="reference internal" href="#audience-based-token">Audience-Based Token</a></li>
<li><a class="reference internal" href="#scope-based-token">Scope-Based Token</a></li>
<li><a class="reference internal" href="#custom-daml-claims-tokens">Custom Daml Claims Tokens</a></li>
<li><a class="reference internal" href="#static-access-token">Static Access Token</a></li>
<li><a class="reference internal" href="#ledger-api-users-and-daml-parties">Ledger API Users and Daml Parties</a></li>
<li><a class="reference internal" href="#token-expiry">Token expiry</a></li>
</ul>
</li>
<li><a class="reference internal" href="#history-slicing">History Slicing</a></li>
<li><a class="reference internal" href="#reset-procedure">Reset Procedure</a><ul>
<li><a class="reference internal" href="#reset">Reset</a></li>
<li><a class="reference internal" href="#constraints-1">Constraints</a></li>
</ul>
</li>
<li><a class="reference internal" href="#logging-1">Logging</a><ul>
<li><a class="reference internal" href="#log-level">Log Level</a></li>
<li><a class="reference internal" href="#per-logger-log-level">Per-Logger Log Level</a></li>
<li><a class="reference internal" href="#log-pattern">Log Pattern</a></li>
<li><a class="reference internal" href="#log-format-for-console-output">Log Format for Console Output</a></li>
<li><a class="reference internal" href="#log-format-for-file-output">Log Format for File Output</a></li>
<li><a class="reference internal" href="#destination-file-for-file-output">Destination File for File Output</a></li>
<li><a class="reference internal" href="#log-format-and-log-pattern-combinations">Log Format and Log Pattern Combinations</a></li>
</ul>
</li>
<li><a class="reference internal" href="#database-schema-evolution">Database Schema Evolution</a><ul>
<li><a class="reference internal" href="#baselining">Baselining</a></li>
<li><a class="reference internal" href="#schema-upgrades">Schema Upgrades</a></li>
<li><a class="reference internal" href="#schema-dump">Schema Dump</a></li>
<li><a class="reference internal" href="#monitoring-progress">Monitoring Progress</a></li>
<li><a class="reference internal" href="#troubleshooting">Troubleshooting</a><ul>
<li><a class="reference internal" href="#problem-1-an-application-s-flyway-conflicts-with-pqs-s-flyway">Problem 1: An application’s Flyway conflicts with PQS’s Flyway</a></li>
</ul>
</li>
<li><a class="reference internal" href="#mapping-daml-models-to-relational-world">Mapping Daml Models to Relational World</a></li>
<li><a class="reference internal" href="#considerations">Considerations</a></li>
<li><a class="reference internal" href="#definitions">Definitions</a></li>
<li><a class="reference internal" href="#queries-results">Queries &amp; Results</a></li>
<li><a class="reference internal" href="#performance-optimizations">Performance Optimizations</a><ul>
<li><a class="reference internal" href="#materialized-views">Materialized Views</a></li>
<li><a class="reference internal" href="#custom-triggers">Custom Triggers</a></li>
</ul>
</li>
<li><a class="reference internal" href="#trade-offs-summary">Trade-Offs Summary</a></li>
</ul>
</li>
<li><a class="reference internal" href="#observability">Observability</a><ul>
<li><a class="reference internal" href="#underlying-mechanism">Underlying Mechanism</a></li>
<li><a class="reference internal" href="#provided-metrics">Provided Metrics</a></li>
<li><a class="reference internal" href="#example-dashboard">Example Dashboard</a></li>
<li><a class="reference internal" href="#health-check">Health Check</a></li>
<li><a class="reference internal" href="#tracing-of-pipeline-execution">Tracing of Pipeline Execution</a></li>
<li><a class="reference internal" href="#trace-context-propagation">Trace Context Propagation</a></li>
</ul>
</li>
<li><a class="reference internal" href="#redaction">Redaction</a><ul>
<li><a class="reference internal" href="#conditions-for-redaction">Conditions for Redaction</a></li>
<li><a class="reference internal" href="#examples">Examples</a><ul>
<li><a class="reference internal" href="#redacting-an-archived-contract">Redacting an Archived Contract</a></li>
<li><a class="reference internal" href="#redacting-a-choice-exercise">Redacting a Choice Exercise</a></li>
</ul>
</li>
<li><a class="reference internal" href="#accessing-redaction-information">Accessing Redaction Information</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
        
    </div>
</div>
        

      </div>
      <div class="wy-nav-content">
        
        <div class="rst-content">
          
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div itemprop="articleBody">
                
  <div class="section" id="pqs">
<h1>PQS<a class="headerlink" href="#pqs" title="Permalink to this headline">¶</a></h1>
<div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>PQS (Participant Query Store) is a feature that makes the ledger available to be queried by SQL. This enables users to query the state and history of the ledger, while minimizing the demand on the participant node.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The term Operational Data Store (ODS) refers to a database that mirrors the Daml ledger and allows for efficient querying. The PQS feature is an ODS for the participant.node.</p>
</div>
<div class="section" id="audience">
<h3>Audience<a class="headerlink" href="#audience" title="Permalink to this headline">¶</a></h3>
<p>This documention provides guidance on what PQS achieves, how to use it, and its operation and limitations. The following types of users are likely to find PQS useful:</p>
<ul class="simple">
<li>Application developers: to query the ledger to display information to users, integrate or carry out automated business processes, and debugging.</li>
<li>Business analysts: to access and analyze ledger data with ad-hoc investigations to understand operational usage.</li>
<li>Support analysts: to diagnose any problems on a live system, when sophisticated inspection of the ledger is required.</li>
<li>Application operators: to take a snapshot of the ledger, either with or without history in order to analyse and investigate.</li>
<li>Report analysts: to provide access to ledger data information for analysis and aggregation with standard reporting tools, on a historical or real-time basis.</li>
</ul>
</div>
<div class="section" id="purpose">
<h3>Purpose<a class="headerlink" href="#purpose" title="Permalink to this headline">¶</a></h3>
<p>PQS provides powerful and scaleable read access for a participant by exposing all data via SQL - leveraging existing tools and knowledge.</p>
<p>The participant’s primary role is to submit and propogate transactions in the network, which requires interaction to submit commands. PQS works in this domain to monitor transactions on a streaming basis, maintain history and state based on these events, and makes the resultant data available for users to query. It allows independent scaling of the read loads, depending on the capacity required.</p>
</div>
<div class="section" id="operational-architecture">
<h3>Operational Architecture<a class="headerlink" href="#operational-architecture" title="Permalink to this headline">¶</a></h3>
<p>PQS is a service that operates within the trusted core infrastructure of a participant. It can be configured via command line arguments, environment variables and configuration files. It is intended as a long-running process and is resilient to network outages. It is also designed to be idempotent (or “crash tolerant”) so that it can be restarted safely at any time. It does not write to the ledger; it is a passive consumer of data from a Canton participant. PQS focuses on providing a powerful and scaleable “read” pipeline - as per the <a class="reference external" href="https://learn.microsoft.com/en-us/azure/architecture/patterns/cqrs">CQRS</a> design pattern.</p>
<p>The following diagram shows that PQS initiates connections to both the participant and the datastore: (arrows indicate the direction of connection)</p>
<p><img alt="diagram" src="../_images/pqs-user-guide-1.svg" /></p>
<p>Similarly, from the perspective of data-flow:</p>
<p><img alt="image1" src="../_images/pqs-user-guide-2.svg" /></p>
<p>Expanding the application node from the above, you can imagine many potential architectures, including:</p>
<p><img alt="image2" src="../_images/pqs-user-guide-3.svg" /></p>
</div>
<div class="section" id="key-feature-summary">
<h3>Key Feature Summary<a class="headerlink" href="#key-feature-summary" title="Permalink to this headline">¶</a></h3>
<p>PQS enables the following key capabilities:</p>
<ul class="simple">
<li>To make the Daml ledger queryable via SQL.</li>
<li>Allow querying on a point-in-time or latest-available basis.</li>
<li>Filter the scope by Daml party and contract template.</li>
<li>Embed an API within the database to allow consumers to easily access the ledger data by:<ul>
<li>Using familiar Daml identifiers (eg. <code class="docutils literal notranslate"><span class="pre">mypackage:My.Module:MyTemplate</span></code>) instead of PostgreSQL approximations.</li>
<li>Using SQL to perform familiar aggregations, transformations and joins.</li>
<li>Creating custom indexes to optimize queries.</li>
<li>Facilitating access to both state (contracts) and audit trail (events) perspectives.</li>
</ul>
</li>
<li>Crash-tolerance so it can be restarted safely.</li>
</ul>
</div>
<div class="section" id="sections">
<h3>Sections<a class="headerlink" href="#sections" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><a class="reference external" href="#getting-started">Getting Started</a></li>
<li><a class="reference external" href="#database">Database</a></li>
<li><a class="reference external" href="#configuration">Configuration</a></li>
<li><a class="reference external" href="#resilience">Resilience</a></li>
<li><a class="reference external" href="#read-api">Read API</a></li>
<li><a class="reference external" href="#pruning">Pruning</a></li>
<li><a class="reference external" href="#auth">Authentication</a></li>
<li><a class="reference external" href="#history-slicing">History Slicing</a></li>
<li><a class="reference external" href="#reset">Reset</a></li>
<li><a class="reference external" href="#logging">Logging</a></li>
<li><a class="reference external" href="#database-schema-evolution">Database Schema Evolution</a></li>
<li><a class="reference external" href="#relational-view">Relational View</a></li>
<li><a class="reference external" href="#observability">Observability</a></li>
<li><a class="reference external" href="#redaction">Redaction</a></li>
</ul>
</div>
</div>
<div class="section" id="getting-started">
<h2>Getting Started<a class="headerlink" href="#getting-started" title="Permalink to this headline">¶</a></h2>
<div class="section" id="pre-requisites">
<h3>Pre-requisites<a class="headerlink" href="#pre-requisites" title="Permalink to this headline">¶</a></h3>
<p>To run PQS you need the following:</p>
<ul class="simple">
<li>PostgreSQL version 12-16.</li>
<li>Daml Sandbox or participant.as the source of ledger data.</li>
<li>Any access tokens or TLS certificates required by the above.</li>
<li>PQS <code class="docutils literal notranslate"><span class="pre">.jar</span></code> or Docker image</li>
</ul>
</div>
<div class="section" id="running-pqs">
<h3>Running PQS<a class="headerlink" href="#running-pqs" title="Permalink to this headline">¶</a></h3>
<p>Exploring commands and parameters is easiest via the <code class="docutils literal notranslate"><span class="pre">--help</span></code> (and <code class="docutils literal notranslate"><span class="pre">--help-verbose</span></code>) arguments: For example, if you are running a downloaded <code class="docutils literal notranslate"><span class="pre">.jar</span></code> file:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>$ ./scribe.jar --help
Usage: scribe COMMAND

An efficient ledger data exporting tool

Options:
  -h, --help            Print help information and quit
  -H, --help-verbose    Print help information with extra details and quit
  -v, --version         Print version information and quit

Commands:
  pipeline     Initiate continuous ledger data export
  datastore    Perform operations supporting a certified data store

Run &#39;scribe COMMAND --help[-verbose]&#39; for more information on a command.
</pre></div>
</div>
<p>Or similarly, using Docker:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>$ docker run -it digitalasset-docker.jfrog.io/participant-query-store:0.5.0 --help
Picked up JAVA_TOOL_OPTIONS: -javaagent:/open-telemetry.jar
Usage: scribe COMMAND

An efficient ledger data exporting tool

Commands:
  pipeline     Initiate continuous ledger data export
  datastore    Perform operations supporting a certified data store

Run &#39;scribe COMMAND --help[-verbose]&#39; for more information on a command.
</pre></div>
</div>
<div class="section" id="daml-platform-support">
<h4>Daml Platform Support<a class="headerlink" href="#daml-platform-support" title="Permalink to this headline">¶</a></h4>
<p>From version 0.5.0 PQS is built and tested against multiple Daml SDK targets. Each Daml SDK target generates its own <code class="docutils literal notranslate"><span class="pre">.jar</span></code> file. These binaries are present in the published participant-query-store docker images. The container defaults to the lowest targeted Daml SDK. To run PQS against a newer target, you must set the container’s <code class="docutils literal notranslate"><span class="pre">workdir</span></code> at runtime to the desired Daml SDK target.</p>
<p>The supported targets are:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">/daml2</span></code> &lt;&lt; default</li>
<li><code class="docutils literal notranslate"><span class="pre">/daml3.2</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">/daml3.3</span></code></li>
</ul>
<p>Please note that the preceeding <code class="docutils literal notranslate"><span class="pre">/</span></code> is required as the target is the path to the <code class="docutils literal notranslate"><span class="pre">scribe.jar</span></code> file.</p>
<p>An example of the default Daml SDK target:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>$ docker run -it digitalasset-docker.jfrog.io/participant-query-store:0.5.0 --version
Picked up JAVA_TOOL_OPTIONS: -javaagent:/open-telemetry.jar
scribe, version: v0.5.0
daml-sdk.version: 2.9.5
postgres-document.schema: 021
</pre></div>
</div>
<p>An example of selecting the <code class="docutils literal notranslate"><span class="pre">/daml3.2</span></code> target:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>docker run -it --workdir /daml3.2 digitalasset-docker.jfrog.io/participant-query-store:0.5.0 --version
Picked up JAVA_TOOL_OPTIONS: -javaagent:/open-telemetry.jar
scribe, version: v0.5.0
daml-sdk.version: 3.2.0-snapshot.20241106.13400.0.vad854047
postgres-document.schema: 021
</pre></div>
</div>
</div>
<div class="section" id="preparing-the-database">
<h4>Preparing the Database<a class="headerlink" href="#preparing-the-database" title="Permalink to this headline">¶</a></h4>
<p>Start by investigating the database schema that PQS creates, using the <code class="docutils literal notranslate"><span class="pre">datastore</span></code> command that is used for administrative operations:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>$ ./scribe.jar datastore postgres-document schema show
[...]
/**********************************************************
 * generated by scribe, version: [...]                    *
 **********************************************************/
-- tables
create table [...]
</pre></div>
</div>
<p>A database administrator can now choose to create the database and apply the produced DDL, or leave it to the <code class="docutils literal notranslate"><span class="pre">pipeline</span></code> command to do this on an ongoing idempotent basis.</p>
</div>
<div class="section" id="running-the-pipeline">
<h4>Running the Pipeline<a class="headerlink" href="#running-the-pipeline" title="Permalink to this headline">¶</a></h4>
<p>The following command connects to a non-auth ledger and replicates the latest state of the ledger (excluding prior-history) from the perspective of the supplied Daml party. It uses the ledger source and supplied database, though these values can be omitted as they are all defaults:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>$ ./scribe.jar pipeline ledger postgres-document \
    --pipeline-filter-parties Alice::12209942561b94adc057995f9ffca5a0b974953e72ba25e0eb158e05c801149639b9 \
    --pipeline-ledger-start Latest \
    --target-postgres-host localhost \
    --target-postgres-port 5432 \
    --target-postgres-database postgres \
    --source-ledger-port 6865 \
    --source-ledger-host localhost
18:27:26.799 I [zio-fiber-64] com.digitalasset.scribe.appversion.package:11 scribe, version: v...
18:27:27.159 I [zio-fiber-68] com.digitalasset.scribe.configuration.package:40 Applied configuration:
[...]
18:27:28.714 I [zio-fiber-67] com.digitalasset.scribe.postgres.document.DocumentPostgres.Service:36 Applying schema
18:27:28.805 I [zio-fiber-67] com.digitalasset.scribe.postgres.document.DocumentPostgres.Service:39 Schema applied
18:27:28.863 I [zio-fiber-0] com.digitalasset.scribe.pipeline.pipeline.Impl:29 Starting pipeline on behalf of &#39;Alice::...&#39;
18:27:29.043 I [zio-fiber-0] com.digitalasset.scribe.pipeline.pipeline.Impl:57 Last checkpoint is absent. Seeding from ACS before processing transactions with starting offset &#39;000000000000000008&#39;
18:27:29.063 I [zio-fiber-938] com.digitalasset.zio.daml.Ledger.Impl:191 Contract filter inclusive of 4 templates and 0 interfaces
18:27:29.120 I [zio-fiber-0] com.digitalasset.scribe.pipeline.pipeline.Impl:74 Continuing from offset &#39;GENESIS&#39; and index &#39;0&#39; until offset &#39;INFINITY&#39;
18:27:29.159 I [zio-fiber-967] com.digitalasset.zio.daml.Ledger.Impl:191 Contract filter inclusive of 4 templates and 0 interfaces
[...]
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The above command continues to run until terminated. You can terminate it with <code class="docutils literal notranslate"><span class="pre">Ctrl-C</span></code> at any time.</p>
</div>
</div>
<div class="section" id="auth">
<h4>Auth<a class="headerlink" href="#auth" title="Permalink to this headline">¶</a></h4>
<p>If you are running PQS against a participant that has auth, you must provide some credentials. For example:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>$ ./scribe.jar pipeline ledger postgres-document \
    --source-ledger-auth OAuth \
    --pipeline-oauth-clientid my_client_id \
    --pipeline-oauth-clientsecret deadbeef \
    --pipeline-oauth-cafile ca.crt \
    --pipeline-oauth-endpoint https://my-auth-server/token
</pre></div>
</div>
<p>For more information see the <a class="reference external" href="#auth">Authentication</a> section.</p>
</div>
</div>
</div>
<div class="section" id="database">
<h2>Database<a class="headerlink" href="#database" title="Permalink to this headline">¶</a></h2>
<p>PQS supports a single datastore format known as <code class="docutils literal notranslate"><span class="pre">postgres-document</span></code>. This uses PostgreSQL to store the data in a document-oriented (schemaless) way, making extensive use of JSONB.</p>
<div class="section" id="ledger-source">
<h3>Ledger Source<a class="headerlink" href="#ledger-source" title="Permalink to this headline">¶</a></h3>
<p>To understand how PQS stores data, you need to understand the ledger data model. In simple terms, the Daml ledger is composed of a sequence of transactions, which contain events. Events can be:</p>
<ul class="simple">
<li>Creates: creation of contracts / interface views.</li>
<li>Exercise: of a choice of contracts / interface views.</li>
<li>Archive: end of the lifetime of contracts / interface views.</li>
</ul>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">When defining the scope of ledger data being stored, it is important to understand the implications of the data source and the filters applied. The data source and filters determine the data that is available to the <a class="reference external" href="005-read-api.md">Read API</a> functions, and this cannot be changed. Since a change in scope will result in a change to the breadth of data being stored, a re-seed is required to widen or narrow the scope of the data. The only exception to this is where you widen the scope into a an area (eg. new templates new parties) that you know has no historical data, in which case a re-seed is not required. Or, operators may also the <a class="reference external" href="#reset">reset</a> function to roll-back the datastore to a prior state where this was true.</p>
</div>
</div>
<div class="section" id="transaction-data-source">
<h3>Transaction Data Source<a class="headerlink" href="#transaction-data-source" title="Permalink to this headline">¶</a></h3>
<p>PQS can run in two modes as specified by the <code class="docutils literal notranslate"><span class="pre">--pipeline-datasource</span></code> configuration. The following table shows the differences between the two modes, in terms of data availability via the respective <a class="reference external" href="#read-api">Read API</a> functions :</p>
<table border="1" class="docutils align-default">
<colgroup>
<col width="52%" />
<col width="22%" />
<col width="26%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Data / Mode</th>
<th class="head">TransactionStream</th>
<th class="head">TransactionTreeStream</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">creates()</span></code> contracts</td>
<td>✓</td>
<td>✓</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">exercises()</span></code> contracts</td>
<td>✗</td>
<td>✓</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">archives()</span></code> contracts</td>
<td>✓</td>
<td>✓</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">creates()</span></code> interfaces</td>
<td>✓</td>
<td>✗</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">exercises()</span></code> interfaces</td>
<td>✗</td>
<td>✓</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">archives()</span></code> interfaces</td>
<td>✓</td>
<td>✗</td>
</tr>
<tr class="row-even"><td>Transient (create-archive in a transaction)</td>
<td>✗</td>
<td>✓</td>
</tr>
<tr class="row-odd"><td>Stakeholders</td>
<td>✓</td>
<td>✓</td>
</tr>
<tr class="row-even"><td>Note:</td>
<td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>Default</td>
<td>✓</td>
<td>✗</td>
</tr>
<tr class="row-even"><td>Data size</td>
<td>Smaller</td>
<td>Larger</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="postgresql-schema">
<h3>PostgreSQL Schema<a class="headerlink" href="#postgresql-schema" title="Permalink to this headline">¶</a></h3>
<p>The PostgreSQL schema is designed to be generic and not tied to any specific Daml model. This is achieved by a fixed schema that relates to the general ledger model but uses a documented-oriented approach (JSONB) to store the data whose schema lies in the Daml models.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Any database artifact starting with an underscore character (<code class="docutils literal notranslate"><span class="pre">_</span></code>) is explicitly denoted an internal implementation, subject to change, and should not be relied upon. Since every table is prefixed this way, they change in the future - for example as a result of future functional and performance enhancements.</p>
</div>
<p>Ledger data consumers should interact with the database via the <a class="reference external" href="#read-api">Read API</a>, which provides a stable supported interface. Database Administrators who wish to have a deeper understanding of the schema specifics, in order to understand it’s operational characteristics, can easily inspect the schema using the command:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>$ ./scribe.jar datastore postgres-document schema show
[...]
</pre></div>
</div>
<div class="section" id="objectives">
<h4>Objectives<a class="headerlink" href="#objectives" title="Permalink to this headline">¶</a></h4>
<p>Overall, the objectives of the schema design are to facilitate:</p>
<ul class="simple">
<li><strong>Scaleable writes</strong>: high-throughput and efficient to free up as much capacity for useful work (reads) as possible.</li>
<li><strong>Scaleable reads</strong>: queries can able to be parallelized, and do not become blocked behind writes. They produce sensible query plans that do not result in unnecessary table scans.</li>
<li><strong>Ease of use</strong>: readers can use familiar tools and techniques to query the database, without needing to understand the specifics of the schema design. Instead, they can use simple entry points that provide access to data in familiar ledger terms: active contracts, creates, exercises, archives, offsets, etc. Readers do not need to worry about an offset-based model for point-in-time snapshot isolation.</li>
<li><strong>Read consistency</strong>: readers can achieve the level of consistency that they require, including consistency with other queries they are conducting.</li>
<li><strong>Crash tollerance</strong>: the schema is designed to be simple and ensure recovery from any kind of crash, taking a pessimistic view of what races may occur, however unlikely.</li>
<li><strong>Static schema</strong>: the schema is designed to be static and not require any changes to the schema as the ledger evolves, to the extent possible. Note: discovering adding new templates during normal operation does currently require additional table partitions to be created.</li>
</ul>
</div>
<div class="section" id="design">
<h4>Design<a class="headerlink" href="#design" title="Permalink to this headline">¶</a></h4>
<p>To facilitate these objectives, the following design approaches have been used:</p>
<ul class="simple">
<li><strong>Concurrent append-only writes</strong>: ledger transactions are written with significant parallelism without contention, ensuring that writes can be high-throughput and unconstrained by latency.</li>
<li><strong>Bulk batching</strong>: using <a class="reference external" href="https://www.postgresql.org/docs/current/sql-copy.html">COPY</a> (not <a class="reference external" href="https://www.postgresql.org/docs/current/sql-insert.html">INSERT</a>) to deliver large batches of data efficiently.</li>
<li><strong>Offset indexed</strong>: all data is appropriately indexed by offset to provide efficient access to slice the result by offset. <a class="reference external" href="https://www.postgresql.org/docs/current/brin-intro.html">BRIN</a> indexes are used to ensure contiguity of data that is often accessed together.</li>
<li><strong>Implicit offset</strong>: readers can opt for queries with implicit offset, meaning they can ignore the role of offset in their queries but still receive a stable view of the ledger data. We seek to provide a similar experience to PostgreSQL’s MVCC, where users receive consistency benefits without needing to understand the underlying implementation.</li>
<li><strong>Idempotent</strong>: PQS is designed to be restarted safely at any time. All state is maintained in the datastore.</li>
<li><strong>Watermarks</strong>: a single thread maintains a watermark denoting the most recent contiguous transaction - representing the offset of the most recent consistent ledger transaction. In addition, the watermark processes the “archive” mutation on any archived contracts or interface views, in a batch. This reintroduces data consistency without needing readers to perform complex query paths. This efficiently resolves the uncertainty created by the parallel writes.</li>
<li><strong>Schemaless content</strong>: content defined in Daml templates uses the JSONB datatype to store the data. This allows for a schemaless approach and can store any Daml model without needing to change the schema, other than custom JSONB indexes.</li>
</ul>
</div>
</div>
</div>
<div class="section" id="configuration">
<h2>Configuration<a class="headerlink" href="#configuration" title="Permalink to this headline">¶</a></h2>
<p>Several items need to be configured to suit your environment and requirements. This section provides an overview of common configuration options that you should consider for your deployment:</p>
<div class="section" id="pqs-configuration">
<h3>PQS Configuration<a class="headerlink" href="#pqs-configuration" title="Permalink to this headline">¶</a></h3>
<p>PQS ascertains its configuration from:</p>
<ul class="simple">
<li>command-line arguments</li>
<li>environment variables</li>
<li>HOCON configuration files (<code class="docutils literal notranslate"><span class="pre">--config</span></code> argument)</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Consult the command <code class="docutils literal notranslate"><span class="pre">./scribe.jar</span> <span class="pre">pipeline</span> <span class="pre">--help-verbose</span></code> for further information on individual configuration items, and the conventions used to specify them in the above forms.</p>
</div>
<p>Complex configurations may benefit from using a HOCON configuration file, for example:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>{
   health.port = 8080

   logger {
      # level = &quot;Debug&quot;
      format = &quot;Plain&quot;
      pattern = &quot;Plain&quot;
   }

   pipeline {
      datasource = &quot;TransactionStream&quot;

      filter {
         parties = &quot;*&quot;
         metadata = &quot;!*&quot;
         contracts = &quot;*&quot;
      }

      ledger {
         start = &quot;Latest&quot;
         stop = &quot;Never&quot;
      }
   }

   source {
      ledger {
         host = &quot;canton&quot;
         port = 10011
      }
   }

   target {
      postgres {
         host = &quot;postgres&quot;
         port = 5432
         username = &quot;postgres&quot;
         database = &quot;postgres&quot;
         maxConnections = 16
      }
   }
   schema.autoApply = true
}
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">For more information on logging configuration, see the dedicated <a class="reference external" href="#logging">Logging</a> section.</p>
</div>
<div class="section" id="applying-configuration-changes">
<h4>Applying Configuration Changes<a class="headerlink" href="#applying-configuration-changes" title="Permalink to this headline">¶</a></h4>
<p>PQS sets is configuration at startup. It does not perform dynamic configuration updates, so making a configuration change (such as adding a new party, new template, or new interface) requires a restart.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">PQS will not go back in time and recover history - but only move forward by consuming new transactions it has not previously seen. It is important that scope only be expanded when it is known to have no prior history, at the point in time that PQS was stopped. Otherwise, a re-seed operation will be required to reinitialize from a empty datastore, will be required.</p>
</div>
</div>
</div>
<div class="section" id="contract-filters">
<h3>Contract Filters<a class="headerlink" href="#contract-filters" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">--pipeline-filter-contracts</span></code> specifies an inclusion filter expression to determine the Daml templates, interface views and choices include. A filter expression is a simple wildcard inclusion (<code class="docutils literal notranslate"><span class="pre">*</span></code>) with basic boolean logic (<code class="docutils literal notranslate"><span class="pre">&amp;</span></code> <code class="docutils literal notranslate"><span class="pre">!</span></code> <code class="docutils literal notranslate"><span class="pre">|</span></code> <code class="docutils literal notranslate"><span class="pre">(</span></code> <code class="docutils literal notranslate"><span class="pre">)</span></code>), where whitespace is ignored. For example:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">*</span></code>: everything (default)</li>
<li><code class="docutils literal notranslate"><span class="pre">pkg:*</span></code>: everything in this package</li>
<li><code class="docutils literal notranslate"><span class="pre">pkg:a.b.c.Bar</span></code>: just this one fully qualified name for template <code class="docutils literal notranslate"><span class="pre">Bar</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">a.b.c.*</span></code>: all members of the <code class="docutils literal notranslate"><span class="pre">a.b.c</span></code> namespace</li>
<li><code class="docutils literal notranslate"><span class="pre">*</span> <span class="pre">&amp;</span> <span class="pre">!pkg:a.b.c.Bar</span></code>: everything except this one fully qualified name</li>
<li><code class="docutils literal notranslate"><span class="pre">(a.b.c.Foo</span> <span class="pre">|</span> <span class="pre">a.b.c.Bar)</span></code>: these two fully qualified names</li>
<li><code class="docutils literal notranslate"><span class="pre">(a.b.c.*</span> <span class="pre">&amp;</span> <span class="pre">!(a.b.c.Foo</span> <span class="pre">|</span> <span class="pre">a.b.c.Bar)</span> <span class="pre">|</span> <span class="pre">g.e.f.Baz)</span></code>: everything in <code class="docutils literal notranslate"><span class="pre">a.b.c</span></code> except for <code class="docutils literal notranslate"><span class="pre">Foo</span></code> and <code class="docutils literal notranslate"><span class="pre">Bar</span></code>, and also include <code class="docutils literal notranslate"><span class="pre">g.e.f.Baz</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">a.b.c.Foo</span> <span class="pre">&amp;</span> <span class="pre">a.b.c.Bar</span></code>: error (the identifier can’t be both)</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>There are further conditions placed upon the filtering of templates and interfaces to avoid potential ambiguity. It is required to include any filter for:</p>
<ul class="last simple">
<li>All Interface Views of included Templates</li>
<li>All Templates of included Interface Views</li>
</ul>
</div>
</div>
<div class="section" id="party-filtering">
<h3>Party Filtering<a class="headerlink" href="#party-filtering" title="Permalink to this headline">¶</a></h3>
<p>Similarly, the <code class="docutils literal notranslate"><span class="pre">--pipeline-filter-parties</span></code> option specifies an inclusion filter expression to determine which parties to supply data for. For example:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">*</span></code>: everything (default)</li>
<li><code class="docutils literal notranslate"><span class="pre">Alice::*</span> <span class="pre">|</span> <span class="pre">Bob::*</span></code>: any party with an <code class="docutils literal notranslate"><span class="pre">Alice</span></code> or <code class="docutils literal notranslate"><span class="pre">Bob</span></code> hint</li>
<li><code class="docutils literal notranslate"><span class="pre">Alice::122055fc4b190e3ff438587b699495a4b6388e911e2305f7e013af160f49a76080ab</span></code>: just this one party</li>
<li><code class="docutils literal notranslate"><span class="pre">*</span> <span class="pre">&amp;</span> <span class="pre">!Alice::*</span></code>: all parties except those with an <code class="docutils literal notranslate"><span class="pre">Alice</span></code> hint</li>
<li><code class="docutils literal notranslate"><span class="pre">Alice*</span> <span class="pre">|</span> <span class="pre">Bob*</span> <span class="pre">|</span> <span class="pre">(Charlie*</span> <span class="pre">&amp;</span> <span class="pre">!(Participant3::*))</span></code>: <code class="docutils literal notranslate"><span class="pre">Alice</span></code> and <code class="docutils literal notranslate"><span class="pre">Bob</span></code> parties, as well as <code class="docutils literal notranslate"><span class="pre">Charlie</span></code> except <code class="docutils literal notranslate"><span class="pre">Charlie3</span></code></li>
</ul>
<p>When the ledger requires authentication, this filter applies within the scope of parties for which PQS’s Ledger API user has access. Naturally, the <code class="docutils literal notranslate"><span class="pre">--pipeline-filter-parties</span></code> cannot be used to access data for parties for which the user is not authorized.</p>
</div>
<div class="section" id="java-virtual-machine-jvm-configuration">
<h3>Java Virtual Machine (JVM) Configuration<a class="headerlink" href="#java-virtual-machine-jvm-configuration" title="Permalink to this headline">¶</a></h3>
<p>JVM configuration is important to ensure that PQS has enough resources to run efficiently. At minimum the following should be considered for any realistic deployment:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>-XX:+AlwaysPreTouch
-XX:-UseAdaptiveSizePolicy

## containers:
-XX:InitialRAMPercentage=75.0
-XX:MaxRAMPercentage=75.0

## host/vm:
-Xms4g
-Xmx4g
</pre></div>
</div>
<p>In scenarios of resource-constraint, an out-of-memory error may occur. To diagnose this, a heap-dump will need to be collected for analysis, by adding the following JVM parameters:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>-XX:+HeapDumpOnOutOfMemoryError
-XX:HeapDumpPath=/path/to/heap.dump
</pre></div>
</div>
<p>If you wish to have more detailed logging for diagnosis, you can adjust the <code class="docutils literal notranslate"><span class="pre">--logger-level</span></code> parameter to <code class="docutils literal notranslate"><span class="pre">Debug</span></code> or <code class="docutils literal notranslate"><span class="pre">Trace</span></code>. However, be aware that this will generate a lot of log output and may negatively impact performance. Therefore it is recommended you de-scope particularly verbose components (such as Netty) to <code class="docutils literal notranslate"><span class="pre">Info</span></code> level. This can be done by adding the following arguments:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>--logger-level=Debug
--logger-mappings-io.netty=Info
--logger-mappings-io.grpc.netty=Info
</pre></div>
</div>
<p>Setting the Ledger API queue length is a trade-off between memory usage and performance. The default value is 128, and can be increased to deliver more stable performance, at the cost of requiring additional memory. Note that the buffer will consume memory equal to the size of transactions in the rolling window of the buffer size:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>--source-ledger-buffersize=1024
</pre></div>
</div>
</div>
<div class="section" id="postgresql-configuration">
<h3>PostgreSQL Configuration<a class="headerlink" href="#postgresql-configuration" title="Permalink to this headline">¶</a></h3>
<p>Users should at least consider the following PostgreSQL config items which are relevant to the workloads it will be expected to satisfy:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>## postgresql.conf:
[autovacuum_*](https://www.postgresql.org/docs/16/runtime-config-autovacuum.html#RUNTIME-CONFIG-AUTOVACUUM)
[maintenance_work_mem](https://www.postgresql.org/docs/16/runtime-config-resource.html#GUC-MAINTENANCE-WORK-MEM)
[checkpoint_*](https://www.postgresql.org/docs/16/runtime-config-wal.html#RUNTIME-CONFIG-WAL-CHECKPOINTS)
[*_wal_size](https://www.postgresql.org/docs/16/runtime-config-wal.html#GUC-MAX-WAL-SIZE)
[bgwriter_*](https://www.postgresql.org/docs/16/runtime-config-resource.html#RUNTIME-CONFIG-RESOURCE-BACKGROUND-WRITER)
</pre></div>
</div>
<p>In cases where high performance is required, a DBA will need to tune PostgreSQL for the intended workload and infrastructure.</p>
</div>
<div class="section" id="postgresql-users">
<h3>PostgreSQL Users<a class="headerlink" href="#postgresql-users" title="Permalink to this headline">¶</a></h3>
<p>To secure the PostgreSQL database, you should consider the rights granted to various users that connect to the database. At minimum the following user categories should be considered with their respective <a class="reference external" href="https://www.postgresql.org/docs/16/ddl-priv.html">DDL/ACL privileges</a>:</p>
<ul class="simple">
<li><strong>Administraton</strong>: Provides a way for Database Administrators to perform any action on the database - SUPERUSER</li>
<li><strong>Processing</strong>: The user that PQS process connects to the database as - SELECT, INSERT, UPDATE, DELETE</li>
<li><strong>Querying</strong>: Data consumers that connect to the database to read the ledger data - SELECT</li>
<li><strong>Redaction</strong>: Any users that needs to perform redaction operations - SELECT, UPDATE</li>
<li><strong>Pruning</strong>: Users perform pruning operations - SELECT, UPDATE, DELETE</li>
<li><strong>Indexing</strong>: Users that maintain JSONB indexes - CREATE</li>
</ul>
</div>
<div class="section" id="host-infrastructure">
<h3>Host Infrastructure<a class="headerlink" href="#host-infrastructure" title="Permalink to this headline">¶</a></h3>
<p>The following are the minimum requirements for the host operating system running any kind of production workload, and should be seen as a starting point for determining the appropriate resources required by a particular workload:</p>
<p>PQS host:</p>
<ul class="simple">
<li>Memory: 4GB</li>
<li>CPU: 4 cores</li>
</ul>
<p>PostgreSQL:</p>
<ul class="simple">
<li>Memory: 8GB</li>
<li>CPU: 8 cores</li>
</ul>
</div>
<div class="section" id="host-environment">
<h3>Host Environment<a class="headerlink" href="#host-environment" title="Permalink to this headline">¶</a></h3>
<p>PQS requires write access to the <code class="docutils literal notranslate"><span class="pre">/tmp</span></code> directory in order temporarily cache Daml packages. The size of this cache is proportional to the size of all Daml packages observable on the ledger. It is an ephemeral cache - so it does not need to persist beyond a single execution. Containerized environments should configure a disk-based mount, as it is not important for overall performance.</p>
</div>
<div class="section" id="testing">
<h3>Testing<a class="headerlink" href="#testing" title="Permalink to this headline">¶</a></h3>
<p>Of course all of these settings need to be independently assessed and tuned. Users should establish performance testing and benchmarking environment in order to validate the performance of PQS on a given workload. It should be noted that the following variables are extremely relevant to overall PQS performance characteristics:</p>
<ul class="simple">
<li>Network latency</li>
<li>Ledger transaction throughput</li>
<li>Ledger transaction sizes</li>
<li>Contract data sizes</li>
</ul>
<p>Changing any of these variables requires re-testing to ensure that the impact on system performance is understood, and within acceptable tollerances.</p>
<p>As a reference you may want to consult the <a class="reference external" href="#performance-benchmark">Performance Benchmarking</a> section of the documentation, for an example of one such performance benchmark. This may give you a sense of the performance characteristics, and allow you to adapt it into something that matches your workloads.</p>
</div>
</div>
<div class="section" id="resilience">
<h2>Resilience<a class="headerlink" href="#resilience" title="Permalink to this headline">¶</a></h2>
<p>PQS is designed to operate as a long-running process which uses these principles to enhance availability:</p>
<ul class="simple">
<li><strong>Redundancy</strong> involves running multiple instances of PQS in parallel to ensure that the system remains available even if one instance fails.</li>
<li><strong>Retry</strong> involves healing from transient and recoverable failures without shutting down the process or requiring operator intervention.</li>
<li><strong>Recovery</strong> entails reconciling the current state of the ledger with already exported data in the datastore after a cold start, and continuing from the latest checkpoint.</li>
</ul>
<div class="section" id="high-availability">
<h3>High Availability<a class="headerlink" href="#high-availability" title="Permalink to this headline">¶</a></h3>
<p>Multiple isolated instances of PQS can be instantiated without any cross-dependency. This allows for an active-active high availability clustering model. Please note that different instances might not be at the same offset due to different processing rates and general network non-determinism. PQS’s Read API provides capabilities to deal with this ‘eventual consistency’ model, to ensure that readers have at least ‘repeatable read’ consistency. See <code class="docutils literal notranslate"><span class="pre">validate_offset_exists()</span></code> in the <a class="reference external" href="005-read-api.md#offset-management">Read API</a> for more details.</p>
<p><img alt="image3" src="../_images/pqs-user-guide-4.svg" /></p>
</div>
<div class="section" id="retries">
<h3>Retries<a class="headerlink" href="#retries" title="Permalink to this headline">¶</a></h3>
<p>PQS’s <code class="docutils literal notranslate"><span class="pre">pipeline</span></code> command is a unidirectional streaming process that heavily relies on the availability of its <code class="docutils literal notranslate"><span class="pre">source</span></code> and <code class="docutils literal notranslate"><span class="pre">target</span></code> dependencies. When PQS encounters an error, it attempts to recover by restarting its internal engine, if the error is designated as recoverable:</p>
<ul class="simple">
<li><a class="reference external" href="https://grpc.io/docs/guides/status-codes/">gRPC</a> (white-listed; retries if):<ul>
<li><code class="docutils literal notranslate"><span class="pre">CANCELLED</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">DEADLINE_EXCEEDED</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">NOT_FOUND</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">PERMISSION_DENIED</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">RESOURCE_EXHAUSTED</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">FAILED_PRECONDITION</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">ABORTED</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">INTERNAL</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">UNAVAILABLE</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">DATA_LOSS</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">UNAUTHENTICATED</span></code></li>
</ul>
</li>
<li><a class="reference external" href="https://github.com/pgjdbc/pgjdbc/blob/master/pgjdbc/src/main/java/org/postgresql/util/PSQLState.java">JDBC</a> (black-listed; retries unless):<ul>
<li><code class="docutils literal notranslate"><span class="pre">INVALID_PARAMETER_TYPE</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">PROTOCOL_VIOLATION</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">NOT_IMPLEMENTED</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">INVALID_PARAMETER_VALUE</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">SYNTAX_ERROR</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">UNDEFINED_COLUMN</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">UNDEFINED_OBJECT</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">UNDEFINED_TABLE</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">UNDEFINED_FUNCTION</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">NUMERIC_CONSTANT_OUT_OF_RANGE</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">NUMERIC_VALUE_OUT_OF_RANGE</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">DATA_TYPE_MISMATCH</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">INVALID_NAME</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">CANNOT_COERCE</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">UNEXPECTED_ERROR</span></code></li>
</ul>
</li>
</ul>
<div class="section" id="configuration-1">
<span id="id1"></span><h4>Configuration<a class="headerlink" href="#configuration-1" title="Permalink to this headline">¶</a></h4>
<p>The following configuration options are available to control the retry behavior of PQS:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>$ ./scribe.jar pipeline --help
[...]
  --retry-backoff-base string                 Base time (ISO 8601) for backoff retry strategy (default: PT1S)
  --retry-backoff-cap string                  Max duration (ISO 8601) between attempts (default: PT1M)
  --retry-backoff-factor double               Factor for backoff retry strategy (default: 2.0)
  --retry-counter-attempts int                Max attempts before giving up (optional)
  --retry-counter-reset string                Reset retry counters after period (ISO 8601) of stability (default: PT10M)
  --retry-counter-duration string             Time limit (ISO 8601) before giving up (optional)
[...]
</pre></div>
</div>
<p>Configuring <code class="docutils literal notranslate"><span class="pre">--retry-backoff-*</span></code> settings control periodicity of retries and the maximum duration between attempts.</p>
<p>Configuring <code class="docutils literal notranslate"><span class="pre">--retry-counter-attempts</span></code> and <code class="docutils literal notranslate"><span class="pre">--retry-counter-duration</span></code> controls the maximum <em>instability</em> tolerance before shutting down.</p>
<p>Configuring <code class="docutils literal notranslate"><span class="pre">--retry-counter-reset</span></code> controls the period of <em>stability</em> after which the retry counters are reset across the board.</p>
</div>
<div class="section" id="logging">
<h4>Logging<a class="headerlink" href="#logging" title="Permalink to this headline">¶</a></h4>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>## Irrelevant log lines omitted
$ scribe.jar pipeline ledger postgres-document \
    --pipeline-ledger-start Oldest --pipeline-ledger-stop Never \
    --retry-backoff-base=PT10S --retry-counter-duration=PT10M --retry-counter-attempts=42

12:52:26.753 I [zio-fiber-257] com.digitalasset.scribe.appversion.package:14 scribe, version: UNSPECIFIED  application=scribe
12:52:16.725 I [zio-fiber-0] com.digitalasset.scribe.pipeline.Retry.retryRecoverable:48 Recoverable GRPC exception. Attempt 1, unstable for 0 seconds. Remaining attempts: 42. Remaining time: 10 minutes. Exception in thread &quot;zio-fiber-&quot; java.lang.Throwable: Recoverable GRPC exception.
    Suppressed: io.grpc.StatusException: UNAVAILABLE: io exception
        Suppressed: io.netty.channel.AbstractChannel$AnnotatedConnectException: Connection refused: localhost/[0:0:0:0:0:0:0:1]:6865
            Suppressed: java.net.ConnectException: Connection refused application=scribe
12:52:29.007 I [zio-fiber-0] com.digitalasset.scribe.pipeline.Retry.retryRecoverable:48 Recoverable GRPC exception. Attempt 2, unstable for 12 seconds. Remaining attempts: 41. Remaining time: 9 minutes 47 seconds. Exception in thread &quot;zio-fiber-&quot; java.lang.Throwable: Recoverable GRPC exception.
    Suppressed: io.grpc.StatusException: UNAVAILABLE: io exception
        Suppressed: io.netty.channel.AbstractChannel$AnnotatedConnectException: Connection refused: localhost/[0:0:0:0:0:0:0:1]:6865
            Suppressed: java.net.ConnectException: Connection refused application=scribe
12:52:51.237 I [zio-fiber-0] com.digitalasset.scribe.pipeline.Retry.retryRecoverable:48 Recoverable GRPC exception. Attempt 3, unstable for 34 seconds. Remaining attempts: 40. Remaining time: 9 minutes 25 seconds. Exception in thread &quot;zio-fiber-&quot; java.lang.Throwable: Recoverable GRPC exception.
    Suppressed: io.grpc.StatusException: UNAVAILABLE: io exception
        Suppressed: io.netty.channel.AbstractChannel$AnnotatedConnectException: Connection refused: localhost/[0:0:0:0:0:0:0:1]:6865
            Suppressed: java.net.ConnectException: Connection refused application=scribe
12:53:33.473 I [zio-fiber-0] com.digitalasset.scribe.pipeline.Retry.retryRecoverable:48 Recoverable GRPC exception. Attempt 4, unstable for 1 minute 16 seconds. Remaining attempts: 39. Remaining time: 8 minutes 43 seconds. Exception in thread &quot;zio-fiber-&quot; java.lang.Throwable: Recoverable GRPC exception.
    Suppressed: io.grpc.StatusException: UNAVAILABLE: io exception
        Suppressed: io.netty.channel.AbstractChannel$AnnotatedConnectException: Connection refused: localhost/[0:0:0:0:0:0:0:1]:6865
            Suppressed: java.net.ConnectException: Connection refused application=scribe
12:54:36.328 I [zio-fiber-0] com.digitalasset.scribe.pipeline.Retry.retryRecoverable:48 Recoverable JDBC exception. Attempt 5, unstable for 2 minutes 19 seconds. Remaining attempts: 38. Remaining time: 7 minutes 40 seconds. Exception in thread &quot;zio-fiber-&quot; java.lang.Throwable: Recoverable JDBC exception.
    Suppressed: org.postgresql.util.PSQLException: Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.
        Suppressed: java.net.ConnectException: Connection refused application=scribe
</pre></div>
</div>
</div>
<div class="section" id="metrics">
<h4>Metrics<a class="headerlink" href="#metrics" title="Permalink to this headline">¶</a></h4>
<p>The following metrics are available to monitor stability of PQS’s dependencies. See the <a class="reference external" href="#observability">observability</a> section for more details on general observability:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>## TYPE app_restarts_total counter
## HELP app_restarts_total Number of total app restarts due to recoverable errors
app_restarts_total{,exception=&quot;Recoverable GRPC exception.&quot;} 5.0

## TYPE grpc_up gauge
## HELP grpc_up Grpc channel is up
grpc_up{} 1.0

## TYPE jdbc_conn_pool_up gauge
## HELP jdbc_conn_pool_up JDBC connection pool is up
jdbc_conn_pool_up{} 1.0
</pre></div>
</div>
</div>
<div class="section" id="retry-counters-reset">
<h4>Retry Counters Reset<a class="headerlink" href="#retry-counters-reset" title="Permalink to this headline">¶</a></h4>
<p>If PQS encounters network unavailability it starts incrementing retry counters with each attempt. These counters are reset only after a period of stability, as defined by <code class="docutils literal notranslate"><span class="pre">--retry-counter-reset</span></code>. As such, during the prolonged periods of intermittent failures that alternate with brief periods of operating normally, PQS keeps maintaining a cautious stance on assumptions regarding the stability of the overall system. This can be illustrated with an example below:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>## --retry-counter-reset=PT5M

time --&gt;       1:00            5:00               10:00
                v               v                   v
operation:  ====xx=x====x=======x========================
                ^               ^                   ^
                A               B                   C

x - a failure causing retry happens
= - operating normally
</pre></div>
</div>
<p>In the timeline above, intermittent failures start at point A, and each retry attempt contributes to the increase of the overall backoff schedule. Consequently, each subsequent retry allows more time for the system to recover. This schedule does not reset to its initial values until after the configured period of stability is reached following the last failure (point B), such as after operating without any failures for 5 minutes (point C).</p>
</div>
<div class="section" id="exit-codes">
<h4>Exit codes<a class="headerlink" href="#exit-codes" title="Permalink to this headline">¶</a></h4>
<p>PQS terminates with the following exit codes:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">0</span></code>: Normal termination</li>
<li><code class="docutils literal notranslate"><span class="pre">1</span></code>: Termination due to unrecoverable error or all retry attempts for recoverable errors have been exhausted</li>
</ul>
</div>
</div>
<div class="section" id="ledger-streaming-recovery">
<span id="id2"></span><h3>Ledger Streaming &amp; Recovery<a class="headerlink" href="#ledger-streaming-recovery" title="Permalink to this headline">¶</a></h3>
<p>On (re-)start, PQS determines last saved checkpoint and continues incremental processing from that point onward. PQS is able to start and finish at prescribed ledger offsets, specified via args:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>$ ./scribe.jar pipeline --help-verbose

Usage: pipeline SOURCE TARGET [OPTIONS]
[...]
Options:
[...]
  --pipeline-ledger-start [enum | string]    Start offset (default: Latest)
                                              + Environment variable: SCRIBE_PIPELINE_LEDGER_START
                                              + System property:      pipeline.ledger.start
                                              + Enumeration values:   Genesis, Oldest, Latest
  --pipeline-ledger-stop [enum | string]     Stop offset (default: Never)
                                              + Environment variable: SCRIBE_PIPELINE_LEDGER_STOP
                                              + System property:      pipeline.ledger.stop
                                              + Enumeration values:   Latest, Never
[...]
</pre></div>
</div>
<p>Start offset meanings:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">Genesis</span></code>: Commence from the first offset of the ledger, failing if not available.</li>
<li><code class="docutils literal notranslate"><span class="pre">Oldest</span></code>: Resume processing, or start from the oldest available offset of the ledger (if the datastore is empty).</li>
<li><code class="docutils literal notranslate"><span class="pre">Latest</span></code>: Resume processing, or start from the latest available offset of the ledger (if the datastore is empty).</li>
<li><code class="docutils literal notranslate"><span class="pre">&lt;offset&gt;</span></code>: Offset from which to start processing, terminating if it does not match the state of the datastore.</li>
</ul>
<p>Stop offset meanings:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">Latest</span></code>: Process until reaching the latest available offset of the ledger, then terminate.</li>
<li><code class="docutils literal notranslate"><span class="pre">Never</span></code>: Keep processing and never terminate.</li>
<li><code class="docutils literal notranslate"><span class="pre">&lt;offset&gt;</span></code>: Process until reaching this offset, then terminate.</li>
</ul>
<p>In many scenarios <code class="docutils literal notranslate"><span class="pre">--pipeline-ledger-start=Oldest</span> <span class="pre">--pipeline-ledger-stop=Never</span></code> is the most appropriate configuration, for both initial population of all available history, and also catering for resumption/recovery processing.</p>
<div class="admonition caution">
<p class="first admonition-title">Caution</p>
<p class="last">If the ledger has been pruned beyond the offset specified in <code class="docutils literal notranslate"><span class="pre">--pipeline-ledger-start</span></code>, PQS fails to start. For more details see <a class="reference external" href="#history-slicing">History Slicing</a>.</p>
</div>
</div>
</div>
<div class="section" id="read-api">
<h2>Read API<a class="headerlink" href="#read-api" title="Permalink to this headline">¶</a></h2>
<p>While data consumers do not communicate with the PQS process directly, they do use an API that PQS has provisioned in the database itself. This Read API is designed to provide a consistent and stable interface for users to access the ledger. It consists of a set of functions that should be the only database artifacts readers interact with.</p>
<div class="section" id="how-the-ledger-models-time">
<h3>How The Ledger Models Time<a class="headerlink" href="#how-the-ledger-models-time" title="Permalink to this headline">¶</a></h3>
<p>A key aspect to consider when querying the ledger is the fact that it makes the history over time available. Additionally, understanding time in a distributed environment can be challenging because there are many different clocks available. If you are familiar with Daml and its time model, skip this section and move to the section <a class="reference external" href="#time-model">Time Model</a>.</p>
<div class="section" id="offset">
<h4>Offset<a class="headerlink" href="#offset" title="Permalink to this headline">¶</a></h4>
<p>A participant models time using an index called an <em>offset</em>. An offset is a unique index of the participant’s local ledger. You can think of this as selecting an item in the ledger using a specific offset (or index) into the ledger.</p>
<p>Offsets are ordered, representing the order of transactions on the ledger of a participant. Due to privacy and filtering, the sequence of offsets of a participant usually appears to contain gaps.</p>
<p>Offsets are specific to a participant and are not consistent between peer participants - even when processing common transactions. This is because each participant has its own ledger and allocates its own offsets based on it’s permissioned view of transactions.</p>
<p>Offsets are represented as strings, encoded in zero-padded hexadecimal form. eg. <code class="docutils literal notranslate"><span class="pre">0000000000000000A8</span></code></p>
</div>
<div class="section" id="ledger-time">
<h4>Ledger Time<a class="headerlink" href="#ledger-time" title="Permalink to this headline">¶</a></h4>
<p>Ledger time is an approximate wall-clock time (within a bounded skew) that preserves causal ordering. That is, if a contract is created at a certain time, it cannot be used until after that time. The ledger time is represented by the <code class="docutils literal notranslate"><span class="pre">created_at</span></code> field in the PQS Read API.</p>
</div>
<div class="section" id="tranasction-id">
<h4>Tranasction ID<a class="headerlink" href="#tranasction-id" title="Permalink to this headline">¶</a></h4>
<p>A transaction ID corresponds to an offset in the following ways:</p>
<ul class="simple">
<li>Not every offset has a transaction ID. For example, the completion event of a rejected transaction does not have a transaction ID because it was unsuccessful.</li>
<li>There is, at most, one transaction ID at a given offset.</li>
<li>Each transaction ID is unique and always has a single offset.</li>
<li>While offsets are allocated by, and are specific to, a participant; transaction ID values are common to all participants.</li>
<li>Transaction ordering (as represented by associated offset) can vary between participants.</li>
<li>A transaction ID is entirely opaque and does not communicate any information, other than identification.</li>
</ul>
</div>
<div class="section" id="which-should-i-use">
<h4>Which should I use?<a class="headerlink" href="#which-should-i-use" title="Permalink to this headline">¶</a></h4>
<p>Different types of data analysis require different tools. For example in these types of analysis the following identifiers can be useful:</p>
<ul class="simple">
<li>Causal: <strong>Offset</strong> provides an understanding of events in causal order, consistent with the Participant-determined ledger commit ordering.</li>
<li>Systematic: <strong>Transaction ID</strong> is required for correlating over multiple participants, serving as a common identifier for individual transactions.</li>
<li>Temporal: <strong>Ledger Time</strong> provides an ordering of events in wall-clock time, with bounded skew. This can be useful depending on your need for precision.</li>
</ul>
</div>
</div>
<div class="section" id="time-model">
<h3>Time Model<a class="headerlink" href="#time-model" title="Permalink to this headline">¶</a></h3>
<p>PQS provides all three identifiers, but offset is defines the order. With this PQS is able to provide a consistent view of ledger transactions.</p>
<p>Offsets are deeply embedded in the Read API, allowing users to query the ledger in a manner that provides consistency. Users can nominate the offsets they wish to query, or simply query the latest available offset.</p>
<p>The following figure shows a pair of participants and their respective ledgers. Each participant has its own PQS instance, and you can see that it always has the portion of the ledger it is authorized to see:</p>
<p><img alt="image4" src="../_images/pqs-user-guide-5.svg" /></p>
<p>You can also see that the offsets (prefix) are common to the participant and PQS, but the Transaction IDs (suffix) are shared throughout.</p>
</div>
<div class="section" id="offset-management">
<h3>Offset Management<a class="headerlink" href="#offset-management" title="Permalink to this headline">¶</a></h3>
<p>The following functions control the temporal perspective of the ledger, aand allow you to control how you consider time in your queries. Since PQS exposes an eventually-consistent perspective of the ledger, you may wish to query:</p>
<ul class="simple">
<li><strong>Ignore</strong>; The <em>latest available</em> state.</li>
<li><strong>Pin</strong>; The state of the ledger at a specific time.</li>
<li><strong>Span</strong>; The ledger events across a time range, such as for an audit trail.</li>
<li><strong>Consistency</strong>; The ledger in a way that maintains consistency with other interactions you have had with the ledger (read or write).</li>
</ul>
<p>The following functions allow you to control the temporal scope of the ledger. This establishes the context in which subsequent queries execute:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">set_latest(offset)</span></code>: nominates the offset of the latest data to include in observing the ledger. If NULL it uses the latest available. The actual offset to be used is returned. If the supplied offset is beyond what is available, an error occurs.</li>
<li><code class="docutils literal notranslate"><span class="pre">validate_offset_exists(offset)</span></code>: validates that the datastore has a complete history up to and including the offset provided. Returns an error if the nominated offset is not available (too old, or too new).</li>
<li><code class="docutils literal notranslate"><span class="pre">set_oldest(offset)</span></code>: nominates the offset of the oldest events to include in query scope. If NULL then it uses the oldest available. Function returns the actual offset used. If the supplied offset is beyond what is available, an error occurs.</li>
<li><code class="docutils literal notranslate"><span class="pre">nearest_offset(time)</span></code>: a helper function to determine the offset of a given time (or interval prior to now).</li>
</ul>
<p>Under this scope, the following <a class="reference external" href="https://www.postgresql.org/docs/current/sql-createfunction.html">table functions</a> allow access to the ledger and are used directly in queries. They are designed to be used in a similar manner to tables or views, and allow users to focus on the data they wish to query, with the impact of offsets removed.</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">active(name)</span></code>: active instances of the target template/interface views that existed at the time of the latest offset</li>
<li><code class="docutils literal notranslate"><span class="pre">creates(name)</span></code>: create events of the target template/interface views that occurred between the oldest and latest offset</li>
<li><code class="docutils literal notranslate"><span class="pre">archives(name)</span></code>: archive events of the target template/interface views that occurred between the oldest and latest offset</li>
<li><code class="docutils literal notranslate"><span class="pre">exercises(name)</span></code>: exercise events of the target choice that occurred between the oldest and latest offset</li>
</ul>
<blockquote>
<div>The above functions allow the user to focus on the templates, interfaces, and choices they wish to query without concern for <a class="reference external" href="https://www.postgresql.org/docs/16/sql-syntax-lexical.html#:~:text=maximum%20identifier%20length%20is%2063%20bytes">PostgreSQL name limits</a> that are more constraining than Daml identifiers. If you wish to allocate a “SQL name”, you can create a SQL VIEW in which you reference the above functions.</div></blockquote>
<p>The <code class="docutils literal notranslate"><span class="pre">name</span></code> identifier can be used with or without the package specified:</p>
<ul class="simple">
<li>Fully qualified: <code class="docutils literal notranslate"><span class="pre">&lt;package&gt;:&lt;module&gt;:&lt;template|interface|choice&gt;</span></code></li>
<li>Partially qualified: <code class="docutils literal notranslate"><span class="pre">&lt;module&gt;:&lt;template|interface|choice&gt;</span></code></li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Partially qualified identifiers fail if there is an ambiguous result.</p>
</div>
<p>These functions have optional parameters to allow the user to specify the offset range to be used. Providing these arguments is alternative to using <code class="docutils literal notranslate"><span class="pre">set_*</span></code> functions prior in the session. The following queries are equivalent:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>-- Implicit: geared towards context-oriented exploration
psql=# select set_oldest(&#39;000000000000005000&#39;);
psql=# select set_latest(&#39;000000000000006000&#39;);
psql=# select * from creates(&#39;package:My.Module:Template&#39;);
...

-- Explicit: beneficial to inline the entire context, to emit in a single statement
psql=# select * from creates(&#39;package:My.Module:Template&#39;, &#39;000000000000005000&#39;, &#39;000000000000006000&#39;);
...
</pre></div>
</div>
</div>
<div class="section" id="jsonb-encoding">
<h3>JSONB Encoding<a class="headerlink" href="#jsonb-encoding" title="Permalink to this headline">¶</a></h3>
<p>PQS stores the ledger using a <a class="reference external" href="https://docs.daml.com/json-api/lf-value-specification.html#daml-lf-json-encoding">Daml-LF JSON-based encoding</a> of Daml-LF values. An overview of the encoding is provided below. For more details, refer to <a class="reference external" href="https://docs.daml.com/json-api/lf-value-specification.html#daml-lf-json-encoding">the Daml-LF page</a>.</p>
<p>Users should consult the <a class="reference external" href="https://www.postgresql.org/docs/16/datatype-json.html#JSON-CONTAINMENT">PostgreSQL documentation</a> to understand how to work with JSONB data natively in SQL.</p>
<p>Values on the ledger (contract payloads and keys, interface views, exercise arguments, and return values) can be primitive types, user-defined records, variants, or enums. These types translate to <a class="reference external" href="https://json-schema.org/understanding-json-schema/reference/index.html">JSON types</a> as follows:</p>
<div class="section" id="primitive-types">
<h4>Primitive Types<a class="headerlink" href="#primitive-types" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">ContractID</span></code>: represented as <a class="reference external" href="https://json-schema.org/understanding-json-schema/reference/string.html">string</a>.</li>
<li><code class="docutils literal notranslate"><span class="pre">Int64</span></code>: represented as <a class="reference external" href="https://json-schema.org/understanding-json-schema/reference/string.html">string</a>.</li>
<li><code class="docutils literal notranslate"><span class="pre">Decimal</span></code>: represented as <a class="reference external" href="https://json-schema.org/understanding-json-schema/reference/string.html">string</a>.</li>
<li><code class="docutils literal notranslate"><span class="pre">List</span></code>: represented as <a class="reference external" href="https://json-schema.org/understanding-json-schema/reference/array.html">array</a>.</li>
<li><code class="docutils literal notranslate"><span class="pre">Text</span></code>: represented as <a class="reference external" href="https://json-schema.org/understanding-json-schema/reference/string.html">string</a>.</li>
<li><code class="docutils literal notranslate"><span class="pre">Date</span></code>: days since the Unix epoch, represented as <a class="reference external" href="https://json-schema.org/understanding-json-schema/reference/numeric.html#integer">integer</a>.</li>
<li><code class="docutils literal notranslate"><span class="pre">Time</span></code>: microseconds since the UNIX epoch, represented as <a class="reference external" href="https://json-schema.org/understanding-json-schema/reference/numeric.html#number">number</a>.</li>
<li><code class="docutils literal notranslate"><span class="pre">Bool</span></code>: represented as <a class="reference external" href="https://json-schema.org/understanding-json-schema/reference/boolean.html">boolean</a>.</li>
<li><code class="docutils literal notranslate"><span class="pre">Party</span></code>: represented as <a class="reference external" href="https://json-schema.org/understanding-json-schema/reference/string.html">string</a>.</li>
<li><code class="docutils literal notranslate"><span class="pre">Unit</span></code> &amp; <code class="docutils literal notranslate"><span class="pre">Empty</span></code>: Represented as empty object <code class="docutils literal notranslate"><span class="pre">{}</span></code>.</li>
<li><code class="docutils literal notranslate"><span class="pre">Optional</span></code>: represented as a variant with two constructors: <code class="docutils literal notranslate"><span class="pre">None</span></code> and <code class="docutils literal notranslate"><span class="pre">Some</span></code>.</li>
</ul>
</div>
<div class="section" id="user-defined-types">
<h4>User-Defined Types<a class="headerlink" href="#user-defined-types" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">Record</span></code>: represented as <a class="reference external" href="https://json-schema.org/understanding-json-schema/reference/object.html">object</a>, where each create parameter’s name is a key, and the parameter’s value is the JSON-encoded value.</li>
<li><code class="docutils literal notranslate"><span class="pre">Variant</span></code>: represented as <a class="reference external" href="https://json-schema.org/understanding-json-schema/reference/object.html">object</a>, using the <code class="docutils literal notranslate"><span class="pre">{constructor:</span> <span class="pre">body}</span></code> format, such as <code class="docutils literal notranslate"><span class="pre">{&quot;Left&quot;:</span> <span class="pre">true}</span></code>.</li>
<li><code class="docutils literal notranslate"><span class="pre">Enum</span></code>: represented as <a class="reference external" href="https://json-schema.org/understanding-json-schema/reference/string.html">string</a>, where the value is the constructor name.</li>
</ul>
</div>
</div>
<div class="section" id="querying-patterns">
<h3>Querying Patterns<a class="headerlink" href="#querying-patterns" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div>Scenario: A website user wants to query the state of the ledger after having completed a command (write), which has successfully committed at offset <code class="docutils literal notranslate"><span class="pre">000000000000001350</span></code>. The user does not want to see a version of the ledger prior to this, in order to appear consistent.</div></blockquote>
<p>[!NOTE] This is a common pattern for web interfaces built on eventually-consistent data sources. It can be useful to track the latest offset within the web session, and update it on each interaction (read or write). Such offset is then used to protect any further reads from seeing prior versions.</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>-- fails if the offset is not yet available
SELECT validate_offset_exists(&quot;000000000000001350&quot;);

-- this query only runs if the offset is available, and therefore the user can be assured that the query does not return a prior version.
SELECT * FROM active(&#39;test:Test.User:User&#39;);
</pre></div>
</div>
<blockquote>
<div>Scenario: A user wants to query the most recent available state of the ledger. This user treats the ledger’s Active Contract Set as a database table and is not concerned with history or offsets. This user simply wants to query the (latest) state of the ledger, without consideration for offsets. Querying is inherently limited to one datasource, as the user has no control over the actual offset being used.</div></blockquote>
<p>In this case the user wishes to query all Daml templates of <code class="docutils literal notranslate"><span class="pre">User</span></code> within the <code class="docutils literal notranslate"><span class="pre">Test.User</span></code> templates, where the user is not an administrator:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>SELECT set_latest(NULL);

SELECT *
  FROM active(&#39;test:Test.User:User&#39;) AS &quot;user&quot;
  WHERE &quot;user&quot;.payload-&gt;&gt;&#39;admin&#39; = &#39;false&#39;;
</pre></div>
</div>
<p>By using PostgreSQL’s JSONB querying capabilities, you can join with the related <code class="docutils literal notranslate"><span class="pre">Alias</span></code> template to provide an overview of all users and their aliases:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>SELECT set_latest(NULL);

SELECT *
  FROM active(&#39;test:Test.User:User&#39;) AS &quot;user&quot;
    LEFT JOIN active(&#39;test:Test.User:Alias&#39;) AS &quot;alias&quot;
      ON &quot;user&quot;.payload-&gt;&gt;&#39;user_id&#39; = &quot;alias&quot;.payload-&gt;&gt;&#39;user_id&#39;;
</pre></div>
</div>
<p>Historical events can also be accessed; by default all the history in the datastore is available for querying. The following query returns the data associated with all <code class="docutils literal notranslate"><span class="pre">User</span></code> contracts that were archived in the available history:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>SELECT set_latest(NULL), set_oldest(NULL);

SELECT *
  FROM archives(&#39;test:Test.User:User&#39;) AS &quot;archive&quot;
    JOIN creates(&#39;test:Test.User:User&#39;) AS &quot;user&quot;
      USING contract_id;
</pre></div>
</div>
<blockquote>
<div>Scenario: A report writer wants to query the ledger as of a known historical point in time, to ensure that consistent data is provided regardless of where the ledger subsequently evolved.</div></blockquote>
<p>This user can obtain a point-in-time view of the ledger, to see all non-admin <code class="docutils literal notranslate"><span class="pre">User</span></code> templates that were active at that point in time:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>SELECT set_latest(nearest_offset(&#39;2020-01-01 00:00:00+0&#39;));

SELECT &quot;user&quot;.*
  FROM active(&#39;test:Test.User:User&#39;) AS &quot;user&quot;
  WHERE &quot;user&quot;.payload-&gt;&gt;&#39;admin&#39; = &#39;false&#39;;
</pre></div>
</div>
<blockquote>
<div>Scenario: Query the history of the ledger to determine how many aliases have existed for each user who was active at <code class="docutils literal notranslate"><span class="pre">2020-01-01</span></code>:</div></blockquote>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>SELECT set_latest(nearest_offset(&#39;2020-01-01 00:00:00+0&#39;)), set_oldest(NULL);

SELECT &quot;user&quot;.user_id, COUNT(alias.*) AS alias_count
  FROM active(&#39;test:Test.User:User&#39;) AS &quot;user&quot;
    JOIN creates(&#39;test:Test.User:Alias&#39;) AS alias
      ON &quot;user&quot;.payload-&gt;&gt;&#39;user_id&#39; = alias.payload-&gt;&gt;&#39;user_id&#39;
  WHERE &quot;user&quot;.payload-&gt;&gt;&#39;admin&#39; = &#39;false&#39;;
</pre></div>
</div>
<blockquote>
<div>Scenario: An automation user wants to query from a fixed offset (“repeatable read” consistency) and write their query in familiar SQL.</div></blockquote>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>-- fails if the datastore has not yet reached the given offset
SELECT set_latest(&quot;000000000000001250&quot;);

-- this query run at the nominated offset
SELECT ...
</pre></div>
</div>
<p>The above queries now observe active contracts as of the given offset. Therefore, the example queries presented above are unchanged.</p>
<blockquote>
<div>Scenario: A user wants to present a limited amount of history to their users. They only want to see the last 90 days of history.</div></blockquote>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>-- fails if this offset has already been pruned from the datastore
SELECT set_oldest(nearest_offset(INTERVAL &#39;90 days&#39;));

-- audit trail of all created users
SELECT * FROM creates(&#39;test:Test.User:User&#39;);
</pre></div>
</div>
<blockquote>
<div>Scenario: A user wants to enquire where the datastore is up to, in terms of offset availability.</div></blockquote>
<p>Here, the user requests the most recent and oldest available offsets to be used, and in the process returns what these offsets are:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>SELECT set_latest(NULL) AS latest_offset,
       set_oldest(NULL) AS oldest_offset;
</pre></div>
</div>
</div>
<div class="section" id="summary-functions">
<h3>Summary functions<a class="headerlink" href="#summary-functions" title="Permalink to this headline">¶</a></h3>
<p>Summary functions are available to provide an overview of the ledger data available within the nominated offset range:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">summary_transients(from_offset,</span> <span class="pre">to_offset)</span></code>: the number of transients per Daml fully qualified name within the offset range.</li>
<li><code class="docutils literal notranslate"><span class="pre">summary_updates(from_offset,</span> <span class="pre">to_offset)</span></code>: summary of create and archive counts per Daml fully qualified name within the offset range.</li>
</ul>
<p>The following functions retrieve event counts per <code class="docutils literal notranslate"><span class="pre">template_fqn</span></code>:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">summary_active(at_offset)</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">summary_creates(from_offset,</span> <span class="pre">to_offset)</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">summary_archives(from_offset,</span> <span class="pre">to_offset)</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">summary_exercises(from_offset,</span> <span class="pre">to_offset)</span></code></li>
</ul>
<p>Valid values for <code class="docutils literal notranslate"><span class="pre">payload_type</span></code> are:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">template</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">interface_view</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">consuming_choice</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">nonconsuming_choice</span></code></li>
</ul>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>postgres=# select * from summary_active();
  OR
postgres=# select * from summary_active(&#39;00000000000000000a&#39;);

template_fqn                                 |payload_type|count|
---------------------------------------------+------------+-----+
QueryingPackage:NameRegistry:BirthCertificate|template    |    2|
QueryingPackage:NameRegistry:INameDocument   |interface   |    2|
(2 rows)
</pre></div>
</div>
</div>
<div class="section" id="lookup-functions">
<h3>Lookup functions<a class="headerlink" href="#lookup-functions" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">lookup_contract(contract_id)</span></code> is a mechanism to retrieve contract data without needing to know its Daml qualified name. The function returns both contract and all associated interface view projections, distinguishable by the <code class="docutils literal notranslate"><span class="pre">payload_type</span></code> column.</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>postgres=# select right(template_fqn, 64) template_fqn, fqn_type, &quot;offset&quot;, left(contract_id, 8) contract_id, left(event_id, 8) event_id, payload
from lookup_contract(&#39;0065497c49743b751946e7686fd853adc68b3081fc0e83bd418deb0d3fc4a5a610ca01122039fd9bf65a40a3f374403ea20fd82fd86c5f6c1bb5094c82a901ca162c79be4c&#39;);
            template_fqn        |    fqn_type    |       offset       | contract_id | event_id |                                                                         payload
--------------------------------+----------------+--------------------+-------------+----------+----------------------------------------------------------------------------------------------------------------------------------------------------------
mypkg:PingPong:BirthCertificate | template       | 000000000000000009 | 0065497c    | #1220f9a | {&quot;owner&quot;: &quot;Alice::122053a2c7fb4d821b2d09ee4da44f4f575b24312045a62eb65fbba050bf03ae4cc1&quot;, &quot;user_id&quot;: &quot;id-joe&quot;, &quot;lastName&quot;: &quot;Bloggs&quot;, &quot;firstName&quot;: &quot;Fred&quot;}
mypkg:PingPong:INameDocument    | interface_view | 000000000000000009 | 0065497c    | #1220f9a | {&quot;name&quot;: &quot;Fred Bloggs&quot;, &quot;owner&quot;: &quot;Alice::122053a2c7fb4d821b2d09ee4da44f4f575b24312045a62eb65fbba050bf03ae4cc1&quot;}

(2 rows)
</pre></div>
</div>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">lookup_exercises(contract_id)</span></code> - a mechanism to retrieve choice exercise data without needing to know the Daml qualified name; knowing the contract ID is sufficient.</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>postgres=# select right(choice_fqn, 40) choice_fqn, right(template_fqn, 40) template_fqn, fqn_type, exercised_at_offset, left(contract_id, 8) contract_id, left(exercise_event_id, 8) exercise_event_id, argument, result
from lookup_exercises(&#39;009a92084a89683c6c2cdbec4231a068238e11a93ef6d8722c48d23acdce3d87fdca011220f554549ca007ee1899cdef8993fe18e5fcf695fd0d21808a75402b520f183a29&#39;);
               choice_fqn              |           template_fqn          | fqn_type         | exercised_at_offset | contract_id | exercise_event_id |         argument         |                                                                    result
---------------------------------------+---------------------------------+------------------+---------------------+-------------+-------------------+--------------------------+----------------------------------------------------------------------------------------------------------------------------------------------
mypkg:PingPong:INameDocumentNameChange | mypkg:PingPong:BirthCertificate | consuming_choice | 00000000000000000f  | 009a9208    | #1220b17          | {&quot;newName&quot;: &quot;Bill Kirk&quot;} | &quot;00901817b88a0a278e134bb58ee61e96cf315da5a635ce05da0aae4c022641da64ca01122026b95982760daf9109ff24d13573d683f973b7f9ff62492e4a8d59a356dc68be&quot;

(1 row)
</pre></div>
</div>
</li>
</ul>
</div>
<div class="section" id="optimization">
<h3>Optimization<a class="headerlink" href="#optimization" title="Permalink to this headline">¶</a></h3>
<p>This section briefly discusses optimizing the PQS database to make the most of the capabilities of PostgreSQL. The topic is broad, and there are many resources available. Refer to the <a class="reference external" href="https://www.postgresql.org/docs/">PostgreSQL documentation</a> for more information.</p>
<p>PQS makes extensive use of JSONB columns to store ledger data. Familiarity with JSONB is essential to optimize queries. The following sections provide some tips to help you get started.</p>
<div class="section" id="indexing">
<h4>Indexing<a class="headerlink" href="#indexing" title="Permalink to this headline">¶</a></h4>
<p>Indexes are an important tool for improving the performance of queries with JSONB content. Users are expected to create JSONB-based indexes to optimize their model-specific queries, where additional read efficiency justifies the inevitable write-amplification. Simple indexes can be created using the following helper function. More sophisticated indexes can be created using the standard PostgreSQL syntax.</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>call create_index_for_contract(&#39;token_wallet_holder_idx&#39;, &#39;register:DA.Register:Token&#39;, &#39;(payload-&gt;&#39;&#39;wallet&#39;&#39;-&gt;&gt;&#39;&#39;holder&#39;&#39;)&#39;, &#39;hash&#39;);
</pre></div>
</div>
<p>In this example, the index allows comparisons on the wallet holder. It has the additional advantage that the results of the JSON inspection are cached/materialized and do not have to be recomputed for every access.</p>
<p>PostgreSQL provides several index types, including B-tree, Hash, GiST, SP-GiST, GIN, and BRIN. Each index type uses a different algorithm that is best suited to different types of queries. The table below provides a basic explanation of where they can be used. For a more thorough understanding, consult the <a class="reference external" href="https://www.postgresql.org/docs/current/indexes.html">chapter on indexes</a> in the PostgreSQL manual.</p>
<table border="1" class="docutils align-default">
<colgroup>
<col width="5%" />
<col width="95%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Index Type</th>
<th class="head">Comment</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Hash</td>
<td>Compact. Useful only for filters that use =.</td>
</tr>
<tr class="row-odd"><td>B-tree</td>
<td>Can be used in filters that use &lt;, &lt;=, =, &gt;=, &gt; as well as postfix string comparisons (e.g. LIKE ‘foo%’). B-trees can also speed up ORDER BY clauses and can be used to retrieve subexpressions values from the index rather than evaluating the subexpressions (i.e. when used in a SELECT clause).</td>
</tr>
<tr class="row-even"><td>GIN</td>
<td>Useful for subset operators.</td>
</tr>
<tr class="row-odd"><td>GiST, SP-GiST</td>
<td>See PostgreSQL manual.</td>
</tr>
<tr class="row-even"><td>BRIN</td>
<td>Efficient for tables where rows are already physically sorted for a particular column.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="pagination">
<h4>Pagination<a class="headerlink" href="#pagination" title="Permalink to this headline">¶</a></h4>
<p>Pagination refers to splitting up large result sets into pages of up to <code class="docutils literal notranslate"><span class="pre">n</span></code> results. It can allow user navigation, such as moving to the next page to display, going to the end of the result set, or jumping around in the middle. It can be a very effective user experience when there is a large ordered data set. The following pagination use cases are important:</p>
<table border="1" class="docutils align-default">
<colgroup>
<col width="18%" />
<col width="24%" />
<col width="58%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Pagination Use Case</th>
<th class="head">&#160;</th>
<th class="head">Example</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Random access</td>
<td>Accessing arbitrary pages</td>
<td>Client-side binary search of results; A user opens random pages in a search result.</td>
</tr>
<tr class="row-odd"><td>Iteration or enumeration</td>
<td>Accessing page 1, then page 2, …</td>
<td>Programmatic processing of all results in batchesiter.</td>
</tr>
</tbody>
</table>
<p>For efficient pagination iteration, you need a stable column to sort on. The requirements are:</p>
<ul class="simple">
<li>It should be acceptable to the user to sort results on the column.</li>
<li>It must have unique values.</li>
<li>A unique B-tree index should exist.</li>
</ul>
<p>You can then retrieve a page using queries with the specified <code class="docutils literal notranslate"><span class="pre">page_num</span></code> and of size <code class="docutils literal notranslate"><span class="pre">page_size</span></code>:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>SELECT *
  FROM the_source
  ORDER BY the_key
  LIMIT page_size
  OFFSET (page_num * page_size);
</pre></div>
</div>
<div class="admonition caution">
<p class="first admonition-title">Caution</p>
<p class="last">Large <code class="docutils literal notranslate"><span class="pre">OFFSET</span></code> values become progressively slower, as increasing number of rows need to be read and discarded. See the chapter on <a class="reference external" href="https://www.postgresql.org/docs/current/queries-limit.html">LIMIT and OFFSET</a> in the PostgreSQL manual.</p>
</div>
<p>Keyset pagination is a scaleable and efficient method to use. This is a technique where you use the last value of the previous page to fetch the next page. The following query fetches the next page of results after the last value of the previous page. You should consider an appropriate index for the key column:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>SELECT *
  FROM the_table
  WHERE the_key &gt; prev_page_last_key
  ORDER BY the_key
  LIMIT page_size
</pre></div>
</div>
</div>
<div class="section" id="psql-tips">
<h4>psql Tips<a class="headerlink" href="#psql-tips" title="Permalink to this headline">¶</a></h4>
<p>Type <code class="docutils literal notranslate"><span class="pre">psql</span> <span class="pre">&lt;dbname&gt;</span></code> on the command line to enter the PostgreSQL REPL (if in doubt, use <code class="docutils literal notranslate"><span class="pre">postgres</span></code> as the database name). Some useful commands are shown in the following table:</p>
<table border="1" class="docutils align-default">
<colgroup>
<col width="23%" />
<col width="77%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Command</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">\l</span></code></td>
<td>List all databases.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">\c</span> <span class="pre">database</span></code></td>
<td>Switch to a different database.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">\d</span></code></td>
<td>List all tables in the current database.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">\d</span> <span class="pre">table</span></code></td>
<td>Show a table, including column types and indexes.</td>
</tr>
</tbody>
</table>
<p>To manage users:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">CREATE</span><span class="w"> </span><span class="k">USER</span><span class="w"> </span><span class="n">the_user</span><span class="w"> </span><span class="k">WITH</span><span class="w"> </span><span class="n">PASSWORD</span><span class="w"> </span><span class="s1">&#39;********&#39;</span><span class="p">;</span>
<span class="k">GRANT</span><span class="w"> </span><span class="k">SELECT</span><span class="p">,</span><span class="w"> </span><span class="k">UPDATE</span><span class="p">,</span><span class="w"> </span><span class="k">INSERT</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="k">ALL</span><span class="w"> </span><span class="n">TABLES</span><span class="w"> </span><span class="k">IN</span><span class="w"> </span><span class="k">SCHEMA</span><span class="w"> </span><span class="n">postgres</span><span class="w"> </span><span class="k">TO</span><span class="w"> </span><span class="n">the_user</span><span class="p">;</span>
<span class="k">ALTER</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="k">PRIVILEGES</span><span class="w"> </span><span class="k">IN</span><span class="w"> </span><span class="k">SCHEMA</span><span class="w"> </span><span class="n">postgres</span><span class="w"> </span><span class="k">GRANT</span><span class="w"> </span><span class="k">SELECT</span><span class="p">,</span><span class="w"> </span><span class="k">UPDATE</span><span class="p">,</span><span class="w"> </span><span class="k">INSERT</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="n">TABLES</span><span class="w"> </span><span class="k">TO</span><span class="w"> </span><span class="k">user</span><span class="p">;</span>
<span class="k">GRANT</span><span class="w"> </span><span class="k">EXECUTE</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="k">ALL</span><span class="w"> </span><span class="n">FUNCTIONS</span><span class="w"> </span><span class="k">IN</span><span class="w"> </span><span class="k">SCHEMA</span><span class="w"> </span><span class="n">postgres</span><span class="w"> </span><span class="k">TO</span><span class="w"> </span><span class="n">the_user</span><span class="p">;</span>
<span class="k">GRANT</span><span class="w"> </span><span class="k">CREATE</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="n">postgres</span><span class="w"> </span><span class="k">TO</span><span class="w"> </span><span class="n">the_user</span><span class="p">;</span>
<span class="k">DROP</span><span class="w"> </span><span class="k">USER</span><span class="w"> </span><span class="n">the_user</span><span class="p">;</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">psql</span></code> can also be used for scripting:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>$ psql postgres &lt;&lt;END
SELECT * FROM ...;
END
</pre></div>
</div>
<p>The script continues to execute if a command fails.</p>
</div>
<div class="section" id="query-analysis">
<h4>Query Analysis<a class="headerlink" href="#query-analysis" title="Permalink to this headline">¶</a></h4>
<p>In <code class="docutils literal notranslate"><span class="pre">psql</span></code> you can prefix a query with <code class="docutils literal notranslate"><span class="pre">EXPLAIN</span> <span class="pre">ANALYZE</span></code> to get an explanation of how the query would be executed. This helps verify that a query executes as expected, using the indexes that you expect it to.</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>EXPLAIN ANALYZE
SELECT COUNT(*) FROM ...;
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="pruning">
<h2>Pruning<a class="headerlink" href="#pruning" title="Permalink to this headline">¶</a></h2>
<p>Pruning ledger data from the database can help reduce storage size and improve query performance by removing old and irrelevant data. PQS provides two approaches to prune ledger data: using the PQS CLI or using the <code class="docutils literal notranslate"><span class="pre">prune_to_offset</span></code> PostgreSQL function.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Calling either the <code class="docutils literal notranslate"><span class="pre">prune</span></code> CLI command with <code class="docutils literal notranslate"><span class="pre">--prune-mode</span> <span class="pre">Force</span></code> or calling the PostgreSQL function <code class="docutils literal notranslate"><span class="pre">prune_to_offset</span></code> deletes data irrevocably.</p>
</div>
<div class="section" id="data-deletion-and-changes">
<h3>Data Deletion and Changes<a class="headerlink" href="#data-deletion-and-changes" title="Permalink to this headline">¶</a></h3>
<p>Both pruning approaches (CLI and PostgreSQL function) share the same behavior in terms of data deletion and changes.</p>
<p>Active contracts are preserved under a new offset, while all other transaction-related data up to, and including the target offset is deleted. This approach is in line with ledger pruning <a class="reference external" href="https://docs.daml.com/ops/pruning.html#how-the-daml-ledger-api-is-affected">recommendation</a>:</p>
<blockquote>
<div>As a consequence, after pruning, a Daml application must bootstrap from the Active Contract Service and a recent offset.</div></blockquote>
<p>PQS helps users avoid an unnecessary bootstrapping process, but achieves the same outcome as if it had obtained a fresh snapshot (of the Active Contract Set) from the ledger.</p>
<p>The target offset, that is, the offset provided via <code class="docutils literal notranslate"><span class="pre">--prune-target</span></code> or as argument to <code class="docutils literal notranslate"><span class="pre">prune_to_offset</span></code> is the transaction with the highest offset to be deleted by the pruning operation.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If the provided offset does not have a transaction associated with it, the effective target offset becomes the oldest offset that succeeds (is greater than) the provided offset.</p>
</div>
<p>When using either pruning method, the following data will be changed:</p>
<ul class="simple">
<li>The offset of active contracts is moved to the oldest known offset which succeeds the pruning target offset. For example, this could be the offset of the oldest transaction that is unaffected by the pruning operation.</li>
<li>Transactions with offsets up to and including the target offset, including associated archived contracts and exercise events, are deleted.</li>
</ul>
<p>The following data is unaffected:</p>
<ul class="simple">
<li>Transaction-related data (event/choices/contracts) for transaction with an offset greater than the pruning target.</li>
</ul>
<p>Pruning is a destructive operation and cannot be undone. If necessary, make sure to back up your data before performing any pruning operations.</p>
</div>
<div class="section" id="constraints">
<h3>Constraints<a class="headerlink" href="#constraints" title="Permalink to this headline">¶</a></h3>
<p>Some constraints apply to pruning operations:</p>
<ol class="arabic simple">
<li>The provided target offset must be within the bounds of the contiguous history. If the target offset is outside the bounds, an error is raised.</li>
<li>The pruning operation cannot coincide with the latest consistent checkpoint of the contiguous history. If so, it raises an error.</li>
</ol>
</div>
<div class="section" id="pruning-from-the-command-line">
<h3>Pruning from the command line<a class="headerlink" href="#pruning-from-the-command-line" title="Permalink to this headline">¶</a></h3>
<p>The PQS CLI provides a <code class="docutils literal notranslate"><span class="pre">prune</span></code> command that allows you to prune the ledger data up to a specified offset, timestamp, or duration.</p>
<p>For detailed information on all available options, please run <code class="docutils literal notranslate"><span class="pre">./scribe.jar</span> <span class="pre">datastore</span> <span class="pre">postgres-document</span> <span class="pre">prune</span> <span class="pre">--help-verbose</span></code>.</p>
<p>To use the <code class="docutils literal notranslate"><span class="pre">prune</span></code> command, you need to provide a pruning target as an argument. The pruning target can be an offset, a timestamp (ISO 8601), or a duration (ISO 8601):</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>$ ./scribe.jar datastore postgres-document prune --prune-target &#39;&lt;offset&gt;&#39;
...
</pre></div>
</div>
<p>By default, the <code class="docutils literal notranslate"><span class="pre">prune</span></code> command performs a dry run, meaning it displays the effects of the pruning operation without actually deleting any data. To execute the pruning operation, add the <code class="docutils literal notranslate"><span class="pre">--prune-mode</span> <span class="pre">Force</span></code> option:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>$ ./scribe.jar datastore postgres-document prune --prune-target &#39;&lt;offset&gt;&#39; --prune-mode Force
...
</pre></div>
</div>
</div>
<div class="section" id="example-with-timestamp-and-duration">
<h3>Example with Timestamp and Duration<a class="headerlink" href="#example-with-timestamp-and-duration" title="Permalink to this headline">¶</a></h3>
<p>In addition to providing an offset as <code class="docutils literal notranslate"><span class="pre">--prune-target</span></code>, a timestamp or duration can also be used as a pruning cut-off. For example, to prune data older than 30 days (relative to now), you can use the following command:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>$ ./scribe.jar datastore postgres-document prune --prune-target P30D
...
</pre></div>
</div>
<p>To prune data up to a specific timestamp, you can use the following command:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>$ ./scribe.jar datastore postgres-document prune --prune-target 2023-01-30T00:00:00.000Z
...
</pre></div>
</div>
</div>
<div class="section" id="pruning-from-sql">
<h3>Pruning from SQL<a class="headerlink" href="#pruning-from-sql" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">prune_to_offset()</span></code> function is a PostgreSQL function that allows you to prune the ledger data up to a specified offset. It has the same behavior as the <code class="docutils literal notranslate"><span class="pre">datastore</span> <span class="pre">postgres-document</span> <span class="pre">prune</span></code> command, but does not feature a dry-run option.</p>
<p>To use <code class="docutils literal notranslate"><span class="pre">prune_to_offset</span></code>, you need to provide an offset:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>SELECT * FROM prune_to_offset(&#39;&lt;offset&gt;&#39;);
</pre></div>
</div>
<p>The function deletes transactions and updates active contracts as described above.</p>
<p>You can use <code class="docutils literal notranslate"><span class="pre">prune_to_offset</span></code> in combination with the <code class="docutils literal notranslate"><span class="pre">nearest_offset</span></code> function to prune data up to a specific timestamp or interval. For example, to prune data older than 30 days, you can use the following query:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>SELECT * FROM prune_to_offset(nearest_offset(interval &#39;30 days&#39;));
</pre></div>
</div>
</div>
</div>
<div class="section" id="authentication">
<h2>Authentication<a class="headerlink" href="#authentication" title="Permalink to this headline">¶</a></h2>
<p>To run PQS with authentication you need to turn on via <code class="docutils literal notranslate"><span class="pre">--source-ledger-auth</span> <span class="pre">OAuth</span></code>. PQS uses <a class="reference external" href="https://datatracker.ietf.org/doc/html/rfc6749#section-4.4">OAuth 2.0 Client Credentials flow</a> that requires additional <code class="docutils literal notranslate"><span class="pre">--pipeline-oauth</span></code> parameters:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>--pipeline-oauth-clientid my_client_id \
--pipeline-oauth-clientsecret deadbeef \
--pipeline-oauth-cafile ca.crt \
--pipeline-oauth-endpoint https://my-auth-server/token
</pre></div>
</div>
<p>PQS uses the supplied client credentials (<code class="docutils literal notranslate"><span class="pre">clientid</span></code> and <code class="docutils literal notranslate"><span class="pre">clientsecret</span></code>) to access the token endpoint (<code class="docutils literal notranslate"><span class="pre">endpoint</span></code>) of the OAuth service of your choice. Optional <code class="docutils literal notranslate"><span class="pre">cafile</span></code> parameter is a path to the Certification Authority certificate used to access the token endpoint. If <code class="docutils literal notranslate"><span class="pre">cafile</span></code> is not set, the Java TrustStore is used.</p>
<p>Please make sure you have <a class="reference external" href="https://docs.daml.com/tools/sandbox.html#run-with-authorization">configured your Daml participant to use authorization</a> and an authorization server to accept your client credentials for <code class="docutils literal notranslate"><span class="pre">grant_type=client_credentials</span></code> and <code class="docutils literal notranslate"><span class="pre">scope=daml_ledger_api</span></code>.</p>
<p>Full example:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>$ ./scribe.jar pipeline ledger postgres-document \
    --source-ledger-auth OAuth \
    --pipeline-oauth-clientid my_client_id \
    --pipeline-oauth-clientsecret deadbeef \
    --pipeline-oauth-cafile ca.crt \
    --pipeline-oauth-endpoint https://my-auth-server/token

03:32:02.407 I [zio-fiber-75] com.digitalasset.scribe.appversion.package:14 scribe, version: v0.0.1-main+3892
03:32:02.671 I [zio-fiber-98] com.digitalasset.scribe.configuration.package:43 Applied configuration:
[...]
03:32:03.592 I [zio-fiber-90] com.digitalasset.auth.TokenService:76 Initialised with tokenEndpoint=https://my-auth-server/token and clientId=my_client_id
[...]
</pre></div>
</div>
<div class="section" id="audience-based-token">
<h3>Audience-Based Token<a class="headerlink" href="#audience-based-token" title="Permalink to this headline">¶</a></h3>
<p>For <a class="reference external" href="https://docs.daml.com/app-dev/authorization.html#audience-based-tokens">Audience-Based Tokens</a> use the <code class="docutils literal notranslate"><span class="pre">--pipeline-oauth-parameters-audience</span></code> parameter:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>$ ./scribe.jar pipeline ledger postgres-document \
    --source-ledger-auth OAuth \
    --pipeline-oauth-clientid my_client_id \
    --pipeline-oauth-clientsecret deadbeef \
    --pipeline-oauth-cafile ca.crt \
    --pipeline-oauth-endpoint https://my-auth-server/token \
    --pipeline-oauth-scope None \
    --pipeline-oauth-parameters-audience https://daml.com/jwt/aud/participant/my_participant_id
...
</pre></div>
</div>
</div>
<div class="section" id="scope-based-token">
<h3>Scope-Based Token<a class="headerlink" href="#scope-based-token" title="Permalink to this headline">¶</a></h3>
<p>For <a class="reference external" href="https://docs.daml.com/app-dev/authorization.html#scope-based-tokens">Scope-Based Tokens</a> use the <code class="docutils literal notranslate"><span class="pre">--pipeline-oauth-scope</span></code> parameter:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>$ ./scribe.jar pipeline ledger postgres-document \
    --source-ledger-auth OAuth \
    --pipeline-oauth-clientid my_client_id \
    --pipeline-oauth-clientsecret deadbeef \
    --pipeline-oauth-cafile ca.crt \
    --pipeline-oauth-endpoint https://my-auth-server/token \
    --pipeline-oauth-scope myScope \
    --pipeline-oauth-parameters-audience https://daml.com/jwt/aud/participant/my_participant_id
...
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The default value of the <code class="docutils literal notranslate"><span class="pre">--pipeline-oauth-scope</span></code> parameter is <code class="docutils literal notranslate"><span class="pre">daml_ledger_api</span></code>. Ledger API requires <code class="docutils literal notranslate"><span class="pre">daml_ledger_api</span></code> in the list of scopes unless <a class="reference external" href="https://docs.daml.com/canton/usermanual/apis.html#configuring-the-target-scope-for-jwt-authorization">custom target scope</a> is configured.</p>
</div>
</div>
<div class="section" id="custom-daml-claims-tokens">
<h3>Custom Daml Claims Tokens<a class="headerlink" href="#custom-daml-claims-tokens" title="Permalink to this headline">¶</a></h3>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">PQS authenticates as a user, as defined through the <a class="reference external" href="https://docs.daml.com/canton/usermanual/identity_management.html#user-identity-management">User Identity Management</a> feature. Consequently, <a class="reference external" href="https://docs.daml.com/app-dev/authorization.html#custom-daml-claims-access-tokens">Custom Daml Claims Access Tokens</a> are not supported. An audience-based or scope-based token must be used instead.</p>
</div>
</div>
<div class="section" id="static-access-token">
<h3>Static Access Token<a class="headerlink" href="#static-access-token" title="Permalink to this headline">¶</a></h3>
<p>Alternatively, you can configure PQS to use a static access token (meaning it is not refreshed) using the <code class="docutils literal notranslate"><span class="pre">--pipeline-oauth-accesstoken</span></code> parameter:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>$ ./scribe.jar pipeline ledger postgres-document \
    --source-ledger-auth OAuth \
    --pipeline-oauth-accesstoken my_access_token
...
</pre></div>
</div>
</div>
<div class="section" id="ledger-api-users-and-daml-parties">
<h3>Ledger API Users and Daml Parties<a class="headerlink" href="#ledger-api-users-and-daml-parties" title="Permalink to this headline">¶</a></h3>
<p>PQS connects to a participant (via Ledger API) as a user, as defined through the <a class="reference external" href="https://docs.daml.com/canton/usermanual/identity_management.html#user-identity-management">User Identity Management</a> feature. PQS gets its user identity by providing an OAuth token of that user. After authenticating, the participant has the authorization information to know what Daml Party data the user can access. By default, PQS subscribes to data for all parties available to PQS’s authenticated user. However, this scope can be limited via the <code class="docutils literal notranslate"><span class="pre">--pipeline-filter-parties</span></code> filter parameter.</p>
</div>
<div class="section" id="token-expiry">
<h3>Token expiry<a class="headerlink" href="#token-expiry" title="Permalink to this headline">¶</a></h3>
<p>JWT tokens have an expiration time. PQS has a mechanism to automatically request a new access token from the Auth Server, before the old access token expires. To set when PQS should try to request a new access token, use <code class="docutils literal notranslate"><span class="pre">--pipeline-oauth-preemptexpiry</span></code> (default “PT1M” - one minute), meaning: request a new access token one minute before the current access token expires. This new access token is used for any future Ledger API calls. However, for streaming calls such as <a class="reference external" href="https://docs.daml.com/app-dev/grpc/proto-docs.html#gettransactionsrequest">getTransactions</a> the access token is part of the request that initiates the streaming. Canton versions prior to 2.9 terminate the stream with error <code class="docutils literal notranslate"><span class="pre">PERMISSION_DENIED</span></code> as soon as the old access token expires to prevent streaming forever based on the old access token. Versions 2.9+ fail with code <code class="docutils literal notranslate"><span class="pre">ABORTED</span></code> and description <code class="docutils literal notranslate"><span class="pre">ACCESS_TOKEN_EXPIRED</span></code> and PQS streams from the offset of the last successfully processed transaction.</p>
</div>
</div>
<div class="section" id="history-slicing">
<h2>History Slicing<a class="headerlink" href="#history-slicing" title="Permalink to this headline">¶</a></h2>
<p>As described in <a class="reference external" href="003-resilience.md#ledger-streaming--recovery">Ledger Streaming &amp; Recovery</a> you can use PQS with <code class="docutils literal notranslate"><span class="pre">--pipeline-ledger-start</span></code> and <code class="docutils literal notranslate"><span class="pre">--pipeline-ledger-stop</span></code> to ask for the slice of the history you want. There are some constraints on start and stop offsets which cause PQS to fail-fast if they are violated.</p>
<p>You cannot use:</p>
<ol class="arabic simple">
<li><strong>Offsets that are outside ledger history</strong></li>
</ol>
<p><img alt="image5" src="../_images/pqs-user-guide-6.svg" /></p>
<p><img alt="image6" src="../_images/pqs-user-guide-7.svg" /></p>
<p><img alt="image7" src="../_images/pqs-user-guide-8.svg" /></p>
<ol class="arabic simple" start="2">
<li><strong>Pruned offsets or Genesis on pruned ledger</strong></li>
</ol>
<p><img alt="image8" src="../_images/pqs-user-guide-9.svg" /></p>
<ol class="arabic simple" start="3">
<li><strong>Offsets that lead to a gap in datastore history</strong></li>
</ol>
<p><img alt="image9" src="../_images/pqs-user-guide-10.svg" /></p>
<ol class="arabic simple" start="4">
<li><strong>Offsets that are before the PQS datastore history</strong></li>
</ol>
<p><img alt="image10" src="../_images/pqs-user-guide-11.svg" /></p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>In the above examples:</p>
<ul class="last simple">
<li><strong>Request</strong> represents offsets requested via <code class="docutils literal notranslate"><span class="pre">--pipeline-ledger-start</span></code> and <code class="docutils literal notranslate"><span class="pre">--pipeline-ledger-stop</span></code> arguments.</li>
<li><strong>Participant</strong> represents the availability of unpruned ledger history in the participant.</li>
<li><strong>Datastore</strong> represents data in the PQS database.</li>
</ul>
</div>
</div>
<div class="section" id="reset-procedure">
<h2>Reset Procedure<a class="headerlink" href="#reset-procedure" title="Permalink to this headline">¶</a></h2>
<div class="section" id="reset">
<h3>Reset<a class="headerlink" href="#reset" title="Permalink to this headline">¶</a></h3>
<p>Reset-to-offset is a manual procedure that deletes all transactions from the PQS database after a given offset. This allows you to restart processing from the offset as if subsequent transactions have never been processed.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Reset is a dangerous, destructive, and permanent procedure that needs to be coordinated within the entire ecosystem and not performed in isolation.</p>
</div>
<p>Reset can be useful to perform a point-in-time rollback of the ledger in a range of circumstances. For example, in the event of:</p>
<ol class="arabic simple">
<li><strong>Unexepected new entities</strong> - A new scope, such as a Party or template, appears in ledger transactions without coordination. That is, new transactions arrive without ensuring PQS is restarted - to ensure it knows about these new enitities prior.</li>
<li><strong>Ledger roll-back</strong> - If a ledger is rolled-back due to the disaster recovery process, you will need to perform a similar roll back with PQS. This is a manual process that requires coordination with the participant.</li>
</ol>
<p>The procedure:</p>
<ul>
<li><p class="first">Stop any applications that use the PQS database.</p>
</li>
<li><p class="first">Stop the PQS process.</p>
</li>
<li><p class="first">Connect to the PostgreSQL as an administrator.</p>
</li>
<li><p class="first">Prevent PQS database readers from interacting (<code class="docutils literal notranslate"><span class="pre">REVOKE</span> <span class="pre">CONNECT</span></code>..).</p>
</li>
<li><p class="first">Terminate any other remaining connections:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>SELECT pg_terminate_backend(pid) FROM pg_stat_activity WHERE pid &lt;&gt; pg_backend_pid( ) AND datname = current_database( )..
</pre></div>
</div>
</li>
<li><p class="first">Obtain a summary of the scope of the proposed reset and validate that the intended outcome matches your expectations by performing a dry run:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>SELECT * FROM validate_reset_offset(&quot;0000000000000A8000&quot;)
</pre></div>
</div>
</li>
<li><p class="first">Implement the destructive changes of removing all transactions after the given offset and adjust internal metadata to allow PQS to resume processing from the supplied offset:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>SELECT * FROM reset_to_offset(&quot;0000000000000A8000&quot;)
</pre></div>
</div>
</li>
<li><p class="first">Re-enable access for PQS database users: <code class="docutils literal notranslate"><span class="pre">GRANT</span> <span class="pre">CONNECT</span></code>..)</p>
</li>
<li><p class="first">Wait for the Participant to be available post-repair.</p>
</li>
<li><p class="first">Start PQS.</p>
</li>
<li><p class="first">Conduct any remedial action required in PQS database consumers, to account for the fact that the ledger appears to be rolled back to the specified offset.</p>
</li>
<li><p class="first">Start applications that use the PQS database and resume operation.</p>
</li>
</ul>
</div>
<div class="section" id="constraints-1">
<span id="id3"></span><h3>Constraints<a class="headerlink" href="#constraints-1" title="Permalink to this headline">¶</a></h3>
<p>The provided target offset must be within the bounds of the contiguous history. If the target offset is outside the bounds, it raises an error.</p>
</div>
</div>
<div class="section" id="logging-1">
<span id="id4"></span><h2>Logging<a class="headerlink" href="#logging-1" title="Permalink to this headline">¶</a></h2>
<div class="section" id="log-level">
<h3>Log Level<a class="headerlink" href="#log-level" title="Permalink to this headline">¶</a></h3>
<p>Set log level with <code class="docutils literal notranslate"><span class="pre">--logger-level</span></code>. Possible value are <code class="docutils literal notranslate"><span class="pre">All</span></code>, <code class="docutils literal notranslate"><span class="pre">Fatal</span></code>, <code class="docutils literal notranslate"><span class="pre">Error</span></code>, <code class="docutils literal notranslate"><span class="pre">Warning</span></code>, <code class="docutils literal notranslate"><span class="pre">Info</span></code> (default), <code class="docutils literal notranslate"><span class="pre">Debug</span></code>, <code class="docutils literal notranslate"><span class="pre">Trace</span></code>:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>--logger-level=Debug
</pre></div>
</div>
</div>
<div class="section" id="per-logger-log-level">
<h3>Per-Logger Log Level<a class="headerlink" href="#per-logger-log-level" title="Permalink to this headline">¶</a></h3>
<p>Use <code class="docutils literal notranslate"><span class="pre">--logger-mappings</span></code> to adjust the log level for individual loggers. For example, to remove Netty network traffic from a more detailed overall log:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>--logger-mappings-io.netty=Warning \
--logger-mappings-io.grpc.netty=Trace
</pre></div>
</div>
</div>
<div class="section" id="log-pattern">
<h3>Log Pattern<a class="headerlink" href="#log-pattern" title="Permalink to this headline">¶</a></h3>
<p>With <code class="docutils literal notranslate"><span class="pre">--logger-pattern</span></code>, use one of the predefined patterns, such as <code class="docutils literal notranslate"><span class="pre">Plain</span></code> (default), <code class="docutils literal notranslate"><span class="pre">Standard</span></code> (standard format used in DA applications), <code class="docutils literal notranslate"><span class="pre">Structured</span></code>, or set your own. Check <a class="reference external" href="https://zio.dev/zio-logging/formatting-log-records/#log-format-configuration">Log Format Configuration</a> for more details.</p>
<p>To use your custom format, provide its string representation, such as: <code class="docutils literal notranslate"><span class="pre">--logger-pattern=&quot;%highlight{%fixed{1}{%level}}</span> <span class="pre">[%fiberId]</span> <span class="pre">%name:%line</span> <span class="pre">%highlight{%message}</span> <span class="pre">%highlight{%cause}</span> <span class="pre">%kvs&quot;</span></code></p>
</div>
<div class="section" id="log-format-for-console-output">
<h3>Log Format for Console Output<a class="headerlink" href="#log-format-for-console-output" title="Permalink to this headline">¶</a></h3>
<p>Use <code class="docutils literal notranslate"><span class="pre">--logger-format</span></code> to set the log format. Possible values are <code class="docutils literal notranslate"><span class="pre">Plain</span></code> (default) or <code class="docutils literal notranslate"><span class="pre">Json</span></code>. These formats can be used for the <code class="docutils literal notranslate"><span class="pre">pipeline</span></code> command.</p>
</div>
<div class="section" id="log-format-for-file-output">
<h3>Log Format for File Output<a class="headerlink" href="#log-format-for-file-output" title="Permalink to this headline">¶</a></h3>
<p>Use <code class="docutils literal notranslate"><span class="pre">--logger-format</span></code> to set the log format. Possible values are <code class="docutils literal notranslate"><span class="pre">Plain</span></code> (default), <code class="docutils literal notranslate"><span class="pre">Json</span></code>, <code class="docutils literal notranslate"><span class="pre">PlainAsync</span></code> and <code class="docutils literal notranslate"><span class="pre">JsonAsync</span></code>. They can be used for the interactive commands, such as <code class="docutils literal notranslate"><span class="pre">prune</span></code>. For <code class="docutils literal notranslate"><span class="pre">PlainAsync</span></code> and <code class="docutils literal notranslate"><span class="pre">JsonAsync</span></code>, log entries are written to the destination file asynchronously.</p>
</div>
<div class="section" id="destination-file-for-file-output">
<h3>Destination File for File Output<a class="headerlink" href="#destination-file-for-file-output" title="Permalink to this headline">¶</a></h3>
<p>Use <code class="docutils literal notranslate"><span class="pre">--logger-destination</span></code> to set the path to the destination file (default: output.log) for interactive commands, such as <code class="docutils literal notranslate"><span class="pre">prune</span></code>.</p>
</div>
<div class="section" id="log-format-and-log-pattern-combinations">
<h3>Log Format and Log Pattern Combinations<a class="headerlink" href="#log-format-and-log-pattern-combinations" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">Plain/Plain</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>00:00:23.737 I [zio-fiber-0] com.digitalasset.scribe.pipeline.pipeline.Impl:34 Starting pipeline on behalf of &#39;Alice_1::12209982174bbaf1e6283234ab828bcab9b73fbe313315b181134bcae9566d3bbf1b&#39;  application=scribe
00:00:24.658 I [zio-fiber-0] com.digitalasset.scribe.pipeline.pipeline.Impl:61 Last checkpoint is absent. Seeding from ACS before processing transactions with starting offset &#39;00000000000000000b&#39;  application=scribe
00:00:25.043 I [zio-fiber-895] com.digitalasset.zio.daml.ledgerapi.package:201 Contract filter inclusive of 1 templates and 0 interfaces  application=scribe
00:00:25.724 I [zio-fiber-0] com.digitalasset.scribe.pipeline.pipeline.Impl:85 Continuing from offset &#39;00000000000000000b&#39; and index &#39;0&#39; until offset &#39;00000000000000000b&#39;  application=scribe
</pre></div>
</div>
</li>
<li><p class="first">Plain/Standard</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>component=scribe instance_uuid=5f707d27-8188-4a44-904e-2f98ee9f4177 timestamp=2024-01-16T23:42:38.902+0000 level=INFO correlation_id=tbd description=Starting pipeline on behalf of &#39;Alice_1::1220c6d22d46d59c8454bd245e5a3bc238e5024d37bfd843dbad6885674f3a9673c5&#39;  scribe=application=scribe
component=scribe instance_uuid=5f707d27-8188-4a44-904e-2f98ee9f4177 timestamp=2024-01-16T23:42:39.734+0000 level=INFO correlation_id=tbd description=Last checkpoint is absent. Seeding from ACS before processing transactions with starting offset &#39;00000000000000000b&#39;  scribe=application=scribe
component=scribe instance_uuid=5f707d27-8188-4a44-904e-2f98ee9f4177 timestamp=2024-01-16T23:42:39.982+0000 level=INFO correlation_id=tbd description=Contract filter inclusive of 1 templates and 0 interfaces  scribe=application=scribe
component=scribe instance_uuid=5f707d27-8188-4a44-904e-2f98ee9f4177 timestamp=2024-01-16T23:42:40.476+0000 level=INFO correlation_id=tbd description=Continuing from offset &#39;00000000000000000b&#39; and index &#39;0&#39; until offset &#39;00000000000000000b&#39;  scribe=application=scribe
</pre></div>
</div>
</li>
<li><p class="first">Plain/Custom</p>
<p><code class="docutils literal notranslate"><span class="pre">--logger-pattern=%timestamp{yyyy-MM-dd'T'HH:mm:ss}</span> <span class="pre">%level</span> <span class="pre">%name:%line</span> <span class="pre">%highlight{%message}</span> <span class="pre">%highlight{%cause}</span> <span class="pre">%kvs</span></code></p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>2024-01-16T23:55:52 INFO com.digitalasset.scribe.pipeline.pipeline.Impl:34 Starting pipeline on behalf of &#39;Alice_1::1220444f494b31c0a40c2f393edac3f5900325028c6f810a203a0334cd830ec230c8&#39;  application=scribe
2024-01-16T23:55:53 INFO com.digitalasset.scribe.pipeline.pipeline.Impl:61 Last checkpoint is absent. Seeding from ACS before processing transactions with starting offset &#39;00000000000000000b&#39;  application=scribe
2024-01-16T23:55:53 INFO com.digitalasset.zio.daml.ledgerapi.package:201 Contract filter inclusive of 1 templates and 0 interfaces  application=scribe
2024-01-16T23:55:53 INFO com.digitalasset.scribe.pipeline.pipeline.Impl:85 Continuing from offset &#39;00000000000000000b&#39; and index &#39;0&#39; until offset &#39;00000000000000000b&#39;  application=scribe
</pre></div>
</div>
</li>
<li><p class="first">Json/Standard</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="nt">&quot;component&quot;</span><span class="p">:</span><span class="s2">&quot;scribe&quot;</span><span class="p">,</span><span class="nt">&quot;instance_uuid&quot;</span><span class="p">:</span><span class="s2">&quot;03c263a0-6e3d-416e-b7f2-0e56b9e34841&quot;</span><span class="p">,</span><span class="nt">&quot;timestamp&quot;</span><span class="p">:</span><span class="s2">&quot;2024-01-17T00:04:12.537+0000&quot;</span><span class="p">,</span><span class="nt">&quot;level&quot;</span><span class="p">:</span><span class="s2">&quot;INFO&quot;</span><span class="p">,</span><span class="nt">&quot;correlation_id&quot;</span><span class="p">:</span><span class="s2">&quot;tbd&quot;</span><span class="p">,</span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="s2">&quot;Starting pipeline on behalf of &#39;Alice_1::1220f03ed424480ab4487d88230fc033f3910f4cb4492fea68535a5760744b53dabe&#39;&quot;</span><span class="p">,</span><span class="nt">&quot;scribe&quot;</span><span class="p">:{</span><span class="nt">&quot;application&quot;</span><span class="p">:</span><span class="s2">&quot;scribe&quot;</span><span class="p">}}</span>
<span class="p">{</span><span class="nt">&quot;component&quot;</span><span class="p">:</span><span class="s2">&quot;scribe&quot;</span><span class="p">,</span><span class="nt">&quot;instance_uuid&quot;</span><span class="p">:</span><span class="s2">&quot;03c263a0-6e3d-416e-b7f2-0e56b9e34841&quot;</span><span class="p">,</span><span class="nt">&quot;timestamp&quot;</span><span class="p">:</span><span class="s2">&quot;2024-01-17T00:04:13.551+0000&quot;</span><span class="p">,</span><span class="nt">&quot;level&quot;</span><span class="p">:</span><span class="s2">&quot;INFO&quot;</span><span class="p">,</span><span class="nt">&quot;correlation_id&quot;</span><span class="p">:</span><span class="s2">&quot;tbd&quot;</span><span class="p">,</span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="s2">&quot;Last checkpoint is absent. Seeding from ACS before processing transactions with starting offset &#39;00000000000000000b&#39;&quot;</span><span class="p">,</span><span class="nt">&quot;scribe&quot;</span><span class="p">:{</span><span class="nt">&quot;application&quot;</span><span class="p">:</span><span class="s2">&quot;scribe&quot;</span><span class="p">}}</span>
<span class="p">{</span><span class="nt">&quot;component&quot;</span><span class="p">:</span><span class="s2">&quot;scribe&quot;</span><span class="p">,</span><span class="nt">&quot;instance_uuid&quot;</span><span class="p">:</span><span class="s2">&quot;03c263a0-6e3d-416e-b7f2-0e56b9e34841&quot;</span><span class="p">,</span><span class="nt">&quot;timestamp&quot;</span><span class="p">:</span><span class="s2">&quot;2024-01-17T00:04:13.935+0000&quot;</span><span class="p">,</span><span class="nt">&quot;level&quot;</span><span class="p">:</span><span class="s2">&quot;INFO&quot;</span><span class="p">,</span><span class="nt">&quot;correlation_id&quot;</span><span class="p">:</span><span class="s2">&quot;tbd&quot;</span><span class="p">,</span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="s2">&quot;Contract filter inclusive of 1 templates and 0 interfaces&quot;</span><span class="p">,</span><span class="nt">&quot;scribe&quot;</span><span class="p">:{</span><span class="nt">&quot;application&quot;</span><span class="p">:</span><span class="s2">&quot;scribe&quot;</span><span class="p">}}</span>
<span class="p">{</span><span class="nt">&quot;component&quot;</span><span class="p">:</span><span class="s2">&quot;scribe&quot;</span><span class="p">,</span><span class="nt">&quot;instance_uuid&quot;</span><span class="p">:</span><span class="s2">&quot;03c263a0-6e3d-416e-b7f2-0e56b9e34841&quot;</span><span class="p">,</span><span class="nt">&quot;timestamp&quot;</span><span class="p">:</span><span class="s2">&quot;2024-01-17T00:04:14.659+0000&quot;</span><span class="p">,</span><span class="nt">&quot;level&quot;</span><span class="p">:</span><span class="s2">&quot;INFO&quot;</span><span class="p">,</span><span class="nt">&quot;correlation_id&quot;</span><span class="p">:</span><span class="s2">&quot;tbd&quot;</span><span class="p">,</span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="s2">&quot;Continuing from offset &#39;00000000000000000b&#39; and index &#39;0&#39; until offset &#39;00000000000000000b&#39;&quot;</span><span class="p">,</span><span class="nt">&quot;scribe&quot;</span><span class="p">:{</span><span class="nt">&quot;application&quot;</span><span class="p">:</span><span class="s2">&quot;scribe&quot;</span><span class="p">}}</span>
</pre></div>
</div>
</li>
<li><p class="first">Json/Structured</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="nt">&quot;timestamp&quot;</span><span class="p">:</span><span class="s2">&quot;2024-01-17T00:08:25+0000&quot;</span><span class="p">,</span><span class="nt">&quot;level&quot;</span><span class="p">:</span><span class="s2">&quot;INFO&quot;</span><span class="p">,</span><span class="nt">&quot;thread&quot;</span><span class="p">:</span><span class="s2">&quot;zio-fiber-0&quot;</span><span class="p">,</span><span class="nt">&quot;location&quot;</span><span class="p">:</span><span class="s2">&quot;com.digitalasset.scribe.pipeline.pipeline.Impl:34&quot;</span><span class="p">,</span><span class="nt">&quot;message&quot;</span><span class="p">:</span><span class="s2">&quot;Starting pipeline on behalf of &#39;Alice_1::122077c6b00e952ff694e2b25b6f5eb9582f815dfe793e2da668b119481a1dd5acdc&#39;&quot;</span><span class="p">,</span><span class="nt">&quot;application&quot;</span><span class="p">:</span><span class="s2">&quot;scribe&quot;</span><span class="p">}</span>
<span class="p">{</span><span class="nt">&quot;timestamp&quot;</span><span class="p">:</span><span class="s2">&quot;2024-01-17T00:08:26+0000&quot;</span><span class="p">,</span><span class="nt">&quot;level&quot;</span><span class="p">:</span><span class="s2">&quot;INFO&quot;</span><span class="p">,</span><span class="nt">&quot;thread&quot;</span><span class="p">:</span><span class="s2">&quot;zio-fiber-0&quot;</span><span class="p">,</span><span class="nt">&quot;location&quot;</span><span class="p">:</span><span class="s2">&quot;com.digitalasset.scribe.pipeline.pipeline.Impl:61&quot;</span><span class="p">,</span><span class="nt">&quot;message&quot;</span><span class="p">:</span><span class="s2">&quot;Last checkpoint is absent. Seeding from ACS before processing transactions with starting offset &#39;00000000000000000b&#39;&quot;</span><span class="p">,</span><span class="nt">&quot;application&quot;</span><span class="p">:</span><span class="s2">&quot;scribe&quot;</span><span class="p">}</span>
<span class="p">{</span><span class="nt">&quot;timestamp&quot;</span><span class="p">:</span><span class="s2">&quot;2024-01-17T00:08:26+0000&quot;</span><span class="p">,</span><span class="nt">&quot;level&quot;</span><span class="p">:</span><span class="s2">&quot;INFO&quot;</span><span class="p">,</span><span class="nt">&quot;thread&quot;</span><span class="p">:</span><span class="s2">&quot;zio-fiber-882&quot;</span><span class="p">,</span><span class="nt">&quot;location&quot;</span><span class="p">:</span><span class="s2">&quot;com.digitalasset.zio.daml.ledgerapi.package:201&quot;</span><span class="p">,</span><span class="nt">&quot;message&quot;</span><span class="p">:</span><span class="s2">&quot;Contract filter inclusive of 1 templates and 0 interfaces&quot;</span><span class="p">,</span><span class="nt">&quot;application&quot;</span><span class="p">:</span><span class="s2">&quot;scribe&quot;</span><span class="p">}</span>
<span class="p">{</span><span class="nt">&quot;timestamp&quot;</span><span class="p">:</span><span class="s2">&quot;2024-01-17T00:08:26+0000&quot;</span><span class="p">,</span><span class="nt">&quot;level&quot;</span><span class="p">:</span><span class="s2">&quot;INFO&quot;</span><span class="p">,</span><span class="nt">&quot;thread&quot;</span><span class="p">:</span><span class="s2">&quot;zio-fiber-0&quot;</span><span class="p">,</span><span class="nt">&quot;location&quot;</span><span class="p">:</span><span class="s2">&quot;com.digitalasset.scribe.pipeline.pipeline.Impl:85&quot;</span><span class="p">,</span><span class="nt">&quot;message&quot;</span><span class="p">:</span><span class="s2">&quot;Continuing from offset &#39;00000000000000000b&#39; and index &#39;0&#39; until offset &#39;00000000000000000b&#39;&quot;</span><span class="p">,</span><span class="nt">&quot;application&quot;</span><span class="p">:</span><span class="s2">&quot;scribe&quot;</span><span class="p">}</span>
</pre></div>
</div>
</li>
<li><p class="first">Json/Custom</p>
<p><code class="docutils literal notranslate"><span class="pre">--logger-pattern=%label{timestamp}{%timestamp{yyyy-MM-dd'T'HH:mm:ss}}</span> <span class="pre">%label{level}{%level}</span> <span class="pre">%label{location}{%name:%line}</span> <span class="pre">%label{description}{%message}</span> <span class="pre">%label{cause}{%cause}</span> <span class="pre">%label{scribe}{%kvs}</span></code></p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="nt">&quot;timestamp&quot;</span><span class="p">:</span><span class="s2">&quot;2024-01-17T00:16:31&quot;</span><span class="p">,</span><span class="nt">&quot;level&quot;</span><span class="p">:</span><span class="s2">&quot;INFO&quot;</span><span class="p">,</span><span class="nt">&quot;location&quot;</span><span class="p">:</span><span class="s2">&quot;com.digitalasset.scribe.pipeline.pipeline.Impl:34&quot;</span><span class="p">,</span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="s2">&quot;Starting pipeline on behalf of &#39;Alice_1::1220ee13431ac437d454ea59d622cfc76599e0846a3caf166b4306d47b1bf83944a6&#39;&quot;</span><span class="p">,</span><span class="nt">&quot;scribe&quot;</span><span class="p">:{</span><span class="nt">&quot;application&quot;</span><span class="p">:</span><span class="s2">&quot;scribe&quot;</span><span class="p">}}</span>
<span class="p">{</span><span class="nt">&quot;timestamp&quot;</span><span class="p">:</span><span class="s2">&quot;2024-01-17T00:16:33&quot;</span><span class="p">,</span><span class="nt">&quot;level&quot;</span><span class="p">:</span><span class="s2">&quot;INFO&quot;</span><span class="p">,</span><span class="nt">&quot;location&quot;</span><span class="p">:</span><span class="s2">&quot;com.digitalasset.scribe.pipeline.pipeline.Impl:61&quot;</span><span class="p">,</span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="s2">&quot;Last checkpoint is absent. Seeding from ACS before processing transactions with starting offset &#39;00000000000000000b&#39;&quot;</span><span class="p">,</span><span class="nt">&quot;scribe&quot;</span><span class="p">:{</span><span class="nt">&quot;application&quot;</span><span class="p">:</span><span class="s2">&quot;scribe&quot;</span><span class="p">}}</span>
<span class="p">{</span><span class="nt">&quot;timestamp&quot;</span><span class="p">:</span><span class="s2">&quot;2024-01-17T00:16:34&quot;</span><span class="p">,</span><span class="nt">&quot;level&quot;</span><span class="p">:</span><span class="s2">&quot;INFO&quot;</span><span class="p">,</span><span class="nt">&quot;location&quot;</span><span class="p">:</span><span class="s2">&quot;com.digitalasset.zio.daml.ledgerapi.package:201&quot;</span><span class="p">,</span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="s2">&quot;Contract filter inclusive of 1 templates and 0 interfaces&quot;</span><span class="p">,</span><span class="nt">&quot;scribe&quot;</span><span class="p">:{</span><span class="nt">&quot;application&quot;</span><span class="p">:</span><span class="s2">&quot;scribe&quot;</span><span class="p">}}</span>
<span class="p">{</span><span class="nt">&quot;timestamp&quot;</span><span class="p">:</span><span class="s2">&quot;2024-01-17T00:16:35&quot;</span><span class="p">,</span><span class="nt">&quot;level&quot;</span><span class="p">:</span><span class="s2">&quot;INFO&quot;</span><span class="p">,</span><span class="nt">&quot;location&quot;</span><span class="p">:</span><span class="s2">&quot;com.digitalasset.scribe.pipeline.pipeline.Impl:85&quot;</span><span class="p">,</span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="s2">&quot;Continuing from offset &#39;00000000000000000b&#39; and index &#39;0&#39; until offset &#39;00000000000000000b&#39;&quot;</span><span class="p">,</span><span class="nt">&quot;scribe&quot;</span><span class="p">:{</span><span class="nt">&quot;application&quot;</span><span class="p">:</span><span class="s2">&quot;scribe&quot;</span><span class="p">}}</span>
</pre></div>
</div>
<p>Notice you need to use <code class="docutils literal notranslate"><span class="pre">%label{your_label}{format}</span></code> to describe a Json attribute-value pair.</p>
</li>
</ul>
</div>
</div>
<div class="section" id="database-schema-evolution">
<h2>Database Schema Evolution<a class="headerlink" href="#database-schema-evolution" title="Permalink to this headline">¶</a></h2>
<p>This section describe how PQS manages the evolution of its database schema between releases. This is important for operators who need to understand what is involved in upgrading PQS to a new version, and how to troubleshoot any issues that may arise.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The <a class="reference external" href="#read-api">Read API</a> (not the database schema) is the interface for downstream consumers of PQS. The schema is an implementation detail that will evolve in order to enhance functional and performance characteristics.</p>
</div>
<div class="section" id="baselining">
<h3>Baselining<a class="headerlink" href="#baselining" title="Permalink to this headline">¶</a></h3>
<p>Prior to version <code class="docutils literal notranslate"><span class="pre">v0.2.1</span></code> PQS did not have a schema versioning mechanism. At this version, PQS gained a schema management capability based on <a class="reference external" href="https://flywaydb.org/postgresql">Flyway</a>. If upgrading from an older version, you will need to baseline your database schema as a one-off procedure. You can either:</p>
<ul>
<li><p class="first">Let PQS do it for you as part of the pipeline launch:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>$ ./scribe.jar pipeline ledger postgres-document \
    --target-schema-autoapply true \
    --target-schema-baseline true \
    --target-postgres-database ...
</pre></div>
</div>
</li>
<li><p class="first">Perform it as an isolated operation:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>$ ./scribe.jar datastore postgres-document schema apply \
    --schema-baseline true \
    --postgres-database ...
</pre></div>
</div>
</li>
</ul>
<p>The result is the addition of the version table along with the application of any subsequent patches:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>postgres=# select * from flyway_schema_history;
-[ RECORD 1 ]--+----------------------------------------------------------------
installed_rank | 1
version        | 001
description    | Baseline initial schema
type           | BASELINE
script         | Baseline initial schema
checksum       |
installed_by   | postgres
installed_on   | 2024-04-10 16:47:42.449063
execution_time | 0
success        | t
-[ RECORD 2 ]--+----------------------------------------------------------------
installed_rank | 2
version        | 002
description    | Make initializecontractimplements function idempotent
type           | SQL
script         | V002__Make_initializecontractimplements_function_idempotent.sql
checksum       | 1833119048
installed_by   | postgres
installed_on   | 2024-04-10 16:47:42.505723
execution_time | 5
success        | t
</pre></div>
</div>
</div>
<div class="section" id="schema-upgrades">
<h3>Schema Upgrades<a class="headerlink" href="#schema-upgrades" title="Permalink to this headline">¶</a></h3>
<p>When running a new version, PQS automatically applies any missing patches to the schema. This means that new PQS releases seamlessly evolve the schema to the latest required version.</p>
</div>
<div class="section" id="schema-dump">
<h3>Schema Dump<a class="headerlink" href="#schema-dump" title="Permalink to this headline">¶</a></h3>
<p>Some deployment environments require far stricter access control than letting operational processes perform such intrusive database schema operations. PQS allows you to export the required schema to standard output, which can later be reviewed and applied by authorized operators.</p>
<p>The following command displays the latest required schema:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>$ ./scribe.jar datastore postgres-document schema show \
    --ledger-host ...
</pre></div>
</div>
<p>The output contains all SQL statements that are required to bring the schema up to the latest version and clearly demarcates each patch’s contents:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>/*********************************************
 * generated by scribe, version: UNSPECIFIED *
 *********************************************/

-- &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; --
-- db/migration/V001__Create_initial_schema.sql (start) --
-- &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; --
-- ... patch content ...
-- &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt; --
-- db/migration/V001__Create_initial_schema.sql (end) --
-- &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt; --


-- &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; --
-- db/migration/V002__Make_initializecontractimplements_function_idempotent.sql (start) --
-- &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; --
-- ... patch content ...
-- &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt; --
-- db/migration/V002__Make_initializecontractimplements_function_idempotent.sql (end) --
-- &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt; --


-- DAML&lt;=&gt;PG mappings
do $$ begin
-- ... contracts/exercises partitions initialisation goes here ...
end; $$
</pre></div>
</div>
<p>The Database Administrator can then review the output and apply the ones that are higher than the current latest entry in the <code class="docutils literal notranslate"><span class="pre">flyway_schema_history</span></code> table.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The <code class="docutils literal notranslate"><span class="pre">DAML&lt;=&gt;PG</span> <span class="pre">mappings</span></code> section of the above script changes based on the ledger Daml packages in use when invoking the <code class="docutils literal notranslate"><span class="pre">show</span></code> command, but its contents are idempotent and can be safely re-applied repeatedly.</p>
</div>
<p>When PQS’s schema is being managed out-of-band, it is adviseable to turn off automatic schema application when launching the pipeline:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>$ ./scribe.jar pipeline ledger postgres-document \
    --target-schema-autoapply false \
    ...
</pre></div>
</div>
</div>
<div class="section" id="monitoring-progress">
<h3>Monitoring Progress<a class="headerlink" href="#monitoring-progress" title="Permalink to this headline">¶</a></h3>
<p>The logging output can be observed to monitor the progress of schema migration:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>09:25:52.038 I [zio-fiber-0] com.digitalasset.scribe.postgres.document.Main:53 Applying required datastore schema  application=scribe
09:25:52.043 I [zio-fiber-0] com.digitalasset.scribe.postgres.document.DocumentPostgres:35 Applying schema  application=scribe
09:25:52.088 I [zio-fiber-524] org.flywaydb.core.internal.license.VersionPrinter: Flyway Community Edition 9.22.3 by Redgate  application=scribe
09:25:52.088 I [zio-fiber-525] org.flywaydb.core.internal.license.VersionPrinter: See release notes here: https://rd.gt/416ObMi  application=scribe
09:25:52.088 I [zio-fiber-526] org.flywaydb.core.internal.license.VersionPrinter:   application=scribe
09:25:52.123 I [zio-fiber-541] org.flywaydb.core.FlywayExecutor: Database: jdbc:postgresql://localhost:5432/postgres (PostgreSQL 15.5)  application=scribe
09:25:52.153 I [zio-fiber-556] org.flywaydb.core.internal.schemahistory.JdbcTableSchemaHistory: Schema history table &quot;public&quot;.&quot;flyway_schema_history&quot; does not exist yet  application=scribe
09:25:52.156 I [zio-fiber-557] org.flywaydb.core.internal.command.DbValidate: Successfully validated 2 migrations (execution time 00:00.016s)  application=scribe
09:25:52.174 I [zio-fiber-559] org.flywaydb.core.internal.schemahistory.JdbcTableSchemaHistory: Creating Schema History table &quot;public&quot;.&quot;flyway_schema_history&quot; ...  application=scribe
09:25:52.216 I [zio-fiber-571] org.flywaydb.core.internal.command.DbMigrate: Current version of schema &quot;public&quot;: &lt;&lt; Empty Schema &gt;&gt;  application=scribe
09:25:52.250 I [zio-fiber-661] org.flywaydb.core.internal.command.DbMigrate: Migrating schema &quot;public&quot; to version &quot;001 - Create initial schema&quot;  application=scribe
...
09:25:52.335 I [zio-fiber-878] org.flywaydb.core.internal.command.DbMigrate: Migrating schema &quot;public&quot; to version &quot;002 - Make initializecontractimplements function idempotent&quot;  application=scribe
09:25:52.340 I [zio-fiber-883] org.flywaydb.core.internal.command.DbMigrate: Successfully applied 2 migrations to schema &quot;public&quot;, now at version v002 (execution time 00:00.081s)  application=scribe
09:25:52.343 I [zio-fiber-0] com.digitalasset.scribe.postgres.document.DocumentPostgres:55 Applying mappings  application=scribe
09:25:52.404 I [zio-fiber-0] com.digitalasset.scribe.postgres.document.DocumentPostgres:57 Schema and mappings applied  application=scribe
09:25:52.405 I [zio-fiber-0] com.digitalasset.scribe.postgres.document.Main:57 Applied required datastore schema  application=scribe
</pre></div>
</div>
<p>More detailed logs can be obtained by setting the log level to <code class="docutils literal notranslate"><span class="pre">debug</span></code>. Launch a PQS command with <code class="docutils literal notranslate"><span class="pre">--help</span></code> for more information, or refer to the <a class="reference external" href="#logging">Logging</a> section.</p>
</div>
<div class="section" id="troubleshooting">
<h3>Troubleshooting<a class="headerlink" href="#troubleshooting" title="Permalink to this headline">¶</a></h3>
<div class="section" id="problem-1-an-application-s-flyway-conflicts-with-pqs-s-flyway">
<h4>Problem 1: An application’s Flyway conflicts with PQS’s Flyway<a class="headerlink" href="#problem-1-an-application-s-flyway-conflicts-with-pqs-s-flyway" title="Permalink to this headline">¶</a></h4>
<p>An application making use of the PQS datastore may also manage its own database migrations via Flyway - either embedded, command-line, or other supported means. An example of such a scenario is the creation of application specific indexes.</p>
<p>With default settings, the application’s Flyway produces an error similar to the one seen below because its view of available/valid migrations is different from PQS’s:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>$ flyway -configFiles=conf/flyway.toml migrate
Flyway Community Edition 10.12.0 by Redgate

See release notes here: https://rd.gt/416ObMi
Database: jdbc:postgresql://localhost:5432/postgres (PostgreSQL 15.5)
ERROR: Validate failed: Migrations have failed validation
Migration checksum mismatch for migration version 001
-&gt; Applied to database : -332813992
-&gt; Resolved locally    : 422692347
Either revert the changes to the migration, or run repair to update the schema history.
Need more flexibility with validation rules? Learn more: https://rd.gt/3AbJUZE
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Here, the command-line Flyway was used for demonstration purposes. The same applies to other methods of running Flyway.</p>
</div>
<p>However, it is trivial to instruct the application’s Flyway to use a different, non-default table name to store its versioning information, which allows both Flyways to coexist in the same database.</p>
<details>
<summary>Separate Flyways tables</summary><div class="highlight-text notranslate"><div class="highlight"><pre><span></span>postgres=# select version, description, script, success from flyway_schema_history ;
 version |                      description                      |                             script                              | success
---------+-------------------------------------------------------+-----------------------------------------------------------------+---------
 001     | Create initial schema                                 | V001__Create_initial_schema.sql                                 | t
 002     | Make initializecontractimplements function idempotent | V002__Make_initializecontractimplements_function_idempotent.sql | t
 003     | Fix create index for contract                         | V003__Fix_create_index_for_contract.sql                         | t
 004     | Add tmp to tx references cascade constraint           | V004__Add_tmp_to_tx_references_cascade_constraint.sql           | t
 005     | Make watermark progression safer                      | V005__Make_watermark_progression_safer.sql                      | t
 006     | Make checkpoint functions stable                      | V006__Make_checkpoint_functions_stable.sql                      | t
 007     | Expose effective at                                   | V007__Expose_effective_at.sql                                   | t
(7 rows)
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>$ flyway -configFiles=conf/flyway.toml migrate -table=myapp_version -baselineOnMigrate=true -baselineVersion=0
Flyway Community Edition 10.12.0 by Redgate

See release notes here: https://rd.gt/416ObMi
Database: jdbc:postgresql://localhost:5432/postgres (PostgreSQL 15.5)
Schema history table &quot;public&quot;.&quot;myapp_version&quot; does not exist yet
Successfully validated 1 migration (execution time 00:00.029s)
Creating Schema History table &quot;public&quot;.&quot;myapp_version&quot; with baseline ...
Successfully baselined schema with version: 0
Current version of schema &quot;public&quot;: 0
Migrating schema &quot;public&quot; to version &quot;1.0 - Add index on Ping sender&quot;
Successfully applied 1 migration to schema &quot;public&quot;, now at version v1.0 (execution time 00:00.036s)
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>postgres=# select version, description, script, success from myapp_version ;
 version |       description        |               script               | success
---------+--------------------------+------------------------------------+---------
 0       | &lt;&lt; Flyway Baseline &gt;&gt;    | &lt;&lt; Flyway Baseline &gt;&gt;              | t
 1.0     | Add index on Ping sender | V1.0__Add_index_on_Ping_sender.sql | t
(2 rows)
</pre></div>
</div>
</details><p>Now both PQS and the application can manage their own schema versions independently. Assuming the application limits itself to only adding indexes and other non-conflicting changes, the two Flyways can coexist without issues.</p>
<details><div class="highlight-text notranslate"><div class="highlight"><pre><span></span>-- new PQS release applies missing migrations
13:33:45.378 I [zio-fiber-676] org.flywaydb.core.internal.command.DbValidate: Successfully validated 8 migrations (execution time 00:00.018s)  application=scribe
13:33:45.380 D [zio-fiber-677] org.flywaydb.core.internal.command.DbSchemas: Skipping creation of existing schema: &quot;public&quot;  application=scribe
13:33:45.398 I [zio-fiber-678] org.flywaydb.core.internal.command.DbMigrate: Current version of schema &quot;public&quot;: 007  application=scribe
13:33:45.399 D [zio-fiber-679] org.flywaydb.core.internal.parser.Parser: Parsing V008__Add_new_table.sql ...  application=scribe
13:33:45.402 D [zio-fiber-680] org.flywaydb.core.internal.sqlscript.ParserSqlScript: Found statement at line 1: create table _foo(value int)  application=scribe
13:33:45.403 D [zio-fiber-681] org.flywaydb.core.internal.command.DbMigrate: Starting migration of schema &quot;public&quot; to version &quot;008 - Add new table&quot; ...  application=scribe
13:33:45.406 I [zio-fiber-682] org.flywaydb.core.internal.command.DbMigrate: Migrating schema &quot;public&quot; to version &quot;008 - Add new table&quot;  application=scribe
13:33:45.407 D [zio-fiber-683] org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor: Executing SQL: create table _foo(value int)  application=scribe
13:33:45.409 D [zio-fiber-684] org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor: 0 rows affected  application=scribe
13:33:45.409 D [zio-fiber-685] org.flywaydb.core.internal.command.DbMigrate: Successfully completed migration of schema &quot;public&quot; to version &quot;008 - Add new table&quot;  application=scribe
13:33:45.412 D [zio-fiber-686] org.flywaydb.core.internal.schemahistory.JdbcTableSchemaHistory: Schema History table &quot;public&quot;.&quot;flyway_schema_history&quot; successfully updated to reflect changes  application=scribe
13:33:45.417 I [zio-fiber-687] org.flywaydb.core.internal.command.DbMigrate: Successfully applied 1 migration to schema &quot;public&quot;, now at version v008 (execution time 00:00.006s)  application=scribe
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>## the application applies missing migrations
$ flyway -configFiles=conf/flyway.toml migrate -table=myapp_version
Flyway Community Edition 10.12.0 by Redgate

See release notes here: https://rd.gt/416ObMi
Database: jdbc:postgresql://localhost:5432/postgres (PostgreSQL 15.5)
Successfully validated 3 migrations (execution time 00:00.060s)
Current version of schema &quot;public&quot;: 1.0
Migrating schema &quot;public&quot; to version &quot;1.1 - Add index on Ping receiver&quot;
Successfully applied 1 migration to schema &quot;public&quot;, now at version v1.1 (execution time 00:00.020s)
</pre></div>
</div>
</details><p>As can be observed below, PQS and the application can even opt for different versioning schemes.</p>
<details><div class="highlight-text notranslate"><div class="highlight"><pre><span></span>postgres=# select version, description, script, success from flyway_schema_history ;
 version |                      description                      |                             script                              | success
---------+-------------------------------------------------------+-----------------------------------------------------------------+---------
 001     | Create initial schema                                 | V001__Create_initial_schema.sql                                 | t
 002     | Make initializecontractimplements function idempotent | V002__Make_initializecontractimplements_function_idempotent.sql | t
 003     | Fix create index for contract                         | V003__Fix_create_index_for_contract.sql                         | t
 004     | Add tmp to tx references cascade constraint           | V004__Add_tmp_to_tx_references_cascade_constraint.sql           | t
 005     | Make watermark progression safer                      | V005__Make_watermark_progression_safer.sql                      | t
 006     | Make checkpoint functions stable                      | V006__Make_checkpoint_functions_stable.sql                      | t
 007     | Expose effective at                                   | V007__Expose_effective_at.sql                                   | t
 008     | Add new table                                         | V008__Add_new_table.sql                                         | t
(8 rows)

postgres=# select version, description, script, success from myapp_version ;
 version |        description         |                script                | success
---------+----------------------------+--------------------------------------+---------
 0       | &lt;&lt; Flyway Baseline &gt;&gt;      | &lt;&lt; Flyway Baseline &gt;&gt;                | t
 1.0     | Add index on Ping sender   | V1.0__Add_index_on_Ping_sender.sql   | t
 1.1     | Add index on Ping receiver | V1.1__Add_index_on_Ping_receiver.sql | t
(3 rows)

postgres=# \di+ __contracts_1_ping_sender_idx
                                                       List of relations
 Schema |             Name              | Type  |  Owner   |     Table     | Persistence | Access method | Size  | Description
--------+-------------------------------+-------+----------+---------------+-------------+---------------+-------+-------------
 public | __contracts_1_ping_sender_idx | index | postgres | __contracts_1 | permanent   | hash          | 32 kB |
(1 row)

postgres=# \di+ __contracts_1_ping_receiver_idx
                                                        List of relations
 Schema |              Name               | Type  |  Owner   |     Table     | Persistence | Access method | Size  | Description
--------+---------------------------------+-------+----------+---------------+-------------+---------------+-------+-------------
 public | __contracts_1_ping_receiver_idx | index | postgres | __contracts_1 | permanent   | hash          | 32 kB |
(1 row)
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>$ tree .
.
├── conf
│   └── flyway.toml
└── migrations
    ├── V1.0__Add_index_on_Ping_sender.sql
    └── V1.1__Add_index_on_Ping_receiver.sql

$ head migrations/*
==&gt; migrations/V1.0__Add_index_on_Ping_sender.sql &lt;==
call create_index_for_contract(&#39;ping_sender&#39;, &#39;PingPong:Ping&#39;, &#39;(payload-&gt;&gt;&#39;&#39;sender&#39;&#39;)&#39;, &#39;hash&#39;);

==&gt; migrations/V1.1__Add_index_on_Ping_receiver.sql &lt;==
call create_index_for_contract(&#39;ping_receiver&#39;, &#39;PingPong:Ping&#39;, &#39;(payload-&gt;&gt;&#39;&#39;receiver&#39;&#39;)&#39;, &#39;hash&#39;);
</pre></div>
</div>
</details>
## Relational View<p>Daml contracts are the fundamental unit of runtime data stored on the ledger. In addition to storing data, contracts allow attaching certain behaviors (expressed as template choices) to this data. Both a contract’s data (its create event arguments) and a choice’s exercise events (their input and output arguments) rely on strongly typed data structures.</p>
<p>These data structures can be likened to tables in a relational database, as described in the documentation introducing <a class="reference external" href="https://docs.daml.com/daml/intro/3_Data.html">Data Types</a>. However, Daml enriches these structures to such an extent that direct Daml-to-relational mapping becomes impractical, leading you to consider Daml contracts and events as self-contained documents rather than relational rows. For this reason, PQS stores these contracts and events in PostgreSQL as <a class="reference external" href="https://www.postgresql.org/docs/current/datatype-json.html">JSON documents</a>, since a document form is a natural fit for Daml’s more expressive data model.</p>
<p>To organize data access in a more relational-friendly manner, you need to build project-specific abstractions on top of what PQS provides in general terms. This document introduces techniques and patterns that can be used to help express Daml’s world through relational means.</p>
</div>
</div>
<div class="section" id="mapping-daml-models-to-relational-world">
<h3>Mapping Daml Models to Relational World<a class="headerlink" href="#mapping-daml-models-to-relational-world" title="Permalink to this headline">¶</a></h3>
<p>The following code represents a data cluster related to issuer approval of a set of token changes for an issue. Irrelevant details are omitted.</p>
<div class="highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="kr">type</span><span class="w"> </span><span class="kt">Quantity</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="kt">Decimal</span>

<span class="kr">data</span><span class="w"> </span><span class="kt">Issue</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="kt">Issue</span><span class="w"> </span><span class="kr">with</span><span class="w"> </span><span class="n">issuer</span><span class="kt">:</span><span class="w"> </span><span class="kt">Party</span><span class="p">;</span><span class="w"> </span><span class="n">label</span><span class="kt">:</span><span class="w"> </span><span class="kt">Text</span>
<span class="kr">data</span><span class="w"> </span><span class="kt">Wallet</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="kt">Wallet</span><span class="w"> </span><span class="kr">with</span><span class="w"> </span><span class="n">holder</span><span class="kt">:</span><span class="w"> </span><span class="kt">Party</span><span class="p">;</span><span class="w"> </span><span class="n">label</span><span class="kt">:</span><span class="w"> </span><span class="kt">Text</span><span class="p">;</span><span class="w"> </span><span class="n">locks</span><span class="kt">:</span><span class="w"> </span><span class="kt">Set</span><span class="w"> </span><span class="kt">Lock</span>
<span class="kr">data</span><span class="w"> </span><span class="kt">Lock</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="kt">Lock</span><span class="w"> </span><span class="kr">with</span><span class="w"> </span><span class="n">notary</span><span class="kt">:</span><span class="w"> </span><span class="kt">Party</span><span class="p">,</span><span class="w"> </span><span class="n">label</span><span class="kt">:</span><span class="w"> </span><span class="kt">Text</span>

<span class="kr">template</span><span class="w"> </span><span class="kt">IssuerApproval</span>
<span class="w">  </span><span class="kr">with</span>
<span class="w">    </span><span class="n">requestor</span><span class="kt">:</span><span class="w"> </span><span class="kt">Party</span>
<span class="w">    </span><span class="n">transferId</span><span class="kt">:</span><span class="w"> </span><span class="kt">Text</span>
<span class="w">    </span><span class="n">issue</span><span class="kt">:</span><span class="w"> </span><span class="kt">Issue</span>
<span class="w">    </span><span class="n">opens</span><span class="kt">:</span><span class="w"> </span><span class="p">[</span><span class="kt">ContractId</span><span class="w"> </span><span class="kt">TokenOpen</span><span class="p">]</span>
<span class="w">    </span><span class="n">closes</span><span class="kt">:</span><span class="w"> </span><span class="p">[</span><span class="kt">ContractId</span><span class="w"> </span><span class="kt">TokenClose</span><span class="p">]</span>
<span class="w">  </span><span class="kr">where</span>
<span class="w">    </span><span class="kr">signatory</span><span class="w"> </span><span class="n">issue</span><span class="o">.</span><span class="n">issuer</span><span class="p">,</span><span class="w"> </span><span class="n">requestor</span>

<span class="kr">template</span><span class="w"> </span><span class="kt">TokenOpen</span>
<span class="w">  </span><span class="kr">with</span>
<span class="w">    </span><span class="n">delegate</span><span class="kt">:</span><span class="w"> </span><span class="kt">Party</span>
<span class="w">    </span><span class="n">token</span><span class="kt">:</span><span class="w"> </span><span class="kt">Token</span>
<span class="w">  </span><span class="kr">where</span>
<span class="w">    </span><span class="kr">signatory</span><span class="w"> </span><span class="n">delegate</span><span class="p">,</span><span class="w"> </span><span class="n">walletSigs</span><span class="w"> </span><span class="n">token</span><span class="o">.</span><span class="n">wallet</span>
<span class="w">    </span><span class="kr">observer</span><span class="w"> </span><span class="n">token</span><span class="o">.</span><span class="n">issue</span><span class="o">.</span><span class="n">issuer</span>

<span class="kr">template</span><span class="w"> </span><span class="kt">TokenClose</span>
<span class="w">  </span><span class="kr">with</span>
<span class="w">    </span><span class="n">delegate</span><span class="kt">:</span><span class="w"> </span><span class="kt">Party</span>
<span class="w">    </span><span class="n">token</span><span class="kt">:</span><span class="w"> </span><span class="kt">Token</span>
<span class="w">    </span><span class="n">tokenCid</span><span class="kt">:</span><span class="w"> </span><span class="kt">ContractId</span><span class="w"> </span><span class="kt">Token</span>
<span class="w">  </span><span class="kr">where</span>
<span class="w">    </span><span class="kr">signatory</span><span class="w"> </span><span class="n">delegate</span><span class="p">,</span><span class="w"> </span><span class="n">walletSigs</span><span class="w"> </span><span class="n">token</span><span class="o">.</span><span class="n">wallet</span>
<span class="w">    </span><span class="kr">observer</span><span class="w"> </span><span class="n">token</span><span class="o">.</span><span class="n">issue</span><span class="o">.</span><span class="n">issuer</span>

<span class="kr">template</span><span class="w"> </span><span class="kt">Token</span>
<span class="w">  </span><span class="kr">with</span>
<span class="w">    </span><span class="n">issue</span><span class="kt">:</span><span class="w"> </span><span class="kt">Issue</span><span class="w">          </span><span class="c1">-- what</span>
<span class="w">    </span><span class="n">wallet</span><span class="kt">:</span><span class="w"> </span><span class="kt">Wallet</span><span class="w">        </span><span class="c1">-- where</span>
<span class="w">    </span><span class="n">quantity</span><span class="kt">:</span><span class="w"> </span><span class="kt">Quantity</span><span class="w">    </span><span class="c1">-- how many</span>
<span class="w">    </span><span class="n">observers</span><span class="kt">:</span><span class="w"> </span><span class="kt">Set</span><span class="w"> </span><span class="kt">Party</span>
<span class="w">  </span><span class="kr">where</span>
<span class="w">    </span><span class="kr">signatory</span><span class="w"> </span><span class="n">issue</span><span class="o">.</span><span class="n">issuer</span><span class="p">,</span><span class="w"> </span><span class="n">walletSigs</span><span class="w"> </span><span class="n">wallet</span>
<span class="w">    </span><span class="kr">ensure</span><span class="w"> </span><span class="n">quantity</span><span class="w"> </span><span class="o">/=</span><span class="w"> </span><span class="mf">0.0</span>
<span class="w">    </span><span class="kr">observer</span><span class="w"> </span><span class="n">observers</span>

<span class="kr">template</span><span class="w"> </span><span class="kt">Transfer</span>
<span class="w">    </span><span class="o">...</span>
<span class="w">    </span><span class="kr">choice</span><span class="w"> </span><span class="kt">Transfer_Settle:</span><span class="w"> </span><span class="p">[</span><span class="kt">ContractId</span><span class="w"> </span><span class="kt">Token</span><span class="p">]</span>
<span class="w">        </span><span class="kr">with</span>
<span class="w">          </span><span class="n">issuerApprovals</span><span class="kt">:</span><span class="w"> </span><span class="p">[</span><span class="kt">ContractId</span><span class="w"> </span><span class="kt">IssuerApproval</span><span class="p">]</span>
<span class="w">      </span><span class="kr">controller</span><span class="w"> </span><span class="n">requestor</span>
<span class="w">        </span><span class="kr">do</span>
<span class="w">          </span><span class="o">...</span>
</pre></div>
</div>
<p>In this example, you can see that the data model is rich and interconnected:</p>
<ul class="simple">
<li>Rich value types are used, such as <code class="docutils literal notranslate"><span class="pre">Quantity</span></code>, <code class="docutils literal notranslate"><span class="pre">Lock</span></code>, <code class="docutils literal notranslate"><span class="pre">Wallet</span></code> and <code class="docutils literal notranslate"><span class="pre">Issue</span></code>, which are simply defined by reference.</li>
<li>An <code class="docutils literal notranslate"><span class="pre">IssuerApproval</span></code> contract references multiple <code class="docutils literal notranslate"><span class="pre">TokenOpen</span></code> and <code class="docutils literal notranslate"><span class="pre">TokenClose</span></code> contracts via their contract IDs.</li>
<li>A <code class="docutils literal notranslate"><span class="pre">TokenClose</span></code> contract references a single <code class="docutils literal notranslate"><span class="pre">Token</span></code> contract via its contract ID.</li>
<li>Navigable relationships with different cardinalities, but all unidirectional. For instance, <code class="docutils literal notranslate"><span class="pre">TokenClose</span></code> knows of <code class="docutils literal notranslate"><span class="pre">Token</span></code> and <code class="docutils literal notranslate"><span class="pre">IssuerApproval</span></code> knows of <code class="docutils literal notranslate"><span class="pre">TokenOpen</span></code>, but not vice-versa.</li>
</ul>
<details>
<summary>Sample contracts in JSON encoding</summary><div class="highlight-text notranslate"><div class="highlight"><pre><span></span>scribe=# select create_event_pk, contract_id, jsonb_pretty(payload) from creates(&#39;IssuerApproval&#39;) limit 1;
-[ RECORD 1 ]---+------------------------------------------------------------------------------------------------------------------------------------------------------
create_event_pk | 183
contract_id     | 005b8b2dbe2a6e7bd6d8fa0a29de0a25145bdbf42a80410fec0a38e616ed1be6d7ca0212203b0dc4867dee13c52b2a89a3c1b82fa4937ff88fef04246dc3ce6243c4a0cc02
jsonb_pretty    | {                                                                                                                                                    +
                |     &quot;issue&quot;: {                                                                                                                                       +
                |         &quot;label&quot;: &quot;security:by-issuer-4::122031feddbb3be055a8ae78448aa57e7a468830c9a323e3f26979161d23b83d5c35&quot;,                                       +
                |         &quot;issuer&quot;: &quot;issuer-4::122031feddbb3be055a8ae78448aa57e7a468830c9a323e3f26979161d23b83d5c35&quot;                                                   +
                |     },                                                                                                                                               +
                |     &quot;opens&quot;: [                                                                                                                                       +
                |         &quot;00241b49efb66e6d6ad1a519ab1630152a20c49b722d025a854a51d1828cb33a5eca0212207857b7a438f23ba419a98f0b00b00db278283e4a43083a823b91381b3eb74f4e&quot;,+
                |         &quot;00a2472513e032d95027ad0108efe9d63dc2c37e58e52d16d082a27c34ffa8e00dca02122027fe7605d1f370ac87259a383fbabdbdc8ce4163cd9790b38f24bbbe0b6084e7&quot; +
                |     ],                                                                                                                                               +
                |     &quot;closes&quot;: [                                                                                                                                      +
                |         &quot;00cdeb1a1122e9120905cf5111b61578cfb4bc63abdf0e715dc77b791502d60e55ca021220a8d45d0153a068fe52286eedc7ea86671070beef6f5c4c305723844d08c40e80&quot; +
                |     ],                                                                                                                                               +
                |     &quot;requestor&quot;: &quot;issuer-4::122031feddbb3be055a8ae78448aa57e7a468830c9a323e3f26979161d23b83d5c35&quot;,                                                   +
                |     &quot;transferId&quot;: &quot;Split / 3273025218: issuer-4::122031feddbb3be055a8ae78448aa57e7a468830c9a323e3f26979161d23b83d5c35&quot;                               +
                | }

scribe=# select create_event_pk, contract_id,jsonb_pretty(payload) from creates(&#39;TokenOpen&#39;) where contract_id in (&#39;00241b49efb66e6d6ad1a519ab1630152a20c49b722d025a854a51d1828cb33a5eca0212207857b7a438f23ba419a98f0b00b00db278283e4a43083a823b91381b3eb74f4e&#39;, &#39;00a2472513e032d95027ad0108efe9d63dc2c37e58e52d16d082a27c34ffa8e00dca02122027fe7605d1f370ac87259a383fbabdbdc8ce4163cd9790b38f24bbbe0b6084e7&#39;);
-[ RECORD 1 ]---+-------------------------------------------------------------------------------------------------------------------------------------------
create_event_pk | 63
contract_id     | 00241b49efb66e6d6ad1a519ab1630152a20c49b722d025a854a51d1828cb33a5eca0212207857b7a438f23ba419a98f0b00b00db278283e4a43083a823b91381b3eb74f4e
jsonb_pretty    | {                                                                                                                                         +
                |     &quot;token&quot;: {                                                                                                                            +
                |         &quot;issue&quot;: {                                                                                                                        +
                |             &quot;label&quot;: &quot;security:by-issuer-4::122031feddbb3be055a8ae78448aa57e7a468830c9a323e3f26979161d23b83d5c35&quot;,                        +
                |             &quot;issuer&quot;: &quot;issuer-4::122031feddbb3be055a8ae78448aa57e7a468830c9a323e3f26979161d23b83d5c35&quot;                                    +
                |         },                                                                                                                                +
                |         &quot;wallet&quot;: {                                                                                                                       +
                |             &quot;label&quot;: &quot;treasury for security:by-issuer-4::122031feddbb3be055a8ae78448aa57e7a468830c9a323e3f26979161d23b83d5c35&quot;,           +
                |             &quot;locks&quot;: {                                                                                                                    +
                |                 &quot;map&quot;: [                                                                                                                  +
                |                 ]                                                                                                                         +
                |             },                                                                                                                            +
                |             &quot;holder&quot;: &quot;issuer-4::122031feddbb3be055a8ae78448aa57e7a468830c9a323e3f26979161d23b83d5c35&quot;                                    +
                |         },                                                                                                                                +
                |         &quot;quantity&quot;: &quot;44.0000000000&quot;,                                                                                                      +
                |         &quot;observers&quot;: {                                                                                                                    +
                |             &quot;map&quot;: [                                                                                                                      +
                |             ]                                                                                                                             +
                |         }                                                                                                                                 +
                |     },                                                                                                                                    +
                |     &quot;delegate&quot;: &quot;issuer-4::122031feddbb3be055a8ae78448aa57e7a468830c9a323e3f26979161d23b83d5c35&quot;                                          +
                | }
-[ RECORD 2 ]---+-------------------------------------------------------------------------------------------------------------------------------------------
create_event_pk | 64
contract_id     | 00a2472513e032d95027ad0108efe9d63dc2c37e58e52d16d082a27c34ffa8e00dca02122027fe7605d1f370ac87259a383fbabdbdc8ce4163cd9790b38f24bbbe0b6084e7
jsonb_pretty    | {                                                                                                                                         +
                |     &quot;token&quot;: {                                                                                                                            +
                |         &quot;issue&quot;: {                                                                                                                        +
                |             &quot;label&quot;: &quot;security:by-issuer-4::122031feddbb3be055a8ae78448aa57e7a468830c9a323e3f26979161d23b83d5c35&quot;,                        +
                |             &quot;issuer&quot;: &quot;issuer-4::122031feddbb3be055a8ae78448aa57e7a468830c9a323e3f26979161d23b83d5c35&quot;                                    +
                |         },                                                                                                                                +
                |         &quot;wallet&quot;: {                                                                                                                       +
                |             &quot;label&quot;: &quot;treasury for security:by-issuer-4::122031feddbb3be055a8ae78448aa57e7a468830c9a323e3f26979161d23b83d5c35&quot;,           +
                |             &quot;locks&quot;: {                                                                                                                    +
                |                 &quot;map&quot;: [                                                                                                                  +
                |                 ]                                                                                                                         +
                |             },                                                                                                                            +
                |             &quot;holder&quot;: &quot;issuer-4::122031feddbb3be055a8ae78448aa57e7a468830c9a323e3f26979161d23b83d5c35&quot;                                    +
                |         },                                                                                                                                +
                |         &quot;quantity&quot;: &quot;999999956.0000000000&quot;,                                                                                               +
                |         &quot;observers&quot;: {                                                                                                                    +
                |             &quot;map&quot;: [                                                                                                                      +
                |             ]                                                                                                                             +
                |         }                                                                                                                                 +
                |     },                                                                                                                                    +
                |     &quot;delegate&quot;: &quot;issuer-4::122031feddbb3be055a8ae78448aa57e7a468830c9a323e3f26979161d23b83d5c35&quot;                                          +
                | }

scribe=# select create_event_pk, contract_id, jsonb_pretty(payload) from creates(&#39;TokenClose&#39;) where contract_id in (&#39;00cdeb1a1122e9120905cf5111b61578cfb4bc63abdf0e715dc77b791502d60e55ca021220a8d45d0153a068fe52286eedc7ea86671070beef6f5c4c305723844d08c40e80&#39;);
-[ RECORD 1 ]---+-------------------------------------------------------------------------------------------------------------------------------------------------------------
create_event_pk | 65
contract_id     | 00cdeb1a1122e9120905cf5111b61578cfb4bc63abdf0e715dc77b791502d60e55ca021220a8d45d0153a068fe52286eedc7ea86671070beef6f5c4c305723844d08c40e80
jsonb_pretty    | {                                                                                                                                                           +
                |     &quot;token&quot;: {                                                                                                                                              +
                |         &quot;issue&quot;: {                                                                                                                                          +
                |             &quot;label&quot;: &quot;security:by-issuer-4::122031feddbb3be055a8ae78448aa57e7a468830c9a323e3f26979161d23b83d5c35&quot;,                                          +
                |             &quot;issuer&quot;: &quot;issuer-4::122031feddbb3be055a8ae78448aa57e7a468830c9a323e3f26979161d23b83d5c35&quot;                                                      +
                |         },                                                                                                                                                  +
                |         &quot;wallet&quot;: {                                                                                                                                         +
                |             &quot;label&quot;: &quot;treasury for security:by-issuer-4::122031feddbb3be055a8ae78448aa57e7a468830c9a323e3f26979161d23b83d5c35&quot;,                             +
                |             &quot;locks&quot;: {                                                                                                                                      +
                |                 &quot;map&quot;: [                                                                                                                                    +
                |                 ]                                                                                                                                           +
                |             },                                                                                                                                              +
                |             &quot;holder&quot;: &quot;issuer-4::122031feddbb3be055a8ae78448aa57e7a468830c9a323e3f26979161d23b83d5c35&quot;                                                      +
                |         },                                                                                                                                                  +
                |         &quot;quantity&quot;: &quot;1000000000.0000000000&quot;,                                                                                                                +
                |         &quot;observers&quot;: {                                                                                                                                      +
                |             &quot;map&quot;: [                                                                                                                                        +
                |             ]                                                                                                                                               +
                |         }                                                                                                                                                   +
                |     },                                                                                                                                                      +
                |     &quot;delegate&quot;: &quot;issuer-4::122031feddbb3be055a8ae78448aa57e7a468830c9a323e3f26979161d23b83d5c35&quot;,                                                           +
                |     &quot;tokenCid&quot;: &quot;005ae879b99ad282b74cd3c7fcd5b6ed3900de6134201de1850b404394b8a926fcca02122023697a1e42299dbd2579632c007d1adb6eaf14e786262b02eea0687fdaa25eee&quot;+
                | }

scribe=# select create_event_pk, contract_id, jsonb_pretty(payload) from creates(&#39;Token&#39;) where contract_id in (&#39;005ae879b99ad282b74cd3c7fcd5b6ed3900de6134201de1850b404394b8a926fcca02122023697a1e42299dbd2579632c007d1adb6eaf14e786262b02eea0687fdaa25eee&#39;);
-[ RECORD 1 ]---+-------------------------------------------------------------------------------------------------------------------------------------------
create_event_pk | 3
contract_id     | 005ae879b99ad282b74cd3c7fcd5b6ed3900de6134201de1850b404394b8a926fcca02122023697a1e42299dbd2579632c007d1adb6eaf14e786262b02eea0687fdaa25eee
jsonb_pretty    | {                                                                                                                                         +
                |     &quot;issue&quot;: {                                                                                                                            +
                |         &quot;label&quot;: &quot;security:by-issuer-4::122031feddbb3be055a8ae78448aa57e7a468830c9a323e3f26979161d23b83d5c35&quot;,                            +
                |         &quot;issuer&quot;: &quot;issuer-4::122031feddbb3be055a8ae78448aa57e7a468830c9a323e3f26979161d23b83d5c35&quot;                                        +
                |     },                                                                                                                                    +
                |     &quot;wallet&quot;: {                                                                                                                           +
                |         &quot;label&quot;: &quot;treasury for security:by-issuer-4::122031feddbb3be055a8ae78448aa57e7a468830c9a323e3f26979161d23b83d5c35&quot;,               +
                |         &quot;locks&quot;: {                                                                                                                        +
                |             &quot;map&quot;: [                                                                                                                      +
                |             ]                                                                                                                             +
                |         },                                                                                                                                +
                |         &quot;holder&quot;: &quot;issuer-4::122031feddbb3be055a8ae78448aa57e7a468830c9a323e3f26979161d23b83d5c35&quot;                                        +
                |     },                                                                                                                                    +
                |     &quot;quantity&quot;: &quot;1000000000.0000000000&quot;,                                                                                                  +
                |     &quot;observers&quot;: {                                                                                                                        +
                |         &quot;map&quot;: [                                                                                                                          +
                |         ]                                                                                                                                 +
                |     }                                                                                                                                     +
                | }

scribe=# select exercise_event_pk, jsonb_pretty(argument) as argument, jsonb_pretty(result) as result from exercises(&#39;Transfer_Settle&#39;) limit 1;
-[ RECORD 1 ]-----+-----------------------------------------------------------------------------------------------------------------------------------------------------
exercise_event_pk | 212
argument          | {                                                                                                                                                   +
                  |     &quot;issuerApprovals&quot;: [                                                                                                                            +
                  |         &quot;00d5d2f5d611c895c4ad248d9d86f06cbfe83c6f86e4dc57df8bc46010da6eac2cca021220cd400022b42b46de89bbc787404c06a5bef747630d2a6e0ac678ad6562d33445&quot;+
                  |     ]                                                                                                                                               +
                  | }
result            | [                                                                                                                                                   +
                  |     &quot;0085ae477c95dd8962c8468ecabc4e2630df9a525bbefd466fe6e696237c85c530ca02122097ad429795e413c94b7f938fa8647c0ec4ea2547a70183d8c8496d03881c8aed&quot;,   +
                  |     &quot;00aaa6a2e4631f04e1452dd6f5802ece3176536587e637ec0215bfff78e86c3cc3ca021220395671b8cd5b30184af7638683589c041c110104415568e0fd9e43951846f081&quot;    +
                  | ]
</pre></div>
</div>
</details><p>Postgres offers <a class="reference external" href="https://www.postgresql.org/docs/current/functions-json.html">robust tools</a> for working with JSON data, but they can be cumbersome for users who are not familiar with them. You could make this data more accessible in a more traditional (“rectangular”) relational manner. To achieve this:</p>
<ul class="simple">
<li>Map out templates’ attributes to tables’ columns.</li>
<li>Establish Postgres’s natural primary and foreign key relationships between tables.</li>
<li>Compose queries that would allow you to further combine data from multiple sources.</li>
</ul>
</div>
<div class="section" id="considerations">
<h3>Considerations<a class="headerlink" href="#considerations" title="Permalink to this headline">¶</a></h3>
<p>Daml’s data model is more sophisticated than SQL, and cannot be mapped directly to a relational model.</p>
<p>Consider representing nested structures with multiple cardinalities, recursive structures, maps of values, and value objects without proper identities. While such task is problematic in general terms, it is feasible to do so for a specific models by introducing selectively flattened contents, and dropping irrelevant (or infrequently used) data elements from the view.</p>
<p>The payload of a contract is a JSON document that only references ledger terms (contract ID strings) in the body, not Postgres’ efficient <code class="docutils literal notranslate"><span class="pre">bigint</span></code> key references. However, it is feasible to keep referencing contract IDs when navigating relationships, since all <code class="docutils literal notranslate"><span class="pre">__contracts_*</span></code> tables already have a matching index provided.</p>
<p>Finally, arguments and results of choices are defined using the same strongly typed data structures as the templates. This means that the same techniques could be applied to enrich the data of choice exercises for relational querying. However, most choice exercises are recommended to pass contract IDs instead of the full contract data, thus enabling direct linkage of input-output effects but requiring extra steps to expose the actual data pieces involved.</p>
<p>A major caveat to consider before choosing this as the go-to solution instead of focusing on state querying is that it may incur a significant performance penalty (as all queries involving containment scanning would experience). If the arguments/results are flat, then this may provide a neat way to enrich your choice exercises, exposing more essential data rather than technical details.</p>
</div>
<div class="section" id="definitions">
<h3>Definitions<a class="headerlink" href="#definitions" title="Permalink to this headline">¶</a></h3>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p class="last"><code class="docutils literal notranslate"><span class="pre">Although</span> <span class="pre">the</span> <span class="pre">examples</span> <span class="pre">below</span></code> have a 1-to-1 match in terms of model-to-table mapping, this should not necessarily be the only approach. It is often better to pull multiple sources into a single view from the outset if it makes future data access easier. All the ideas mentioned above are still very relevant in this case.</p>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>create or replace view vw_issuer_approval as
select
    c.create_event_pk,
    c.contract_id,
    c.payload-&gt;&#39;issue&#39;-&gt;&gt;&#39;label&#39; as security,
    c.payload-&gt;&gt;&#39;requestor&#39; as requestor,
    c.payload-&gt;&gt;&#39;transferId&#39; as transferId,
    array(select jsonb_array_elements_text(c.payload-&gt;&#39;opens&#39;)) as opens,
    array(select jsonb_array_elements_text(c.payload-&gt;&#39;closes&#39;)) as closes
from creates(&#39;IssuerApproval&#39;) c;

create or replace view vw_token_open as
select
    c.create_event_pk,
    c.contract_id,
    (c.payload-&gt;&#39;token&#39;-&gt;&gt;&#39;quantity&#39;)::numeric as quantity
from creates(&#39;TokenOpen&#39;) c;

create or replace view vw_token_close as
select
    c.create_event_pk,
    c.contract_id,
    (c.payload-&gt;&#39;token&#39;-&gt;&gt;&#39;quantity&#39;)::numeric as quantity,
    c.payload-&gt;&gt;&#39;tokenCid&#39; as token
from creates(&#39;TokenClose&#39;) c;

create or replace view vw_token as
select
    c.create_event_pk,
    c.contract_id,
    c.payload-&gt;&#39;wallet&#39;-&gt;&gt;&#39;label&#39; as wallet,
    (c.payload-&gt;&gt;&#39;quantity&#39;)::numeric as quantity
from creates(&#39;Token&#39;) c;

create or replace view vw_xfer_settle as
select e.exercise_event_pk,
       e.exercise_event_id,
       array(select jsonb_array_elements_text(e.argument-&gt;&#39;issuerApprovals&#39;)) as approvals,
       array(select jsonb_array_elements_text(e.result)) as tokens
from exercises(&#39;Transfer_Settle&#39;) e;

-- add some indexes that may speed up queries
call create_index_for_contract(&#39;issuerapproval_xferid&#39;, &#39;DA.Register:IssuerApproval&#39;, &#39;(payload-&gt;&gt;&#39;&#39;transferId&#39;&#39;)&#39;, &#39;btree&#39;, &#39;text_pattern_ops&#39;);
call create_index_for_contract(&#39;tokenopen_qty&#39;, &#39;DA.Register:TokenOpen&#39;, &#39;((payload-&gt;&#39;&#39;token&#39;&#39;-&gt;&gt;&#39;&#39;quantity&#39;&#39;)::numeric)&#39;, &#39;btree&#39;);
call create_index_for_contract(&#39;token_qty&#39;, &#39;DA.Register:Token&#39;, &#39;((payload-&gt;&gt;&#39;&#39;quantity&#39;&#39;)::numeric)&#39;, &#39;btree&#39;);
</pre></div>
</div>
</div>
<div class="section" id="queries-results">
<span id="id5"></span><h3>Queries &amp; Results<a class="headerlink" href="#queries-results" title="Permalink to this headline">¶</a></h3>
<p>The two contrived examples provided here demonstrate how PQS’s data can be turned almost indistinguishable to what one would expect to see in a typical relational database without too much maintenance overhead. Timings are provided as the result of execution over a non-trivial database size - more details can be found <a class="reference external" href="100-performance-benchmark.md#latest-results">here</a>.</p>
<details>
<summary>Sample data</summary><div class="highlight-text notranslate"><div class="highlight"><pre><span></span>scribe=# select * from vw_issuer_approval limit 3; \gx
-[ RECORD 1 ]---+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
create_event_pk | 1803
contract_id     | 002876af9cdcfe77f1992369d6b9b939a510c3c22fb5c4b0609dd1d95cb9d24be0ca0212202af403c76d0d02efd4a199c87576ff9bc2064a01caa2a8c3ee29d51c63b61e82
security        | security:by-issuer-197::1220d7cf981d96424b297506222e91dd87471371ddbf0615d27ee3d594976ded215c
requestor       | issuer-197::1220d7cf981d96424b297506222e91dd87471371ddbf0615d27ee3d594976ded215c
transferid      | Split / 1956509242: issuer-197::1220d7cf981d96424b297506222e91dd87471371ddbf0615d27ee3d594976ded215c
opens           | {0040bf99e8f72da45d320d4e67e856c7f7261a384f396938ca7ae5d6afde58c5c8ca0212201229d422f9fa71d0faf0b3000a02bf97c9e4b002d7bda30f892cfa8b0b8d5350,00240553981084cc74e3102dc24567ebcf25aa282da968bee57c354aecd79dced1ca02122060e0a00a089f9845558808ddd809319392ea039a0f1c0aaaeabedd24f8ce0f88}
closes          | {00775b47cd282e1c8666d104d406e5986bc5cfb5a4aac714caf0ae8da92215a44aca021220a2baa474737519d5615036250797f7df5c4a603340cc1077ea18fc04fe90c4c3}
-[ RECORD 2 ]---+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
create_event_pk | 1805
contract_id     | 006454cf1773a7726e4f5350c5c6bb380cc23186611fc587096b5d0e7690798af1ca02122006e757663e3dec42cd02ba184bcc492a009a659143c621e921093d6ffc1b60ec
security        | security:by-issuer-188::1220d7cf981d96424b297506222e91dd87471371ddbf0615d27ee3d594976ded215c
requestor       | issuer-188::1220d7cf981d96424b297506222e91dd87471371ddbf0615d27ee3d594976ded215c
transferid      | Split / 8445030291: issuer-188::1220d7cf981d96424b297506222e91dd87471371ddbf0615d27ee3d594976ded215c
opens           | {00eff8c8ede65f6fe8a0f894460db3613d819336a55213b3fa796a0a077a375b6eca0212202ab542ea259f5ad0cd96f7f1e23494da326cf0f967a551d50cbce0ab233825a6,00e2cf0f4e06b67d471d030332db5edab62d273dd6c85d4989230525c6ec3de0d9ca021220d71959edc29f69b13eccad558b2e4d9b3f1daf4ad00e2b0c166a238372562b64}
closes          | {00d984257ae438bec7bf853b5b639470b99bd22866c06125645dca371725ec1091ca0212200e962298aaab337f8a16ae57a4c1524fc6741d02349b7d4a8988d2147e1b81c9}
-[ RECORD 3 ]---+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
create_event_pk | 1807
contract_id     | 0069e80651fd7a0cc25c143d36c8c7d55c6bd1445d254ab18c0037520114f8a341ca021220ff782d951bf02ecf804c0a86e0fabf603cc50a0a028611580b9dad59b66e93ff
security        | security:by-issuer-15::1220d7cf981d96424b297506222e91dd87471371ddbf0615d27ee3d594976ded215c
requestor       | issuer-15::1220d7cf981d96424b297506222e91dd87471371ddbf0615d27ee3d594976ded215c
transferid      | Split / 3322532646: issuer-15::1220d7cf981d96424b297506222e91dd87471371ddbf0615d27ee3d594976ded215c
opens           | {00823ada60846a3de5cd42a24ad8faadd4f470d10547a2fa9e176c7e5ab80e64cbca0212201c417489d5cd031098e2020af944e579f28a74907441b0a28f23c7f3dbe815d6,0008ac66ad253e91fc150242b5f3cb2bf9d67fb0f15874432450a83d64cc5e2ccdca021220c8d262195da8f03f6489f0c40754ec97a5c21ab0eaa2757256d949efd68b282e}
closes          | {0031fe3b5b197d6c4b0e9edcd9c94c6ca66fcf61fd28ac86c897141e64ee3926b2ca02122018c024db445e75756d87157312391a2bddbd88f8e7d163c08e80fd21e461965a}

scribe=# select * from vw_token_open limit 3;
 create_event_pk |                                                                contract_id                                                                 |       quantity
-----------------+--------------------------------------------------------------------------------------------------------------------------------------------+----------------------
             688 | 0040bf99e8f72da45d320d4e67e856c7f7261a384f396938ca7ae5d6afde58c5c8ca0212201229d422f9fa71d0faf0b3000a02bf97c9e4b002d7bda30f892cfa8b0b8d5350 |        95.0000000000
             689 | 00240553981084cc74e3102dc24567ebcf25aa282da968bee57c354aecd79dced1ca02122060e0a00a089f9845558808ddd809319392ea039a0f1c0aaaeabedd24f8ce0f88 | 999999905.0000000000
             693 | 00a6b30105e78cef32f07868164ed391b2e15e7e1dbb80f35693692e56b23c9e0eca02122000e14c1f1301c0483a4ffaa7008539d4ca4b0ba5f19dca75453a0539f936267e |        44.0000000000

scribe=# select * from vw_token_close limit 3;
 create_event_pk |                                                                contract_id                                                                 |       quantity        |                                                                   token
-----------------+--------------------------------------------------------------------------------------------------------------------------------------------+-----------------------+--------------------------------------------------------------------------------------------------------------------------------------------
             690 | 00775b47cd282e1c8666d104d406e5986bc5cfb5a4aac714caf0ae8da92215a44aca021220a2baa474737519d5615036250797f7df5c4a603340cc1077ea18fc04fe90c4c3 | 1000000000.0000000000 | 0061d080a42f963cb61f140a00041b322ebee6eef822e3a9d55fcc006169071ec2ca021220a65f8dda14cf77ac3dd68957e401084d5c8884710b989f743af255aafebbc55f
             695 | 00d5543608223508767a264cbed21edabdfea180b7c4965f104c9a238716425fceca02122075b35be93c1e8236f3ba38882bf5f36a3cc82616ea28ab0c3758bf58102316f1 | 1000000000.0000000000 | 0092ff9ad4fe3517612e7068255a6cd5b8fadfd6ab9d99710a39c702873e224535ca021220262ccaae85d617ccad03476e2f9d24a69adf936b8e94873f65442943c56f56af
             700 | 0031fe3b5b197d6c4b0e9edcd9c94c6ca66fcf61fd28ac86c897141e64ee3926b2ca02122018c024db445e75756d87157312391a2bddbd88f8e7d163c08e80fd21e461965a | 1000000000.0000000000 | 0061327618a0c3d0007703fbc580fc1a7f01bc9c218a19a50b62c52b1ec35c9dbcca021220e6c1701959ad186746416c1a8f19ba2f6730f8866bae2470ec113e6344b4dccb

scribe=# select * from vw_token limit 3;
 create_event_pk |                                                                contract_id                                                                 |                                                  wallet                                                   |       quantity
-----------------+--------------------------------------------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------+-----------------------
               5 | 00925818e54c187c0b58e543e3872dcd14233ae280b043b9487d1acb018ae3bf30ca021220f1e1b790987b9b4a3caa39677008ba286555a629380d5d1570562f3e360bdb1c | treasury for security:by-issuer-152::1220d7cf981d96424b297506222e91dd87471371ddbf0615d27ee3d594976ded215c | 1000000000.0000000000
               2 | 00f2d3b1e55931256dc8a08e2b52bb99d54ed8d427137294a0da2408ecb0031639ca021220219ae11b35f71bbbcd285d9913bea3e2cdd015e6533af27ee4aa2181288893a8 | treasury for security:by-issuer-211::1220d7cf981d96424b297506222e91dd87471371ddbf0615d27ee3d594976ded215c | 1000000000.0000000000
              13 | 00420237dec7196d4fbe2dd8a56fea2992d6f636b2fed8d6ebfa947eab6b59618bca021220beacd990626b07ff448b3ced467c89bf283b68ebd5852f414afa26bad77a2b40 | treasury for security:by-issuer-2::1220d7cf981d96424b297506222e91dd87471371ddbf0615d27ee3d594976ded215c   | 1000000000.0000000000

scribe=# select * from vw_xfer_settle limit 3; \gx
-[ RECORD 1 ]-----+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
exercise_event_pk | 2102
exercise_event_id | #12202781809e1dc129b4a32186b6a25b3cce9a46d04427340687a1aa876fdea5457d:0
approvals         | [&quot;002876af9cdcfe77f1992369d6b9b939a510c3c22fb5c4b0609dd1d95cb9d24be0ca0212202af403c76d0d02efd4a199c87576ff9bc2064a01caa2a8c3ee29d51c63b61e82&quot;]
tokens            | [&quot;00af5d9810a6b2aeaf8cc114ee008c3f03e7fdb685c7e1adb761e641fee90ed867ca0212208d4990941cb87fbc8fefb9c66ae139c459cf37cb7970c642d43ab33b4cbff381&quot;, &quot;006a522440d19428e7c32a50e4e3b4e6a4a325b89f322873170ccbbdeb472ca7c7ca0212200838e53c3f5177e225e75dadfc47c4256410b69526adb52c4d49e34f75609b80&quot;]
-[ RECORD 2 ]-----+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
exercise_event_pk | 2110
exercise_event_id | #12205d48aac499ec8fe216ce8ac3e87cc5e3e242009a74277657ee2fdaf2490ce190:0
approvals         | [&quot;006454cf1773a7726e4f5350c5c6bb380cc23186611fc587096b5d0e7690798af1ca02122006e757663e3dec42cd02ba184bcc492a009a659143c621e921093d6ffc1b60ec&quot;]
tokens            | [&quot;00d459f6ed9aeeb1d53ff9189549d9986db82ba373f8547b1778cd34d224c8699aca021220f679b5324256058b8cfa9c7b64ade9a24dc983d0f3b737d3bacb60ce3b118865&quot;, &quot;00f58c4d8da6b539cbb48519d5806a547b2d81ed60228ea5ec0557fa35f9d2ed07ca021220079c8c9fb9b30da49bbe40652feb98a122e124bc799b1d25d0dcbced89c79490&quot;]
-[ RECORD 3 ]-----+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
exercise_event_pk | 2118
exercise_event_id | #12204fdaa93feddecf8e8f5f7a85030063b7a0acc1d7812f75133ca5c6f0bb6c5a05:0
approvals         | [&quot;00619840834cda7b731d299b10ec3a20267c35e1b97262ceae0029ab17c36e4631ca0212207d00cc3af9ee3972fd61a79a37684dabd6558d27ab48bb4d02dfc6088bde0768&quot;]
tokens            | [&quot;00c12b71715d6b663659b084932a3fbd0859a235df5504a996149b1d2b2cef600dca021220d81ef9556bcb9c4166a6dc4771261eaaeb421f4fbfc256f894e987c3d1f94eb0&quot;, &quot;00b0891c0f2fd42cc35d57beda31925c90f4df1de1677c3f9fdcfc82ca4b697205ca021220c6562b049c46500adaac75be20175af45262660d51406fe3b9d54489c428ed8e&quot;]
</pre></div>
</div>
</details><div class="highlight-text notranslate"><div class="highlight"><pre><span></span>-- https://explain.tensor.ru/archive/explain/110f8e4edd14f21b30df0921bc5ee21a:0:2024-04-19#explain
scribe=# select ia.create_event_pk as pk_approval,
       op.create_event_pk as pk_open,
       cl.create_event_pk as pk_close,
       tk.create_event_pk as pk_token,
       replace(ia.transferId, &#39;::1220d7cf981d96424b297506222e91dd87471371ddbf0615d27ee3d594976ded215c&#39;, &#39;&#39;) as xferid,
       op.quantity as qty_open,
       cl.quantity as qty_close,
       replace(tk.wallet, &#39;::1220d7cf981d96424b297506222e91dd87471371ddbf0615d27ee3d594976ded215c&#39;, &#39;&#39;) as wallet
from vw_issuer_approval ia
inner join vw_token_open op on op.contract_id = any(ia.opens)
inner join vw_token_close cl on cl.contract_id = any(ia.closes)
inner join vw_token tk on tk.contract_id = cl.token
  and ia.transferId like &#39;Split / 33225%&#39;
  and op.quantity between 999150000 and 999250000;

 pk_approval |  pk_open  | pk_close  | pk_token  |             xferid             |       qty_open       |      qty_close       |               wallet
-------------+-----------+-----------+-----------+--------------------------------+----------------------+----------------------+-------------------------------------
   108457227 | 108456207 | 108456208 | 108450585 | Split / 3322577190: issuer-232 | 999157597.0000000000 | 999157614.0000000000 | treasury for security:by-issuer-232
   107592500 | 107591508 | 107591509 | 107585391 | Split / 3322542178: issuer-210 | 999161161.0000000000 | 999161177.0000000000 | treasury for security:by-issuer-210
(2 rows)

Time: 32.405 ms

-- https://explain.tensor.ru/archive/explain/dd5c895cd89954c423c4b0466cfd84c1:0:2024-04-19#explain
scribe=# select xs.exercise_event_pk,
       xs.exercise_event_id,
       replace(ia.transferId, &#39;::1220d7cf981d96424b297506222e91dd87471371ddbf0615d27ee3d594976ded215c&#39;, &#39;&#39;) as xferid,
       tk.quantity,
       replace(tk.wallet, &#39;::1220d7cf981d96424b297506222e91dd87471371ddbf0615d27ee3d594976ded215c&#39;, &#39;&#39;) as wallet
from vw_xfer_settle xs
inner join vw_issuer_approval ia on ia.contract_id = any(xs.approvals)
inner join vw_token tk on tk.contract_id = any(xs.tokens)
where ia.transferId like &#39;Split / 33225%&#39;
  and tk.quantity between 999150000 and 999250000;

 exercise_event_pk |                            exercise_event_id                            |             xferid             |       quantity       |               wallet
-------------------+-------------------------------------------------------------------------+--------------------------------+----------------------+-------------------------------------
         107593067 | #1220b9011f7a04cdae0301e08df2524001a32d8e171ddfb97ac49d0f12c8a94730bc:0 | Split / 3322542178: issuer-210 | 999161161.0000000000 | treasury for security:by-issuer-210
         108454294 | #1220e12db3f12eac866546027d338a0c2609e57e290619c48c79f7ee6b2514eced0a:0 | Split / 3322577190: issuer-232 | 999157597.0000000000 | treasury for security:by-issuer-232
(2 rows)

Time: 29250.764 ms (00:29.251)
</pre></div>
</div>
</div>
<div class="section" id="performance-optimizations">
<h3>Performance Optimizations<a class="headerlink" href="#performance-optimizations" title="Permalink to this headline">¶</a></h3>
<p>Assuming you could arrive to a set of composable SQL abstractions that allow you to express ledger data in relational terms, the next step is to ensure that the performance of your queries is acceptable for your needs. When examining the query plan for one of the queries mentioned above, you can observe that PostgreSQL’s cost estimates are extremely high. The core problem is that JSON documents do not have granular statistics which would allow it to choose the best way of running the query. A secondary problem is that the exercises query runs predicates over data inside arrays, which complicates the plan even further.</p>
<p>Scenarios such as this can be overcome by materializing the results of your abstractions through either:</p>
<ul class="simple">
<li>Materialized views; or</li>
<li>Custom triggers</li>
</ul>
<div class="section" id="materialized-views">
<h4>Materialized Views<a class="headerlink" href="#materialized-views" title="Permalink to this headline">¶</a></h4>
<p>One way to speed up your queries, depending on your use case, is to opt for materialized views. Note that materialized views are not automatically updated when the underlying data changes (see some ideas how to deal with it <a class="reference external" href="https://stackoverflow.com/a/29447328">here</a>). The following code demonstrates how materialized views could benefit the queries under consideration:</p>
<details>
<summary>Materialized views equivalents</summary><div class="highlight-text notranslate"><div class="highlight"><pre><span></span>create or replace function cid_to_pk(cid text) returns bigint as $$
select create_event_pk from __contracts where contract_id = cid;
$$ language sql;

create materialized view mvw_token_open as
select
    c.create_event_pk,
    c.contract_id,
    (c.payload-&gt;&#39;token&#39;-&gt;&gt;&#39;quantity&#39;)::numeric as quantity
from creates(&#39;TokenOpen&#39;) c;
create index mvw_token_open_pk_idx on mvw_token_open (create_event_pk);

create materialized view mvw_token_close as
select
    c.create_event_pk,
    c.contract_id,
    (c.payload-&gt;&#39;token&#39;-&gt;&gt;&#39;quantity&#39;)::numeric as quantity,
    cid_to_pk(c.payload-&gt;&gt;&#39;tokenCid&#39;) as token
from creates(&#39;TokenClose&#39;) c;
create index mvw_token_close_pk_idx on mvw_token_close (create_event_pk);

create materialized view mvw_token as
select
    c.create_event_pk,
    c.contract_id,
    c.payload-&gt;&#39;wallet&#39;-&gt;&gt;&#39;label&#39; as wallet,
    (c.payload-&gt;&gt;&#39;quantity&#39;)::numeric as quantity
from creates(&#39;Token&#39;) c;
create index mvw_token_pk_idx on mvw_token (create_event_pk);

create materialized view mvw_issuer_approval_to_token_open as
select
    c.create_event_pk as issuer_approval_pk,
    op.pk as token_open_pk
from creates(&#39;IssuerApproval&#39;) c
join lateral ( select cid_to_pk(cid) as pk from jsonb_array_elements_text(c.payload-&gt;&#39;opens&#39;) as cid ) op on true;
create index mvw_issuer_approval_to_token_open_iapk_idx on mvw_issuer_approval_to_token_open (issuer_approval_pk);
create index mvw_issuer_approval_to_token_open_topk_idx on mvw_issuer_approval_to_token_open (token_open_pk);

create materialized view mvw_issuer_approval_to_token_close as
select
    c.create_event_pk as issuer_approval_pk,
    cl.pk as token_close_pk
from creates(&#39;IssuerApproval&#39;) c
join lateral ( select distinct cid_to_pk(cid) as pk from jsonb_array_elements_text(c.payload-&gt;&#39;closes&#39;) as cid ) cl on true;
create index mvw_issuer_approval_to_token_close_iapk_idx on mvw_issuer_approval_to_token_close (issuer_approval_pk);
create index mvw_issuer_approval_to_token_close_tcpk_idx on mvw_issuer_approval_to_token_close (token_close_pk);

create materialized view mvw_issuer_approval as
select
    c.create_event_pk,
    c.contract_id,
    c.payload-&gt;&#39;issue&#39;-&gt;&gt;&#39;label&#39; as security,
    c.payload-&gt;&gt;&#39;requestor&#39; as requestor,
    c.payload-&gt;&gt;&#39;transferId&#39; as transferId
from creates(&#39;IssuerApproval&#39;) c;
create index mvw_issuer_approval_pk_idx on mvw_issuer_approval (create_event_pk);

set max_parallel_workers_per_gather = 0; -- turn off
create materialized view mvw_xfer_settle as
select e.exercise_event_pk,
       e.exercise_event_id,
       e.exercised_at_offset
from exercises(&#39;Transfer_Settle&#39;) e;
create index mvw_xfer_settle_pk_idx on mvw_xfer_settle (exercise_event_pk);

create materialized view mvw_xfer_settle_to_issuer_approval as
select
    e.exercise_event_pk as xfer_settle_pk,
    ia.pk as issuer_approval_pk
from exercises(&#39;Transfer_Settle&#39;) e
join lateral ( select cid_to_pk(cid) as pk from jsonb_array_elements_text(e.argument-&gt;&#39;issuerApprovals&#39;) as cid ) ia on true;
create index mvw_xfer_settle_to_issuer_approval_xspk_idx on mvw_xfer_settle_to_issuer_approval (xfer_settle_pk);
create index mvw_xfer_settle_to_issuer_approval_iapk_idx on mvw_xfer_settle_to_issuer_approval (issuer_approval_pk);

create materialized view mvw_xfer_settle_to_token as
select
    e.exercise_event_pk as xfer_settle_pk,
    tk.pk as token_pk
from exercises(&#39;Transfer_Settle&#39;) e
join lateral ( select cid_to_pk(cid) as pk from jsonb_array_elements_text(e.result) as cid ) tk on true;
create index mvw_xfer_settle_to_token_xspk_idx on mvw_xfer_settle_to_token (xfer_settle_pk);
create index mvw_xfer_settle_to_token_tkpk_idx on mvw_xfer_settle_to_token (token_pk);
set max_parallel_workers_per_gather = 4; -- restore

create index mvw_issuer_approval_xferid_idx on mvw_issuer_approval (transferId text_pattern_ops);
create index mvw_token_open_qty_idx on mvw_token_open (quantity);
create index mvw_token_qty_idx on mvw_token (quantity);
</pre></div>
</div>
</details><div class="highlight-text notranslate"><div class="highlight"><pre><span></span>-- https://explain.tensor.ru/archive/explain/34c7600fdd0fc48b107e2a8d68969c5b:0:2024-04-19#explain
scribe=# select ia.create_event_pk as pk_approval,
       op.create_event_pk as pk_open,
       cl.create_event_pk as pk_close,
       tk.create_event_pk as pk_token,
       replace(ia.transferId, &#39;::1220d7cf981d96424b297506222e91dd87471371ddbf0615d27ee3d594976ded215c&#39;, &#39;&#39;) as xferid,
       op.quantity as qty_open,
       cl.quantity as qty_close,
       replace(tk.wallet, &#39;::1220d7cf981d96424b297506222e91dd87471371ddbf0615d27ee3d594976ded215c&#39;, &#39;&#39;) as wallet
from mvw_issuer_approval ia
inner join mvw_issuer_approval_to_token_open iato on iato.issuer_approval_pk = ia.create_event_pk
inner join mvw_token_open op on op.create_event_pk = iato.token_open_pk
inner join mvw_issuer_approval_to_token_close iatc on iatc.issuer_approval_pk = ia.create_event_pk
inner join mvw_token_close cl on cl.create_event_pk = iatc.token_close_pk
inner join mvw_token tk on tk.create_event_pk = cl.token
where ia.transferId like &#39;Split / 33225%&#39;
  and op.quantity between 999150000 and 999250000;

 pk_approval |  pk_open  | pk_close  | pk_token  |             xferid             |       qty_open       |      qty_close       |               wallet
-------------+-----------+-----------+-----------+--------------------------------+----------------------+----------------------+-------------------------------------
   107592500 | 107591508 | 107591509 | 107585391 | Split / 3322542178: issuer-210 | 999161161.0000000000 | 999161177.0000000000 | treasury for security:by-issuer-210
   108457227 | 108456207 | 108456208 | 108450585 | Split / 3322577190: issuer-232 | 999157597.0000000000 | 999157614.0000000000 | treasury for security:by-issuer-232
(2 rows)

Time: 2.153 ms

-- https://explain.tensor.ru/archive/explain/2c1ebfdf14c5caa59858f8a8e4ed97e6:0:2024-04-19#explain
scribe=# select xs.exercise_event_pk,
       xs.exercise_event_id,
       replace(ia.transferId, &#39;::1220d7cf981d96424b297506222e91dd87471371ddbf0615d27ee3d594976ded215c&#39;, &#39;&#39;) as xferid,
       tk.quantity,
       replace(tk.wallet, &#39;::1220d7cf981d96424b297506222e91dd87471371ddbf0615d27ee3d594976ded215c&#39;, &#39;&#39;) as wallet
from mvw_xfer_settle xs
inner join mvw_xfer_settle_to_issuer_approval xsia on xsia.xfer_settle_pk = xs.exercise_event_pk
inner join mvw_issuer_approval ia on ia.create_event_pk = xsia.issuer_approval_pk
inner join mvw_xfer_settle_to_token xstk on xstk.xfer_settle_pk = xs.exercise_event_pk
inner join mvw_token tk on tk.create_event_pk = xstk.token_pk
where ia.transferId like &#39;Split / 33225%&#39;
  and tk.quantity between 999150000 and 999250000;

 exercise_event_pk |                            exercise_event_id                            |             xferid             |       quantity       |               wallet
-------------------+-------------------------------------------------------------------------+--------------------------------+----------------------+-------------------------------------
         107593067 | #1220b9011f7a04cdae0301e08df2524001a32d8e171ddfb97ac49d0f12c8a94730bc:0 | Split / 3322542178: issuer-210 | 999161161.0000000000 | treasury for security:by-issuer-210
         108454294 | #1220e12db3f12eac866546027d338a0c2609e57e290619c48c79f7ee6b2514eced0a:0 | Split / 3322577190: issuer-232 | 999157597.0000000000 | treasury for security:by-issuer-232
(2 rows)

Time: 2.736 ms
</pre></div>
</div>
<p>Observe that both query timings are extremely fast. This is because the data is now essentially in flattened tables with indexes, which allows Postgres to use its full capabilities, as reflected in the query plans.</p>
</div>
<div class="section" id="custom-triggers">
<h4>Custom Triggers<a class="headerlink" href="#custom-triggers" title="Permalink to this headline">¶</a></h4>
<p>Another option is to take a less declarative approach and use custom triggers to maintain the desired tables. While this approach offers greater flexibility and enables the implementation of more complex logic, it also demands more effort to maintain.</p>
<details>
<summary>Custom triggers equivalents</summary><div class="highlight-text notranslate"><div class="highlight"><pre><span></span>-- necessary tables
create table tbl_tokens (create_event_pk bigint, contract_id text, wallet text, quantity numeric);
create index tbl_tokens_pk_idx on tbl_tokens (create_event_pk);

create table tbl_token_opens (create_event_pk bigint, contract_id text, quantity numeric);
create index tbl_token_opens_pk_idx on tbl_token_opens (create_event_pk);

create table tbl_token_closes (create_event_pk bigint, contract_id text, quantity numeric, token_pk bigint);
create index tbl_token_closes_pk_idx on tbl_token_closes (create_event_pk);

create table tbl_issuer_approvals(create_event_pk bigint, contract_id text, security text, requestor text, transferId text);
create index tbl_issuer_approval_pk_idx on tbl_issuer_approvals (create_event_pk);

create table tbl_issuer_approval_to_token_open (issuer_approval_pk bigint, token_open_pk bigint);
create index tbl_issuer_approval_to_token_open_iapk_idx on tbl_issuer_approval_to_token_open (issuer_approval_pk);
create index tbl_issuer_approval_to_token_open_topk_idx on tbl_issuer_approval_to_token_open (token_open_pk);

create table tbl_issuer_approval_to_token_close (issuer_approval_pk bigint, token_close_pk bigint);
create index tbl_issuer_approval_to_token_close_iapk_idx on tbl_issuer_approval_to_token_close (issuer_approval_pk);
create index tbl_issuer_approval_to_token_close_topk_idx on tbl_issuer_approval_to_token_close (token_close_pk);

create table tbl_xfer_settle(exercise_event_pk bigint, exercise_event_id text, exercised_at_offset text);
create index tbl_xfer_settle_pk_idx on tbl_xfer_settle (exercise_event_pk);

create table tbl_xfer_settle_to_issuer_approval(xfer_settle_pk bigint, issuer_approval_pk bigint);
create index tbl_xfer_settle_to_issuer_approval_xspk_idx on tbl_xfer_settle_to_issuer_approval (xfer_settle_pk);
create index tbl_xfer_settle_to_issuer_approval_iapk_idx on tbl_xfer_settle_to_issuer_approval (issuer_approval_pk);

create table tbl_xfer_settle_to_token(xfer_settle_pk bigint, token_pk bigint);
create index tbl_xfer_settle_to_token_xspk_idx on tbl_xfer_settle_to_token (xfer_settle_pk);
create index tbl_xfer_settle_to_token_tkpk_idx on tbl_xfer_settle_to_token (token_pk);

-- query indexes
create index tbl_issuer_approvals_xferid_idx on tbl_issuer_approvals (transferId text_pattern_ops);
create index tbl_token_opens_qty_idx on tbl_token_opens (quantity);
create index tbl_tokens_qty_idx on tbl_tokens (quantity);

-- utility functions
create or replace function cid_to_pk(cid text) returns bigint as $$
select create_event_pk from __contracts where contract_id = cid;
$$ language sql;

create or replace procedure create_trigger_for_contract(tname text, fname text, qname text) as
$$
declare
    tpe_pk bigint;
begin
    select __contract_tpe4name(qname) tpe into tpe_pk;
    execute format(&#39;create trigger %I after insert on %I for each row execute function %s()&#39;, tname, &#39;__contracts_&#39; || tpe_pk, fname);
end;
$$ language plpgsql;

create or replace procedure create_trigger_for_exercise(tname text, fname text, qname text) as
$$
declare
    tpe_pk bigint;
begin
    select __exercise_tpe4name(qname) tpe into tpe_pk;
    execute format(&#39;create trigger %I after insert on %I for each row execute function %s()&#39;, tname, &#39;__exercises_&#39; || tpe_pk, fname);
end;
$$ language plpgsql;

-- trigger functions
create or replace function trg_token_create() returns trigger as $$
begin
    insert into tbl_tokens (create_event_pk, contract_id, wallet, quantity)
    values (new.create_event_pk, new.contract_id, new.payload-&gt;&#39;wallet&#39;-&gt;&gt;&#39;label&#39;, (new.payload-&gt;&gt;&#39;quantity&#39;)::numeric);
    return new;
end;
$$ language plpgsql;

create or replace function trg_token_open_create() returns trigger as $$
begin
    insert into tbl_token_opens (create_event_pk, contract_id, quantity)
    values (new.create_event_pk, new.contract_id, (new.payload-&gt;&#39;token&#39;-&gt;&gt;&#39;quantity&#39;)::numeric);
    return new;
end;
$$ language plpgsql;

create or replace function trg_token_close_create() returns trigger as $$
begin
    insert into tbl_token_closes (create_event_pk, contract_id, quantity, token_pk)
    values (new.create_event_pk, new.contract_id, (new.payload-&gt;&#39;token&#39;-&gt;&gt;&#39;quantity&#39;)::numeric, cid_to_pk(new.payload-&gt;&gt;&#39;tokenCid&#39;));
    return new;
end;
$$ language plpgsql;

create or replace function trg_token_issuer_approval_create() returns trigger as $$
begin
    insert into tbl_issuer_approvals (create_event_pk, contract_id, security, requestor, transferId)
    values (new.create_event_pk, new.contract_id, new.payload-&gt;&#39;issue&#39;-&gt;&gt;&#39;label&#39;, new.payload-&gt;&gt;&#39;requestor&#39;, new.payload-&gt;&gt;&#39;transferId&#39;);

    insert into tbl_issuer_approval_to_token_open (issuer_approval_pk, token_open_pk)
    select new.create_event_pk, cid_to_pk(cid) from jsonb_array_elements_text(new.payload-&gt;&#39;opens&#39;) as cid;

    insert into tbl_issuer_approval_to_token_close (issuer_approval_pk, token_close_pk)
    select new.create_event_pk, cid_to_pk(cid) from jsonb_array_elements_text(new.payload-&gt;&#39;closes&#39;) as cid;
    return new;
end;
$$ language plpgsql;

create or replace function trg_xfer_settle_create() returns trigger as $$
begin
    insert into tbl_xfer_settle (exercise_event_pk, exercise_event_id, exercised_at_offset)
    select new.exercise_event_pk, e.event_id, t.&quot;offset&quot;
    from __events e, __transactions t
    where e.pk = new.exercise_event_pk and t.ix = new.exercised_at_ix;

    insert into tbl_xfer_settle_to_issuer_approval (xfer_settle_pk, issuer_approval_pk)
    select new.exercise_event_pk, cid_to_pk(cid) from jsonb_array_elements_text(new.argument-&gt;&#39;issuerApprovals&#39;) as cid;

    insert into tbl_xfer_settle_to_token (xfer_settle_pk, token_pk)
    select new.exercise_event_pk, cid_to_pk(cid) from jsonb_array_elements_text(new.result) as cid;
    return new;
end;
$$ language plpgsql;

-- triggers wiring
call create_trigger_for_contract(&#39;after_token_create&#39;, &#39;trg_token_create&#39;, &#39;Token&#39;);
call create_trigger_for_contract(&#39;after_token_open_create&#39;, &#39;trg_token_open_create&#39;, &#39;TokenOpen&#39;);
call create_trigger_for_contract(&#39;after_token_close_create&#39;, &#39;trg_token_close_create&#39;, &#39;TokenClose&#39;);
call create_trigger_for_contract(&#39;after_token_issuer_approval_create&#39;, &#39;trg_token_issuer_approval_create&#39;, &#39;IssuerApproval&#39;);
call create_trigger_for_exercise(&#39;after_xfer_settle_create&#39;, &#39;trg_xfer_settle_create&#39;, &#39;Transfer_Settle&#39;);
</pre></div>
</div>
</details><div class="highlight-text notranslate"><div class="highlight"><pre><span></span>-- https://explain.tensor.ru/archive/explain/889ceb439fb1832258ecb60efb1d5b9c:0:2024-04-23#explain
scribe=# select ia.create_event_pk as pk_approval,
       op.create_event_pk as pk_open,
       cl.create_event_pk as pk_close,
       tk.create_event_pk as pk_token,
       replace(ia.transferId, &#39;::1220d7cf981d96424b297506222e91dd87471371ddbf0615d27ee3d594976ded215c&#39;, &#39;&#39;) as xferid,
       op.quantity as qty_open,
       cl.quantity as qty_close,
       replace(tk.wallet, &#39;::1220d7cf981d96424b297506222e91dd87471371ddbf0615d27ee3d594976ded215c&#39;, &#39;&#39;) as wallet
from tbl_issuer_approvals ia
inner join tbl_issuer_approval_to_token_open iato on iato.issuer_approval_pk = ia.create_event_pk
inner join tbl_token_opens op on op.create_event_pk = iato.token_open_pk
inner join tbl_issuer_approval_to_token_close iatc on iatc.issuer_approval_pk = ia.create_event_pk
inner join tbl_token_closes cl on cl.create_event_pk = iatc.token_close_pk
inner join tbl_tokens tk on tk.create_event_pk = cl.token_pk
where ia.transferId like &#39;Split / 1956%&#39;
  and op.quantity between 999900010 and 999999999;

 pk_approval | pk_open  | pk_close | pk_token |             xferid             |       qty_open       |      qty_close       |               wallet
-------------+----------+----------+----------+--------------------------------+----------------------+----------------------+-------------------------------------
     4162323 |  4161178 |  4161179 |  4156942 | Split / 1956182002: issuer-138 | 999967605.0000000000 | 999967623.0000000000 | treasury for security:by-issuer-138
    12575227 | 12574113 | 12574114 | 12567610 | Split / 1956364002: issuer-178 | 999901016.0000000000 | 999901029.0000000000 | treasury for security:by-issuer-178
(2 rows)

Time: 5.664 ms

-- https://explain.tensor.ru/archive/explain/516905bb12bdb7cffffafcace2032027:0:2024-04-23#explain
scribe=# select xs.exercise_event_pk,
                xs.exercise_event_id,
                replace(ia.transferId, &#39;::1220d7cf981d96424b297506222e91dd87471371ddbf0615d27ee3d594976ded215c&#39;, &#39;&#39;) as xferid,
                tk.quantity,
                replace(tk.wallet, &#39;::1220d7cf981d96424b297506222e91dd87471371ddbf0615d27ee3d594976ded215c&#39;, &#39;&#39;) as wallet
from tbl_xfer_settle xs
inner join tbl_xfer_settle_to_issuer_approval xsia on xsia.xfer_settle_pk = xs.exercise_event_pk
inner join tbl_issuer_approvals ia on ia.create_event_pk = xsia.issuer_approval_pk
inner join tbl_xfer_settle_to_token xstk on xstk.xfer_settle_pk = xs.exercise_event_pk
inner join tbl_tokens tk on tk.create_event_pk = xstk.token_pk
where ia.transferId like &#39;Split / 19564%&#39;
  and tk.quantity between 999900010 and 999999999;

 exercise_event_pk |                            exercise_event_id                            |             xferid             |       quantity       |               wallet
-------------------+-------------------------------------------------------------------------+--------------------------------+----------------------+-------------------------------------
           7524138 | #12207c252e087542a44346304c688089bfb9fb8a7cd61107570cbd5c0018b7d8ee4a:0 | Split / 1956403772: issuer-153 | 999940169.0000000000 | treasury for security:by-issuer-153
          11117236 | #12205e417b7e24100cb44faf5986f1b3dc7bba9fa80e87de9ce582b79de20a49d2dc:0 | Split / 1956436769: issuer-154 | 999912025.0000000000 | treasury for security:by-issuer-154
           7301539 | #1220bb13f5dce65d60eb27afcb3cb5633c84047210818afacf81b681d520e01a7468:0 | Split / 1956456900: issuer-127 | 999942590.0000000000 | treasury for security:by-issuer-127
(3 rows)

Time: 1.915 ms
</pre></div>
</div>
<p>Query timings are in line with those of the materialized views. Note that triggers are executed as part of the transaction during underlying inserts, so care should be taken not to introduce performance bottlenecks with additional processing. In the example, the triggers are simple enough to avoid significant overhead:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>-- ingestion benchmark
[watermark_ix]
First reading: 179 @ 1710197030847
Last reading: 40565095 @ 1710198940757
PQS throughput: 21,239 tx/s (101,289 ledger events/sec)

-- ingestion with triggers
[watermark_ix]
First reading: 214 @ 1713833930948
Last reading: 40565095 @ 1713835912812
PQS throughput: 20,468 tx/s (97,610 ledger events/sec)
</pre></div>
</div>
<p>Compared to the materialized views approach, custom triggers incur the maintenance cost upfront during ingestion, while views defer this cost over time, albeit at the expense of data availability/recency.</p>
</div>
</div>
<div class="section" id="trade-offs-summary">
<h3>Trade-Offs Summary<a class="headerlink" href="#trade-offs-summary" title="Permalink to this headline">¶</a></h3>
<p>The table below summarizes the trade-offs against various dimensions across the approaches discussed in this document.</p>
<table border="1" class="docutils align-default">
<colgroup>
<col width="21%" />
<col width="18%" />
<col width="29%" />
<col width="32%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Characteristic</th>
<th class="head">Views</th>
<th class="head">Materialized Views</th>
<th class="head">Triggers</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><strong>Definition</strong></td>
<td>declarative</td>
<td>declarative</td>
<td>procedural</td>
</tr>
<tr class="row-odd"><td><strong>Data Availability</strong></td>
<td>immediate</td>
<td>lagging (on refresh schedule)</td>
<td>immediate</td>
</tr>
<tr class="row-even"><td><strong>Indexable</strong></td>
<td>over JSONB column</td>
<td>over actual columns</td>
<td>over actual columns</td>
</tr>
<tr class="row-odd"><td><strong>Statistics</strong></td>
<td>crude</td>
<td>detailed</td>
<td>detailed</td>
</tr>
<tr class="row-even"><td><strong>Write Path Impact</strong></td>
<td>none</td>
<td>none</td>
<td>slows down ingestion transaction</td>
</tr>
</tbody>
</table>
<div class="admonition caution">
<p class="first admonition-title">Caution</p>
<p class="last">PQS’s Read API functions not only expose ledger’s events as first-class citizens through the use of <code class="docutils literal notranslate"><span class="pre">creates()</span></code>, <code class="docutils literal notranslate"><span class="pre">archives()</span></code>, <code class="docutils literal notranslate"><span class="pre">active()</span></code>, and <code class="docutils literal notranslate"><span class="pre">exercises()</span></code>, but also enable advanced querying capabilities, such as running a query as of a fixed point in time (as of a particular offset). This powerful feature is not provided by the relational approach described above. However, it is possible to combine the two approaches by supplying additional joins to “enrich” the resulting outcomes.</p>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>select ...
  from tbl_issuer_approvals ia
  ...
  inner join active(&#39;DA.Register:IssuerApproval&#39;, &#39;some_offset&#39;) ac on ac.create_event_pk = ia.create_event_pk
  ...
</pre></div>
</div>
</div>
</div>
<div class="section" id="observability">
<h2>Observability<a class="headerlink" href="#observability" title="Permalink to this headline">¶</a></h2>
<p>This page describes observability features of PQS, which are designed to help you monitor health and performance of the application.</p>
<div class="section" id="underlying-mechanism">
<h3>Underlying Mechanism<a class="headerlink" href="#underlying-mechanism" title="Permalink to this headline">¶</a></h3>
<p>PQS opted to incorporate OpenTelemetry APIs to provide its observability features. All three sources of signals (traces, metrics, and logs) can be exported to various backends by providing appropriate configuration defined by OpenTelemetry protocols and guidelines. This makes PQS flexible in terms of observability backends, allowing users to choose what fits their needs and established infrastructure without being overly prescriptive.</p>
<p>To have PQS emit observability data, an OpenTelemetry Java Agent must be attached to the JVM running PQS. OpenTelemetry’s documentation page on <a class="reference external" href="https://opentelemetry.io/docs/languages/java/automatic/">Automatic Instrumentation</a> has all the necessary information to get started.</p>
<p>As a frequently requested shortcut (only metrics over Prometheus exposition endpoint embedded by PQS), the following snippet can help you get started. For more details, refer to the official documentation:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>export OTEL_SERVICE_NAME=scribe
export OTEL_TRACES_EXPORTER=none
export OTEL_LOGS_EXPORTER=none
export OTEL_METRICS_EXPORTER=prometheus
export OTEL_EXPORTER_PROMETHEUS_PORT=9090
export JDK_JAVA_OPTIONS=&quot;-javaagent:path/to/opentelemetry-javaagent.jar&quot;
./scribe.jar pipeline ledger postgres-document ...
</pre></div>
</div>
<div class="highlight-dockerfile notranslate"><div class="highlight"><pre><span></span>services:
<span class="w">  </span>scribe:
<span class="w">    </span>image:<span class="w"> </span>scribe:X.Y.Z
<span class="w">    </span>#<span class="w"> </span>...
<span class="w">    </span>environment:
<span class="w">      </span>JDK_JAVA_OPTIONS:<span class="w"> </span><span class="s2">&quot;-javaagent:path/to/opentelemetry-javaagent.jar&quot;</span>
<span class="w">      </span>OTEL_SERVICE_NAME:<span class="w"> </span>scribe
<span class="w">      </span>OTEL_TRACES_EXPORTER:<span class="w"> </span>none
<span class="w">      </span>OTEL_LOGS_EXPORTER:<span class="w"> </span>none
<span class="w">      </span>OTEL_METRICS_EXPORTER:<span class="w"> </span>prometheus
<span class="w">      </span>OTEL_EXPORTER_PROMETHEUS_PORT:<span class="w"> </span><span class="m">9090</span>
<span class="w">    </span>#<span class="w"> </span>...
</pre></div>
</div>
</div>
<div class="section" id="provided-metrics">
<h3>Provided Metrics<a class="headerlink" href="#provided-metrics" title="Permalink to this headline">¶</a></h3>
<p>Assuming PQS exposes metrics as described above, you can access the following metrics at <code class="docutils literal notranslate"><span class="pre">http://localhost:9090/metrics</span></code>. Each metric is accompanied by <code class="docutils literal notranslate"><span class="pre">#</span> <span class="pre">HELP</span></code> and <code class="docutils literal notranslate"><span class="pre">#</span> <span class="pre">TYPE</span></code> comments, which describe the meaning of the metric and its type, respectively.</p>
<p>Some metric types have additional constituent parts exposed as separate metrics. For example, a <code class="docutils literal notranslate"><span class="pre">histogram</span></code> metric type tracks <code class="docutils literal notranslate"><span class="pre">max</span></code>, <code class="docutils literal notranslate"><span class="pre">count</span></code>, <code class="docutils literal notranslate"><span class="pre">sum</span></code>, and actual ranged <code class="docutils literal notranslate"><span class="pre">bucket</span></code>s as separate time series. Metrics are labeled where it makes sense, providing additional context such as the type of operation or the template/choice involved.</p>
<p>Conceptual list of metrics (refer to actual metric names in the Prometheus output):</p>
<table border="1" class="docutils align-default">
<colgroup>
<col width="7%" />
<col width="32%" />
<col width="61%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Type</th>
<th class="head">Name</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>gauge</td>
<td><code class="docutils literal notranslate"><span class="pre">watermark_ix</span></code></td>
<td>Current watermark index (transaction ordinal number for consistent reads)</td>
</tr>
<tr class="row-odd"><td>counter</td>
<td><code class="docutils literal notranslate"><span class="pre">pipeline_events</span></code></td>
<td>Processed ledger events</td>
</tr>
<tr class="row-even"><td>histogram</td>
<td><code class="docutils literal notranslate"><span class="pre">jdbc_conn_use</span></code></td>
<td>Latency of database connections usage</td>
</tr>
<tr class="row-odd"><td>histogram</td>
<td><code class="docutils literal notranslate"><span class="pre">jdbc_conn_isvalid</span></code></td>
<td>Latency of database connection validation</td>
</tr>
<tr class="row-even"><td>histogram</td>
<td><code class="docutils literal notranslate"><span class="pre">jdbc_conn_commit</span></code></td>
<td>Latency of database connection commit</td>
</tr>
<tr class="row-odd"><td>gauge</td>
<td><code class="docutils literal notranslate"><span class="pre">tx_lag_from_ledger_wallclock</span></code></td>
<td>Lag from ledger (wall-clock delta (in ms) from command completion to receipt by pipeline)</td>
</tr>
<tr class="row-even"><td>histogram</td>
<td><code class="docutils literal notranslate"><span class="pre">pipeline_convert_acs_event</span></code></td>
<td>Latency of converting ACS events</td>
</tr>
<tr class="row-odd"><td>histogram</td>
<td><code class="docutils literal notranslate"><span class="pre">pipeline_convert_transaction</span></code></td>
<td>Latency of converting transactions</td>
</tr>
<tr class="row-even"><td>histogram</td>
<td><code class="docutils literal notranslate"><span class="pre">pipeline_prepare_batch_latency</span></code></td>
<td>Latency of preparing batches of statements</td>
</tr>
<tr class="row-odd"><td>histogram</td>
<td><code class="docutils literal notranslate"><span class="pre">pipeline_execute_batch_latency</span></code></td>
<td>Latency of executing batches of statements</td>
</tr>
<tr class="row-even"><td>histogram</td>
<td><code class="docutils literal notranslate"><span class="pre">pipeline_progress_watermark_latency</span></code></td>
<td>Latency of watermark progression</td>
</tr>
<tr class="row-odd"><td>histogram</td>
<td><code class="docutils literal notranslate"><span class="pre">pipeline_wp_acs_events_size</span></code></td>
<td>Number of in-flight units of work in <code class="docutils literal notranslate"><span class="pre">pipeline_wp_acs_events</span></code> wait point</td>
</tr>
<tr class="row-even"><td>histogram</td>
<td><code class="docutils literal notranslate"><span class="pre">pipeline_wp_acs_statements_size</span></code></td>
<td>Number of in-flight units of work in <code class="docutils literal notranslate"><span class="pre">pipeline_wp_acs_statements</span></code> wait point</td>
</tr>
<tr class="row-odd"><td>histogram</td>
<td><code class="docutils literal notranslate"><span class="pre">pipeline_wp_acs_batched_statements_size</span></code></td>
<td>Number of in-flight units of work in <code class="docutils literal notranslate"><span class="pre">pipeline_wp_acs_batched_statements</span></code> wait point</td>
</tr>
<tr class="row-even"><td>histogram</td>
<td><code class="docutils literal notranslate"><span class="pre">pipeline_wp_acs_prepared_statements_size</span></code></td>
<td>Number of in-flight units of work in <code class="docutils literal notranslate"><span class="pre">pipeline_wp_acs_prepared_statements</span></code> wait point</td>
</tr>
<tr class="row-odd"><td>histogram</td>
<td><code class="docutils literal notranslate"><span class="pre">pipeline_wp_events_size</span></code></td>
<td>Number of in-flight units of work in <code class="docutils literal notranslate"><span class="pre">pipeline_wp_events</span></code> wait point</td>
</tr>
<tr class="row-even"><td>histogram</td>
<td><code class="docutils literal notranslate"><span class="pre">pipeline_wp_statements_size</span></code></td>
<td>Number of in-flight units of work in <code class="docutils literal notranslate"><span class="pre">pipeline_wp_statements</span></code> wait point</td>
</tr>
<tr class="row-odd"><td>histogram</td>
<td><code class="docutils literal notranslate"><span class="pre">pipeline_wp_batched_statements_size</span></code></td>
<td>Number of in-flight units of work in <code class="docutils literal notranslate"><span class="pre">pipeline_wp_batched_statements</span></code> wait point</td>
</tr>
<tr class="row-even"><td>histogram</td>
<td><code class="docutils literal notranslate"><span class="pre">pipeline_wp_prepared_statements_size</span></code></td>
<td>Number of in-flight units of work in <code class="docutils literal notranslate"><span class="pre">pipeline_wp_prepared_statements</span></code> wait point</td>
</tr>
<tr class="row-odd"><td>histogram</td>
<td><code class="docutils literal notranslate"><span class="pre">pipeline_wp_watermarks_size</span></code></td>
<td>Number of in-flight units of work in <code class="docutils literal notranslate"><span class="pre">pipeline_wp_watermarks</span></code> wait point</td>
</tr>
<tr class="row-even"><td>counter</td>
<td><code class="docutils literal notranslate"><span class="pre">pipeline_wp_acs_events_total</span></code></td>
<td>Number of units of work processed in <code class="docutils literal notranslate"><span class="pre">pipeline_wp_acs_events</span></code> wait point</td>
</tr>
<tr class="row-odd"><td>counter</td>
<td><code class="docutils literal notranslate"><span class="pre">pipeline_wp_acs_statements_total</span></code></td>
<td>Number of units of work processed in <code class="docutils literal notranslate"><span class="pre">pipeline_wp_acs_statements</span></code> wait point</td>
</tr>
<tr class="row-even"><td>counter</td>
<td><code class="docutils literal notranslate"><span class="pre">pipeline_wp_acs_batched_statements_total</span></code></td>
<td>Number of units of work processed in <code class="docutils literal notranslate"><span class="pre">pipeline_wp_acs_batched_statements</span></code> wait point</td>
</tr>
<tr class="row-odd"><td>counter</td>
<td><code class="docutils literal notranslate"><span class="pre">pipeline_wp_acs_prepared_statements_total</span></code></td>
<td>Number of units of work processed in <code class="docutils literal notranslate"><span class="pre">pipeline_wp_acs_prepared_statements</span></code> wait point</td>
</tr>
<tr class="row-even"><td>counter</td>
<td><code class="docutils literal notranslate"><span class="pre">pipeline_wp_events_total</span></code></td>
<td>Number of units of work processed in <code class="docutils literal notranslate"><span class="pre">pipeline_wp_events</span></code> wait point</td>
</tr>
<tr class="row-odd"><td>counter</td>
<td><code class="docutils literal notranslate"><span class="pre">pipeline_wp_statements_total</span></code></td>
<td>Number of units of work processed in <code class="docutils literal notranslate"><span class="pre">pipeline_wp_statements</span></code> wait point</td>
</tr>
<tr class="row-even"><td>counter</td>
<td><code class="docutils literal notranslate"><span class="pre">pipeline_wp_batched_statements_total</span></code></td>
<td>Number of units of work processed in <code class="docutils literal notranslate"><span class="pre">pipeline_wp_batched_statements</span></code> wait point</td>
</tr>
<tr class="row-odd"><td>counter</td>
<td><code class="docutils literal notranslate"><span class="pre">pipeline_wp_prepared_statements_total</span></code></td>
<td>Number of units of work processed in <code class="docutils literal notranslate"><span class="pre">pipeline_wp_prepared_statements</span></code> wait point</td>
</tr>
<tr class="row-even"><td>counter</td>
<td><code class="docutils literal notranslate"><span class="pre">pipeline_wp_watermarks_total</span></code></td>
<td>Number of units of work processed in <code class="docutils literal notranslate"><span class="pre">pipeline_wp_watermarks</span></code> wait point</td>
</tr>
<tr class="row-odd"><td>counter</td>
<td><code class="docutils literal notranslate"><span class="pre">app_restarts</span></code></td>
<td>Tracks number of times recoverable failures forced the pipeline to restart</td>
</tr>
<tr class="row-even"><td>gauge</td>
<td><code class="docutils literal notranslate"><span class="pre">grpc_up</span></code></td>
<td>Indicator whether gRPC channel is up and operational</td>
</tr>
<tr class="row-odd"><td>gauge</td>
<td><code class="docutils literal notranslate"><span class="pre">jdbc_conn_pool_up</span></code></td>
<td>Indicator whether JDBC connection pool is up and operational</td>
</tr>
</tbody>
</table>
<details>
<summary>Sample Prometheus endpoint output</summary><div class="highlight-text notranslate"><div class="highlight"><pre><span></span>## TYPE pipeline_wp_prepared_statements_size_max gauge
## HELP pipeline_wp_prepared_statements_size_max Number of in-flight units of work in pipeline_wp_prepared_statements wait point
pipeline_wp_prepared_statements_size_max{} 1.0 1713928633985

## TYPE pipeline_wp_prepared_statements_size histogram
## HELP pipeline_wp_prepared_statements_size Number of in-flight units of work in pipeline_wp_prepared_statements wait point
pipeline_wp_prepared_statements_size_count{} 554.0 1713928633985
pipeline_wp_prepared_statements_size_sum{} 277.0 1713928633985
pipeline_wp_prepared_statements_size_bucket{,le=&quot;1.0&quot;} 554.0 1713928633985
...

## TYPE pipeline_wp_prepared_statements_total counter
## HELP pipeline_wp_prepared_statements_total Number of units of work processed in pipeline_wp_prepared_statements wait point
pipeline_wp_prepared_statements_total{} 277.0 1713928633985

## TYPE pipeline_events_total counter
## HELP pipeline_events_total Processed ledger events
pipeline_events_total{,template=&quot;d0f09fe42c762a6132537874d4255a7be044a94d554c48a548e3f88dc8f2a5f5:DA.Register:IssuerProposal&quot;,type=&quot;create&quot;} 289.0 1713928633985
...

## TYPE pipeline_prepare_batch_latency_max gauge
## HELP pipeline_prepare_batch_latency_max Latency of preparing batches of statements
pipeline_prepare_batch_latency_max{,status=&quot;success&quot;} 0.005862959 1713928633985

## TYPE pipeline_prepare_batch_latency histogram
## HELP pipeline_prepare_batch_latency Latency of preparing batches of statements
pipeline_prepare_batch_latency_count{,status=&quot;success&quot;} 277.0 1713928633985
pipeline_prepare_batch_latency_sum{,status=&quot;success&quot;} 0.05226997100000001 1713928633985
pipeline_prepare_batch_latency_bucket{,status=&quot;success&quot;,le=&quot;0.001&quot;} 271.0 1713928633985
...

## TYPE pipeline_wp_batched_statements_size_max gauge
## HELP pipeline_wp_batched_statements_size_max Number of in-flight units of work in pipeline_wp_batched_statements wait point
pipeline_wp_batched_statements_size_max{} 1.0 1713928633985

## TYPE pipeline_convert_transaction_max gauge
## HELP pipeline_convert_transaction_max Latency of converting transactions
pipeline_convert_transaction_max{,status=&quot;success&quot;} 0.076553251 1713928633985

## TYPE pipeline_wp_events_size_max gauge
## HELP pipeline_wp_events_size_max Number of in-flight units of work in pipeline_wp_events wait point
pipeline_wp_events_size_max{} 30.0 1713928633985

## TYPE pipeline_wp_statements_size histogram
## HELP pipeline_wp_statements_size Number of in-flight units of work in pipeline_wp_statements wait point
pipeline_wp_statements_size_count{} 3322.0 1713928633985
pipeline_wp_statements_size_sum{} 2295.0 1713928633985
pipeline_wp_statements_size_bucket{,le=&quot;506.0&quot;} 3322.0 1713928633985
...

## TYPE pipeline_wp_batched_statements_total counter
## HELP pipeline_wp_batched_statements_total Number of units of work processed in pipeline_wp_batched_statements wait point
pipeline_wp_batched_statements_total{} 277.0 1713928633985

## TYPE watermark_ix gauge
## HELP watermark_ix Current watermark index (transaction ordinal number for consistent reads)
watermark_ix{} 1923.0 1713928633985

## TYPE pipeline_execute_batch_latency histogram
## HELP pipeline_execute_batch_latency Latency of executing batches of statements
pipeline_execute_batch_latency_count{,status=&quot;success&quot;} 277.0 1713928633985
pipeline_execute_batch_latency_sum{,status=&quot;success&quot;} 1.2716064169999988 1713928633985
pipeline_execute_batch_latency_bucket{,status=&quot;success&quot;,le=&quot;0.001&quot;} 0.0 1713928633985
...

## TYPE jdbc_conn_use histogram
## HELP jdbc_conn_use Latency of database connections usage
jdbc_conn_use_count{,result=&quot;success&quot;} 563.0 1713928633985
jdbc_conn_use_sum{,result=&quot;success&quot;} 3.2197140040000014 1713928633985
jdbc_conn_use_bucket{,result=&quot;success&quot;,le=&quot;0.001&quot;} 0.0 1713928633985
...

## TYPE pipeline_wp_batched_statements_size histogram
## HELP pipeline_wp_batched_statements_size Number of in-flight units of work in pipeline_wp_batched_statements wait point
pipeline_wp_batched_statements_size_count{} 554.0 1713928633985
pipeline_wp_batched_statements_size_sum{} 277.0 1713928633985
pipeline_wp_batched_statements_size_bucket{,le=&quot;1.0&quot;} 554.0 1713928633985
...

## TYPE pipeline_wp_events_size histogram
## HELP pipeline_wp_events_size Number of in-flight units of work in pipeline_wp_events wait point
pipeline_wp_events_size_count{} 3548.0 1713928633985
pipeline_wp_events_size_sum{} 2997.0 1713928633985
pipeline_wp_events_size_bucket{,le=&quot;506.0&quot;} 3548.0 1713928633985
...

## TYPE pipeline_convert_transaction histogram
## HELP pipeline_convert_transaction Latency of converting transactions
pipeline_convert_transaction_count{,status=&quot;success&quot;} 1621.0 1713928633985
pipeline_convert_transaction_sum{,status=&quot;success&quot;} 0.6464576010000019 1713928633985
pipeline_convert_transaction_bucket{,status=&quot;success&quot;,le=&quot;0.001&quot;} 1565.0 1713928633985
...

## TYPE jdbc_conn_use_max gauge
## HELP jdbc_conn_use_max Latency of database connections usage
jdbc_conn_use_max{,result=&quot;success&quot;} 0.312662167 1713928633985

## TYPE pipeline_wp_watermarks_size histogram
## HELP pipeline_wp_watermarks_size Number of in-flight units of work in pipeline_wp_watermarks wait point
pipeline_wp_watermarks_size_count{} 554.0 1713928633985
pipeline_wp_watermarks_size_sum{} 277.0 1713928633985
pipeline_wp_watermarks_size_bucket{,le=&quot;1.0&quot;} 554.0 1713928633985
...

## TYPE pipeline_wp_statements_size_max gauge
## HELP pipeline_wp_statements_size_max Number of in-flight units of work in pipeline_wp_statements wait point
pipeline_wp_statements_size_max{} 30.0 1713928633985

## TYPE pipeline_wp_statements_total counter
## HELP pipeline_wp_statements_total Number of units of work processed in pipeline_wp_statements wait point
pipeline_wp_statements_total{} 1927.0 1713928633985

## TYPE pipeline_wp_watermarks_total counter
## HELP pipeline_wp_watermarks_total Number of units of work processed in pipeline_wp_watermarks wait point
pipeline_wp_watermarks_total{} 277.0 1713928633985

## TYPE pipeline_wp_watermarks_size_max gauge
## HELP pipeline_wp_watermarks_size_max Number of in-flight units of work in pipeline_wp_watermarks wait point
pipeline_wp_watermarks_size_max{} 1.0 1713928633985

## TYPE pipeline_execute_batch_latency_max gauge
## HELP pipeline_execute_batch_latency_max Latency of executing batches of statements
pipeline_execute_batch_latency_max{,status=&quot;success&quot;} 0.029142417 1713928633985

## TYPE app_restarts_total counter
## HELP app_restarts_total Number of total app restarts due to recoverable errors
app_restarts_total{,exception=&quot;Recoverable GRPC exception.&quot;} 5.0

## TYPE grpc_up gauge
## HELP grpc_up Grpc channel is up
grpc_up{} 1.0

## TYPE jdbc_conn_pool_up gauge
## HELP jdbc_conn_pool_up JDBC connection pool is up
jdbc_conn_pool_up{} 1.0
</pre></div>
</div>
</details></div>
<div class="section" id="example-dashboard">
<h3>Example Dashboard<a class="headerlink" href="#example-dashboard" title="Permalink to this headline">¶</a></h3>
<p>Based on the metrics described above, it is possible to build a comprehensive dashboard to monitor PQS. Included in the PQS artifact, are a set of example dashboards for Grafana versions 9, 10 and 11. You may want to refer to these as a starting point for your own:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>scribe.jar
grafana/v9.4.0/dashboard.json
grafana/v10.4.0/dashboard.json
grafana/v11.0.0/dashboard.json
</pre></div>
</div>
<details>
<summary>Sample Grafana dashboard</summary><p><img alt="Dashboard" src="../_images/20240826-scribe-dashboard-grafana.png" /></p>
</details></div>
<div class="section" id="health-check">
<h3>Health Check<a class="headerlink" href="#health-check" title="Permalink to this headline">¶</a></h3>
<p>The health of the PQS process can be monitored using the health check endpoint <code class="docutils literal notranslate"><span class="pre">/livez</span></code>. The health check endpoint is available on the configured network interface (<code class="docutils literal notranslate"><span class="pre">--health-host</span></code>) and TCP port (<code class="docutils literal notranslate"><span class="pre">--health-port</span></code>). Note the default is <code class="docutils literal notranslate"><span class="pre">127.0.0.1:8080</span></code>.</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>$ curl http://localhost:8080/livez
{&quot;status&quot;:&quot;ok&quot;}
</pre></div>
</div>
</div>
<div class="section" id="tracing-of-pipeline-execution">
<h3>Tracing of Pipeline Execution<a class="headerlink" href="#tracing-of-pipeline-execution" title="Permalink to this headline">¶</a></h3>
<p>PQS instruments the most critical parts of its operations with tracing to provide insights into the execution flow and performance. Traces can be exported to various OpenTelemetry backends by providing appropriate configuration, for example:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>export OTEL_TRACES_EXPORTER=otlp
export OTEL_EXPORTER_OTLP_PROTOCOL=grpc
export OTEL_EXPORTER_OTLP_ENDPOINT=&quot;http://otel-collector:4317&quot;
export JDK_JAVA_OPTIONS=&quot;-javaagent:path/to/opentelemetry-javaagent.jar&quot;
./scribe.jar pipeline ledger postgres-document ...
</pre></div>
</div>
<p>The following root spans are emitted by PQS:</p>
<table border="1" class="docutils align-default">
<colgroup>
<col width="54%" />
<col width="46%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">span name</th>
<th class="head">description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">process</span> <span class="pre">metadata</span> <span class="pre">and</span> <span class="pre">schema</span></code></td>
<td>interactions that happen when PQS starts up and ensures its datastore is ready for operations</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">initialization</span> <span class="pre">routine</span></code></td>
<td>interactions that happen when PQS establishes its offset range boundaries (including seeding from ACS if requested) on startup</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">consume</span> <span class="pre">com.daml.ledger.api.v1.TransactionService/GetTransactions</span></code><code class="docutils literal notranslate"><span class="pre">consume</span> <span class="pre">com.daml.ledger.api.v1.TransactionService/GetTransactionTrees</span></code></td>
<td><strong>[Daml SDK v2.x]</strong> timeline of processing a ledger transaction from delivery over gRPC to its persistence to datastore</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">consume</span> <span class="pre">com.daml.ledger.api.v2.UpdateService/GetUpdates</span></code><code class="docutils literal notranslate"><span class="pre">consume</span> <span class="pre">com.daml.ledger.api.v2.UpdateService/GetUpdateTrees</span></code></td>
<td><strong>[Daml SDK v3.x]</strong> timeline of processing a ledger transaction from delivery over gRPC to its persistence to datastore</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">execute</span> <span class="pre">datastore</span> <span class="pre">transaction</span></code></td>
<td>interactions when a batch of transactions is persisted to the datastore</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">advance</span> <span class="pre">datastore</span> <span class="pre">watermark</span></code></td>
<td>interactions when the latest consecutive watermark is persisted to the datastore</td>
</tr>
</tbody>
</table>
<p>All spans are enriched with contextual information through OpenTelemetry’s attributes and events where appropriate. It is advisable to get to know this contextual data. Due to the technical nature of asynchronous and parallel execution, PQS heavily employs <a class="reference external" href="https://opentelemetry.io/docs/specs/otel/overview/#links-between-spans">span links</a> to highlight causal relationships between independent traces. Modern trace visualisation tools leverage this information to provide a usable representation and navigation through the involved traces.</p>
<p>Below is an example of causal trace data that spans from the receipt of a transaction from the Ledger API to it becoming visible by PQS’s <a class="reference external" href="#read-api">Read API</a> in Postgres.</p>
<details>
<summary>consume com.daml.ledger.api.v1.TransactionService/GetTransactionTrees</summary><p><img alt="consumer" src="../_images/20241106-trace-consumer.png" /></p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Span #110
Trace ID       : 042ce1ffa24b34b38472933ac8209d54
Parent ID      :
ID             : d5c0071e1d9bbf76
Name           : consume com.daml.ledger.api.v1.TransactionService/GetTransactionTrees
Kind           : Consumer
Start time     : 2024-11-06 03:16:43.004004 +0000 UTC
End time       : 2024-11-06 03:16:43.004193 +0000 UTC
Status code    : Unset
Status message :
Attributes:
     -&gt; messaging.operation.name: Str(consume)
     -&gt; messaging.batch.message_count: Int(1)
     -&gt; messaging.destination.name: Str(com.daml.ledger.api.v1.TransactionService/GetTransactionTrees)
     -&gt; messaging.system: Str(canton)
     -&gt; messaging.operation.type: Str(process)

Span #123
Trace ID       : 042ce1ffa24b34b38472933ac8209d54
Parent ID      : d5c0071e1d9bbf76
ID             : 9d60e1f4c42dce76
Name           : export transaction tree
Kind           : Internal
Start time     : 2024-11-06 03:16:43.004134 +0000 UTC
End time       : 2024-11-06 03:16:43.024574 +0000 UTC
Status code    : Unset
Status message :
Attributes:
     -&gt; daml.effective_at: Str(2024-11-06T03:16:42.827847Z)
     -&gt; daml.command_id: Str(3563113460)
     -&gt; daml.events_count: Int(3)
     -&gt; daml.workflow_id: Empty()
     -&gt; daml.transaction_id: Str(122056219af2a73f913e1c2f0ce4422c156bc9cfdb5e5d49baaee0053bf3787f4a97)
     -&gt; daml.offset: Str(000000000000000261)
Events:
SpanEvent #0
     -&gt; Name: canonicalizing transaction tree
     -&gt; Timestamp: 2024-11-06 03:16:43.004809542 +0000 UTC
SpanEvent #1
     -&gt; Name: canonicalized transaction tree
     -&gt; Timestamp: 2024-11-06 03:16:43.005138375 +0000 UTC
SpanEvent #2
     -&gt; Name: converting canonical transaction to domain model
     -&gt; Timestamp: 2024-11-06 03:16:43.005690625 +0000 UTC
SpanEvent #3
     -&gt; Name: converted canonical transaction to domain model
     -&gt; Timestamp: 2024-11-06 03:16:43.006170917 +0000 UTC
SpanEvent #4
     -&gt; Name: released transaction model into batch
     -&gt; Timestamp: 2024-11-06 03:16:43.015018459 +0000 UTC
SpanEvent #5
     -&gt; Name: prepared SQL statements for transaction model
     -&gt; Timestamp: 2024-11-06 03:16:43.015437 +0000 UTC
SpanEvent #6
     -&gt; Name: flushed transaction model SQL to datastore
     -&gt; Timestamp: 2024-11-06 03:16:43.019356042 +0000 UTC
SpanEvent #7
     -&gt; Name: advanced datastore watermark
     -&gt; Timestamp: 2024-11-06 03:16:43.024570334 +0000 UTC
     -&gt; Attributes::
          -&gt; index: Int(384)
          -&gt; offset: Str(000000000000000261)
Links:
SpanLink #0
     -&gt; Trace ID: 839da768a12333920b709410fb73911a
     -&gt; ID: 276627b6e10f62c5
     -&gt; TraceState:
     -&gt; Attributes::
          -&gt; target: Str(↥ ledger submission)
SpanLink #1
     -&gt; Trace ID: 76c58361d46c08761c37ef5821e8fb78
     -&gt; ID: 6051f05f10af0399
     -&gt; TraceState:
     -&gt; Attributes::
          -&gt; target: Str(↧ persist to datastore)
SpanLink #2
     -&gt; Trace ID: 71e67e2420deeef36ef3efacea6399dc
     -&gt; ID: 161b5911e7a0ec18
     -&gt; TraceState:
     -&gt; Attributes::
          -&gt; target: Str(↧ advance watermark)
</pre></div>
</div>
</details><details>
<summary>execute datastore transaction</summary><p><img alt="export batch" src="../_images/20241106-trace-export-tx.png" /></p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Span #115
Trace ID       : 76c58361d46c08761c37ef5821e8fb78
Parent ID      :
ID             : 81f5f42361aa93ee
Name           : execute datastore transaction
Kind           : Internal
Start time     : 2024-11-06 03:16:43.015931 +0000 UTC
End time       : 2024-11-06 03:16:43.020991 +0000 UTC
Status code    : Unset
Status message :

Span #111
Trace ID       : 76c58361d46c08761c37ef5821e8fb78
Parent ID      : 81f5f42361aa93ee
ID             : 4bf8484e99999c64
Name           : acquire connection
Kind           : Internal
Start time     : 2024-11-06 03:16:43.016475 +0000 UTC
End time       : 2024-11-06 03:16:43.016688 +0000 UTC
Status code    : Unset
Status message :

Span #113
Trace ID       : 76c58361d46c08761c37ef5821e8fb78
Parent ID      : 81f5f42361aa93ee
ID             : 6051f05f10af0399
Name           : execute batch
Kind           : Internal
Start time     : 2024-11-06 03:16:43.016828 +0000 UTC
End time       : 2024-11-06 03:16:43.019494 +0000 UTC
Status code    : Unset
Status message :
Attributes:
     -&gt; scribe.batch.models_count: Int(37)
Links:
SpanLink #0
     -&gt; Trace ID: 33736b299a690b885c2314b9b17bde05
     -&gt; ID: aba3d1dd6024ff71
     -&gt; TraceState:
     -&gt; Attributes::
          -&gt; offset: Str(00000000000000025c)
          -&gt; target: Str(↥ incoming transaction)
SpanLink #1
     -&gt; Trace ID: 17f3edce9565defd379bf3ab8243f86d
     -&gt; ID: 076afe5b4aac1212
     -&gt; TraceState:
     -&gt; Attributes::
          -&gt; offset: Str(00000000000000025d)
          -&gt; target: Str(↥ incoming transaction)
SpanLink #2
     -&gt; Trace ID: 646ae61de95731c7726a6caee2d69ee9
     -&gt; ID: bca9f5c28de74c90
     -&gt; TraceState:
     -&gt; Attributes::
          -&gt; offset: Str(00000000000000025e)
          -&gt; target: Str(↥ incoming transaction)
SpanLink #3
     -&gt; Trace ID: 9ebd4d4f288b8b338f4192c0d7ea1b8c
     -&gt; ID: a1d145fa9d76d5b3
     -&gt; TraceState:
     -&gt; Attributes::
          -&gt; offset: Str(00000000000000025f)
          -&gt; target: Str(↥ incoming transaction)
SpanLink #4
     -&gt; Trace ID: e0716f968b5019a450da04317ea8f776
     -&gt; ID: a75658ce89441bee
     -&gt; TraceState:
     -&gt; Attributes::
          -&gt; offset: Str(000000000000000260)
          -&gt; target: Str(↥ incoming transaction)
SpanLink #5
     -&gt; Trace ID: 042ce1ffa24b34b38472933ac8209d54
     -&gt; ID: 9d60e1f4c42dce76
     -&gt; TraceState:
     -&gt; Attributes::
          -&gt; offset: Str(000000000000000261)
          -&gt; target: Str(↥ incoming transaction)

Span #112
Trace ID       : 76c58361d46c08761c37ef5821e8fb78
Parent ID      : 6051f05f10af0399
ID             : 00419239933510fa
Name           : execute SQL
Kind           : Internal
Start time     : 2024-11-06 03:16:43.016855 +0000 UTC
End time       : 2024-11-06 03:16:43.019162 +0000 UTC
Status code    : Unset
Status message :
Attributes:
     -&gt; scribe.__contracts.rows_count: Int(9)
     -&gt; scribe.__exercises.rows_count: Int(3)
     -&gt; scribe.__events.rows_count: Int(12)
     -&gt; scribe.__archives.rows_count: Int(1)
     -&gt; scribe.__transactions.rows_count: Int(6)

Span #114
Trace ID       : 76c58361d46c08761c37ef5821e8fb78
Parent ID      : 81f5f42361aa93ee
ID             : 9872ff55adc9e370
Name           : commit transaction
Kind           : Internal
Start time     : 2024-11-06 03:16:43.019916 +0000 UTC
End time       : 2024-11-06 03:16:43.020742 +0000 UTC
Status code    : Unset
Status message :
</pre></div>
</div>
</details><details>
<summary>advance datastore watermark</summary><p><img alt="advance watermark" src="../_images/20241106-trace-advance-watermark.png" /></p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Span #124
Trace ID       : 71e67e2420deeef36ef3efacea6399dc
Parent ID      :
ID             : 161b5911e7a0ec18
Name           : advance datastore watermark
Kind           : Internal
Start time     : 2024-11-06 03:16:43.021507 +0000 UTC
End time       : 2024-11-06 03:16:43.024872 +0000 UTC
Status code    : Unset
Status message :
Attributes:
     -&gt; scribe.watermark.offset: Str(000000000000000261)
     -&gt; scribe.watermark.ix: Int(384)
Links:
SpanLink #0
     -&gt; Trace ID: 76c58361d46c08761c37ef5821e8fb78
     -&gt; ID: 6051f05f10af0399
     -&gt; TraceState:
     -&gt; Attributes::
          -&gt; target: Str(↥ persist to datastore)

Span #116
Trace ID       : 71e67e2420deeef36ef3efacea6399dc
Parent ID      : 161b5911e7a0ec18
ID             : 33ab3918ebfe138d
Name           : acquire connection
Kind           : Internal
Start time     : 2024-11-06 03:16:43.022009 +0000 UTC
End time       : 2024-11-06 03:16:43.022222 +0000 UTC
Status code    : Unset
Status message :

Span #6
Trace ID       : 71e67e2420deeef36ef3efacea6399dc
Parent ID      : 161b5911e7a0ec18
ID             : 1a66240dfd597654
Name           : UPDATE scribe.__watermark
Kind           : Client
Start time     : 2024-11-06 03:16:43.022737084 +0000 UTC
End time       : 2024-11-06 03:16:43.023134917 +0000 UTC
Status code    : Unset
Status message :
Attributes:
     -&gt; db.operation: Str(UPDATE)
     -&gt; db.sql.table: Str(__watermark)
     -&gt; db.name: Str(scribe)
     -&gt; db.connection_string: Str(postgresql://postgres-scribe:5432)
     -&gt; server.address: Str(postgres-scribe)
     -&gt; server.port: Int(5432)
     -&gt; db.user: Str(pguser)
     -&gt; db.statement: Str(update __watermark set &quot;offset&quot; = ?, ix = ?;)
     -&gt; db.system: Str(postgresql)

Span #117
Trace ID       : 71e67e2420deeef36ef3efacea6399dc
Parent ID      : 161b5911e7a0ec18
ID             : f0b24fb074fe41f8
Name           : commit transaction
Kind           : Internal
Start time     : 2024-11-06 03:16:43.023629 +0000 UTC
End time       : 2024-11-06 03:16:43.024157 +0000 UTC
Status code    : Unset
Status message :
</pre></div>
</div>
</details></div>
<div class="section" id="trace-context-propagation">
<h3>Trace Context Propagation<a class="headerlink" href="#trace-context-propagation" title="Permalink to this headline">¶</a></h3>
<p>PQS is an intermediary between a ledger instance and downstream applications that access data through SQL rather than by streaming directly from the Ledger API. Despite forming a pipeline between two data storage systems (Canton and Postgres), PQS stores the <a class="reference external" href="https://docs.daml.com/app-dev/bindings-java/open-tracing.html#continue-spans-across-different-applications">original ledger transaction’s trace context</a> for propagation. This allows downstream applications to decide for themselves how they want to connect to the original submission’s trace (as a child span or as a new trace connected through <a class="reference external" href="https://opentelemetry.io/docs/specs/otel/overview/#links-between-spans">span links</a>).</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>scribe=# select &quot;offset&quot;, (trace_context).trace_parent, (trace_context).trace_state from __transactions limit 1;
       offset       |                      trace_parent                       |   trace_state
--------------------+---------------------------------------------------------+-----------------
 0000000000000000bb | 00-f35923baa38cc520a1fc3aec6771380b-b4cf363cbf5efa6a-01 | foo=bar,baz=qux
(3 rows)
</pre></div>
</div>
<details>
<summary>Sample trace data</summary><div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Span #85
    Trace ID       : f35923baa38cc520a1fc3aec6771380b
    Parent ID      : d3300bedd4c64511
    ID             : b4cf363cbf5efa6a
    Name           : MessageDispatcher.handle
    Kind           : Internal
    Start time     : 2024-11-05 04:01:40.808 +0000 UTC
    End time       : 2024-11-05 04:01:40.822694083 +0000 UTC
    Status code    : Unset
    Status message :
Attributes:
     -&gt; canton.class: Str(com.digitalasset.canton.participant.protocol.EnterpriseMessageDispatcher)
↑↑↑ span context propagated through transaction/tree stream in Ledger API

↓↓↓ following parent&#39;s links chain leads us to the root span of original submission
Span #19
    Trace ID       : f35923baa38cc520a1fc3aec6771380b
    Parent ID      :
    ID             : de3aed62b5fb43ce
    Name           : com.daml.ledger.api.v1.CommandService/SubmitAndWaitForTransaction
    Kind           : Server
    Start time     : 2024-11-05 04:01:40.569 +0000 UTC
    End time       : 2024-11-05 04:01:40.866904459 +0000 UTC
    Status code    : Unset
    Status message :
Attributes:
     -&gt; rpc.method: Str(SubmitAndWaitForTransaction)
     -&gt; daml.submitter: Str()
     -&gt; rpc.service: Str(com.daml.ledger.api.v1.CommandService)
     -&gt; net.peer.port: Int(38640)
     -&gt; net.transport: Str(ip_tcp)
     -&gt; daml.workflow_id: Str()
     -&gt; daml.command_id: Str(3498760027)
     -&gt; rpc.system: Str(grpc)
     -&gt; net.peer.ip: Str(172.18.0.15)
     -&gt; daml.application_id: Str(appid)
     -&gt; rpc.grpc.status_code: Int(0)
</pre></div>
</div>
</details><p>Accessing data stored in PQS’s <code class="docutils literal notranslate"><span class="pre">__transactions.trace_context</span></code> column allows any application to re-create the propagated <a class="reference external" href="https://www.w3.org/TR/trace-context/">trace context</a> and use it with their runtime’s instrumentation library.</p>
</div>
</div>
<div class="section" id="redaction">
<h2>Redaction<a class="headerlink" href="#redaction" title="Permalink to this headline">¶</a></h2>
<p>The redaction feature enables removal of sensitive or personally identifiable information from contracts and exercises within the PQS database. This operation is particularly useful for complying with privacy regulations and data protection laws, as it enables the permanent removal of contract payloads, contract keys, choice arguments, and choice results. Note that redaction is a destructive operation and once redacted, information cannot be restored.</p>
<p>The redaction process involves assigning a <code class="docutils literal notranslate"><span class="pre">redaction_id</span></code> to a contract or an exercise and nullifying its sensitive data fields. For contracts, the <code class="docutils literal notranslate"><span class="pre">payload</span></code> and <code class="docutils literal notranslate"><span class="pre">contract_key</span></code> fields are redacted, while for exercises, the <code class="docutils literal notranslate"><span class="pre">argument</span></code> and <code class="docutils literal notranslate"><span class="pre">result</span></code> fields are redacted.</p>
<div class="section" id="conditions-for-redaction">
<h3>Conditions for Redaction<a class="headerlink" href="#conditions-for-redaction" title="Permalink to this headline">¶</a></h3>
<p>The following conditions apply to contracts and interface views:</p>
<ul class="simple">
<li>You cannot redact an active contract.</li>
<li>A redacted contract cannot be redacted again.</li>
</ul>
<p>There are no restrictions on the redaction of choice exercise events.</p>
<p>A redaction operation requires a redaction ID, which is an arbitrary label to identify the redaction and provide information about its reason, and correlate with other systems that coordinate such activity.</p>
</div>
<div class="section" id="examples">
<h3>Examples<a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h3>
<div class="section" id="redacting-an-archived-contract">
<h4>Redacting an Archived Contract<a class="headerlink" href="#redacting-an-archived-contract" title="Permalink to this headline">¶</a></h4>
<p>To redact an archived contract, use the <code class="docutils literal notranslate"><span class="pre">redact_contract</span></code> function by providing the <code class="docutils literal notranslate"><span class="pre">contract_id</span></code> and a <code class="docutils literal notranslate"><span class="pre">redaction_id</span></code>. The intent of the <code class="docutils literal notranslate"><span class="pre">redaction_id</span></code> is to provide a case reference to identify the reason why the redaction has taken place, and it should be set according to organizational policies. This operation NULLs the <code class="docutils literal notranslate"><span class="pre">payload</span></code> and <code class="docutils literal notranslate"><span class="pre">contract_key</span></code> of the contract and assigns the <code class="docutils literal notranslate"><span class="pre">redaction_id</span></code>.</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>SELECT redact_contract(&#39;&lt;contract_id&gt;&#39;, &#39;&lt;redaction_id&gt;&#39;);
</pre></div>
</div>
<p>Redaction is applied to the contract and its interface views, if any, and it returns the number of affected entries.</p>
</div>
<div class="section" id="redacting-a-choice-exercise">
<h4>Redacting a Choice Exercise<a class="headerlink" href="#redacting-a-choice-exercise" title="Permalink to this headline">¶</a></h4>
<p>To redact an exercise, use the <code class="docutils literal notranslate"><span class="pre">redact_exercise</span></code> function by providing the <code class="docutils literal notranslate"><span class="pre">event_id</span></code> of the exercise and a <code class="docutils literal notranslate"><span class="pre">redaction_id</span></code>. This NULLs the <code class="docutils literal notranslate"><span class="pre">argument</span></code> and <code class="docutils literal notranslate"><span class="pre">result</span></code> of the exercise and assigns the <code class="docutils literal notranslate"><span class="pre">redaction_id</span></code>.</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>SELECT redact_exercise(&#39;&lt;event_id&gt;&#39;, &#39;&lt;redaction_id&gt;&#39;);
</pre></div>
</div>
</div>
</div>
<div class="section" id="accessing-redaction-information">
<h3>Accessing Redaction Information<a class="headerlink" href="#accessing-redaction-information" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">redaction_id</span></code> of a contract is exposed as a column in the following functions of the read API. The columns <code class="docutils literal notranslate"><span class="pre">payload</span></code> and <code class="docutils literal notranslate"><span class="pre">contract_key</span></code> for a redacted contract are <code class="docutils literal notranslate"><span class="pre">NULL</span></code>.</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">creates(...)</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">archives(...)</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">active(...)</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">lookup_contract(...)</span></code></li>
</ul>
<p>The <code class="docutils literal notranslate"><span class="pre">redaction_id</span></code> of an exercise event is exposed as a column in the following functions of the read API. The columns <code class="docutils literal notranslate"><span class="pre">argument</span></code> and <code class="docutils literal notranslate"><span class="pre">result</span></code> for a redacted exercise are <code class="docutils literal notranslate"><span class="pre">NULL</span></code>:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">exercises(...)</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">lookup_exercises(...)</span></code></li>
</ul>
</div>
</div>
</div>


              
            </div>
            
            
              <!-- Copyright (c) 2023 Digital Asset (Switzerland) GmbH and/or its affiliates. All rights reserved. -->
<!-- SPDX-License-Identifier: Apache-2.0 -->

<footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../canton/usermanual/monitoring_glossary.html" class="da-btn da-btn-label btn-prev" title="Glossary" accesskey="p" rel="prev">Previous</a>
      
      
        <a href="../canton/usermanual/identity_management.html" class="da-btn da-btn-label btn-next" title="Identity Management" accesskey="n" rel="next">Next</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        Copyright (c) 2025 Digital Asset (Switzerland) GmbH and/or its affiliates. All rights reserved. Any unauthorized use, duplication or distribution is strictly prohibited. &#34;Digital Asset&#34; and &#34;Daml&#34; are Registered in the U.S. Patent and Trademark Office.

    </p>
  </div> 

</footer>
            
          </div>
        </div>
      </div>
    </section>
  </div>

  <!-- Copyright (c) 2023 Digital Asset (Switzerland) GmbH and/or its affiliates. All rights reserved. -->
<!-- SPDX-License-Identifier: Apache-2.0 -->





  <script type="text/javascript">
    jQuery(function () {
      SphinxRtdTheme.Navigation.enable(true);
      });
  </script>


  
    
  
  <div id="inpageContent"></div>
  

</body>
</html>