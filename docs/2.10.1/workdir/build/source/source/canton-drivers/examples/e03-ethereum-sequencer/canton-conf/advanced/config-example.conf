canton {
  // for authorization commands
  features.enable-preview-commands="yes"
  monitoring.health {
    server {
      port = 7001
    }
    check {
      type = ping
      participant = participant1
      interval = 30s
    }
  }

  participants {
    participant1 {
      storage {
        type = memory
      }
      admin-api {
        port = 5012
        address = "0.0.0.0"
      }
      ledger-api {
        port = 5011
        address = "0.0.0.0"
      }
  }

    participant2 {
      storage {
        type = memory
      }
      admin-api {
        port= 5022
        address = "0.0.0.0"
      }
      ledger-api {
        port = 5021
        address = "0.0.0.0"
      }
    }
  }

  domain-managers {
    mydomain {
      init.domain-parameters.protocol-version = 5
      storage {
        type = memory
      }
      admin-api.port = 5019
    }
  }

  mediators.mediator1 {}

  sequencers.ethereumSequencer1 {

    public-api.port = 3001
    admin-api.port = 4001
    storage {
        type = memory
    }

    sequencer {
        type = "ethereum"
        config {
          ethereum-client {
            type = "besu"
          }
            client-conf {
                client-host = "besu-1"
                client-port = 8550
            }
            authorization-enabled = "true"
            contract {
              type = "already-deployed"
              address = "0x0af0238112db255e1a2c8a6c1cd4e122c56bbc38"
              block-to-read-from = 0
            }
            # This can be removed when a new dev image is produced by canton (21-04-2023)
            validation {
              check-contract-bytecode = false
            }
         }
      }
    }

    sequencers.ethereumSequencer2 {

     public-api.port = 3002
        admin-api.port = 4002
        storage {
            type = memory
        }

        sequencer {
            type = "ethereum"
            config {
                ethereum-client {
                  type = "besu"
                }
                client-conf {
                    client-host = "besu-2"
                    client-port = 8551
                }
                authorization-enabled = "true"
                contract {
                     type = "already-deployed"
                      # we use deterministic address in this example, this should not be done in production
                     address = "0x0af0238112db255e1a2c8a6c1cd4e122c56bbc38"
                     block-to-read-from = 0
                  }
                # This can be removed when a new dev image is produced by canton (21-04-2023)
                validation {
                  check-contract-bytecode = false
                }
             }
        }
    }
}
