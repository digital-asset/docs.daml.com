<!-- Copyright (c) 2023 Digital Asset (Switzerland) GmbH and/or its affiliates. All rights reserved. -->
<!-- SPDX-License-Identifier: Apache-2.0 -->



<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js" lang="en">
<!--<![endif]-->

<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Smart Contract Upgrade &mdash; Daml SDK 2.10.1 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
  
  <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
  <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
  <script src="../_static/jquery.js"></script>
  <script src="../_static/underscore.js"></script>
  <script src="../_static/doctools.js"></script>
  <script src="../_static/clipboard.min.js"></script>
  <script src="../_static/copybutton.js"></script>
  
  <script type="text/javascript" src="../_static/js/theme.js"></script>

  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/copybutton.css" type="text/css" />
  <link rel="index" title="Index" href="../genindex.html" />
  <link rel="search" title="Search" href="../search.html" />
  <link rel="next" title="Automating the Upgrade Process" href="automation.html" />
  <link rel="prev" title="Upgrading Daml Applications" href="upgrade.html" /> 

  
  <link rel="icon" type="image/svg+xml"  href="../_static/images/daml-logo-mark-light.svg">
  <link rel="alternate icon" href="../_static/images/daml-favicon-1.ico">

  <!-- Google Tag Manager -->
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-MSWJMNX');</script>
  <!-- End Google Tag Manager -->

</head>

<body class="wy-body-for-nav">
  <!-- Google Tag Manager (noscript) -->
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-MSWJMNX"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <!-- End Google Tag Manager (noscript) -->
   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-nav-side-shadow"></div>
      <div class="wy-side-scroll">

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
          
          
          
          
          
          <ul>
<li class="toctree-l1"><a class="reference external" href="https://docs.daml.com/">Daml Documentation</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Home</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../multiparty-application-intro.html">Introduction to Multi-Party Applications and Daml</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../multiparty-application-intro.html#multi-party-applications">Multi-Party Applications</a></li>
<li class="toctree-l2"><a class="reference internal" href="../multiparty-application-intro.html#why-do-multi-party-applications-matter">Why Do Multi-Party Applications Matter?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../multiparty-application-intro.html#what-is-a-multi-party-application">What Is a Multi-Party Application?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../multiparty-application-intro.html#important-concepts-in-multi-party-applications">Important Concepts in Multi-Party Applications</a></li>
<li class="toctree-l2"><a class="reference internal" href="../multiparty-application-intro.html#key-architectural-concepts-in-daml">Key Architectural Concepts in Daml</a></li>
<li class="toctree-l2"><a class="reference internal" href="../multiparty-application-intro.html#transfer-example-using-daml">Transfer Example Using Daml</a></li>
<li class="toctree-l2"><a class="reference internal" href="../multiparty-application-intro.html#next-steps">Next Steps</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Set Up Your Developer Environment</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../ops/requirements.html">System Requirements</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../ops/requirements.html#feature-component-system-requirements">Feature/Component System Requirements</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../getting-started/installation.html">Install the SDK</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../getting-started/installation.html#install-the-dependencies">Install the Dependencies</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting-started/installation.html#choose-daml-enterprise-or-daml-open-source">Choose Daml Enterprise or Daml Open Source</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting-started/installation.html#install-daml-open-source-sdk">Install Daml Open Source SDK</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../getting-started/installation.html#windows-10">Windows 10</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting-started/installation.html#mac-and-linux">Mac and Linux</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../getting-started/installation.html#install-daml-enterprise">Install Daml Enterprise</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting-started/installation.html#download-manually">Download Manually</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting-started/installation.html#next-steps">Next Steps</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../getting-started/path-variables.html">Set JAVA_HOME and PATH Variables</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../getting-started/path-variables.html#windows">Windows</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../getting-started/path-variables.html#set-the-java-home-variable">Set the JAVA_HOME Variable</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting-started/path-variables.html#set-the-path-variable">Set the PATH Variable</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../getting-started/path-variables.html#mac-os">Mac OS</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting-started/path-variables.html#linux">Linux</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../getting-started/path-variables.html#id2">Set the JAVA_HOME Variable</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting-started/path-variables.html#id3">Set the PATH Variable</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting-started/path-variables.html#verify-the-changes">Verify the Changes</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../getting-started/manual-download.html">Manual Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../getting-started/manual-download.html#install-the-sdk-from-a-tarball">Install the SDK from a Tarball</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting-started/manual-download.html#verify-the-integrity-of-a-tarball">Verify the Integrity of a Tarball</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Tutorial: Write Your First Daml App</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../getting-started/index.html">Getting Started with Daml</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../getting-started/index.html#prerequisites">Prerequisites</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting-started/index.html#run-the-app">Run the App</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../getting-started/app-architecture.html">App Architecture</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../getting-started/app-architecture.html#the-daml-model">The Daml Model</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting-started/app-architecture.html#typescript-code-generation">TypeScript Code Generation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting-started/app-architecture.html#the-ui">The UI</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../getting-started/first-feature.html">Your First Feature</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../getting-started/first-feature.html#daml-changes">Daml Changes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting-started/first-feature.html#messaging-ui">Messaging UI</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../getting-started/first-feature.html#messagelist-component">MessageList Component</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting-started/first-feature.html#messageedit-component">MessageEdit Component</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting-started/first-feature.html#mainview-component">MainView Component</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../getting-started/first-feature.html#run-the-updated-ui">Run the Updated UI</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting-started/first-feature.html#next-steps">Next Steps</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../getting-started/testing.html">Test Your App</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../getting-started/testing.html#set-up-the-tests">Set Up the Tests</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting-started/testing.html#example-log-in-and-out">Example: Log In and Out</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting-started/testing.html#accessing-ui-elements">Accessing UI Elements</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting-started/testing.html#writing-css-selectors">Writing CSS Selectors</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting-started/testing.html#the-full-test-suite">The Full Test Suite</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Create Daml Apps</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../daml/considerations.html">Important Considerations When Building Applications With Daml</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../daml/considerations.html#overall-considerations">Overall Considerations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../daml/considerations.html#developer-considerations">Developer Considerations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../daml/considerations.html#operational-considerations">Operational Considerations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../daml/considerations.html#next-steps">Next Steps</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../create-daml-apps/intro/index.html">Write Smart Contracts with Daml</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../daml/intro/0_Intro.html">An Introduction to Daml</a></li>
<li class="toctree-l2"><a class="reference internal" href="../daml/intro/1_Contracts.html">Basic Contracts</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../daml/intro/1_Contracts.html#daml-ledger-basics">Daml Ledger Basics</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/intro/1_Contracts.html#daml-modules-and-files">Daml Modules and Files</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/intro/1_Contracts.html#templates">Templates</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/intro/1_Contracts.html#signatories">Signatories</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/intro/1_Contracts.html#next-up">Next Up</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../daml/intro/2_DamlScript.html">Test Templates Using Daml Script</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../daml/intro/2_DamlScript.html#script-basics">Script Basics</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/intro/2_DamlScript.html#run-the-scripts">Run the Scripts</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/intro/2_DamlScript.html#test-for-failure">Test for Failure</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/intro/2_DamlScript.html#archive-contracts">Archive Contracts</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/intro/2_DamlScript.html#view-the-ledger-and-ledger-history">View the Ledger and Ledger History</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/intro/2_DamlScript.html#exercises">Exercises</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/intro/2_DamlScript.html#next-up">Next Up</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../daml/intro/3_Data.html">Data Types</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../daml/intro/3_Data.html#native-types">Native Types</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/intro/3_Data.html#assemble-types">Assemble Types</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml/intro/3_Data.html#tuples">Tuples</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/intro/3_Data.html#lists">Lists</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/intro/3_Data.html#records">Records</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/intro/3_Data.html#variants-and-pattern-matching">Variants and Pattern Matching</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml/intro/3_Data.html#manipulate-data">Manipulate Data</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/intro/3_Data.html#contract-keys">Contract Keys</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/intro/3_Data.html#next-up">Next Up</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../daml/intro/4_Transformations.html">Transform Data Using Choices</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../daml/intro/4_Transformations.html#choices-as-methods">Choices as Methods</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/intro/4_Transformations.html#choices-as-delegation">Choices as Delegation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/intro/4_Transformations.html#choices-in-the-ledger-model">Choices In the Ledger Model</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml/intro/4_Transformations.html#the-archive-choice">The Archive Choice</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml/intro/4_Transformations.html#a-simple-cash-model">A Simple Cash Model</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/intro/4_Transformations.html#next-up">Next Up</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../daml/intro/5_Constraints.html">Add Constraints to a Contract</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../daml/intro/5_Constraints.html#template-preconditions">Template Preconditions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/intro/5_Constraints.html#assertions">Assertions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/intro/5_Constraints.html#time-on-daml-ledgers">Time on Daml Ledgers</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml/intro/5_Constraints.html#time-in-test-scripts">Time in Test Scripts</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml/intro/5_Constraints.html#actions-and-do-blocks">Actions and <code class="docutils literal notranslate"><span class="pre">do</span></code> Blocks</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml/intro/5_Constraints.html#pure-expressions-compared-to-actions">Pure Expressions Compared to Actions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/intro/5_Constraints.html#actions-and-impurity">Actions and Impurity</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/intro/5_Constraints.html#chain-actions-with-do-blocks">Chain Actions With <code class="docutils literal notranslate"><span class="pre">do</span></code> Blocks</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/intro/5_Constraints.html#wrap-values-in-actions">Wrap Values in Actions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml/intro/5_Constraints.html#failing-actions">Failing Actions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/intro/5_Constraints.html#a-sample-action">A Sample Action</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/intro/5_Constraints.html#errors">Errors</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/intro/5_Constraints.html#next-up">Next Up</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../daml/intro/6_Parties.html">Parties and Authority</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../daml/intro/6_Parties.html#preventing-iou-revocation">Preventing IOU Revocation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/intro/6_Parties.html#use-propose-accept-workflows-for-one-off-authorization">Use Propose-Accept Workflows for One-Off Authorization</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/intro/6_Parties.html#use-role-contracts-for-ongoing-authorization">Use Role Contracts for Ongoing Authorization</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/intro/6_Parties.html#daml-s-authorization-model">Daml’s Authorization Model</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml/intro/6_Parties.html#an-authorization-example">An Authorization Example</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml/intro/6_Parties.html#next-up">Next Up</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../daml/intro/7_Composing.html">Composing Choices</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../daml/intro/7_Composing.html#daml-projects">Daml Projects</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/intro/7_Composing.html#project-structure">Project Structure</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/intro/7_Composing.html#project-overview">Project Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/intro/7_Composing.html#composed-choices-and-scripts">Composed Choices and Scripts</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/intro/7_Composing.html#daml-s-execution-model">Daml’s Execution Model</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/intro/7_Composing.html#observers">Observers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/intro/7_Composing.html#privacy">Privacy</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml/intro/7_Composing.html#divulgence">Divulgence</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml/intro/7_Composing.html#next-up">Next Up</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../daml/intro/13_Interfaces.html">Daml Interfaces</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../daml/intro/13_Interfaces.html#context">Context</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/intro/13_Interfaces.html#interface-definition">Interface Definition</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/intro/13_Interfaces.html#interface-instances">Interface Instances</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/intro/13_Interfaces.html#using-an-interface">Using an Interface</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../daml/intro/8_Exceptions.html">Exception Handling</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../daml/intro/8_Exceptions.html#next-up">Next Up</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../daml/intro/9_Dependencies.html">Work With Dependencies</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../daml/intro/9_Dependencies.html#dar-dalf-daml-lf-and-the-engine">DAR, DALF, Daml-LF, and the Engine</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/intro/9_Dependencies.html#hashes-and-identifiers">Hashes and Identifiers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/intro/9_Dependencies.html#dependencies-and-data-dependencies">Dependencies and Data Dependencies</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/intro/9_Dependencies.html#structuring-projects">Structuring Projects</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/intro/9_Dependencies.html#building-multiple-packages">Building Multiple Packages</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/intro/9_Dependencies.html#next-up">Next Up</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../daml/intro/10_Functional101.html">Functional Programming 101</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../daml/intro/10_Functional101.html#the-haskell-connection">The Haskell Connection</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/intro/10_Functional101.html#functions">Functions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml/intro/10_Functional101.html#function-application">Function Application</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/intro/10_Functional101.html#infix-functions">Infix Functions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/intro/10_Functional101.html#type-constraints">Type Constraints</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/intro/10_Functional101.html#pattern-matching-in-arguments">Pattern Matching in Arguments</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/intro/10_Functional101.html#functions-everywhere">Functions Everywhere</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/intro/10_Functional101.html#lambdas">Lambdas</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml/intro/10_Functional101.html#control-flow">Control Flow</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml/intro/10_Functional101.html#branching">Branching</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/intro/10_Functional101.html#looping">Looping</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml/intro/10_Functional101.html#next-up">Next Up</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../daml/intro/11_StdLib.html">The Daml Standard Library</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../daml/intro/11_StdLib.html#the-prelude">The Prelude</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/intro/11_StdLib.html#important-types-from-the-prelude">Important Types From the Prelude</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml/intro/11_StdLib.html#lists">Lists</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/intro/11_StdLib.html#tuples">Tuples</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/intro/11_StdLib.html#optional">Optional</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/intro/11_StdLib.html#either">Either</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml/intro/11_StdLib.html#typeclasses">Typeclasses</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/intro/11_StdLib.html#important-typeclasses-from-the-prelude">Important Typeclasses From the Prelude</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml/intro/11_StdLib.html#eq">Eq</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/intro/11_StdLib.html#ord">Ord</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/intro/11_StdLib.html#show">Show</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/intro/11_StdLib.html#functor">Functor</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/intro/11_StdLib.html#applicative-functor">Applicative Functor</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/intro/11_StdLib.html#actions">Actions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/intro/11_StdLib.html#semigroups-and-monoids">Semigroups and Monoids</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/intro/11_StdLib.html#additive-and-multiplicative">Additive and Multiplicative</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml/intro/11_StdLib.html#important-modules-in-the-standard-library">Important Modules in the Standard Library</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/intro/11_StdLib.html#search-the-standard-library">Search the Standard Library</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml/intro/11_StdLib.html#search-for-functions-by-name">Search for Functions by Name</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/intro/11_StdLib.html#search-for-functions-by-signature">Search for Functions by Signature</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml/intro/11_StdLib.html#next-up">Next Up</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../daml/patterns.html">Good Design Patterns</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../daml/patterns/propose-accept.html">The Propose and Accept Pattern</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml/patterns/propose-accept.html#motivation">Motivation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/patterns/propose-accept.html#implementation">Implementation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/patterns/propose-accept.html#trade-offs">Trade-offs</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml/patterns/multiparty-agreement.html">The Multiple Party Agreement Pattern</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml/patterns/multiparty-agreement.html#motivation">Motivation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/patterns/multiparty-agreement.html#implementation">Implementation</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml/patterns/delegation.html">The Delegation Pattern</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml/patterns/delegation.html#motivation">Motivation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/patterns/delegation.html#implementation">Implementation</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml/patterns/authorization.html">The Authorization Pattern</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml/patterns/authorization.html#motivation">Motivation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/patterns/authorization.html#authorization">Authorization</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml/patterns/locking.html">The Locking Pattern</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml/patterns/locking.html#motivation">Motivation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/patterns/locking.html#implementation">Implementation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/patterns/locking/locking-by-archiving.html">Lock by Archiving</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/patterns/locking/locking-by-state.html">Lock by State</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/patterns/locking/locking-by-safekeeping.html">Lock by Safekeeping</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml/patterns/legends.html">Diagram Legends</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../daml/intro/12_Testing.html">Test Daml Contracts</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../daml/intro/12_Testing.html#daml-test-tooling">Daml Test Tooling</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/intro/12_Testing.html#debug-trace-and-stacktraces">Debug, Trace, and Stacktraces</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/intro/12_Testing.html#diagnose-contention-errors">Diagnose Contention Errors</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml/intro/12_Testing.html#common-errors">Common Errors</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/intro/12_Testing.html#avoid-race-conditions-and-stale-references">Avoid Race Conditions and Stale References</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/intro/12_Testing.html#collisions-due-to-ignorance">Collisions Due to Ignorance</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml/intro/12_Testing.html#checking-coverage">Checking Coverage</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml/intro/12_Testing.html#flags-controlling-test-set">Flags Controlling Test Set</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/intro/12_Testing.html#flags-controlling-serialization">Flags Controlling Serialization</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/intro/12_Testing.html#flags-controlling-report">Flags Controlling Report</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/intro/12_Testing.html#define-templates-choices-and-interfaces">Define templates, choices, and interfaces</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/intro/12_Testing.html#start-testing">Start testing</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/intro/12_Testing.html#template-creation-coverage">Template creation coverage</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/intro/12_Testing.html#template-choice-exercise-coverage">Template choice exercise coverage</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/intro/12_Testing.html#interface-choice-exercise-coverage">Interface choice exercise coverage</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml/intro/12_Testing.html#checking-coverage-of-external-dependencies">Checking Coverage of External Dependencies</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml/intro/12_Testing.html#definitions">Definitions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/intro/12_Testing.html#local-definitions">Local Definitions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/intro/12_Testing.html#external-definitions">External Definitions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/intro/12_Testing.html#external-internal-and-any-coverage">External, Internal, and “Any” Coverage</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/intro/12_Testing.html#serializing-results-workflows">Serializing Results Workflows</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/intro/12_Testing.html#single-test-iteration">Single Test Iteration</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/intro/12_Testing.html#multiple-test-aggregation">Multiple Test Aggregation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/intro/12_Testing.html#test-failure-recovery">Test Failure Recovery</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml/intro/12_Testing.html#excluding-choices-from-the-coverage-report">Excluding Choices from the Coverage Report</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml/intro/12_Testing.html#example-excluding-archive-choices">Example: Excluding Archive Choices</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/intro/12_Testing.html#example-excluding-choices-from-a-specific-module">Example: Excluding Choices from a Specific Module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/intro/12_Testing.html#excluding-choices-from-serialized-reports">Excluding Choices from Serialized Reports</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml/intro/12_Testing.html#next-up">Next Up</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../daml/intro/99_NextSteps.html">Next Steps</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../create-daml-apps/off-ledger/index.html">Integrate Daml with Off-Ledger Services</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../building-applications.html">Build Applications</a></li>
<li class="toctree-l2"><a class="reference internal" href="../app-dev/app-arch.html">Daml Application Architecture</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../app-dev/app-arch.html#backend">Backend</a></li>
<li class="toctree-l3"><a class="reference internal" href="../app-dev/app-arch.html#frontend">Frontend</a></li>
<li class="toctree-l3"><a class="reference internal" href="../app-dev/app-arch.html#authorization">Authorization</a></li>
<li class="toctree-l3"><a class="reference internal" href="../app-dev/app-arch.html#developer-workflow">Developer Workflow</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../app-dev/app-arch.html#command-deduplication">Command Deduplication</a></li>
<li class="toctree-l4"><a class="reference internal" href="../app-dev/app-arch.html#deal-with-failures">Deal With Failures</a></li>
<li class="toctree-l4"><a class="reference internal" href="../app-dev/app-arch.html#deal-with-time">Deal With Time</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../app-dev/parties-users.html">Parties and Users On a Daml Ledger</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../app-dev/parties-users.html#parties-in-sdk-2-0-and-subsequent">Parties in SDK 2.0 and Subsequent</a></li>
<li class="toctree-l3"><a class="reference internal" href="../app-dev/parties-users.html#party-id-hints-and-display-names">Party ID Hints and Display Names</a></li>
<li class="toctree-l3"><a class="reference internal" href="../app-dev/parties-users.html#authorization-and-user-management">Authorization and User Management</a></li>
<li class="toctree-l3"><a class="reference internal" href="../app-dev/parties-users.html#working-with-parties">Working with Parties</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../app-dev/parties-users.html#daml-script">Daml Script</a></li>
<li class="toctree-l4"><a class="reference internal" href="../app-dev/parties-users.html#daml-triggers-deprecated">Daml Triggers (Deprecated)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../app-dev/parties-users.html#navigator-deprecated">Navigator (Deprecated)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../app-dev/parties-users.html#java-bindings">Java Bindings</a></li>
<li class="toctree-l4"><a class="reference internal" href="../app-dev/parties-users.html#create-daml-app-and-uis">Create-daml-app and UIs</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../create-daml-apps/off-ledger/json-api/index.html">Access Active Contracts with the HTTP JSON API Service</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../json-api/index.html">HTTP JSON API Service</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../json-api/index.html#run-the-json-api">Run the JSON API</a></li>
<li class="toctree-l4"><a class="reference internal" href="../json-api/index.html#http-status-codes">HTTP Status Codes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../json-api/index.html#create-a-new-contract">Create a New Contract</a></li>
<li class="toctree-l4"><a class="reference internal" href="../json-api/index.html#create-a-contract-with-a-command-id">Create a Contract with a Command ID</a></li>
<li class="toctree-l4"><a class="reference internal" href="../json-api/index.html#exercise-by-contract-id">Exercise by Contract ID</a></li>
<li class="toctree-l4"><a class="reference internal" href="../json-api/index.html#exercise-by-contract-key">Exercise by Contract Key</a></li>
<li class="toctree-l4"><a class="reference internal" href="../json-api/index.html#create-and-exercise-in-the-same-transaction">Create and Exercise in the Same Transaction</a></li>
<li class="toctree-l4"><a class="reference internal" href="../json-api/index.html#fetch-contract-by-contract-id">Fetch Contract by Contract ID</a></li>
<li class="toctree-l4"><a class="reference internal" href="../json-api/index.html#fetch-contract-by-key">Fetch Contract by Key</a></li>
<li class="toctree-l4"><a class="reference internal" href="../json-api/index.html#get-all-active-contracts">Get All Active Contracts</a></li>
<li class="toctree-l4"><a class="reference internal" href="../json-api/index.html#get-all-active-contracts-matching-a-given-query">Get All Active Contracts Matching a Given Query</a></li>
<li class="toctree-l4"><a class="reference internal" href="../json-api/index.html#fetch-parties-by-identifiers">Fetch Parties by Identifiers</a></li>
<li class="toctree-l4"><a class="reference internal" href="../json-api/index.html#fetch-all-known-parties">Fetch All Known Parties</a></li>
<li class="toctree-l4"><a class="reference internal" href="../json-api/index.html#allocate-a-new-party">Allocate a New Party</a></li>
<li class="toctree-l4"><a class="reference internal" href="../json-api/index.html#create-a-new-user">Create a New User</a></li>
<li class="toctree-l4"><a class="reference internal" href="../json-api/index.html#get-authenticated-user-information">Get Authenticated User Information</a></li>
<li class="toctree-l4"><a class="reference internal" href="../json-api/index.html#get-specific-user-information">Get Specific User Information</a></li>
<li class="toctree-l4"><a class="reference internal" href="../json-api/index.html#delete-specific-user">Delete Specific User</a></li>
<li class="toctree-l4"><a class="reference internal" href="../json-api/index.html#list-users">List Users</a></li>
<li class="toctree-l4"><a class="reference internal" href="../json-api/index.html#grant-user-rights">Grant User Rights</a></li>
<li class="toctree-l4"><a class="reference internal" href="../json-api/index.html#revoke-user-rights">Revoke User Rights</a></li>
<li class="toctree-l4"><a class="reference internal" href="../json-api/index.html#list-authenticated-user-rights">List Authenticated User Rights</a></li>
<li class="toctree-l4"><a class="reference internal" href="../json-api/index.html#list-specific-user-rights">List Specific User Rights</a></li>
<li class="toctree-l4"><a class="reference internal" href="../json-api/index.html#list-all-dalf-packages">List All DALF Packages</a></li>
<li class="toctree-l4"><a class="reference internal" href="../json-api/index.html#download-a-dalf-package">Download a DALF Package</a></li>
<li class="toctree-l4"><a class="reference internal" href="../json-api/index.html#upload-a-dar-file">Upload a DAR File</a></li>
<li class="toctree-l4"><a class="reference internal" href="../json-api/index.html#metering-report">Metering Report</a></li>
<li class="toctree-l4"><a class="reference internal" href="../json-api/index.html#streaming-api">Streaming API</a></li>
<li class="toctree-l4"><a class="reference internal" href="../json-api/index.html#healthcheck-endpoints">Healthcheck Endpoints</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../json-api/lf-value-specification.html">Daml-LF JSON Encoding</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../json-api/lf-value-specification.html#codec-library">Codec Library</a></li>
<li class="toctree-l4"><a class="reference internal" href="../json-api/lf-value-specification.html#type-directed-parsing">Type-directed Parsing</a></li>
<li class="toctree-l4"><a class="reference internal" href="../json-api/lf-value-specification.html#contractid">ContractId</a></li>
<li class="toctree-l4"><a class="reference internal" href="../json-api/lf-value-specification.html#decimal">Decimal</a></li>
<li class="toctree-l4"><a class="reference internal" href="../json-api/lf-value-specification.html#int64">Int64</a></li>
<li class="toctree-l4"><a class="reference internal" href="../json-api/lf-value-specification.html#timestamp">Timestamp</a></li>
<li class="toctree-l4"><a class="reference internal" href="../json-api/lf-value-specification.html#party">Party</a></li>
<li class="toctree-l4"><a class="reference internal" href="../json-api/lf-value-specification.html#unit">Unit</a></li>
<li class="toctree-l4"><a class="reference internal" href="../json-api/lf-value-specification.html#date">Date</a></li>
<li class="toctree-l4"><a class="reference internal" href="../json-api/lf-value-specification.html#text">Text</a></li>
<li class="toctree-l4"><a class="reference internal" href="../json-api/lf-value-specification.html#bool">Bool</a></li>
<li class="toctree-l4"><a class="reference internal" href="../json-api/lf-value-specification.html#record">Record</a></li>
<li class="toctree-l4"><a class="reference internal" href="../json-api/lf-value-specification.html#list">List</a></li>
<li class="toctree-l4"><a class="reference internal" href="../json-api/lf-value-specification.html#textmap">TextMap</a></li>
<li class="toctree-l4"><a class="reference internal" href="../json-api/lf-value-specification.html#genmap">GenMap</a></li>
<li class="toctree-l4"><a class="reference internal" href="../json-api/lf-value-specification.html#optional">Optional</a></li>
<li class="toctree-l4"><a class="reference internal" href="../json-api/lf-value-specification.html#variant">Variant</a></li>
<li class="toctree-l4"><a class="reference internal" href="../json-api/lf-value-specification.html#enum">Enum</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../json-api/search-query-language.html">Query Language</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../json-api/search-query-language.html#fallback-rule">Fallback Rule</a></li>
<li class="toctree-l4"><a class="reference internal" href="../json-api/search-query-language.html#simple-equality">Simple Equality</a></li>
<li class="toctree-l4"><a class="reference internal" href="../json-api/search-query-language.html#comparison-query">Comparison Query</a></li>
<li class="toctree-l4"><a class="reference internal" href="../json-api/search-query-language.html#appendix-type-aware-queries">Appendix: Type-aware Queries</a></li>
<li class="toctree-l4"><a class="reference internal" href="../json-api/search-query-language.html#appendix-known-issues">Appendix: Known Issues</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../app-dev/bindings-ts/index.html">Use JavaScript Client Libraries with Daml</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../app-dev/bindings-ts/daml2js.html">Use the JavaScript Code Generator</a></li>
<li class="toctree-l4"><a class="reference internal" href="../app-dev/bindings-ts/daml-react.html">&#64;daml/react</a></li>
<li class="toctree-l4"><a class="reference internal" href="../app-dev/bindings-ts/daml-ledger.html">&#64;daml/ledger</a></li>
<li class="toctree-l4"><a class="reference internal" href="../app-dev/bindings-ts/daml-types.html">&#64;daml/types</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../create-daml-apps/off-ledger/json-api/production-setup/index.html">JSON API Production Setup</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../json-api/production-setup.html">Production Setup</a></li>
<li class="toctree-l4"><a class="reference internal" href="../json-api/production-setup/query-store.html">Query Store</a></li>
<li class="toctree-l4"><a class="reference internal" href="../json-api/production-setup/security-and-privacy.html">Security and Privacy</a></li>
<li class="toctree-l4"><a class="reference internal" href="../json-api/production-setup/architecture.html">Architecture</a></li>
<li class="toctree-l4"><a class="reference internal" href="../json-api/production-setup/scaling-and-redundancy.html">Scaling and Redundancy</a></li>
<li class="toctree-l4"><a class="reference internal" href="../json-api/production-setup/logging.html">Logging</a></li>
<li class="toctree-l4"><a class="reference internal" href="../json-api/production-setup/metrics.html">Metrics</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../app-dev/ledger-api.html">Build Integration with the Ledger API</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../app-dev/ledger-api.html#what-s-in-the-ledger-api">What’s in the Ledger API</a></li>
<li class="toctree-l3"><a class="reference internal" href="../app-dev/ledger-api.html#how-to-access-the-ledger-api">How to Access the Ledger API</a></li>
<li class="toctree-l3"><a class="reference internal" href="../app-dev/ledger-api.html#daml-lf">Daml-LF</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../app-dev/ledger-api.html#when-you-need-to-know-about-daml-lf">When You Need to Know About Daml-LF</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../app-dev/services.html">The Ledger API Services</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../app-dev/services.html#overview">Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="../app-dev/services.html#submit-commands-to-the-ledger">Submit Commands to the Ledger</a></li>
<li class="toctree-l4"><a class="reference internal" href="../app-dev/services.html#read-from-the-ledger">Read From the Ledger</a></li>
<li class="toctree-l4"><a class="reference internal" href="../app-dev/services.html#utility-services">Utility Services</a></li>
<li class="toctree-l4"><a class="reference internal" href="../app-dev/services.html#testing-services">Testing Services</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../app-dev/bindings-java/index.html">Java Bindings</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../app-dev/bindings-java/index.html#overview">Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="../app-dev/bindings-java/index.html#reference-documentation">Reference Documentation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../app-dev/bindings-java/index.html#get-started">Get Started</a></li>
<li class="toctree-l4"><a class="reference internal" href="../app-dev/bindings-java/index.html#example-projects">Example Projects</a></li>
<li class="toctree-l4"><a class="reference internal" href="../app-dev/bindings-java/codegen.html">Generate Java Code from Daml</a></li>
<li class="toctree-l4"><a class="reference internal" href="../app-dev/bindings-java/example.html">Java Bindings Example Project</a></li>
<li class="toctree-l4"><a class="reference internal" href="../app-dev/bindings-java/quickstart.html">Iou Quickstart Tutorial</a></li>
<li class="toctree-l4"><a class="reference internal" href="../app-dev/bindings-java/open-tracing.html">Open Tracing in Ledger API Client Applications</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../app-dev/bindings-python.html">Python Bindings</a></li>
<li class="toctree-l3"><a class="reference internal" href="../app-dev/grpc/index.html">Use the Ledger API With gRPC</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../app-dev/grpc/index.html#get-started">Get Started</a></li>
<li class="toctree-l4"><a class="reference internal" href="../app-dev/grpc/index.html#protobuf-reference-documentation">Protobuf Reference Documentation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../app-dev/grpc/index.html#example-project">Example Project</a></li>
<li class="toctree-l4"><a class="reference internal" href="../app-dev/grpc/index.html#daml-types-and-protobuf">Daml Types and Protobuf</a></li>
<li class="toctree-l4"><a class="reference internal" href="../app-dev/grpc/index.html#error-handling">Error Handling</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../app-dev/grpc/proto-docs.html">Ledger API Reference</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../app-dev/grpc/proto-docs.html#activecontractsservice-version-com-daml-ledger-api-v1">ActiveContractsService, v1</a></li>
<li class="toctree-l4"><a class="reference internal" href="../app-dev/grpc/proto-docs.html#commandinspectionservice-version-com-daml-ledger-api-v1-admin">CommandInspectionService, v1/admin</a></li>
<li class="toctree-l4"><a class="reference internal" href="../app-dev/grpc/proto-docs.html#configmanagementservice-version-com-daml-ledger-api-v1-admin">ConfigManagementService, v1/admin</a></li>
<li class="toctree-l4"><a class="reference internal" href="../app-dev/grpc/proto-docs.html#com-daml-ledger-api-v1-admin-identityproviderconfigservice">IdentityProviderConfigService, v1/admin</a></li>
<li class="toctree-l4"><a class="reference internal" href="../app-dev/grpc/proto-docs.html#meteringreportservice-version-com-daml-ledger-api-v1-admin">MeteringReportService, v1/admin</a></li>
<li class="toctree-l4"><a class="reference internal" href="../app-dev/grpc/proto-docs.html#packagemanagementservice-version-com-daml-ledger-api-v1-admin">PackageManagementService, v1/admin</a></li>
<li class="toctree-l4"><a class="reference internal" href="../app-dev/grpc/proto-docs.html#participantpruningservice-version-com-daml-ledger-api-v1-admin">ParticipantPruningService, v1/admin</a></li>
<li class="toctree-l4"><a class="reference internal" href="../app-dev/grpc/proto-docs.html#partymanagementservice-version-com-daml-ledger-api-v1-admin">PartyManagementService, v1/admin</a></li>
<li class="toctree-l4"><a class="reference internal" href="../app-dev/grpc/proto-docs.html#usermanagementservice-version-com-daml-ledger-api-v1-admin">UserManagementService, v1/admin</a></li>
<li class="toctree-l4"><a class="reference internal" href="../app-dev/grpc/proto-docs.html#commandcompletionservice-version-com-daml-ledger-api-v1">CommandCompletionService, v1</a></li>
<li class="toctree-l4"><a class="reference internal" href="../app-dev/grpc/proto-docs.html#commandservice-version-com-daml-ledger-api-v1">CommandService, v1</a></li>
<li class="toctree-l4"><a class="reference internal" href="../app-dev/grpc/proto-docs.html#commandsubmissionservice-version-com-daml-ledger-api-v1">CommandSubmissionService, v1</a></li>
<li class="toctree-l4"><a class="reference internal" href="../app-dev/grpc/proto-docs.html#eventqueryservice-version-com-daml-ledger-api-v1">EventQueryService, v1</a></li>
<li class="toctree-l4"><a class="reference internal" href="../app-dev/grpc/proto-docs.html#ledgerconfigurationservice-version-com-daml-ledger-api-v1">LedgerConfigurationService, v1</a></li>
<li class="toctree-l4"><a class="reference internal" href="../app-dev/grpc/proto-docs.html#ledgeridentityservice-version-com-daml-ledger-api-v1">LedgerIdentityService, v1</a></li>
<li class="toctree-l4"><a class="reference internal" href="../app-dev/grpc/proto-docs.html#packageservice-version-com-daml-ledger-api-v1">PackageService, v1</a></li>
<li class="toctree-l4"><a class="reference internal" href="../app-dev/grpc/proto-docs.html#timeservice-version-com-daml-ledger-api-v1-testing">TimeService, v1/testing</a></li>
<li class="toctree-l4"><a class="reference internal" href="../app-dev/grpc/proto-docs.html#transactionservice-version-com-daml-ledger-api-v1">TransactionService, v1</a></li>
<li class="toctree-l4"><a class="reference internal" href="../app-dev/grpc/proto-docs.html#versionservice-version-com-daml-ledger-api-v1">VersionService, v1</a></li>
<li class="toctree-l4"><a class="reference internal" href="../app-dev/grpc/proto-docs.html#commandcompletionservice-version-com-daml-ledger-api-v2">CommandCompletionService, v2</a></li>
<li class="toctree-l4"><a class="reference internal" href="../app-dev/grpc/proto-docs.html#commandservice-version-com-daml-ledger-api-v2">CommandService, v2</a></li>
<li class="toctree-l4"><a class="reference internal" href="../app-dev/grpc/proto-docs.html#commandsubmissionservice-version-com-daml-ledger-api-v2">CommandSubmissionService, v2</a></li>
<li class="toctree-l4"><a class="reference internal" href="../app-dev/grpc/proto-docs.html#eventqueryservice-version-com-daml-ledger-api-v2">EventQueryService, v2</a></li>
<li class="toctree-l4"><a class="reference internal" href="../app-dev/grpc/proto-docs.html#packageservice-version-com-daml-ledger-api-v2">PackageService, v2</a></li>
<li class="toctree-l4"><a class="reference internal" href="../app-dev/grpc/proto-docs.html#stateservice-version-com-daml-ledger-api-v2">StateService, v2</a></li>
<li class="toctree-l4"><a class="reference internal" href="../app-dev/grpc/proto-docs.html#timeservice-version-com-daml-ledger-api-v2-testing">TimeService, v2/testing</a></li>
<li class="toctree-l4"><a class="reference internal" href="../app-dev/grpc/proto-docs.html#updateservice-version-com-daml-ledger-api-v2">UpdateService, v2</a></li>
<li class="toctree-l4"><a class="reference internal" href="../app-dev/grpc/proto-docs.html#versionservice-version-com-daml-ledger-api-v2">VersionService, v2</a></li>
<li class="toctree-l4"><a class="reference internal" href="../app-dev/grpc/proto-docs.html#scalar-value-types">Scalar Value Types</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../app-dev/grpc/daml-to-ledger-api.html">How Daml Types are Translated to Protobuf</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../app-dev/grpc/daml-to-ledger-api.html#notation">Notation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../app-dev/grpc/daml-to-ledger-api.html#records-and-primitive-types">Records and Primitive Types</a></li>
<li class="toctree-l4"><a class="reference internal" href="../app-dev/grpc/daml-to-ledger-api.html#variants">Variants</a></li>
<li class="toctree-l4"><a class="reference internal" href="../app-dev/grpc/daml-to-ledger-api.html#contract-templates">Contract Templates</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../app-dev/daml-lf-translation.html">How Daml Types are Translated to Daml-LF</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../app-dev/daml-lf-translation.html#primitive-types">Primitive Types</a></li>
<li class="toctree-l4"><a class="reference internal" href="../app-dev/daml-lf-translation.html#tuple-types">Tuple Types</a></li>
<li class="toctree-l4"><a class="reference internal" href="../app-dev/daml-lf-translation.html#data-types">Data Types</a></li>
<li class="toctree-l4"><a class="reference internal" href="../app-dev/daml-lf-translation.html#type-synonyms">Type Synonyms</a></li>
<li class="toctree-l4"><a class="reference internal" href="../app-dev/daml-lf-translation.html#template-types">Template Types</a></li>
<li class="toctree-l4"><a class="reference internal" href="../app-dev/daml-lf-translation.html#names-with-special-characters">Names with Special Characters</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../app-dev/bindings-x-lang/index.html">Create Your Own Bindings</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../app-dev/bindings-x-lang/index.html#build-ledger-commands">Build Ledger Commands</a></li>
<li class="toctree-l4"><a class="reference internal" href="../app-dev/bindings-x-lang/index.html#summary">Summary</a></li>
<li class="toctree-l4"><a class="reference internal" href="../app-dev/bindings-x-lang/index.html#links">Links</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../create-daml-apps/off-ledger/daml-off-ledger/index.html">Write Off-Ledger Automation Using Daml</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../daml-off-ledger.html">Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-script/index.html">React to Off-Ledger Events: Daml Script</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml-script/index.html#usage">Usage</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml-script/index.html#use-daml-script-for-ledger-initialization">Use Daml Script for Ledger Initialization</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml-script/index.html#use-daml-script-with-the-ide-ledger">Use Daml Script with the IDE Ledger</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml-script/index.html#use-daml-script-in-canton">Use Daml Script in Canton</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml-script/index.html#run-daml-script-against-ledgers-with-authorization">Run Daml Script Against Ledgers with Authorization</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml-script/index.html#run-daml-script-against-the-http-json-api">Run Daml Script Against the HTTP JSON API</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../triggers/index.html">React to On-Ledger Events: Daml Triggers</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../triggers/index.html#how-to-think-about-triggers">How To Think About Triggers</a></li>
<li class="toctree-l4"><a class="reference internal" href="../triggers/index.html#sample-trigger">Sample Trigger</a></li>
<li class="toctree-l4"><a class="reference internal" href="../triggers/index.html#daml-trigger-basics">Daml Trigger Basics</a></li>
<li class="toctree-l4"><a class="reference internal" href="../triggers/index.html#run-a-no-op-trigger">Run a No-Op Trigger</a></li>
<li class="toctree-l4"><a class="reference internal" href="../triggers/index.html#diversion-updating-message">Diversion: Updating <code class="docutils literal notranslate"><span class="pre">Message</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../triggers/index.html#autoreply">AutoReply</a></li>
<li class="toctree-l4"><a class="reference internal" href="../triggers/index.html#command-deduplication">Command Deduplication</a></li>
<li class="toctree-l4"><a class="reference internal" href="../triggers/index.html#authorization">Authorization</a></li>
<li class="toctree-l4"><a class="reference internal" href="../triggers/index.html#when-not-to-use-daml-triggers">When Not to Use Daml Triggers</a></li>
<li class="toctree-l4"><a class="reference internal" href="../tools/trigger-service/index.html">Trigger Service</a></li>
<li class="toctree-l4"><a class="reference internal" href="../tools/auth-middleware/index.html">Auth Middleware</a></li>
<li class="toctree-l4"><a class="reference internal" href="../tools/auth-middleware/oauth2.html">OAuth 2.0 Auth Middleware</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../create-daml-apps/off-ledger/errors/index.html">Handle Errors</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../app-dev/command-deduplication.html">Command Deduplication</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../app-dev/command-deduplication.html#how-command-deduplication-works">How Command Deduplication Works</a></li>
<li class="toctree-l4"><a class="reference internal" href="../app-dev/command-deduplication.html#how-to-use-command-deduplication">How to Use Command Deduplication</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../app-dev/authorization.html">Authorization</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../app-dev/authorization.html#introduction">Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../app-dev/authorization.html#acquire-and-use-access-tokens">Acquire and Use Access Tokens</a></li>
<li class="toctree-l3"><a class="reference internal" href="../app-dev/authorization.html#access-tokens-and-rights">Access Tokens and Rights</a></li>
<li class="toctree-l3"><a class="reference internal" href="../app-dev/authorization.html#access-token-formats">Access Token Formats</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../app-dev/authorization.html#user-access-tokens">User Access Tokens</a></li>
<li class="toctree-l4"><a class="reference internal" href="../app-dev/authorization.html#custom-daml-claims-access-tokens">Custom Daml Claims Access Tokens</a></li>
<li class="toctree-l4"><a class="reference internal" href="../app-dev/authorization.html#encoding-and-signature">Encoding and Signature</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../app-dev/explicit-contract-disclosure.html">Explicit Contract Disclosure</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../app-dev/explicit-contract-disclosure.html#contract-read-delegation">Contract Read Delegation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../app-dev/explicit-contract-disclosure.html#read-delegation-using-explicit-contract-disclosure">Read delegation using explicit contract disclosure</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../app-dev/explicit-contract-disclosure.html#how-do-stakeholders-disclose-contracts-to-submitters">How do stakeholders disclose contracts to submitters?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../app-dev/explicit-contract-disclosure.html#attaching-a-disclosed-contract-to-a-command-submission">Attaching a disclosed contract to a command submission</a></li>
<li class="toctree-l3"><a class="reference internal" href="../app-dev/explicit-contract-disclosure.html#trading-the-stock-with-explicit-disclosure">Trading the stock with explicit disclosure</a></li>
<li class="toctree-l3"><a class="reference internal" href="../app-dev/explicit-contract-disclosure.html#safeguards">Safeguards</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../app-dev/explicit-contract-disclosure.html#contract-authentication">Contract authentication</a></li>
<li class="toctree-l4"><a class="reference internal" href="../app-dev/explicit-contract-disclosure.html#business-logic-safeguards">Business logic safeguards</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../daml/resource-management/index.html">Resource Management in Daml Application Design</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../daml/resource-management/latency-and-throughput.html">Managing Latency and Throughput</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../daml/resource-management/latency-and-throughput.html#problem-definition">Problem Definition</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml/resource-management/latency-and-throughput.html#possible-throughput-bottlenecks-in-order-of-likelihood">Possible Throughput Bottlenecks in Order of Likelihood</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/resource-management/latency-and-throughput.html#solutions">Solutions</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../daml/resource-management/contention-avoiding.html">Avoid Contention Issues</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../daml/resource-management/contention-avoiding.html#contention-in-daml">Contention in Daml</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/resource-management/contention-reducing.html">Reduce Contention</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/resource-management/contention-techniques.html">Example Application with Techniques for Reducing Contention</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml/resource-management/contention-techniques.html#the-example-minimal-settlement-system">The Example Minimal Settlement System</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/resource-management/contention-techniques.html#prepare-transactions-for-contention-free-parallelism">Prepare Transactions for Contention-Free Parallelism</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/resource-management/contention-techniques.html#non-utxo-alternative-ledger-models">Non-UTXO Alternative Ledger Models</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/resource-management/contention-techniques.html#simple-strategies-for-utxo-ledger-models">Simple Strategies for UTXO Ledger Models</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/resource-management/contention-techniques.html#shard-asset-positions-for-utxo-ledger-models">Shard Asset Positions for UTXO Ledger Models</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../daml/resource-management/active-contract-set.html">Managing Active Contract Set (ACS) Size</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../daml/resource-management/active-contract-set.html#problem-definition">Problem Definition</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/resource-management/active-contract-set.html#relational-databases">Relational Databases</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml/resource-management/active-contract-set.html#solutions">Solutions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml/resource-management/active-contract-set.html#http-json-api-service">HTTP JSON API Service</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Upgrading and Extending Daml Applications</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="extend.html">Extending Daml Applications</a></li>
<li class="toctree-l2"><a class="reference internal" href="upgrade.html">Upgrading Daml Applications</a><ul>
<li class="toctree-l3"><a class="reference internal" href="upgrade.html#daml-upgrade-overview">Daml Upgrade Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="upgrade.html#structure-upgrade-contracts">Structure Upgrade Contracts</a></li>
<li class="toctree-l3"><a class="reference internal" href="upgrade.html#build-and-deploy-carbon-1-0-0">Build and Deploy <code class="docutils literal notranslate"><span class="pre">carbon-1.0.0</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="upgrade.html#create-carbon-1-0-0-certificates">Create carbon-1.0.0 Certificates</a></li>
<li class="toctree-l3"><a class="reference internal" href="upgrade.html#build-and-deploy-carbon-2-0-0">Build and Deploy <code class="docutils literal notranslate"><span class="pre">carbon-2.0.0</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="upgrade.html#build-and-deploy-carbon-upgrade">Build and Deploy <code class="docutils literal notranslate"><span class="pre">carbon-upgrade</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="upgrade.html#upgrade-existing-certificates-from-carbon-1-0-0-to-carbon-2-0-0">Upgrade Existing Certificates from carbon-1.0.0 to carbon-2.0.0</a></li>
<li class="toctree-l3"><a class="reference internal" href="upgrade.html#further-steps">Further Steps</a></li>
</ul>
</li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Smart Contract Upgrade</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#overview">Overview</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#what-is-smart-contract-upgrade-scu">What is Smart Contract Upgrade (SCU)?</a></li>
<li class="toctree-l4"><a class="reference internal" href="#requirements">Requirements</a></li>
<li class="toctree-l4"><a class="reference internal" href="#smart-contract-upgrade-basics">Smart Contract Upgrade Basics</a></li>
<li class="toctree-l4"><a class="reference internal" href="#upgrading-across-the-stack">Upgrading Across the Stack</a></li>
<li class="toctree-l4"><a class="reference internal" href="#limitations">Limitations</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#the-programming-model-by-example">The Programming Model by Example</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#writing-your-first-smart-contract-upgrade">Writing Your First Smart Contract Upgrade</a></li>
<li class="toctree-l4"><a class="reference internal" href="#deploying-your-first-upgrade">Deploying Your First Upgrade</a></li>
<li class="toctree-l4"><a class="reference internal" href="#continuing-to-write-your-upgrades">Continuing to Write Your Upgrades</a></li>
<li class="toctree-l4"><a class="reference internal" href="#developer-workflow">Developer Workflow</a></li>
<li class="toctree-l4"><a class="reference internal" href="#the-upgrade-model-in-depth-reference">The Upgrade Model in Depth - Reference</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#package-selection-in-the-ledger-api">Package Selection in the Ledger API</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#package-preference">Package Preference</a></li>
<li class="toctree-l4"><a class="reference internal" href="#dynamic-package-resolution-in-command-submission">Dynamic Package Resolution in Command Submission</a></li>
<li class="toctree-l4"><a class="reference internal" href="#dynamic-package-resolution-in-ledger-api-queries">Dynamic Package Resolution in Ledger API Queries</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#migrating-to-scu">Migrating to SCU</a></li>
<li class="toctree-l3"><a class="reference internal" href="#best-practices">Best Practices</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#separate-interfaces-exceptions-from-templates">Separate Interfaces/Exceptions from Templates</a></li>
<li class="toctree-l4"><a class="reference internal" href="#remove-retroactive-instances">Remove Retroactive Instances</a></li>
<li class="toctree-l4"><a class="reference internal" href="#avoid-contract-metadata-changes">Avoid Contract Metadata Changes</a></li>
<li class="toctree-l4"><a class="reference internal" href="#breaking-changes-via-explicit-package-version">Breaking Changes via Explicit Package Version</a></li>
<li class="toctree-l4"><a class="reference internal" href="#avoid-depending-on-lf-1-15-packages">Avoid Depending on LF 1.15 Packages</a></li>
<li class="toctree-l4"><a class="reference internal" href="#avoid-depending-on-daml-script-packages">Avoid Depending on Daml Script Packages</a></li>
<li class="toctree-l4"><a class="reference internal" href="#operational-design-guideline-for-upgrading-daml-apps">Operational Design Guideline for Upgrading Daml Apps</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#testing">Testing</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#standalone-upgradeability-checks">Standalone Upgradeability Checks</a></li>
<li class="toctree-l4"><a class="reference internal" href="#dry-run-uploading-to-a-test-environment">Dry Run Uploading to a Test Environment</a></li>
<li class="toctree-l4"><a class="reference internal" href="#daml-script-testing">Daml Script Testing</a></li>
<li class="toctree-l4"><a class="reference internal" href="#multi-package-builds-for-upgrades">Multi-package builds for upgrades</a></li>
<li class="toctree-l4"><a class="reference internal" href="#workflow-testing">Workflow Testing</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#scu-support-in-daml-tooling">SCU Support in Daml Tooling</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#codegen">Codegen</a></li>
<li class="toctree-l4"><a class="reference internal" href="#json-api-server-1">JSON API Server</a></li>
<li class="toctree-l4"><a class="reference internal" href="#pqs">PQS</a></li>
<li class="toctree-l4"><a class="reference internal" href="#daml-shell">Daml Shell</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id5">Daml-Script</a></li>
<li class="toctree-l4"><a class="reference internal" href="#daml-studio-support">Daml Studio support</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="automation.html">Automating the Upgrade Process</a><ul>
<li class="toctree-l3"><a class="reference internal" href="automation.html#structure-the-upgrade">Structure the Upgrade</a></li>
<li class="toctree-l3"><a class="reference internal" href="automation.html#implementation-of-the-daml-script">Implementation of the Daml Script</a></li>
<li class="toctree-l3"><a class="reference internal" href="automation.html#implementation-of-the-daml-trigger">Implementation of the Daml Trigger</a></li>
<li class="toctree-l3"><a class="reference internal" href="automation.html#deploy-and-execute-the-upgrade">Deploy and Execute the Upgrade</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../create-daml-apps/developer-tools/index.html">Developer Tools</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../tools/assistant.html">Daml Assistant</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../tools/assistant.html#command-help">Command Help</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tools/assistant.html#configuration-files">Configuration Files</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../tools/assistant.html#global-config-file-daml-config-yaml">Global Config File (<code class="docutils literal notranslate"><span class="pre">daml-config.yaml</span></code>)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../tools/assistant.html#project-config-file-daml-yaml">Project Config File (<code class="docutils literal notranslate"><span class="pre">daml.yaml</span></code>)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../tools/assistant.html#recommended-build-options">Recommended <code class="docutils literal notranslate"><span class="pre">build-options</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../tools/assistant.html#multi-package-config-file-multi-package-yaml">Multi-Package Config File (<code class="docutils literal notranslate"><span class="pre">multi-package.yaml</span></code>)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../tools/assistant.html#environment-variable-interpolation">Environment Variable Interpolation</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../tools/assistant-install.html">Manage SDK Versions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tools/assistant-build.html">Build Daml Projects</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../tools/assistant-build.html#build-a-project">Build a project</a></li>
<li class="toctree-l4"><a class="reference internal" href="../tools/assistant-build.html#build-multiple-packages">Build multiple packages</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../tools/assistant-commands.html">Run Assistant Commands</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../tools/assistant-commands.html#terminal-command-completion">Terminal command completion</a></li>
<li class="toctree-l4"><a class="reference internal" href="../tools/assistant-commands.html#run-commands-outside-of-the-project-directory">Run commands outside of the project directory</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../tools/daml-shell/index.html">Daml Shell</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../tools/daml-shell/index.html#getting-started">Getting started</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../tools/daml-shell/index.html#prerequisites">Prerequisites</a></li>
<li class="toctree-l4"><a class="reference internal" href="../tools/daml-shell/index.html#running-daml-shell">Running Daml Shell</a></li>
<li class="toctree-l4"><a class="reference internal" href="../tools/daml-shell/index.html#commands">Commands</a></li>
<li class="toctree-l4"><a class="reference internal" href="../tools/daml-shell/index.html#filters">Filters</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../tools/daml-shell/index.html#configuration">Configuration</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../tools/daml-shell/index.html#command-line-arguments">Command line arguments</a></li>
<li class="toctree-l4"><a class="reference internal" href="../tools/daml-shell/index.html#configuration-file">Configuration file</a></li>
<li class="toctree-l4"><a class="reference internal" href="../tools/daml-shell/index.html#interactive-configuration">Interactive configuration</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../tools/daml-shell/index.html#usage">Usage</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../tools/daml-shell/index.html#connecting">Connecting</a></li>
<li class="toctree-l4"><a class="reference internal" href="../tools/daml-shell/index.html#offsets">Offsets</a></li>
<li class="toctree-l4"><a class="reference internal" href="../tools/daml-shell/index.html#summary-information">Summary information</a></li>
<li class="toctree-l4"><a class="reference internal" href="../tools/daml-shell/index.html#payloads-by-fully-qualified-name">Payloads by fully qualified name</a></li>
<li class="toctree-l4"><a class="reference internal" href="../tools/daml-shell/index.html#filtering-with-where-clauses">Filtering with <code class="docutils literal notranslate"><span class="pre">where</span></code> clauses</a></li>
<li class="toctree-l4"><a class="reference internal" href="../tools/daml-shell/index.html#contract-lookup">Contract lookup</a></li>
<li class="toctree-l4"><a class="reference internal" href="../tools/daml-shell/index.html#transaction-lookup">Transaction lookup</a></li>
<li class="toctree-l4"><a class="reference internal" href="../tools/daml-shell/index.html#exercise-lookup">Exercise lookup</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../tools/daml-shell/index.html#transforming-and-exporting-command-output">Transforming and exporting command output</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../tools/daml-shell/index.html#setting-offset-bounds">Setting offset bounds</a></li>
<li class="toctree-l4"><a class="reference internal" href="../tools/daml-shell/index.html#finding-transactions-that-created-or-archived-a-contract">Finding transactions that created or archived a contract</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../tools/daml-shell/index.html#faq">FAQ</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../tools/daml-shell/index.html#why-don-t-i-see-any-archived-contracts">Why don’t I see any archived contracts?</a></li>
<li class="toctree-l4"><a class="reference internal" href="../tools/daml-shell/index.html#why-don-t-i-see-any-choices">Why don’t I see any choices?</a></li>
<li class="toctree-l4"><a class="reference internal" href="../tools/daml-shell/index.html#why-don-t-i-see-any-interface-views">Why don’t I see any interface views?</a></li>
<li class="toctree-l4"><a class="reference internal" href="../tools/daml-shell/index.html#why-do-all-contracts-show-the-same-ledger-offset">Why do all contracts show the same ledger offset?</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../tools/canton-console.html">Canton Console</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../tools/canton-console.html#introduction">Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tools/canton-console.html#run-the-canton-console-against-the-sandbox">Run the Canton Console Against the Sandbox</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tools/canton-console.html#built-in-documentation">Built-in Documentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tools/canton-console.html#interact-with-the-sandbox">Interact With the Sandbox</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../deploy/generic_ledger.html">Deploy to Generic Daml Ledger</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../deploy/generic_ledger.html#connect-via-tls">Connect via TLS</a></li>
<li class="toctree-l3"><a class="reference internal" href="../deploy/generic_ledger.html#configure-request-timeouts">Configure Request Timeouts</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../daml-repl/index.html">Experiment: Daml REPL (Deprecated)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../daml-repl/index.html#usage">Usage</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-repl/index.html#what-is-in-scope-at-the-prompt">What Is in Scope at the Prompt?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-repl/index.html#using-daml-repl-without-a-ledger">Using Daml REPL Without a Ledger</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-repl/index.html#connecting-via-tls">Connecting via TLS</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-repl/index.html#connection-to-a-ledger-with-authorization">Connection to a Ledger With Authorization</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-repl/index.html#using-daml-repl-to-convert-to-json">Using Daml REPL to Convert to JSON</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../daml/daml-studio.html">Write: Daml Studio</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../daml/daml-studio.html#install">Install</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/daml-studio.html#create-your-first-daml-file">Create Your First Daml File</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/daml-studio.html#supported-features">Supported Features</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml/daml-studio.html#symbols-and-problem-reporting">Symbols and Problem Reporting</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/daml-studio.html#hover-tooltips">Hover Tooltips</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/daml-studio.html#daml-script-results">Daml Script Results</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/daml-studio.html#daml-snippets">Daml Snippets</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml/daml-studio.html#common-script-errors">Common Script Errors</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml/daml-studio.html#abort-assert-and-debug">Abort, Assert, and Debug</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/daml-studio.html#missing-authorization-on-create">Missing Authorization on Create</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/daml-studio.html#missing-authorization-on-exercise">Missing Authorization on Exercise</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/daml-studio.html#contract-not-visible">Contract Not Visible</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml/daml-studio.html#multi-package-support">Multi-Package Support</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml/daml-studio.html#multi-package-yaml-location">Multi-package.yaml Location</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/daml-studio.html#package-environments-and-hot-loading">Package Environments and Hot-Loading</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/daml-studio.html#multiple-daml-sdk-versions">Multiple Daml SDK Versions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/daml-studio.html#directory-envrionment-tools-direnv">Directory Envrionment Tools (direnv)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/daml-studio.html#limitations-in-2-10-0-rc">Limitations in 2.10.0-rc</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/daml-studio.html#setting-multi-ide-sdk-version">Setting Multi-IDE SDK Version</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/daml-studio.html#deactivating-multi-ide">Deactivating Multi-IDE</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../tools/sandbox.html">Test: Daml Sandbox</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../tools/sandbox.html#run-with-authorization">Run With Authorization</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../tools/sandbox.html#generate-json-web-tokens-jwt">Generate JSON Web Tokens (JWT)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../tools/sandbox.html#generate-rsa-keys">Generate RSA keys</a></li>
<li class="toctree-l4"><a class="reference internal" href="../tools/sandbox.html#generate-ec-keys">Generate EC keys</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../tools/sandbox.html#run-with-tls">Run With TLS</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tools/sandbox.html#command-line-reference">Command-line Reference</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tools/sandbox.html#metrics">Metrics</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../tools/sandbox.html#enable-and-configure-reporting">Enable and Configure Reporting</a></li>
<li class="toctree-l4"><a class="reference internal" href="../tools/sandbox.html#types-of-metrics">Types of Metrics</a></li>
<li class="toctree-l4"><a class="reference internal" href="../tools/sandbox.html#list-of-metrics">List of Metrics</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../tools/navigator/index.html">Visualize: Daml Navigator (Deprecated)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../tools/navigator/index.html#navigator-functionality">Navigator Functionality</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tools/navigator/index.html#starting-navigator">Starting Navigator</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tools/navigator/index.html#logging-in">Logging In</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../tools/navigator/index.html#logging-in-as-a-party">Logging in as a Party</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../tools/navigator/index.html#viewing-templates-or-contracts">Viewing Templates or Contracts</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../tools/navigator/index.html#listing-templates">Listing templates</a></li>
<li class="toctree-l4"><a class="reference internal" href="../tools/navigator/index.html#listing-contracts">Listing contracts</a></li>
<li class="toctree-l4"><a class="reference internal" href="../tools/navigator/index.html#viewing-contracts-based-on-a-template">Viewing contracts based on a template</a></li>
<li class="toctree-l4"><a class="reference internal" href="../tools/navigator/index.html#viewing-template-and-contract-details">Viewing template and contract details</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../tools/navigator/index.html#using-navigator">Using Navigator</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../tools/navigator/index.html#creating-contracts">Creating contracts</a></li>
<li class="toctree-l4"><a class="reference internal" href="../tools/navigator/index.html#exercising-choices">Exercising choices</a></li>
<li class="toctree-l4"><a class="reference internal" href="../tools/navigator/index.html#advancing-time">Advancing time</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../tools/navigator/index.html#authorizing-navigator">Authorizing Navigator</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tools/navigator/index.html#advanced-usage">Advanced Usage</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../tools/navigator/index.html#customizable-table-views">Customizable table views</a></li>
<li class="toctree-l4"><a class="reference internal" href="../tools/navigator/index.html#using-navigator-with-a-daml-ledger">Using Navigator with a Daml Ledger</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../tools/profiler.html">Measure: Daml Profiler</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../tools/profiler.html#usage">Usage</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tools/profiler.html#caveats">Caveats</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../tools/codegen.html">Daml Codegen</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../tools/codegen.html#introduction">Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tools/codegen.html#run-the-daml-codegen">Run the Daml Codegen</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../tools/codegen.html#command-line-configuration">Command Line Configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="../tools/codegen.html#project-file-configuration-java">Project File Configuration (Java)</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Daml Finance</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../daml-finance/index.html">Daml Finance Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../daml-finance/overview/index.html">Overview</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../daml-finance/overview/intro.html">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../daml-finance/overview/architecture.html">Architecture</a></li>
<li class="toctree-l2"><a class="reference internal" href="../daml-finance/overview/building-applications.html">Building Applications</a></li>
<li class="toctree-l2"><a class="reference internal" href="../daml-finance/overview/extending-daml-finance.html">Extending Daml Finance</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../daml-finance/concepts/index.html">Concepts</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../daml-finance/concepts/asset-model.html">Asset Model</a></li>
<li class="toctree-l2"><a class="reference internal" href="../daml-finance/concepts/settlement.html">Settlement</a></li>
<li class="toctree-l2"><a class="reference internal" href="../daml-finance/concepts/lifecycling.html">Lifecycling</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../daml-finance/instruments/intro.html">Instruments</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../daml-finance/instruments/token.html">Token Instrument</a></li>
<li class="toctree-l2"><a class="reference internal" href="../daml-finance/instruments/bond.html">Bond Instrument</a></li>
<li class="toctree-l2"><a class="reference internal" href="../daml-finance/instruments/equity.html">Equity Instrument</a></li>
<li class="toctree-l2"><a class="reference internal" href="../daml-finance/instruments/option.html">Option Instrument</a></li>
<li class="toctree-l2"><a class="reference internal" href="../daml-finance/instruments/structured-product.html">Structured Product</a></li>
<li class="toctree-l2"><a class="reference internal" href="../daml-finance/instruments/swap.html">Swap Instrument</a></li>
<li class="toctree-l2"><a class="reference internal" href="../daml-finance/instruments/generic.html">Generic Instrument</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/instruments/generic/contingent-claims.html">Contingent Claims</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../daml-finance/packages/index.html">Packages</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../daml-finance/packages/interfaces/index.html">Interface Packages</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/packages/interfaces/daml-finance-interface-holding.html">Daml.Finance.Interface.Holding.V4</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml-finance/packages/interfaces/changelogs/daml-finance-interface-holding.html">Changelog</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/packages/interfaces/daml-finance-interface-account.html">Daml.Finance.Interface.Account.V4</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml-finance/packages/interfaces/changelogs/daml-finance-interface-account.html">Changelog</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/packages/interfaces/daml-finance-interface-settlement.html">Daml.Finance.Interface.Settlement.V4</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml-finance/packages/interfaces/changelogs/daml-finance-interface-settlement.html">Changelog</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/packages/interfaces/daml-finance-interface-lifecycle.html">Daml.Finance.Interface.Lifecycle.V4</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml-finance/packages/interfaces/changelogs/daml-finance-interface-lifecycle.html">Changelog</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/packages/interfaces/daml-finance-interface-instrument-base.html">Daml.Finance.Interface.Instrument.Base.V4</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml-finance/packages/interfaces/changelogs/daml-finance-interface-instrument-base.html">Changelog</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/packages/interfaces/daml-finance-interface-claims.html">Daml.Finance.Interface.Claims.V4</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml-finance/packages/interfaces/changelogs/daml-finance-interface-claims.html">Changelog</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/packages/interfaces/daml-finance-interface-data.html">Daml.Finance.Interface.Data.V4</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml-finance/packages/interfaces/changelogs/daml-finance-interface-data.html">Changelog</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/packages/interfaces/daml-finance-interface-types-common.html">Daml.Finance.Interface.Types.Common.V3</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml-finance/packages/interfaces/changelogs/daml-finance-interface-types-common.html">Changelog</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/packages/interfaces/daml-finance-interface-types-date.html">Daml.Finance.Interface.Types.Date.V3</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml-finance/packages/interfaces/changelogs/daml-finance-interface-types-date.html">Changelog</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/packages/interfaces/daml-finance-interface-util.html">Daml.Finance.Interface.Util.V3</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml-finance/packages/interfaces/changelogs/daml-finance-interface-util.html">Changelog</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/packages/interfaces/contingent-claims-core.html">ContingentClaims.Core.V3</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml-finance/packages/interfaces/changelogs/contingent-claims-core.html">Changelog</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/packages/interfaces/daml-finance-interface-instrument-bond.html">Daml.Finance.Interface.Instrument.Bond.V3</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml-finance/packages/interfaces/changelogs/daml-finance-interface-instrument-bond.html">Changelog</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/packages/interfaces/daml-finance-interface-instrument-equity.html">Daml.Finance.Interface.Instrument.Equity.V0</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml-finance/packages/interfaces/changelogs/daml-finance-interface-instrument-equity.html">Changelog</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/packages/interfaces/daml-finance-interface-instrument-generic.html">Daml.Finance.Interface.Instrument.Generic.V4</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml-finance/packages/interfaces/changelogs/daml-finance-interface-instrument-generic.html">Changelog</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/packages/interfaces/daml-finance-interface-instrument-option.html">Daml.Finance.Interface.Instrument.Option.V0</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml-finance/packages/interfaces/changelogs/daml-finance-interface-instrument-option.html">Changelog</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/packages/interfaces/daml-finance-interface-instrument-structuredproduct.html">Daml.Finance.Interface.Instrument.StructuredProduct.V0</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml-finance/packages/interfaces/changelogs/daml-finance-interface-instrument-structuredproduct.html">Changelog</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/packages/interfaces/daml-finance-interface-instrument-swap.html">Daml.Finance.Interface.Instrument.Swap.V0</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml-finance/packages/interfaces/changelogs/daml-finance-interface-instrument-swap.html">Changelog</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/packages/interfaces/daml-finance-interface-instrument-token.html">Daml.Finance.Interface.Instrument.Token.V4</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml-finance/packages/interfaces/changelogs/daml-finance-interface-instrument-token.html">Changelog</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/packages/interfaces/daml-finance-interface-instrument-types.html">Daml.Finance.Interface.Instrument.Types.V2</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml-finance/packages/interfaces/changelogs/daml-finance-interface-instrument-types.html">Changelog</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../daml-finance/packages/implementations/index.html">Implementation Packages</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/packages/implementations/daml-finance-holding.html">Daml.Finance.Holding.V4</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml-finance/packages/implementations/changelogs/daml-finance-holding.html">Changelog</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/packages/implementations/daml-finance-account.html">Daml.Finance.Account.V4</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml-finance/packages/implementations/changelogs/daml-finance-account.html">Changelog</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/packages/implementations/daml-finance-settlement.html">Daml.Finance.Settlement.V4</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml-finance/packages/implementations/changelogs/daml-finance-settlement.html">Changelog</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/packages/implementations/daml-finance-lifecycle.html">Daml.Finance.Lifecycle.V4</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml-finance/packages/implementations/changelogs/daml-finance-lifecycle.html">Changelog</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/packages/implementations/daml-finance-data.html">Daml.Finance.Data.V4</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml-finance/packages/implementations/changelogs/daml-finance-data.html">Changelog</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/packages/implementations/daml-finance-claims.html">Daml.Finance.Claims.V3</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml-finance/packages/implementations/changelogs/daml-finance-claims.html">Changelog</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/packages/implementations/daml-finance-util.html">Daml.Finance.Util.V4</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml-finance/packages/implementations/changelogs/daml-finance-util.html">Changelog</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/packages/implementations/contingent-claims-lifecycle.html">ContingentClaims.Lifecycle.V3</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml-finance/packages/implementations/changelogs/contingent-claims-lifecycle.html">Changelog</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/packages/implementations/contingent-claims-valuation.html">ContingentClaims.Valuation.V0</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml-finance/packages/implementations/changelogs/contingent-claims-valuation.html">Changelog</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/packages/implementations/daml-finance-instrument-bond.html">Daml.Finance.Instrument.Bond.V3</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml-finance/packages/implementations/changelogs/daml-finance-instrument-bond.html">Changelog</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/packages/implementations/daml-finance-instrument-equity.html">Daml.Finance.Instrument.Equity.V0</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml-finance/packages/implementations/changelogs/daml-finance-instrument-equity.html">Changelog</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/packages/implementations/daml-finance-instrument-generic.html">Daml.Finance.Instrument.Generic.V4</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml-finance/packages/implementations/changelogs/daml-finance-instrument-generic.html">Changelog</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/packages/implementations/daml-finance-instrument-option.html">Daml.Finance.Instrument.Option.V0</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml-finance/packages/implementations/changelogs/daml-finance-instrument-option.html">Changelog</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/packages/implementations/daml-finance-instrument-structuredproduct.html">Daml.Finance.Instrument.StructuredProduct.V0</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml-finance/packages/implementations/changelogs/daml-finance-instrument-structuredproduct.html">Changelog</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/packages/implementations/daml-finance-instrument-swap.html">Daml.Finance.Instrument.Swap.V0</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml-finance/packages/implementations/changelogs/daml-finance-instrument-swap.html">Changelog</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/packages/implementations/daml-finance-instrument-token.html">Daml.Finance.Instrument.Token.V4</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml-finance/packages/implementations/changelogs/daml-finance-instrument-token.html">Changelog</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../daml-finance/tutorials/index.html">Tutorials</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../daml-finance/tutorials/getting-started/intro.html">Getting Started</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/tutorials/getting-started/holdings.html">Holdings</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/tutorials/getting-started/transfer.html">Transfer</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/tutorials/getting-started/settlement.html">Settlement</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/tutorials/getting-started/lifecycling.html">Lifecycling</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../daml-finance/tutorials/settlement/intro.html">Settlement</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/tutorials/settlement/transfer.html">Enhanced Transfers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/tutorials/settlement/internal.html">Internal Settlement</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/tutorials/settlement/intermediated.html">Intermediated Settlement</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../daml-finance/tutorials/lifecycling/intro.html">Lifecycling</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/tutorials/lifecycling/fixed-rate-bond.html">Time-based lifecycling (using a fixed rate bond)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/tutorials/lifecycling/floating-rate-bond.html">Observations (using a floating rate bond)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/tutorials/lifecycling/callable-bond.html">Election-based lifecycling (using a callable bond)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../daml-finance/tutorials/upgrade/intro.html">Upgrade</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/tutorials/upgrade/account.html">Account Upgrade</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/tutorials/upgrade/holding.html">Holding Upgrade</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../daml-finance/tutorials/payoff-modeling/intro.html">Payoff Modeling</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/tutorials/payoff-modeling/basic-builders.html">Basic Builders</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/tutorials/payoff-modeling/observations.html">Observations</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../daml-finance/tutorials/advanced-topics/intro.html">Advanced Topics</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/tutorials/advanced-topics/lifecycling/intermediated-lifecycling.html">Intermediated Lifecycling of an Instrument</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/tutorials/advanced-topics/instrument-modeling/contingent-claims-instrument.html">Leverage Contingent Claims in Custom Instrument Implementations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/tutorials/advanced-topics/instrument-modeling/date-utilities.html">Date Utility Functions: Calendar, Schedule, and Day Count</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../daml-finance/reference/index.html">Reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../daml-finance/reference/glossary.html">Glossary</a></li>
<li class="toctree-l2"><a class="reference internal" href="../daml-finance/reference/patterns.html">Patterns</a></li>
<li class="toctree-l2"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/index.html">Daml Finance</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/ContingentClaims-Core-V3-Builders.html">ContingentClaims.Core.V3.Builders</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/ContingentClaims-Core-V3-Claim.html">ContingentClaims.Core.V3.Claim</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/ContingentClaims-Core-V3-Internal-Claim.html">ContingentClaims.Core.V3.Internal.Claim</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/ContingentClaims-Core-V3-Observation.html">ContingentClaims.Core.V3.Observation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/ContingentClaims-Core-V3-Util-Recursion.html">ContingentClaims.Core.V3.Util.Recursion</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/ContingentClaims-Lifecycle-V3-Lifecycle.html">ContingentClaims.Lifecycle.V3.Lifecycle</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/ContingentClaims-Lifecycle-V3-Util.html">ContingentClaims.Lifecycle.V3.Util</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/ContingentClaims-Valuation-V0-MathML.html">ContingentClaims.Valuation.V0.MathML</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/ContingentClaims-Valuation-V0-Stochastic.html">ContingentClaims.Valuation.V0.Stochastic</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Account-V4-Account.html">Daml.Finance.Account.V4.Account</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Claims-V3-Lifecycle-Rule.html">Daml.Finance.Claims.V3.Lifecycle.Rule</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Claims-V3-Util.html">Daml.Finance.Claims.V3.Util</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Claims-V3-Util-Builders.html">Daml.Finance.Claims.V3.Util.Builders</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Claims-V3-Util-Date.html">Daml.Finance.Claims.V3.Util.Date</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Claims-V3-Util-Lifecycle.html">Daml.Finance.Claims.V3.Util.Lifecycle</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Data-V4-Numeric-Observation.html">Daml.Finance.Data.V4.Numeric.Observation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Data-V4-Reference-HolidayCalendar.html">Daml.Finance.Data.V4.Reference.HolidayCalendar</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Data-V4-Time-DateClock.html">Daml.Finance.Data.V4.Time.DateClock</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Data-V4-Time-DateClock-Types.html">Daml.Finance.Data.V4.Time.DateClock.Types</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Data-V4-Time-DateClockUpdate.html">Daml.Finance.Data.V4.Time.DateClockUpdate</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Data-V4-Time-LedgerTime.html">Daml.Finance.Data.V4.Time.LedgerTime</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Holding-V4-BaseHolding.html">Daml.Finance.Holding.V4.BaseHolding</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Holding-V4-Factory.html">Daml.Finance.Holding.V4.Factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Holding-V4-Fungible.html">Daml.Finance.Holding.V4.Fungible</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Holding-V4-Transferable.html">Daml.Finance.Holding.V4.Transferable</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Holding-V4-TransferableFungible.html">Daml.Finance.Holding.V4.TransferableFungible</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Holding-V4-Util.html">Daml.Finance.Holding.V4.Util</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Instrument-Bond-V3-Callable-Factory.html">Daml.Finance.Instrument.Bond.V3.Callable.Factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Instrument-Bond-V3-Callable-Instrument.html">Daml.Finance.Instrument.Bond.V3.Callable.Instrument</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Instrument-Bond-V3-FixedRate-Factory.html">Daml.Finance.Instrument.Bond.V3.FixedRate.Factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Instrument-Bond-V3-FixedRate-Instrument.html">Daml.Finance.Instrument.Bond.V3.FixedRate.Instrument</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Instrument-Bond-V3-FloatingRate-Factory.html">Daml.Finance.Instrument.Bond.V3.FloatingRate.Factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Instrument-Bond-V3-FloatingRate-Instrument.html">Daml.Finance.Instrument.Bond.V3.FloatingRate.Instrument</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Instrument-Bond-V3-InflationLinked-Factory.html">Daml.Finance.Instrument.Bond.V3.InflationLinked.Factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Instrument-Bond-V3-InflationLinked-Instrument.html">Daml.Finance.Instrument.Bond.V3.InflationLinked.Instrument</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Instrument-Bond-V3-Util.html">Daml.Finance.Instrument.Bond.V3.Util</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Instrument-Bond-V3-ZeroCoupon-Factory.html">Daml.Finance.Instrument.Bond.V3.ZeroCoupon.Factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Instrument-Bond-V3-ZeroCoupon-Instrument.html">Daml.Finance.Instrument.Bond.V3.ZeroCoupon.Instrument</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Instrument-Equity-V0-Factory.html">Daml.Finance.Instrument.Equity.V0.Factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Instrument-Equity-V0-Instrument.html">Daml.Finance.Instrument.Equity.V0.Instrument</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Instrument-Generic-V4-Factory.html">Daml.Finance.Instrument.Generic.V4.Factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Instrument-Generic-V4-Instrument.html">Daml.Finance.Instrument.Generic.V4.Instrument</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Instrument-Generic-V4-Lifecycle-Rule.html">Daml.Finance.Instrument.Generic.V4.Lifecycle.Rule</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Instrument-Option-V0-BarrierEuropeanCash-Factory.html">Daml.Finance.Instrument.Option.V0.BarrierEuropeanCash.Factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Instrument-Option-V0-BarrierEuropeanCash-Instrument.html">Daml.Finance.Instrument.Option.V0.BarrierEuropeanCash.Instrument</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Instrument-Option-V0-Dividend-Factory.html">Daml.Finance.Instrument.Option.V0.Dividend.Factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Instrument-Option-V0-Dividend-Instrument.html">Daml.Finance.Instrument.Option.V0.Dividend.Instrument</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Instrument-Option-V0-Dividend-Election.html">Daml.Finance.Instrument.Option.V0.Dividend.Election</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Instrument-Option-V0-EuropeanCash-Factory.html">Daml.Finance.Instrument.Option.V0.EuropeanCash.Factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Instrument-Option-V0-EuropeanCash-Instrument.html">Daml.Finance.Instrument.Option.V0.EuropeanCash.Instrument</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Instrument-Option-V0-EuropeanPhysical-Factory.html">Daml.Finance.Instrument.Option.V0.EuropeanPhysical.Factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Instrument-Option-V0-EuropeanPhysical-Instrument.html">Daml.Finance.Instrument.Option.V0.EuropeanPhysical.Instrument</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Instrument-StructuredProduct-V0-AutoCallable-Factory.html">Daml.Finance.Instrument.StructuredProduct.V0.AutoCallable.Factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Instrument-StructuredProduct-V0-AutoCallable-Instrument.html">Daml.Finance.Instrument.StructuredProduct.V0.AutoCallable.Instrument</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Instrument-StructuredProduct-V0-BarrierReverseConvertible-Factory.html">Daml.Finance.Instrument.StructuredProduct.V0.BarrierReverseConvertible.Factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Instrument-StructuredProduct-V0-BarrierReverseConvertible-Instrument.html">Daml.Finance.Instrument.StructuredProduct.V0.BarrierReverseConvertible.Instrument</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Instrument-StructuredProduct-V0-Util.html">Daml.Finance.Instrument.StructuredProduct.V0.Util</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Instrument-Swap-V0-Asset-Factory.html">Daml.Finance.Instrument.Swap.V0.Asset.Factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Instrument-Swap-V0-Asset-Instrument.html">Daml.Finance.Instrument.Swap.V0.Asset.Instrument</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Instrument-Swap-V0-Asset-DistributionRule.html">Daml.Finance.Instrument.Swap.V0.Asset.DistributionRule</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Instrument-Swap-V0-CreditDefault-Factory.html">Daml.Finance.Instrument.Swap.V0.CreditDefault.Factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Instrument-Swap-V0-CreditDefault-Instrument.html">Daml.Finance.Instrument.Swap.V0.CreditDefault.Instrument</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Instrument-Swap-V0-Currency-Factory.html">Daml.Finance.Instrument.Swap.V0.Currency.Factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Instrument-Swap-V0-Currency-Instrument.html">Daml.Finance.Instrument.Swap.V0.Currency.Instrument</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Instrument-Swap-V0-ForeignExchange-Factory.html">Daml.Finance.Instrument.Swap.V0.ForeignExchange.Factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Instrument-Swap-V0-ForeignExchange-Instrument.html">Daml.Finance.Instrument.Swap.V0.ForeignExchange.Instrument</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Instrument-Swap-V0-Fpml-Factory.html">Daml.Finance.Instrument.Swap.V0.Fpml.Factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Instrument-Swap-V0-Fpml-Instrument.html">Daml.Finance.Instrument.Swap.V0.Fpml.Instrument</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Instrument-Swap-V0-Fpml-Util.html">Daml.Finance.Instrument.Swap.V0.Fpml.Util</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Instrument-Swap-V0-InterestRate-Factory.html">Daml.Finance.Instrument.Swap.V0.InterestRate.Factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Instrument-Swap-V0-InterestRate-Instrument.html">Daml.Finance.Instrument.Swap.V0.InterestRate.Instrument</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Instrument-Token-V4-Factory.html">Daml.Finance.Instrument.Token.V4.Factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Instrument-Token-V4-Instrument.html">Daml.Finance.Instrument.Token.V4.Instrument</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Account-V4-Account.html">Daml.Finance.Interface.Account.V4.Account</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Account-V4-Factory.html">Daml.Finance.Interface.Account.V4.Factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Account-V4-Util.html">Daml.Finance.Interface.Account.V4.Util</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Claims-V4-Claim.html">Daml.Finance.Interface.Claims.V4.Claim</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Claims-V4-Dynamic-Instrument.html">Daml.Finance.Interface.Claims.V4.Dynamic.Instrument</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Claims-V4-Types.html">Daml.Finance.Interface.Claims.V4.Types</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Data-V4-Numeric-Observation.html">Daml.Finance.Interface.Data.V4.Numeric.Observation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Data-V4-Numeric-Observation-Factory.html">Daml.Finance.Interface.Data.V4.Numeric.Observation.Factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Data-V4-Reference-HolidayCalendar.html">Daml.Finance.Interface.Data.V4.Reference.HolidayCalendar</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Data-V4-Reference-HolidayCalendar-Factory.html">Daml.Finance.Interface.Data.V4.Reference.HolidayCalendar.Factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Data-V4-Reference-Time.html">Daml.Finance.Interface.Data.V4.Reference.Time</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Holding-V4-Factory.html">Daml.Finance.Interface.Holding.V4.Factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Holding-V4-Fungible.html">Daml.Finance.Interface.Holding.V4.Fungible</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Holding-V4-Holding.html">Daml.Finance.Interface.Holding.V4.Holding</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Holding-V4-Transferable.html">Daml.Finance.Interface.Holding.V4.Transferable</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Holding-V4-Util.html">Daml.Finance.Interface.Holding.V4.Util</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Base-V4-Instrument.html">Daml.Finance.Interface.Instrument.Base.V4.Instrument</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Bond-V3-Callable-Factory.html">Daml.Finance.Interface.Instrument.Bond.V3.Callable.Factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Bond-V3-Callable-Instrument.html">Daml.Finance.Interface.Instrument.Bond.V3.Callable.Instrument</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Bond-V3-Callable-Types.html">Daml.Finance.Interface.Instrument.Bond.V3.Callable.Types</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Bond-V3-FixedRate-Factory.html">Daml.Finance.Interface.Instrument.Bond.V3.FixedRate.Factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Bond-V3-FixedRate-Instrument.html">Daml.Finance.Interface.Instrument.Bond.V3.FixedRate.Instrument</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Bond-V3-FixedRate-Types.html">Daml.Finance.Interface.Instrument.Bond.V3.FixedRate.Types</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Bond-V3-FloatingRate-Factory.html">Daml.Finance.Interface.Instrument.Bond.V3.FloatingRate.Factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Bond-V3-FloatingRate-Instrument.html">Daml.Finance.Interface.Instrument.Bond.V3.FloatingRate.Instrument</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Bond-V3-FloatingRate-Types.html">Daml.Finance.Interface.Instrument.Bond.V3.FloatingRate.Types</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Bond-V3-InflationLinked-Factory.html">Daml.Finance.Interface.Instrument.Bond.V3.InflationLinked.Factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Bond-V3-InflationLinked-Instrument.html">Daml.Finance.Interface.Instrument.Bond.V3.InflationLinked.Instrument</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Bond-V3-InflationLinked-Types.html">Daml.Finance.Interface.Instrument.Bond.V3.InflationLinked.Types</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Bond-V3-ZeroCoupon-Factory.html">Daml.Finance.Interface.Instrument.Bond.V3.ZeroCoupon.Factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Bond-V3-ZeroCoupon-Instrument.html">Daml.Finance.Interface.Instrument.Bond.V3.ZeroCoupon.Instrument</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Bond-V3-ZeroCoupon-Types.html">Daml.Finance.Interface.Instrument.Bond.V3.ZeroCoupon.Types</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Equity-V0-Factory.html">Daml.Finance.Interface.Instrument.Equity.V0.Factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Equity-V0-Instrument.html">Daml.Finance.Interface.Instrument.Equity.V0.Instrument</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Generic-V4-Factory.html">Daml.Finance.Interface.Instrument.Generic.V4.Factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Generic-V4-Instrument.html">Daml.Finance.Interface.Instrument.Generic.V4.Instrument</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Option-V0-BarrierEuropeanCash-Factory.html">Daml.Finance.Interface.Instrument.Option.V0.BarrierEuropeanCash.Factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Option-V0-BarrierEuropeanCash-Instrument.html">Daml.Finance.Interface.Instrument.Option.V0.BarrierEuropeanCash.Instrument</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Option-V0-BarrierEuropeanCash-Types.html">Daml.Finance.Interface.Instrument.Option.V0.BarrierEuropeanCash.Types</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Option-V0-Dividend-Factory.html">Daml.Finance.Interface.Instrument.Option.V0.Dividend.Factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Option-V0-Dividend-Instrument.html">Daml.Finance.Interface.Instrument.Option.V0.Dividend.Instrument</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Option-V0-Dividend-Types.html">Daml.Finance.Interface.Instrument.Option.V0.Dividend.Types</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Option-V0-Dividend-Election-Factory.html">Daml.Finance.Interface.Instrument.Option.V0.Dividend.Election.Factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Option-V0-EuropeanCash-Factory.html">Daml.Finance.Interface.Instrument.Option.V0.EuropeanCash.Factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Option-V0-EuropeanCash-Instrument.html">Daml.Finance.Interface.Instrument.Option.V0.EuropeanCash.Instrument</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Option-V0-EuropeanCash-Types.html">Daml.Finance.Interface.Instrument.Option.V0.EuropeanCash.Types</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Option-V0-EuropeanPhysical-Factory.html">Daml.Finance.Interface.Instrument.Option.V0.EuropeanPhysical.Factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Option-V0-EuropeanPhysical-Instrument.html">Daml.Finance.Interface.Instrument.Option.V0.EuropeanPhysical.Instrument</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Option-V0-EuropeanPhysical-Types.html">Daml.Finance.Interface.Instrument.Option.V0.EuropeanPhysical.Types</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Option-V0-Types.html">Daml.Finance.Interface.Instrument.Option.V0.Types</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-StructuredProduct-V0-AutoCallable-Factory.html">Daml.Finance.Interface.Instrument.StructuredProduct.V0.AutoCallable.Factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-StructuredProduct-V0-AutoCallable-Instrument.html">Daml.Finance.Interface.Instrument.StructuredProduct.V0.AutoCallable.Instrument</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-StructuredProduct-V0-AutoCallable-Types.html">Daml.Finance.Interface.Instrument.StructuredProduct.V0.AutoCallable.Types</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-StructuredProduct-V0-BarrierReverseConvertible-Factory.html">Daml.Finance.Interface.Instrument.StructuredProduct.V0.BarrierReverseConvertible.Factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-StructuredProduct-V0-BarrierReverseConvertible-Instrument.html">Daml.Finance.Interface.Instrument.StructuredProduct.V0.BarrierReverseConvertible.Instrument</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-StructuredProduct-V0-BarrierReverseConvertible-Types.html">Daml.Finance.Interface.Instrument.StructuredProduct.V0.BarrierReverseConvertible.Types</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-StructuredProduct-V0-Types.html">Daml.Finance.Interface.Instrument.StructuredProduct.V0.Types</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Swap-V0-Asset-Factory.html">Daml.Finance.Interface.Instrument.Swap.V0.Asset.Factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Swap-V0-Asset-Instrument.html">Daml.Finance.Interface.Instrument.Swap.V0.Asset.Instrument</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Swap-V0-Asset-Types.html">Daml.Finance.Interface.Instrument.Swap.V0.Asset.Types</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Swap-V0-CreditDefault-Factory.html">Daml.Finance.Interface.Instrument.Swap.V0.CreditDefault.Factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Swap-V0-CreditDefault-Instrument.html">Daml.Finance.Interface.Instrument.Swap.V0.CreditDefault.Instrument</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Swap-V0-CreditDefault-Types.html">Daml.Finance.Interface.Instrument.Swap.V0.CreditDefault.Types</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Swap-V0-Currency-Factory.html">Daml.Finance.Interface.Instrument.Swap.V0.Currency.Factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Swap-V0-Currency-Instrument.html">Daml.Finance.Interface.Instrument.Swap.V0.Currency.Instrument</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Swap-V0-Currency-Types.html">Daml.Finance.Interface.Instrument.Swap.V0.Currency.Types</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Swap-V0-ForeignExchange-Factory.html">Daml.Finance.Interface.Instrument.Swap.V0.ForeignExchange.Factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Swap-V0-ForeignExchange-Instrument.html">Daml.Finance.Interface.Instrument.Swap.V0.ForeignExchange.Instrument</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Swap-V0-ForeignExchange-Types.html">Daml.Finance.Interface.Instrument.Swap.V0.ForeignExchange.Types</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Swap-V0-Fpml-Factory.html">Daml.Finance.Interface.Instrument.Swap.V0.Fpml.Factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Swap-V0-Fpml-FpmlTypes.html">Daml.Finance.Interface.Instrument.Swap.V0.Fpml.FpmlTypes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Swap-V0-Fpml-Instrument.html">Daml.Finance.Interface.Instrument.Swap.V0.Fpml.Instrument</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Swap-V0-Fpml-Types.html">Daml.Finance.Interface.Instrument.Swap.V0.Fpml.Types</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Swap-V0-InterestRate-Factory.html">Daml.Finance.Interface.Instrument.Swap.V0.InterestRate.Factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Swap-V0-InterestRate-Instrument.html">Daml.Finance.Interface.Instrument.Swap.V0.InterestRate.Instrument</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Swap-V0-InterestRate-Types.html">Daml.Finance.Interface.Instrument.Swap.V0.InterestRate.Types</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Token-V4-Factory.html">Daml.Finance.Interface.Instrument.Token.V4.Factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Token-V4-Instrument.html">Daml.Finance.Interface.Instrument.Token.V4.Instrument</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Token-V4-Types.html">Daml.Finance.Interface.Instrument.Token.V4.Types</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Instrument-Types-V2-FloatingRate.html">Daml.Finance.Interface.Instrument.Types.V2.FloatingRate</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Lifecycle-V4-Effect.html">Daml.Finance.Interface.Lifecycle.V4.Effect</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Lifecycle-V4-Election.html">Daml.Finance.Interface.Lifecycle.V4.Election</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Lifecycle-V4-Election-Factory.html">Daml.Finance.Interface.Lifecycle.V4.Election.Factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Lifecycle-V4-Event.html">Daml.Finance.Interface.Lifecycle.V4.Event</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Lifecycle-V4-Event-Distribution.html">Daml.Finance.Interface.Lifecycle.V4.Event.Distribution</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Lifecycle-V4-Event-Replacement.html">Daml.Finance.Interface.Lifecycle.V4.Event.Replacement</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Lifecycle-V4-Event-Time.html">Daml.Finance.Interface.Lifecycle.V4.Event.Time</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Lifecycle-V4-Observable-NumericObservable.html">Daml.Finance.Interface.Lifecycle.V4.Observable.NumericObservable</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Lifecycle-V4-Observable-TimeObservable.html">Daml.Finance.Interface.Lifecycle.V4.Observable.TimeObservable</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Lifecycle-V4-Rule-Claim.html">Daml.Finance.Interface.Lifecycle.V4.Rule.Claim</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Lifecycle-V4-Rule-Lifecycle.html">Daml.Finance.Interface.Lifecycle.V4.Rule.Lifecycle</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Settlement-V4-Batch.html">Daml.Finance.Interface.Settlement.V4.Batch</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Settlement-V4-Factory.html">Daml.Finance.Interface.Settlement.V4.Factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Settlement-V4-Instruction.html">Daml.Finance.Interface.Settlement.V4.Instruction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Settlement-V4-RouteProvider.html">Daml.Finance.Interface.Settlement.V4.RouteProvider</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Settlement-V4-Types.html">Daml.Finance.Interface.Settlement.V4.Types</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Types-Common-V3-Types.html">Daml.Finance.Interface.Types.Common.V3.Types</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Types-Date-V3-Calendar.html">Daml.Finance.Interface.Types.Date.V3.Calendar</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Types-Date-V3-Classes.html">Daml.Finance.Interface.Types.Date.V3.Classes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Types-Date-V3-DateOffset.html">Daml.Finance.Interface.Types.Date.V3.DateOffset</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Types-Date-V3-DayCount.html">Daml.Finance.Interface.Types.Date.V3.DayCount</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Types-Date-V3-RollConvention.html">Daml.Finance.Interface.Types.Date.V3.RollConvention</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Types-Date-V3-Schedule.html">Daml.Finance.Interface.Types.Date.V3.Schedule</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Util-V3-Common.html">Daml.Finance.Interface.Util.V3.Common</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Util-V3-Disclosure.html">Daml.Finance.Interface.Util.V3.Disclosure</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Util-V3-InterfaceKey.html">Daml.Finance.Interface.Util.V3.InterfaceKey</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Interface-Util-V3-Lockable.html">Daml.Finance.Interface.Util.V3.Lockable</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Lifecycle-V4-Effect.html">Daml.Finance.Lifecycle.V4.Effect</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Lifecycle-V4-Election.html">Daml.Finance.Lifecycle.V4.Election</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Lifecycle-V4-ElectionEffect.html">Daml.Finance.Lifecycle.V4.ElectionEffect</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Lifecycle-V4-Event-Distribution.html">Daml.Finance.Lifecycle.V4.Event.Distribution</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Lifecycle-V4-Event-Replacement.html">Daml.Finance.Lifecycle.V4.Event.Replacement</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Lifecycle-V4-Rule-Claim.html">Daml.Finance.Lifecycle.V4.Rule.Claim</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Lifecycle-V4-Rule-Distribution.html">Daml.Finance.Lifecycle.V4.Rule.Distribution</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Lifecycle-V4-Rule-Replacement.html">Daml.Finance.Lifecycle.V4.Rule.Replacement</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Lifecycle-V4-Rule-Util.html">Daml.Finance.Lifecycle.V4.Rule.Util</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Settlement-V4-Batch.html">Daml.Finance.Settlement.V4.Batch</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Settlement-V4-Factory.html">Daml.Finance.Settlement.V4.Factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Settlement-V4-Hierarchy.html">Daml.Finance.Settlement.V4.Hierarchy</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Settlement-V4-Instruction.html">Daml.Finance.Settlement.V4.Instruction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Settlement-V4-RouteProvider-IntermediatedStatic.html">Daml.Finance.Settlement.V4.RouteProvider.IntermediatedStatic</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Settlement-V4-RouteProvider-SingleCustodian.html">Daml.Finance.Settlement.V4.RouteProvider.SingleCustodian</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Util-V4-Common.html">Daml.Finance.Util.V4.Common</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Util-V4-Date-Calendar.html">Daml.Finance.Util.V4.Date.Calendar</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Util-V4-Date-DayCount.html">Daml.Finance.Util.V4.Date.DayCount</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Util-V4-Date-RollConvention.html">Daml.Finance.Util.V4.Date.RollConvention</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Util-V4-Date-Schedule.html">Daml.Finance.Util.V4.Date.Schedule</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Util-V4-Disclosure.html">Daml.Finance.Util.V4.Disclosure</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml-finance/reference/code-documentation/daml-finance-rst/Daml-Finance-Util-V4-Lockable.html">Daml.Finance.Util.V4.Lockable</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Deploy Daml</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../deploy-daml/intro/index.html">Canton</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../canton/about.html">Introduction to Canton</a></li>
<li class="toctree-l2"><a class="reference internal" href="../canton/architecture/overview.html">Overview and Assumptions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../canton/architecture/overview.html#canton-101">Canton 101</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/architecture/overview.html#a-basic-example">A Basic Example</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/architecture/overview.html#transaction-processing-in-canton">Transaction Processing in Canton</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/architecture/overview.html#conflict-detection">Conflict Detection</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/architecture/overview.html#time-in-canton">Time in Canton</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/architecture/overview.html#subtransaction-privacy">Subtransaction Privacy</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/architecture/overview.html#synchronization-domain-entities">Synchronization Domain Entities</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/architecture/overview.html#sequencer">Sequencer</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/architecture/overview.html#mediator">Mediator</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/architecture/overview.html#topology-manager">Topology Manager</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/architecture/overview.html#participant-internal-canton-components">Participant-Internal Canton Components</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/architecture/overview.html#trust-assumptions">Trust Assumptions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/architecture/overview.html#general-trust-assumptions">General Trust Assumptions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/architecture/overview.html#assumptions-relevant-for-privacy">Assumptions Relevant for Privacy</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/architecture/overview.html#assumptions-relevant-for-liveness">Assumptions Relevant for Liveness</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../canton/tutorials/demo.html">Canton Demo</a></li>
<li class="toctree-l2"><a class="reference internal" href="../canton/tutorials/getting_started.html">Getting Started</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../canton/tutorials/getting_started.html#installation">Installation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/tutorials/getting_started.html#starting-canton">Starting Canton</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/tutorials/getting_started.html#the-example-topology">The Example Topology</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/tutorials/getting_started.html#connecting-the-participant-nodes-and-synchronization-domains">Connecting The Participant Nodes and Synchronization Domains</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/tutorials/getting_started.html#canton-identities-and-provisioning-parties">Canton Identities and Provisioning Parties</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/tutorials/getting_started.html#creating-parties">Creating Parties</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/tutorials/getting_started.html#extracting-identifiers">Extracting Identifiers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/tutorials/getting_started.html#provisioning-smart-contract-code">Provisioning Smart Contract Code</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/tutorials/getting_started.html#executing-smart-contracts">Executing Smart Contracts</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/tutorials/getting_started.html#privacy">Privacy</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/tutorials/getting_started.html#your-development-choices">Your Development Choices</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/tutorials/getting_started.html#automation-using-bootstrap-scripts">Automation Using Bootstrap Scripts</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/tutorials/getting_started.html#what-next">What Next?</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../canton/tutorials/use_daml_sdk.html">Daml SDK and Canton</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../canton/tutorials/use_daml_sdk.html#starting-canton">Starting Canton</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/tutorials/use_daml_sdk.html#running-the-create-daml-app-example">Running the Create Daml App Example</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/tutorials/use_daml_sdk.html#connecting-to-participant2">Connecting to participant2</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/tutorials/use_daml_sdk.html#what-next">What Next?</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../canton/tutorials/composability.html">Composability</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../canton/tutorials/composability.html#part-1-a-multi-synchronization-domain-workflow">Part 1: A multi-synchronization-domain workflow</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/tutorials/composability.html#setting-up-the-topology">Setting up the topology</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/tutorials/composability.html#creating-the-iou-and-the-paint-offer">Creating the IOU and the paint offer</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/tutorials/composability.html#contracts-and-their-synchronization-domains">Contracts and Their Synchronization Domains</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/tutorials/composability.html#transferring-a-contract">Transferring a contract</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/tutorials/composability.html#atomic-acceptance">Atomic acceptance</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/tutorials/composability.html#completing-the-workflow">Completing the workflow</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/tutorials/composability.html#performing-transfers-automatically">Performing transfers automatically</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/tutorials/composability.html#takeaways">Takeaways</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/tutorials/composability.html#part-2-composing-existing-workflows">Part 2: Composing existing workflows</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/tutorials/composability.html#existing-workflows">Existing workflows</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/tutorials/composability.html#required-changes">Required changes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/tutorials/composability.html#preparation-using-the-existing-workflows">Preparation using the existing workflows</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/tutorials/composability.html#the-paint-offer-accept-workflow">The paint offer-accept workflow</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/tutorials/composability.html#continuing-the-existing-workflows">Continuing the existing workflows</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/tutorials/composability.html#id1">Takeaways</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../canton/usermanual/versioning.html">Versioning</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/versioning.html#canton-release-version">Canton release version</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/versioning.html#for-application-developers-and-operators">For application developers and operators</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/versioning.html#for-canton-participant-and-synchronization-domain-operators">For Canton participant and synchronization domain operators</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/versioning.html#canton-protocol-version">Canton protocol version</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/versioning.html#features-and-protocol-versions">Features and protocol versions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/versioning.html#configuring-the-protocol-version">Configuring the protocol version</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/versioning.html#minimum-protocol-version">Minimum protocol version</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/versioning.html#support-and-bug-fixes">Support and bug fixes</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../canton/usermanual/downloading.html">Download and Install Canton</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../canton/usermanual/downloading.html#choosing-open-source-or-enterprise-edition">Choosing Open-Source or Enterprise Edition</a></li>
<li class="toctree-l2"><a class="reference internal" href="../canton/usermanual/downloading.html#downloading-the-open-source-edition">Downloading the Open Source Edition</a></li>
<li class="toctree-l2"><a class="reference internal" href="../canton/usermanual/downloading.html#downloading-the-enterprise-edition">Downloading the Enterprise Edition</a></li>
<li class="toctree-l2"><a class="reference internal" href="../canton/usermanual/installation.html">Install Canton</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/installation.html#hardware-resources">Hardware Resources</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/installation.html#downloading-canton">Downloading Canton</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/installation.html#your-topology">Your Topology</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/installation.html#the-config-directory-contents">The Config Directory Contents</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/installation.html#selecting-your-storage-layer">Selecting your Storage Layer</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/installation.html#persistence-using-postgres">Persistence using Postgres</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/installation.html#generate-the-tls-certificates">Generate the TLS Certificates</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/installation.html#setting-up-a-participant">Setting up a Participant</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/installation.html#secure-the-apis">Secure the APIs</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/installation.html#configure-applications-users-and-connection">Configure Applications, Users and Connection</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/installation.html#setting-up-a-synchronization-domain">Setting up a Synchronization Domain</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/installation.html#using-an-embedded-synchronization-domain">Using an Embedded Synchronization Domain</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/installation.html#using-microservices">Using Microservices</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/installation.html#id3">Secure the APIs</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/installation.html#next-steps">Next Steps</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/installation.html#multi-node-setup">Multi-Node Setup</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../canton/usermanual/docker.html">Work With the Docker Containers</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/docker.html#obtaining-the-docker-images">Obtaining the Docker Images</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/docker.html#starting-canton">Starting Canton</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/docker.html#configuring-logging-and-health-probes">Configuring Logging and Health Probes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/docker.html#administrating-the-running-node">Administrating the Running Node</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/docker.html#exposing-the-ledger-api-or-admin-api-to-the-host-machine">Exposing the Ledger API or Admin API to the host machine</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/docker.html#supplying-custom-configuration-and-dars">Supplying custom configuration and DARs</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/docker.html#running-postgres-in-docker">Running Postgres in Docker</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../canton/usermanual/static_conf.html">Set Configuration Options</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/static_conf.html#configuration-reference">Configuration reference</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/static_conf.html#configuration-compatibility">Configuration Compatibility</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/static_conf.html#advanced-configurations">Advanced Configurations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/static_conf.html#configuration-mixin">Configuration Mixin</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/static_conf.html#multiple-synchronization-domains">Multiple Synchronization Domains</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/static_conf.html#fail-fast-mode">Fail Fast Mode</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/static_conf.html#init-configuration">Init Configuration</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../canton/usermanual/domains/domains.html">Set Up A Daml Domain With Enterprise Drivers</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/domains/oracle.html">Oracle Domain</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/domains/fabric.html">Fabric Domain</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/domains/fabric.html#tutorial">Tutorial</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/domains/fabric.html#user-manual">User Manual</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/domains/fabric.html#fabric-setup">Fabric Setup</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/domains/ethereum.html">Ethereum Domain</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/domains/ethereum.html#introduction">Introduction</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/domains/ethereum.html#the-ethereum-demo">The Ethereum Demo</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/domains/ethereum.html#error-codes">Error Codes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/domains/ethereum.html#tls-configuration">TLS Configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/domains/ethereum.html#ethereum-accounts-and-wallets">Ethereum Accounts and Wallets</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/domains/ethereum.html#deployment-of-the-sequencer-contract">Deployment of the Sequencer Contract</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/domains/ethereum.html#requirements-for-the-ethereum-network">Requirements for the Ethereum Network</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/domains/ethereum.html#trust-properties-of-the-ethereum-sequencer-integration">Trust Properties of the Ethereum Sequencer Integration</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/domains/ethereum.html#high-availability">High Availability</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../deploy-daml/infrastructure-architecture/high-availability/main-menu.html">High Availability (HA)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../deploy-daml/infrastructure-architecture/high-availability/basic-ha/intro.html">Intro to HA in Canton</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../deploy-daml/infrastructure-architecture/high-availability/basic-ha/overview.html">Overview</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../deploy-daml/infrastructure-architecture/high-availability/basic-ha/overview.html#participant-nodes">Participant Nodes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../deploy-daml/infrastructure-architecture/high-availability/basic-ha/overview.html#synchronization-domains">Synchronization Domains</a></li>
<li class="toctree-l4"><a class="reference internal" href="../deploy-daml/infrastructure-architecture/high-availability/basic-ha/overview.html#replication">Replication</a></li>
<li class="toctree-l4"><a class="reference internal" href="../deploy-daml/infrastructure-architecture/high-availability/basic-ha/overview.html#databases">Databases</a></li>
<li class="toctree-l4"><a class="reference internal" href="../deploy-daml/infrastructure-architecture/high-availability/basic-ha/overview.html#health-check">Health Check</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../deploy-daml/infrastructure-architecture/high-availability/basic-ha/participant.html">Active-Passive Participant Node Configuration</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../deploy-daml/infrastructure-architecture/high-availability/basic-ha/participant.html#high-level-system-design">High-Level System Design</a></li>
<li class="toctree-l4"><a class="reference internal" href="../deploy-daml/infrastructure-architecture/high-availability/basic-ha/participant.html#leader-election">Leader Election</a></li>
<li class="toctree-l4"><a class="reference internal" href="../deploy-daml/infrastructure-architecture/high-availability/basic-ha/participant.html#prevent-passive-node-replica-activity">Prevent Passive Node Replica Activity</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../deploy-daml/infrastructure-architecture/high-availability/basic-ha/domain.html">HA on the Synchronization Domain</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../deploy-daml/infrastructure-architecture/high-availability/basic-ha/domain.html#sequencer">Sequencer</a></li>
<li class="toctree-l4"><a class="reference internal" href="../deploy-daml/infrastructure-architecture/high-availability/basic-ha/domain.html#mediator">Mediator</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../deploy-daml/infrastructure-architecture/high-availability/production.html">HA for Production Systems</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../deploy-daml/infrastructure-architecture/high-availability/ha-and-scaling/introduction.html">HA and Horizontal Scaling</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../deploy-daml/infrastructure-architecture/high-availability/ha-and-scaling/introduction.html#introduction">Introduction</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../deploy-daml/infrastructure-architecture/high-availability/ha-and-scaling/understanding-ha.html">High Availability From a Business Perspective</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../deploy-daml/infrastructure-architecture/high-availability/ha-and-scaling/understanding-ha.html#availability">Availability</a></li>
<li class="toctree-l4"><a class="reference internal" href="../deploy-daml/infrastructure-architecture/high-availability/ha-and-scaling/understanding-ha.html#resiliency">Resiliency</a></li>
<li class="toctree-l4"><a class="reference internal" href="../deploy-daml/infrastructure-architecture/high-availability/ha-and-scaling/understanding-ha.html#other-common-metrics-rto-and-rpo">Other Common Metrics / RTO and RPO</a></li>
<li class="toctree-l4"><a class="reference internal" href="../deploy-daml/infrastructure-architecture/high-availability/ha-and-scaling/understanding-ha.html#ha-cost-trade-offs">HA Cost Trade-Offs</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../deploy-daml/infrastructure-architecture/high-availability/ha-and-scaling/use-cases.html">Use Cases By Role</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../deploy-daml/infrastructure-architecture/high-availability/ha-and-scaling/use-cases.html#distributed-application-provider">Distributed Application Provider</a></li>
<li class="toctree-l4"><a class="reference internal" href="../deploy-daml/infrastructure-architecture/high-availability/ha-and-scaling/use-cases.html#distributed-application-user">Distributed Application User</a></li>
<li class="toctree-l4"><a class="reference internal" href="../deploy-daml/infrastructure-architecture/high-availability/ha-and-scaling/use-cases.html#site-reliability-engineer-sre">Site Reliability Engineer (SRE)</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../deploy-daml/infrastructure-architecture/high-availability/ha-and-scaling/implementing-ha.html">Implementing HA and Scaling Deployments</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../deploy-daml/infrastructure-architecture/high-availability/ha-and-scaling/implementing-ha.html#basic-daml-deployment">Basic Daml Deployment</a></li>
<li class="toctree-l4"><a class="reference internal" href="../deploy-daml/infrastructure-architecture/high-availability/ha-and-scaling/implementing-ha.html#architecture-for-ha-and-scaling">Architecture for HA and Scaling</a></li>
<li class="toctree-l4"><a class="reference internal" href="../deploy-daml/infrastructure-architecture/high-availability/ha-and-scaling/implementing-ha.html#http-json-api-and-participant-node-services">HTTP JSON API and Participant Node Services</a></li>
<li class="toctree-l4"><a class="reference internal" href="../deploy-daml/infrastructure-architecture/high-availability/ha-and-scaling/implementing-ha.html#sequencer-service">Sequencer Service</a></li>
<li class="toctree-l4"><a class="reference internal" href="../deploy-daml/infrastructure-architecture/high-availability/ha-and-scaling/implementing-ha.html#mediator-service">Mediator Service</a></li>
<li class="toctree-l4"><a class="reference internal" href="../deploy-daml/infrastructure-architecture/high-availability/ha-and-scaling/implementing-ha.html#synchronization-domain-manager-service">Synchronization Domain Manager Service</a></li>
<li class="toctree-l4"><a class="reference internal" href="../deploy-daml/infrastructure-architecture/high-availability/ha-and-scaling/implementing-ha.html#trigger-service-deprecated">Trigger Service (Deprecated)</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../deploy-daml/infrastructure-architecture/high-availability/ha-and-scaling/deployment-solution.html">HA Deployment Solution for Production</a></li>
<li class="toctree-l3"><a class="reference internal" href="../deploy-daml/infrastructure-architecture/high-availability/ha-and-scaling/ha-in-the-cloud.html">HA in the Cloud</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../deploy-daml/infrastructure-architecture/high-availability/ha-and-scaling/ha-in-the-cloud.html#database-options">Database Options</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../canton/usermanual/ha.html">High Availability Usage</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/ha.html#synchronization-domain-manager">Synchronization Domain Manager</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/ha.html#ha-setup-on-oracle">HA Setup on Oracle</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/ha.html#mediator">Mediator</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/ha.html#running-a-stand-alone-mediator-node">Running a Stand-Alone Mediator Node</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/ha.html#ha-configuration">HA Configuration</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/ha.html#sequencer">Sequencer</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/ha.html#total-node-count">Total node count</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/ha.html#external-load-balancer">External load balancer</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/ha.html#client-side-load-balancing">Client-side load balancing</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/ha.html#participant">Participant</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/ha.html#synchronization-domain-connectivity-during-fail-over">Synchronization domain connectivity during fail-over</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/ha.html#manual-trigger-of-a-fail-over">Manual trigger of a fail-over</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/ha.html#load-balancer-configuration">Load balancer configuration</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../deploy-daml/infrastructure-architecture/disaster-recovery.html">Disaster Recovery (DR)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../canton/usermanual/persistence.html">Persistence</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../canton/usermanual/persistence.html#id1">Postgres</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/persistence.html#ssl">SSL</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/persistence.html#sizing-and-performance">Sizing and Performance</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/persistence.html#predictability-of-shared-environments">Predictability of Shared Environments</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/persistence.html#postgres-configuration">Postgres Configuration</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../canton/usermanual/persistence.html#oracle">Oracle</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/persistence.html#installation-and-setup-of-oracle">Installation and Setup of Oracle</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/persistence.html#default-character-set-and-collations">Default Character Set and Collations</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/persistence.html#database-replication">Database Replication</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/persistence.html#setup-oracle-schemas">Setup Oracle Schemas</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/persistence.html#configuring-canton-nodes-for-oracle">Configuring Canton Nodes for Oracle</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/persistence.html#performance-tuning">Performance Tuning</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/persistence.html#operating-system-modifications">Operating System Modifications</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/persistence.html#system-container-configuration-cdb">System Container Configuration (CDB)</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../canton/usermanual/persistence.html#general-settings">General Settings</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/persistence.html#max-connection-settings">Max Connection Settings</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/persistence.html#queue-size">Queue Size</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../canton/usermanual/persistence.html#backup-and-restore">Backup and Restore</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/persistence.html#order-of-backups">Order of Backups</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/persistence.html#restore-caveats">Restore Caveats</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/persistence.html#incomplete-command-deduplication-state">Incomplete Command Deduplication State</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/persistence.html#application-state-reset">Application State Reset</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/persistence.html#private-keys">Private Keys</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/persistence.html#postgres-example">Postgres Example</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../canton/usermanual/persistence.html#database-replication-for-disaster-recovery">Database Replication for Disaster Recovery</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/persistence.html#synchronous-replication">Synchronous Replication</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Operate a Daml Ledger</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../operate-a-daml-ledger/canton-administration-quickstart/index.html">Canton Administration Quick Start</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../canton/usermanual/command_line.html">Use the Canton Command Line</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/command_line.html#selecting-a-configuration">Selecting a Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/command_line.html#run-modes">Run Modes</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/command_line.html#interactive-console">Interactive Console</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/command_line.html#daemon">Daemon</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/command_line.html#headless-script-mode">Headless Script Mode</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/command_line.html#interactive-server-process-using-screen">Interactive Server Process using Screen</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/command_line.html#java-virtual-machine-arguments">Java Virtual Machine Arguments</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../canton/usermanual/console.html">Canton Console</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/console.html#remote-administration">Remote Administration</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/console.html#tls-and-authorization">TLS and Authorization</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/console.html#node-references">Node References</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/console.html#help">Help</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/console.html#lifecycle-operations">Lifecycle Operations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/console.html#timeouts">Timeouts</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/console.html#code-generation-in-console">Code-Generation in Console</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/console.html#canton-administration-apis">Canton Administration APIs</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../canton/reference/console.html">Console Commands</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/console.html#top-level-commands">Top-level Commands</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/console.html#participant-commands">Participant Commands</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/console.html#database">Database</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/console.html#health">Health</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/console.html#domain-connectivity">Domain Connectivity</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/console.html#packages">Packages</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/console.html#dar-management">DAR Management</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/console.html#party-management">Party Management</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/console.html#key-administration">Key Administration</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/console.html#topology-administration">Topology Administration</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/console.html#ledger-api-access">Ledger API Access</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/console.html#composability">Composability</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/console.html#ledger-pruning">Ledger Pruning</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/console.html#bilateral-commitments">Bilateral Commitments</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/console.html#participant-repair">Participant Repair</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/console.html#resource-management">Resource Management</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/console.html#replication">Replication</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/console.html#multiple-participants">Multiple Participants</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/console.html#domain-administration-commands">Domain Administration Commands</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/console.html#id267">Health</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/console.html#id269">Database</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/console.html#participants">Participants</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/console.html#sequencer">Sequencer</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/console.html#mediator">Mediator</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/console.html#domain-keys-admin">Key Administration</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/console.html#parties">Parties</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/console.html#service">Service</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/console.html#domain-topology-admin">Topology Administration</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/console.html#domain-manager-administration-commands">Domain Manager Administration Commands</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/console.html#setup">Setup</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/console.html#id418">Health</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/console.html#id420">Database</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/console.html#sequencer-connection">Sequencer Connection</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/console.html#id423">Key Administration</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/console.html#id452">Parties</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/console.html#id455">Service</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/console.html#id473">Topology Administration</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/console.html#sequencer-administration-commands">Sequencer Administration Commands</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/console.html#id474">Sequencer</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/console.html#id486">Health</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/console.html#id488">Database</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/console.html#mediator-administration-commands">Mediator Administration Commands</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/console.html#id490">Mediator</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/console.html#id511">Health</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/console.html#id513">Database</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/console.html#id514">Sequencer Connection</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../canton/usermanual/monitoring.html">Monitoring Best Practices</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../canton/usermanual/monitoring.html#introduction">Introduction</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/monitoring.html#hands-on-with-the-daml-enterprise-observability-example">Hands-On with the Daml Enterprise - Observability Example</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../canton/usermanual/monitoring.html#golden-signals-and-key-metrics-quick-start">Golden Signals and Key Metrics Quick Start</a></li>
<li class="toctree-l2"><a class="reference internal" href="../canton/usermanual/monitoring.html#set-up-metrics-scraping">Set Up Metrics Scraping</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/monitoring.html#enable-the-prometheus-reporter">Enable the Prometheus Reporter</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/monitoring.html#prometheus-only-metrics">Prometheus-Only Metrics</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/monitoring.html#deprecated-reporters">Deprecated Reporters</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../canton/usermanual/monitoring.html#metrics">Metrics</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/monitoring.html#participant-metrics">Participant Metrics</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-domain-conflict-detection-sequencer-counter-queue">canton.&lt;domain&gt;.conflict-detection.sequencer-counter-queue</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-domain-conflict-detection-task-queue">canton.&lt;domain&gt;.conflict-detection.task-queue</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-domain-protocol-messages-confirmation-request-creation">canton.&lt;domain&gt;.protocol-messages.confirmation-request-creation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-domain-protocol-messages-confirmation-request-size">canton.&lt;domain&gt;.protocol-messages.confirmation-request-size</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-domain-protocol-messages-transaction-message-receipt">canton.&lt;domain&gt;.protocol-messages.transaction-message-receipt</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-domain-request-tracker-sequencer-counter-queue">canton.&lt;domain&gt;.request-tracker.sequencer-counter-queue</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-domain-request-tracker-task-queue">canton.&lt;domain&gt;.request-tracker.task-queue</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-domain-sequencer-client-application-handle">canton.&lt;domain&gt;.sequencer-client.application-handle</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-domain-sequencer-client-delay">canton.&lt;domain&gt;.sequencer-client.delay</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-domain-sequencer-client-event-handle">canton.&lt;domain&gt;.sequencer-client.event-handle</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-domain-sequencer-client-handler-actual-in-flight-event-batches">canton.&lt;domain&gt;.sequencer-client.handler.actual-in-flight-event-batches</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-domain-sequencer-client-handler-max-in-flight-event-batches">canton.&lt;domain&gt;.sequencer-client.handler.max-in-flight-event-batches</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-domain-sequencer-client-submissions-dropped">canton.&lt;domain&gt;.sequencer-client.submissions.dropped</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-domain-sequencer-client-submissions-in-flight">canton.&lt;domain&gt;.sequencer-client.submissions.in-flight</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-domain-sequencer-client-submissions-overloaded">canton.&lt;domain&gt;.sequencer-client.submissions.overloaded</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-domain-sequencer-client-submissions-sends">canton.&lt;domain&gt;.sequencer-client.submissions.sends</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-domain-sequencer-client-submissions-sequencing">canton.&lt;domain&gt;.sequencer-client.submissions.sequencing</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-domain-traffic-control-event-above-traffic-limit">canton.&lt;domain&gt;.traffic-control.event-above-traffic-limit</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-domain-traffic-control-event-delivered">canton.&lt;domain&gt;.traffic-control.event-delivered</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-domain-traffic-control-extra-traffic-credit-available">canton.&lt;domain&gt;.traffic-control.extra-traffic-credit-available</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-domain-traffic-control-traffic-state-topology-transaction">canton.&lt;domain&gt;.traffic-control.traffic-state-topology-transaction</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-commitments-catchup-mode-enabled">canton.commitments.catchup-mode-enabled</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-commitments-compute">canton.commitments.compute</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-commitments-sequencing-time">canton.commitments.sequencing-time</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-db-storage-service-executor-exectime">canton.db-storage.&lt;service&gt;.executor.exectime</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-db-storage-service-executor-load">canton.db-storage.&lt;service&gt;.executor.load</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-db-storage-service-executor-queued">canton.db-storage.&lt;service&gt;.executor.queued</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-db-storage-service-executor-running">canton.db-storage.&lt;service&gt;.executor.running</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-db-storage-service-executor-waittime">canton.db-storage.&lt;service&gt;.executor.waittime</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-db-storage-storage">canton.db-storage.&lt;storage&gt;</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-db-storage-storage-load">canton.db-storage.&lt;storage&gt;.load</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-db-storage-alerts-multi-domain-event-log">canton.db-storage.alerts.multi-domain-event-log</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-db-storage-alerts-single-dimension-event-log">canton.db-storage.alerts.single-dimension-event-log</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-dirty-requests">canton.dirty_requests*</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-max-dirty-requests">canton.max_dirty_requests*</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-prune">canton.prune</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-prune-max-event-age">canton.prune.max-event-age</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-updates-published">canton.updates-published</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-cache-evicted-weight">daml.cache.evicted_weight*</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-cache-evictions">daml.cache.evictions*</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-cache-hits">daml.cache.hits*</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-cache-misses">daml.cache.misses*</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-commands-delayed-submissions">daml.commands.delayed_submissions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-commands-failed-command-interpretations">daml.commands.failed_command_interpretations</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-commands-max-in-flight-capacity">daml.commands.max_in_flight_capacity</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-commands-max-in-flight-length">daml.commands.max_in_flight_length</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-commands-reassignment-validation">daml.commands.reassignment_validation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-commands-submissions">daml.commands.submissions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-commands-submissions-running">daml.commands.submissions_running</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-commands-valid-submissions">daml.commands.valid_submissions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-commands-validation">daml.commands.validation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-db-commit-duration-seconds">daml.db.commit.duration.seconds*</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-db-compression-duration-seconds">daml.db.compression.duration.seconds*</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-db-exec-duration-seconds">daml.db.exec.duration.seconds*</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-db-query-duration-seconds">daml.db.query.duration.seconds*</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-db-translation-duration-seconds">daml.db.translation.duration.seconds*</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-db-wait-duration-seconds">daml.db.wait.duration.seconds*</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-execution-cache-contract-state-register-update">daml.execution.cache.contract_state.register_update</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-execution-cache-key-state-register-update">daml.execution.cache.key_state.register_update</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-execution-cache-read-through-not-found">daml.execution.cache.read_through_not_found</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-execution-cache-resolve-divulgence-lookup">daml.execution.cache.resolve_divulgence_lookup</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-execution-cache-resolve-full-lookup">daml.execution.cache.resolve_full_lookup</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-execution-engine">daml.execution.engine</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-execution-engine-running">daml.execution.engine_running</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-execution-get-lf-package">daml.execution.get_lf_package</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-execution-lookup-active-contract">daml.execution.lookup_active_contract</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-execution-lookup-active-contract-count-per-execution">daml.execution.lookup_active_contract_count_per_execution</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-execution-lookup-active-contract-per-execution">daml.execution.lookup_active_contract_per_execution</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-execution-lookup-contract-key">daml.execution.lookup_contract_key</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-execution-lookup-contract-key-count-per-execution">daml.execution.lookup_contract_key_count_per_execution</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-execution-lookup-contract-key-per-execution">daml.execution.lookup_contract_key_per_execution</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-execution-retry">daml.execution.retry</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-execution-total">daml.execution.total</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-execution-total-running">daml.execution.total_running</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-executor-runtime-completed">daml.executor.runtime.completed*</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-executor-runtime-duration">daml.executor.runtime.duration*</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-executor-runtime-idle">daml.executor.runtime.idle*</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-executor-runtime-running">daml.executor.runtime.running*</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-executor-runtime-submitted">daml.executor.runtime.submitted*</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-index-active-contracts-buffer-size">daml.index.active_contracts_buffer_size</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-index-completions-buffer-size">daml.index.completions_buffer_size</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-index-db-active-contract-keys-lookup-batch-active-contract-lookup-batch-size">daml.index.db.active_contract_keys_lookup.batch.active_contract_lookup.batch_size</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-index-db-active-contract-keys-lookup-batch-active-contract-lookup-buffer-capacity">daml.index.db.active_contract_keys_lookup.batch.active_contract_lookup.buffer_capacity</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-index-db-active-contract-keys-lookup-batch-active-contract-lookup-buffer-delay-duration-seconds">daml.index.db.active_contract_keys_lookup.batch.active_contract_lookup.buffer_delay.duration.seconds</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-index-db-active-contract-keys-lookup-batch-active-contract-lookup-buffer-length">daml.index.db.active_contract_keys_lookup.batch.active_contract_lookup.buffer_length</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-index-db-active-contract-lookup-batch-active-contract-lookup-batch-size">daml.index.db.active_contract_lookup.batch.active_contract_lookup.batch_size</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-index-db-active-contract-lookup-batch-active-contract-lookup-buffer-capacity">daml.index.db.active_contract_lookup.batch.active_contract_lookup.buffer_capacity</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-index-db-active-contract-lookup-batch-active-contract-lookup-buffer-delay-duration-seconds">daml.index.db.active_contract_lookup.batch.active_contract_lookup.buffer_delay.duration.seconds</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-index-db-active-contract-lookup-batch-active-contract-lookup-buffer-length">daml.index.db.active_contract_lookup.batch.active_contract_lookup.buffer_length</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-index-db-compression-create-argument-compressed">daml.index.db.compression.create_argument_compressed</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-index-db-compression-create-argument-uncompressed">daml.index.db.compression.create_argument_uncompressed</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-index-db-compression-create-key-value-compressed">daml.index.db.compression.create_key_value_compressed</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-index-db-compression-create-key-value-uncompressed">daml.index.db.compression.create_key_value_uncompressed</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-index-db-compression-exercise-argument-compressed">daml.index.db.compression.exercise_argument_compressed</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-index-db-compression-exercise-argument-uncompressed">daml.index.db.compression.exercise_argument_uncompressed</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-index-db-compression-exercise-result-compressed">daml.index.db.compression.exercise_result_compressed</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-index-db-compression-exercise-result-uncompressed">daml.index.db.compression.exercise_result_uncompressed</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-index-db-flat-transactions-stream-translation">daml.index.db.flat_transactions_stream.translation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-index-db-lookup-active-contract">daml.index.db.lookup_active_contract</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-index-db-lookup-key">daml.index.db.lookup_key</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-index-db-reassignment-stream-translation">daml.index.db.reassignment_stream.translation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-index-db-translation-get-lf-package">daml.index.db.translation.get_lf_package</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-index-db-tree-transactions-stream-translation">daml.index.db.tree_transactions_stream.translation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-index-flat-transactions-buffer-size">daml.index.flat_transactions_buffer_size</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-index-ledger-end-sequential-id">daml.index.ledger_end_sequential_id</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-index-lf-value-compute-interface-view">daml.index.lf_value.compute_interface_view</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-index-package-metadata-decode-archive">daml.index.package_metadata.decode_archive</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-index-package-metadata-view-init">daml.index.package_metadata.view_init</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-index-transaction-trees-buffer-size">daml.index.transaction_trees_buffer_size</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-indexer-current-record-time-lag">daml.indexer.current_record_time_lag</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-indexer-events">daml.indexer.events*</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-indexer-last-received-record-time">daml.indexer.last_received_record_time</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-indexer-ledger-end-sequential-id">daml.indexer.ledger_end_sequential_id</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-indexer-metered-events">daml.indexer.metered_events*</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-lapi-streams-acs-sent">daml.lapi.streams.acs_sent</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-lapi-streams-active">daml.lapi.streams.active</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-lapi-streams-completions-sent">daml.lapi.streams.completions_sent</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-lapi-streams-transaction-trees-sent">daml.lapi.streams.transaction_trees_sent</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-lapi-streams-transactions-sent">daml.lapi.streams.transactions_sent</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-lapi-streams-update-trees-sent">daml.lapi.streams.update_trees_sent</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-parallel-indexer-archivals">daml.parallel_indexer.archivals</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-parallel-indexer-creates">daml.parallel_indexer.creates</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-parallel-indexer-input-buffer-length">daml.parallel_indexer.input_buffer_length</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-parallel-indexer-inputmapping-batch-size">daml.parallel_indexer.inputmapping.batch_size</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-parallel-indexer-output-batched-buffer-length">daml.parallel_indexer.output_batched_buffer_length</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-parallel-indexer-seqmapping-duration">daml.parallel_indexer.seqmapping.duration</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-parallel-indexer-updates">daml.parallel_indexer.updates</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-services-index-operation">daml.services.index.&lt;operation&gt;</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-services-index-in-memory-fan-out-buffer-prune">daml.services.index.in_memory_fan_out_buffer.prune</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-services-index-in-memory-fan-out-buffer-push">daml.services.index.in_memory_fan_out_buffer.push</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-services-index-in-memory-fan-out-buffer-size">daml.services.index.in_memory_fan_out_buffer.size</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-services-read-operation">daml.services.read.&lt;operation&gt;</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-services-write-operation">daml.services.write.&lt;operation&gt;</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-services-write-submit-transaction-count">daml.services.write.submit_transaction.count</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/monitoring.html#synchronization-domain-metrics">Synchronization Domain Metrics</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-component-sequencer-client-application-handle">canton.&lt;component&gt;.sequencer-client.application-handle</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-component-sequencer-client-delay">canton.&lt;component&gt;.sequencer-client.delay</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-component-sequencer-client-event-handle">canton.&lt;component&gt;.sequencer-client.event-handle</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#id1">canton.db-storage.&lt;service&gt;.executor.exectime</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#id2">canton.db-storage.&lt;service&gt;.executor.load</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#id3">canton.db-storage.&lt;service&gt;.executor.queued</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#id4">canton.db-storage.&lt;service&gt;.executor.running</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#id5">canton.db-storage.&lt;service&gt;.executor.waittime</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#id6">canton.db-storage.&lt;storage&gt;</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#id7">canton.db-storage.&lt;storage&gt;.load</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#id8">canton.db-storage.alerts.multi-domain-event-log</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#id9">canton.db-storage.alerts.single-dimension-event-log</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-mediator-event-rejected">canton.mediator.event-rejected</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-mediator-max-event-age">canton.mediator.max-event-age</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-mediator-outstanding-requests">canton.mediator.outstanding-requests</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-mediator-requests">canton.mediator.requests</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-mediator-sequencer-client-handler-actual-in-flight-event-batches">canton.mediator.sequencer-client.handler.actual-in-flight-event-batches</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-mediator-sequencer-client-handler-max-in-flight-event-batches">canton.mediator.sequencer-client.handler.max-in-flight-event-batches</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-mediator-sequencer-client-submissions-dropped">canton.mediator.sequencer-client.submissions.dropped</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-mediator-sequencer-client-submissions-in-flight">canton.mediator.sequencer-client.submissions.in-flight</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-mediator-sequencer-client-submissions-overloaded">canton.mediator.sequencer-client.submissions.overloaded</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-mediator-sequencer-client-submissions-sends">canton.mediator.sequencer-client.submissions.sends</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-mediator-sequencer-client-submissions-sequencing">canton.mediator.sequencer-client.submissions.sequencing</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-sequencer-block-event-bytes">canton.sequencer.block.event-bytes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-sequencer-block-events">canton.sequencer.block.events</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-sequencer-block-height">canton.sequencer.block.height</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-sequencer-db-storage-storage">canton.sequencer.db-storage.&lt;storage&gt;</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-sequencer-db-storage-storage-load">canton.sequencer.db-storage.&lt;storage&gt;.load</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-sequencer-db-storage-alerts-multi-domain-event-log">canton.sequencer.db-storage.alerts.multi-domain-event-log</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-sequencer-db-storage-alerts-single-dimension-event-log">canton.sequencer.db-storage.alerts.single-dimension-event-log</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-sequencer-db-storage-general-executor-exectime">canton.sequencer.db-storage.general.executor.exectime</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-sequencer-db-storage-general-executor-load">canton.sequencer.db-storage.general.executor.load</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-sequencer-db-storage-general-executor-queued">canton.sequencer.db-storage.general.executor.queued</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-sequencer-db-storage-general-executor-running">canton.sequencer.db-storage.general.executor.running</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-sequencer-db-storage-general-executor-waittime">canton.sequencer.db-storage.general.executor.waittime</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-sequencer-db-storage-locks-executor-exectime">canton.sequencer.db-storage.locks.executor.exectime</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-sequencer-db-storage-locks-executor-load">canton.sequencer.db-storage.locks.executor.load</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-sequencer-db-storage-locks-executor-queued">canton.sequencer.db-storage.locks.executor.queued</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-sequencer-db-storage-locks-executor-running">canton.sequencer.db-storage.locks.executor.running</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-sequencer-db-storage-locks-executor-waittime">canton.sequencer.db-storage.locks.executor.waittime</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-sequencer-db-storage-write-executor-exectime">canton.sequencer.db-storage.write.executor.exectime</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-sequencer-db-storage-write-executor-load">canton.sequencer.db-storage.write.executor.load</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-sequencer-db-storage-write-executor-queued">canton.sequencer.db-storage.write.executor.queued</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-sequencer-db-storage-write-executor-running">canton.sequencer.db-storage.write.executor.running</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-sequencer-db-storage-write-executor-waittime">canton.sequencer.db-storage.write.executor.waittime</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-sequencer-max-event-age">canton.sequencer.max-event-age</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-sequencer-processed">canton.sequencer.processed</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-sequencer-processed-bytes">canton.sequencer.processed-bytes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-sequencer-sequencer-client-handler-actual-in-flight-event-batches">canton.sequencer.sequencer-client.handler.actual-in-flight-event-batches</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-sequencer-sequencer-client-handler-max-in-flight-event-batches">canton.sequencer.sequencer-client.handler.max-in-flight-event-batches</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-sequencer-sequencer-client-submissions-dropped">canton.sequencer.sequencer-client.submissions.dropped</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-sequencer-sequencer-client-submissions-in-flight">canton.sequencer.sequencer-client.submissions.in-flight</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-sequencer-sequencer-client-submissions-overloaded">canton.sequencer.sequencer-client.submissions.overloaded</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-sequencer-sequencer-client-submissions-sends">canton.sequencer.sequencer-client.submissions.sends</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-sequencer-sequencer-client-submissions-sequencing">canton.sequencer.sequencer-client.submissions.sequencing</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-sequencer-subscriptions">canton.sequencer.subscriptions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-sequencer-time-requests">canton.sequencer.time-requests</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-sequencer-traffic-control-event-delivered-cost">canton.sequencer.traffic-control.event-delivered-cost</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-sequencer-traffic-control-event-received-size">canton.sequencer.traffic-control.event-received-size</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-sequencer-traffic-control-event-rejected-cost">canton.sequencer.traffic-control.event-rejected-cost</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-topology-manager-sequencer-client-handler-actual-in-flight-event-batches">canton.topology-manager.sequencer-client.handler.actual-in-flight-event-batches</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-topology-manager-sequencer-client-handler-max-in-flight-event-batches">canton.topology-manager.sequencer-client.handler.max-in-flight-event-batches</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-topology-manager-sequencer-client-submissions-dropped">canton.topology-manager.sequencer-client.submissions.dropped</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-topology-manager-sequencer-client-submissions-in-flight">canton.topology-manager.sequencer-client.submissions.in-flight</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-topology-manager-sequencer-client-submissions-overloaded">canton.topology-manager.sequencer-client.submissions.overloaded</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-topology-manager-sequencer-client-submissions-sends">canton.topology-manager.sequencer-client.submissions.sends</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#canton-topology-manager-sequencer-client-submissions-sequencing">canton.topology-manager.sequencer-client.submissions.sequencing</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/monitoring.html#health-metrics">Health Metrics</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-health-status">daml_health_status</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/monitoring.html#grpc-metrics">gRPC Metrics</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-grpc-server-duration-seconds">daml_grpc_server_duration_seconds</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-grpc-server-messages-sent-total">daml_grpc_server_messages_sent_total</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-grpc-server-messages-received-total">daml_grpc_server_messages_received_total</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-grpc-server-started-total">daml_grpc_server_started_total</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-grpc-server-handled-total">daml_grpc_server_handled_total</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-grpc-server-messages-sent-bytes">daml_grpc_server_messages_sent_bytes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-grpc-server-messages-received-bytes">daml_grpc_server_messages_received_bytes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/monitoring.html#http-metrics">HTTP Metrics</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-http-requests-duration-seconds">daml_http_requests_duration_seconds</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-http-requests-total">daml_http_requests_total</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-http-websocket-messages-received-total">daml_http_websocket_messages_received_total</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-http-websocket-messages-sent-total">daml_http_websocket_messages_sent_total</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-http-requests-payload-bytes">daml_http_requests_payload_bytes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-http-responses-payload-bytes">daml_http_responses_payload_bytes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-http-websocket-messages-received-bytes">daml_http_websocket_messages_received_bytes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-http-websocket-messages-sent-bytes">daml_http_websocket_messages_sent_bytes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/monitoring.html#pruning-metrics">Pruning Metrics</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-services-pruning-prune-started-total">daml_services_pruning_prune_started_total</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#daml-services-pruning-prune-completed-total">daml_services_pruning_prune_completed_total</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/monitoring.html#jvm-metrics">JVM Metrics</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#runtime-jvm-gc-time">runtime_jvm_gc_time</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#runtime-jvm-gc-count">runtime_jvm_gc_count</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#runtime-jvm-memory-area">runtime_jvm_memory_area</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/monitoring.html#runtime-jvm-memory-pool">runtime_jvm_memory_pool</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../canton/usermanual/monitoring.html#logging">Logging</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/monitoring.html#viewing-logs">Viewing Logs</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/monitoring.html#detailed-logging">Detailed Logging</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../canton/usermanual/monitoring.html#tracing">Tracing</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/monitoring.html#sampling">Sampling</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/monitoring.html#known-limitations">Known Limitations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/monitoring.html#traces">Traces</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../canton/usermanual/monitoring.html#node-health-status">Node Health Status</a></li>
<li class="toctree-l2"><a class="reference internal" href="../canton/usermanual/monitoring.html#health-checks">Health Checks</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/monitoring.html#grpc-health-check-service">gRPC Health Check Service</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/monitoring.html#http-health-check">HTTP Health Check</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../canton/usermanual/monitoring.html#health-dumps">Health Dumps</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/monitoring.html#remote-health-dumps">Remote Health Dumps</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../canton/usermanual/example_monitoring_setup.html">Example Monitoring Setup</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/example_monitoring_setup.html#container-setup">Container Setup</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/example_monitoring_setup.html#intended-use">Intended Use</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/example_monitoring_setup.html#network-configuration">Network Configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/example_monitoring_setup.html#postgres-setup">Postgres Setup</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/example_monitoring_setup.html#synchronization-domain-setup">Synchronization Domain Setup</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/example_monitoring_setup.html#participant-setup">Participant Setup</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/example_monitoring_setup.html#logstash">Logstash</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/example_monitoring_setup.html#elasticsearch">Elasticsearch</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/example_monitoring_setup.html#kibana">Kibana</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/example_monitoring_setup.html#cadvisor">cAdvisor</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/example_monitoring_setup.html#prometheus">Prometheus</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/example_monitoring_setup.html#grafana">Grafana</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/example_monitoring_setup.html#dependencies">Dependencies</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/example_monitoring_setup.html#docker-images">Docker Images</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/example_monitoring_setup.html#running-docker-compose">Running Docker Compose</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/example_monitoring_setup.html#connecting-to-nodes">Connecting to Nodes</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/example_monitoring_setup.html#remote-configurations">Remote Configurations</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/example_monitoring_setup.html#getting-started">Getting Started</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/example_monitoring_setup.html#kibana-log-monitoring">Kibana Log Monitoring</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/example_monitoring_setup.html#grafana-metric-monitoring">Grafana Metric Monitoring</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/example_monitoring_setup.html#monitoring-choices">Monitoring Choices</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/example_monitoring_setup.html#use-docker-log-drivers">Use Docker Log Drivers</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/example_monitoring_setup.html#use-gelf-docker-log-driver">Use GELF Docker Log Driver</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/example_monitoring_setup.html#use-logstash">Use Logstash</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/example_monitoring_setup.html#use-elasticsearch-kibana">Use Elasticsearch/Kibana</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/example_monitoring_setup.html#use-prometheus-grafana">Use Prometheus/Grafana</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/example_monitoring_setup.html#logging-improvements">Logging Improvements</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../canton/usermanual/monitoring_glossary.html">Glossary</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/monitoring_glossary.html#cadvisor">cAdvisor</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/monitoring_glossary.html#docker-log-driver">Docker Log Driver</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/monitoring_glossary.html#docker-plugins">Docker Plugins</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/monitoring_glossary.html#ecs">ECS</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/monitoring_glossary.html#elasticsearch">Elasticsearch</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/monitoring_glossary.html#elk">ELK</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/monitoring_glossary.html#gelf">GELF</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/monitoring_glossary.html#grafana">Grafana</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/monitoring_glossary.html#graylog">Graylog</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/monitoring_glossary.html#logstash">Logstash</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/monitoring_glossary.html#loki">Loki</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/monitoring_glossary.html#loki-log-driver">Loki Log Driver</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/monitoring_glossary.html#minio">MinIO</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/monitoring_glossary.html#opentelemetry">OpenTelemetry</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/monitoring_glossary.html#prometheus">Prometheus</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/monitoring_glossary.html#syslog">Syslog</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../query/pqs-user-guide.html">Participant Query Store</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../query/pqs-user-guide.html#introduction">Introduction</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../query/pqs-user-guide.html#audience">Audience</a></li>
<li class="toctree-l3"><a class="reference internal" href="../query/pqs-user-guide.html#purpose">Purpose</a></li>
<li class="toctree-l3"><a class="reference internal" href="../query/pqs-user-guide.html#operational-architecture">Operational Architecture</a></li>
<li class="toctree-l3"><a class="reference internal" href="../query/pqs-user-guide.html#key-feature-summary">Key Feature Summary</a></li>
<li class="toctree-l3"><a class="reference internal" href="../query/pqs-user-guide.html#sections">Sections</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../query/pqs-user-guide.html#getting-started">Getting Started</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../query/pqs-user-guide.html#pre-requisites">Pre-requisites</a></li>
<li class="toctree-l3"><a class="reference internal" href="../query/pqs-user-guide.html#running-pqs">Running PQS</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../query/pqs-user-guide.html#daml-platform-support">Daml Platform Support</a></li>
<li class="toctree-l4"><a class="reference internal" href="../query/pqs-user-guide.html#preparing-the-database">Preparing the Database</a></li>
<li class="toctree-l4"><a class="reference internal" href="../query/pqs-user-guide.html#running-the-pipeline">Running the Pipeline</a></li>
<li class="toctree-l4"><a class="reference internal" href="../query/pqs-user-guide.html#auth">Auth</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../query/pqs-user-guide.html#database">Database</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../query/pqs-user-guide.html#ledger-source">Ledger Source</a></li>
<li class="toctree-l3"><a class="reference internal" href="../query/pqs-user-guide.html#transaction-data-source">Transaction Data Source</a></li>
<li class="toctree-l3"><a class="reference internal" href="../query/pqs-user-guide.html#postgresql-schema">PostgreSQL Schema</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../query/pqs-user-guide.html#objectives">Objectives</a></li>
<li class="toctree-l4"><a class="reference internal" href="../query/pqs-user-guide.html#design">Design</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../query/pqs-user-guide.html#configuration">Configuration</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../query/pqs-user-guide.html#pqs-configuration">PQS Configuration</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../query/pqs-user-guide.html#applying-configuration-changes">Applying Configuration Changes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../query/pqs-user-guide.html#contract-filters">Contract Filters</a></li>
<li class="toctree-l3"><a class="reference internal" href="../query/pqs-user-guide.html#party-filtering">Party Filtering</a></li>
<li class="toctree-l3"><a class="reference internal" href="../query/pqs-user-guide.html#java-virtual-machine-jvm-configuration">Java Virtual Machine (JVM) Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../query/pqs-user-guide.html#postgresql-configuration">PostgreSQL Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../query/pqs-user-guide.html#postgresql-users">PostgreSQL Users</a></li>
<li class="toctree-l3"><a class="reference internal" href="../query/pqs-user-guide.html#host-infrastructure">Host Infrastructure</a></li>
<li class="toctree-l3"><a class="reference internal" href="../query/pqs-user-guide.html#host-environment">Host Environment</a></li>
<li class="toctree-l3"><a class="reference internal" href="../query/pqs-user-guide.html#testing">Testing</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../query/pqs-user-guide.html#resilience">Resilience</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../query/pqs-user-guide.html#high-availability">High Availability</a></li>
<li class="toctree-l3"><a class="reference internal" href="../query/pqs-user-guide.html#retries">Retries</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../query/pqs-user-guide.html#configuration-1">Configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="../query/pqs-user-guide.html#logging">Logging</a></li>
<li class="toctree-l4"><a class="reference internal" href="../query/pqs-user-guide.html#metrics">Metrics</a></li>
<li class="toctree-l4"><a class="reference internal" href="../query/pqs-user-guide.html#retry-counters-reset">Retry Counters Reset</a></li>
<li class="toctree-l4"><a class="reference internal" href="../query/pqs-user-guide.html#exit-codes">Exit codes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../query/pqs-user-guide.html#ledger-streaming-recovery">Ledger Streaming &amp; Recovery</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../query/pqs-user-guide.html#read-api">Read API</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../query/pqs-user-guide.html#how-the-ledger-models-time">How The Ledger Models Time</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../query/pqs-user-guide.html#offset">Offset</a></li>
<li class="toctree-l4"><a class="reference internal" href="../query/pqs-user-guide.html#ledger-time">Ledger Time</a></li>
<li class="toctree-l4"><a class="reference internal" href="../query/pqs-user-guide.html#tranasction-id">Tranasction ID</a></li>
<li class="toctree-l4"><a class="reference internal" href="../query/pqs-user-guide.html#which-should-i-use">Which should I use?</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../query/pqs-user-guide.html#time-model">Time Model</a></li>
<li class="toctree-l3"><a class="reference internal" href="../query/pqs-user-guide.html#offset-management">Offset Management</a></li>
<li class="toctree-l3"><a class="reference internal" href="../query/pqs-user-guide.html#jsonb-encoding">JSONB Encoding</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../query/pqs-user-guide.html#primitive-types">Primitive Types</a></li>
<li class="toctree-l4"><a class="reference internal" href="../query/pqs-user-guide.html#user-defined-types">User-Defined Types</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../query/pqs-user-guide.html#querying-patterns">Querying Patterns</a></li>
<li class="toctree-l3"><a class="reference internal" href="../query/pqs-user-guide.html#summary-functions">Summary functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../query/pqs-user-guide.html#lookup-functions">Lookup functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../query/pqs-user-guide.html#optimization">Optimization</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../query/pqs-user-guide.html#indexing">Indexing</a></li>
<li class="toctree-l4"><a class="reference internal" href="../query/pqs-user-guide.html#pagination">Pagination</a></li>
<li class="toctree-l4"><a class="reference internal" href="../query/pqs-user-guide.html#psql-tips">psql Tips</a></li>
<li class="toctree-l4"><a class="reference internal" href="../query/pqs-user-guide.html#query-analysis">Query Analysis</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../query/pqs-user-guide.html#pruning">Pruning</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../query/pqs-user-guide.html#data-deletion-and-changes">Data Deletion and Changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../query/pqs-user-guide.html#constraints">Constraints</a></li>
<li class="toctree-l3"><a class="reference internal" href="../query/pqs-user-guide.html#pruning-from-the-command-line">Pruning from the command line</a></li>
<li class="toctree-l3"><a class="reference internal" href="../query/pqs-user-guide.html#example-with-timestamp-and-duration">Example with Timestamp and Duration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../query/pqs-user-guide.html#pruning-from-sql">Pruning from SQL</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../query/pqs-user-guide.html#authentication">Authentication</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../query/pqs-user-guide.html#audience-based-token">Audience-Based Token</a></li>
<li class="toctree-l3"><a class="reference internal" href="../query/pqs-user-guide.html#scope-based-token">Scope-Based Token</a></li>
<li class="toctree-l3"><a class="reference internal" href="../query/pqs-user-guide.html#custom-daml-claims-tokens">Custom Daml Claims Tokens</a></li>
<li class="toctree-l3"><a class="reference internal" href="../query/pqs-user-guide.html#static-access-token">Static Access Token</a></li>
<li class="toctree-l3"><a class="reference internal" href="../query/pqs-user-guide.html#ledger-api-users-and-daml-parties">Ledger API Users and Daml Parties</a></li>
<li class="toctree-l3"><a class="reference internal" href="../query/pqs-user-guide.html#token-expiry">Token expiry</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../query/pqs-user-guide.html#history-slicing">History Slicing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../query/pqs-user-guide.html#reset-procedure">Reset Procedure</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../query/pqs-user-guide.html#reset">Reset</a></li>
<li class="toctree-l3"><a class="reference internal" href="../query/pqs-user-guide.html#constraints-1">Constraints</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../query/pqs-user-guide.html#logging-1">Logging</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../query/pqs-user-guide.html#log-level">Log Level</a></li>
<li class="toctree-l3"><a class="reference internal" href="../query/pqs-user-guide.html#per-logger-log-level">Per-Logger Log Level</a></li>
<li class="toctree-l3"><a class="reference internal" href="../query/pqs-user-guide.html#log-pattern">Log Pattern</a></li>
<li class="toctree-l3"><a class="reference internal" href="../query/pqs-user-guide.html#log-format-for-console-output">Log Format for Console Output</a></li>
<li class="toctree-l3"><a class="reference internal" href="../query/pqs-user-guide.html#log-format-for-file-output">Log Format for File Output</a></li>
<li class="toctree-l3"><a class="reference internal" href="../query/pqs-user-guide.html#destination-file-for-file-output">Destination File for File Output</a></li>
<li class="toctree-l3"><a class="reference internal" href="../query/pqs-user-guide.html#log-format-and-log-pattern-combinations">Log Format and Log Pattern Combinations</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../query/pqs-user-guide.html#database-schema-evolution">Database Schema Evolution</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../query/pqs-user-guide.html#baselining">Baselining</a></li>
<li class="toctree-l3"><a class="reference internal" href="../query/pqs-user-guide.html#schema-upgrades">Schema Upgrades</a></li>
<li class="toctree-l3"><a class="reference internal" href="../query/pqs-user-guide.html#schema-dump">Schema Dump</a></li>
<li class="toctree-l3"><a class="reference internal" href="../query/pqs-user-guide.html#monitoring-progress">Monitoring Progress</a></li>
<li class="toctree-l3"><a class="reference internal" href="../query/pqs-user-guide.html#troubleshooting">Troubleshooting</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../query/pqs-user-guide.html#problem-1-an-application-s-flyway-conflicts-with-pqs-s-flyway">Problem 1: An application’s Flyway conflicts with PQS’s Flyway</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../query/pqs-user-guide.html#mapping-daml-models-to-relational-world">Mapping Daml Models to Relational World</a></li>
<li class="toctree-l3"><a class="reference internal" href="../query/pqs-user-guide.html#considerations">Considerations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../query/pqs-user-guide.html#definitions">Definitions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../query/pqs-user-guide.html#queries-results">Queries &amp; Results</a></li>
<li class="toctree-l3"><a class="reference internal" href="../query/pqs-user-guide.html#performance-optimizations">Performance Optimizations</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../query/pqs-user-guide.html#materialized-views">Materialized Views</a></li>
<li class="toctree-l4"><a class="reference internal" href="../query/pqs-user-guide.html#custom-triggers">Custom Triggers</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../query/pqs-user-guide.html#trade-offs-summary">Trade-Offs Summary</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../query/pqs-user-guide.html#observability">Observability</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../query/pqs-user-guide.html#underlying-mechanism">Underlying Mechanism</a></li>
<li class="toctree-l3"><a class="reference internal" href="../query/pqs-user-guide.html#provided-metrics">Provided Metrics</a></li>
<li class="toctree-l3"><a class="reference internal" href="../query/pqs-user-guide.html#example-dashboard">Example Dashboard</a></li>
<li class="toctree-l3"><a class="reference internal" href="../query/pqs-user-guide.html#health-check">Health Check</a></li>
<li class="toctree-l3"><a class="reference internal" href="../query/pqs-user-guide.html#tracing-of-pipeline-execution">Tracing of Pipeline Execution</a></li>
<li class="toctree-l3"><a class="reference internal" href="../query/pqs-user-guide.html#trace-context-propagation">Trace Context Propagation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../query/pqs-user-guide.html#redaction">Redaction</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../query/pqs-user-guide.html#conditions-for-redaction">Conditions for Redaction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../query/pqs-user-guide.html#examples">Examples</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../query/pqs-user-guide.html#redacting-an-archived-contract">Redacting an Archived Contract</a></li>
<li class="toctree-l4"><a class="reference internal" href="../query/pqs-user-guide.html#redacting-a-choice-exercise">Redacting a Choice Exercise</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../query/pqs-user-guide.html#accessing-redaction-information">Accessing Redaction Information</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../canton/usermanual/identity_management.html">Identity Management</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../canton/usermanual/identity_management.html#introduction">Introduction</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/identity_management.html#what-is-a-canton-identity">What is a Canton Identity?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/identity_management.html#unique-identifier">Unique Identifier</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/identity_management.html#topology-transactions">Topology Transactions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/identity_management.html#legal-identities">Legal Identities</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/identity_management.html#life-of-a-party">Life of a Party</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/identity_management.html#participant-onboarding">Participant Onboarding</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/identity_management.html#default-initialization">Default Initialization</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/identity_management.html#identity-setup-guide">Identity Setup Guide</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../canton/usermanual/identity_management.html#user-identity-management">User Identity Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="../canton/usermanual/identity_management.html#cookbook">Cookbook</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/identity_management.html#manage-users">Manage Users</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/identity_management.html#create">Create</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/identity_management.html#update">Update</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/identity_management.html#inspect">Inspect</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/identity_management.html#decommission">Decommission</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/identity_management.html#configure-a-default-participant-admin">Configure a default Participant Admin</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/identity_management.html#adding-a-new-party-to-a-participant">Adding a new Party to a Participant</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/identity_management.html#client-controlled-party">Client Controlled Party</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/identity_management.html#replicate-party-to-another-participant-node">Replicate Party to Another Participant Node</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/identity_management.html#party-on-multiple-nodes">Party on Multiple Nodes</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../operate-a-daml-ledger/common-tasks/index.html">Common Operational Tasks</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../canton/usermanual/packagemanagement.html">Manage DARs and Packages</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/packagemanagement.html#uploading-dars">Uploading DARs</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/packagemanagement.html#inspecting-dars-and-packages">Inspecting DARs and Packages</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/packagemanagement.html#understanding-package-vetting">Understanding Package Vetting</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/packagemanagement.html#dar-vetting-lifecycle">DAR vetting lifecycle</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/packagemanagement.html#advanced-vetting-concepts">Advanced vetting concepts</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../canton/usermanual/upgrading.html">Upgrade To a New Release</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/upgrading.html#upgrade-canton-binary">Upgrade Canton Binary</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/upgrading.html#preparation">Preparation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/upgrading.html#back-up-your-database">Back Up Your Database</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/upgrading.html#test-your-configuration">Test your Configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/upgrading.html#migrating-the-database">Migrating the Database</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/upgrading.html#test-your-upgrade">Test Your Upgrade</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/upgrading.html#version-specific-notes">Version Specific Notes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/upgrading.html#change-the-canton-protocol-version">Change the Canton Protocol Version</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/upgrading.html#upgrade-the-synchronization-domain-to-a-new-protocol-version">Upgrade the Synchronization Domain to a new Protocol Version</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/upgrading.html#hard-synchronization-domain-migration">Hard Synchronization Domain Migration</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/upgrading.html#one-step-migration">One-Step Migration</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/upgrading.html#one-step-migration-recipe-for-2-10">One-Step Migration Recipe for 2.10</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../canton/usermanual/security.html">Security &amp; Key Management</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/security.html#cryptographic-key-usage">Cryptographic Key Usage</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/security.html#supported-cryptographic-schemes-in-canton">Supported Cryptographic Schemes in Canton</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/security.html#key-generation-and-storage">Key Generation and Storage</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/security.html#public-key-distribution-using-topology-management">Public Key Distribution using Topology Management</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/security.html#common-node-keys">Common Node Keys</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/security.html#participant-node-keys">Participant Node Keys</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/security.html#synchronization-domain-topology-manager-keys">Synchronization Domain Topology Manager Keys</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/security.html#sequencer-node-keys">Sequencer Node Keys</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/security.html#mediator-node-keys">Mediator Node Keys</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/security.html#synchronizer-domain-node-keys">Synchronizer Domain Node Keys</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/security.html#canton-console-keys">Canton Console Keys</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/security.html#cryptographic-key-management">Cryptographic Key Management</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/security.html#rotating-canton-node-keys">Rotating Canton Node Keys</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/security.html#deleting-canton-node-keys">Deleting Canton Node Keys</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/security.html#namespace-intermediate-key-management">Namespace Intermediate Key Management</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/security.html#moving-the-namespace-secret-key-to-offline-storage">Moving the Namespace Secret Key to Offline Storage</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/security.html#identifier-delegation-key-management">Identifier Delegation Key Management</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/security.html#ledger-api-authorization">Ledger-API Authorization</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../canton/usermanual/kms/kms.html">Key Management Service (KMS) Setup</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/kms/kms_setup.html">Canton Configuration of a KMS</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/kms/kms_aws_setup.html">Configure Amazon Web Services (AWS) KMS</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/kms/kms_gcp_setup.html">Configure Google Cloud Provider (GCP) KMS</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/kms/encrypted_private_key_storage/encrypted_private_key_storage.html">Configure Encrypted Private Key Storage with a Key Management Service (KMS)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/kms/encrypted_private_key_storage/encrypted_private_key_storage_aws.html">Configure Encrypted Private Key Storage with AWS KMS</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/kms/encrypted_private_key_storage/encrypted_private_key_storage_gcp.html">Configure Encrypted Private Key Storage with GCP KMS</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/kms/external_key_storage/external_key_storage.html">Configure External Key Storage with a Key Management Service (KMS)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/kms/external_key_storage/external_key_storage_aws.html">Configure External Key Storage with AWS KMS</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/kms/external_key_storage/external_key_storage_gcp.html">Configure External Key Storage with GCP KMS</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/kms/external_key_storage/interoperability.html">Interoperability with other nodes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/kms/external_key_storage/participant_kms_migration/participant_kms_migration.html">Participant Node Migration to KMS</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/kms/external_key_storage/manual_kms_key_rotation.html">Manual KMS key rotation</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/kms/kms_driver_guide.html">Canton KMS Driver API Developer Guide</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/kms/kms_driver_guide.html#introduction">Introduction</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/kms/kms_driver_guide.html#kms-driver-api">KMS Driver API</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/kms/kms_driver_guide.html#develop-and-test-a-kms-driver">Develop and Test a KMS Driver</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/kms/kms_driver_guide.html#run-canton-with-a-kms-driver">Run Canton with a KMS Driver</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../canton/usermanual/performance.html">Scaling and Performance</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../canton/usermanual/performance.html#network-scaling">Network Scaling</a></li>
<li class="toctree-l2"><a class="reference internal" href="../canton/usermanual/performance.html#node-scaling">Node Scaling</a></li>
<li class="toctree-l2"><a class="reference internal" href="../canton/usermanual/performance.html#performance-and-sizing">Performance and Sizing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../canton/usermanual/performance.html#batching">Batching</a></li>
<li class="toctree-l2"><a class="reference internal" href="../canton/usermanual/performance.html#asynchronous-submissions">Asynchronous Submissions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../canton/usermanual/performance.html#storage-estimation">Storage Estimation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../canton/usermanual/performance.html#set-up-canton-to-get-the-best-performance">Set Up Canton to Get the Best Performance</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/performance.html#system-design-architecture">System Design / Architecture</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/performance.html#hardware-and-database">Hardware and Database</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/performance.html#configuration">Configuration</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../canton/usermanual/performance.html#model-tuning">Model Tuning</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/performance.html#reduce-the-number-of-views">Reduce the Number of Views</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/performance.html#strategy-for-protocol-version-7">Strategy for Protocol Version 7</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/performance.html#strategy-for-protocol-versions-5-and-lower">Strategy for Protocol Versions 5 and Lower</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/performance.html#reduce-ledger-events">Reduce Ledger Events</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../operate-a-daml-ledger/advanced-operations/index.html">Advanced Ledger Operations</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../canton/usermanual/manage_domains.html">Manage Domains</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/manage_domains.html#permissioned-synchronization-domains">Permissioned Synchronization Domains</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/manage_domains.html#synchronization-domain-rules">Synchronization Domain Rules</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/manage_domains.html#dynamic-synchronization-domain-parameters">Dynamic synchronization domain parameters</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/manage_domains.html#recover-from-a-small-max-request-size">Recover From a Small Max Request Size</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../canton/usermanual/manage_domain_entities.html">Manage Domain Entities</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/manage_domain_entities.html#manual-vs-automatic-initialization">Manual vs Automatic Initialization</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/manage_domain_entities.html#keys-initialization">Keys Initialization</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/manage_domain_entities.html#embedded-synchronization-domain-initialization">Embedded Synchronization Domain Initialization</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/manage_domain_entities.html#set-up-a-distributed-synchronization-domain-with-a-single-console">Set up a Distributed Synchronization Domain With a Single Console</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/manage_domain_entities.html#set-up-a-distributed-synchronization-domain-with-separate-consoles">Set Up a Distributed Synchronization Domain With Separate Consoles</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/manage_domain_entities.html#add-new-sequencers-to-a-distributed-synchronization-domain">Add New Sequencers to a Distributed Synchronization Domain</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../canton/usermanual/manage_participants.html">Manage Participants</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/manage_participants.html#manual-vs-automatic-identity-initialization">Manual vs Automatic Identity Initialization</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/manage_participants.html#keys-initialization">Keys Initialization</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/manage_participants.html#participant-manual-initialization">Participant Manual Initialization</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../canton/usermanual/pruning.html">Ledger Pruning</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/pruning.html#enable-automatic-pruning">Enable Automatic Pruning</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/pruning.html#schedule-format">Schedule format</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/pruning.html#advanced-schedule-formatting">Advanced schedule formatting</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/pruning.html#monitor-pruning-progress">Monitor Pruning Progress</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/pruning.html#best-practices">Best Practices</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/pruning.html#current-limitations">Current Limitations</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../ops/pruning.html">Participant Pruning</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../ops/pruning.html#impacts-on-daml-applications">Impacts on Daml Applications</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ops/pruning.html#how-the-daml-ledger-api-is-affected">How the Daml Ledger API is Affected</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ops/pruning.html#other-limitations">Other Limitations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ops/pruning.html#how-pruning-affects-index-db-administration">How Pruning Affects Index DB Administration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ops/pruning.html#determine-a-suitable-pruning-offset">Determine a Suitable Pruning Offset</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../ops/metering.html">Participant Metering</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../ops/metering.html#generate-a-metering-report">Generate a Metering Report</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ops/metering.html#example">Example</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ops/metering.html#output">Output</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../canton/usermanual/apis.html">Api Configuration</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/apis.html#default-ports">Default Ports</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/apis.html#administration-api">Administration API</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/apis.html#tls-configuration">TLS Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/apis.html#keep-alive">Keep Alive</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/apis.html#max-inbound-message-size">Max Inbound Message Size</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/apis.html#participant-configuration">Participant Configuration</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/apis.html#ledger-api">Ledger Api</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/apis.html#synchronization-domain-configurations">Synchronization Domain Configurations</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/apis.html#public-api">Public API</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/apis.html#usage-of-native-libraries-by-netty">Usage of native libraries by Netty</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../canton/usermanual/connectivity.html">Sequencer Connections</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/connectivity.html#participant-connections">Participant Connections</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/connectivity.html#connect-using-macros">Connect Using Macros</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/connectivity.html#inspect-connections">Inspect Connections</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/connectivity.html#modify-connections">Modify Connections</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/connectivity.html#enable-and-disable-connections">Enable and Disable Connections</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/connectivity.html#mediator-and-synchronization-domain-manager">Mediator and Synchronization Domain Manager</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../canton/usermanual/repairing.html">Repair Nodes</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/repairing.html#preparation">Preparation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/repairing.html#importing-an-actual-ledger">Importing an actual Ledger</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/repairing.html#repairing-participants">Repairing Participants</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/repairing.html#recovering-from-a-lost-synchronization-domain">Recovering from a Lost Synchronization Domain</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/repairing.html#repairing-an-actual-topology">Repairing an actual Topology</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/repairing.html#repair-macros">Repair Macros</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/repairing.html#clone-identity">Clone Identity</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/repairing.html#importing-existing-contracts">Importing Existing Contracts</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../canton/usermanual/decommissioning.html">Decommission Nodes</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/decommissioning.html#decommissioning-a-participant-node">Decommissioning a Participant Node</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/decommissioning.html#prerequisites">Prerequisites</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/decommissioning.html#decommissioning-a-participant-once-the-prerequisites-are-met">Decommissioning a participant once the prerequisites are met</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/decommissioning.html#decommissioning-a-sequencer">Decommissioning a Sequencer</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/decommissioning.html#disconnecting-all-nodes-from-the-sequencer-to-be-decommissioned">Disconnecting all nodes from the sequencer to be decommissioned</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/decommissioning.html#decommissioning-the-sequencer">Decommissioning the sequencer</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/decommissioning.html#decommissioning-a-mediator">Decommissioning a Mediator</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../canton/usermanual/troubleshooting_guide.html">Troubleshooting Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../canton/usermanual/troubleshooting_guide.html#introduction">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../canton/usermanual/troubleshooting_guide.html#enable-information-gathering">Enable Information Gathering</a></li>
<li class="toctree-l2"><a class="reference internal" href="../canton/usermanual/troubleshooting_guide.html#key-knowledge">Key Knowledge</a></li>
<li class="toctree-l2"><a class="reference internal" href="../canton/usermanual/troubleshooting_guide.html#log-files">Log Files</a></li>
<li class="toctree-l2"><a class="reference internal" href="../canton/usermanual/troubleshooting_guide.html#using-lnav-to-view-log-files">Using LNAV to View Log Files</a></li>
<li class="toctree-l2"><a class="reference internal" href="../canton/usermanual/troubleshooting_guide.html#setup-issues">Setup Issues</a></li>
<li class="toctree-l2"><a class="reference internal" href="../canton/usermanual/troubleshooting_guide.html#timeout-errors">Timeout Errors</a></li>
<li class="toctree-l2"><a class="reference internal" href="../canton/usermanual/troubleshooting_guide.html#auth-errors">Auth Errors</a></li>
<li class="toctree-l2"><a class="reference internal" href="../canton/usermanual/troubleshooting_guide.html#disconnections">Disconnections</a></li>
<li class="toctree-l2"><a class="reference internal" href="../canton/usermanual/troubleshooting_guide.html#performance-issues">Performance Issues</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/troubleshooting_guide.html#how-to-measure-database-performance">How to Measure Database Performance</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/troubleshooting_guide.html#how-to-diagnose-slow-database-queries">How to Diagnose Slow Database Queries</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/troubleshooting_guide.html#how-to-find-the-bottleneck">How to find the Bottleneck</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/troubleshooting_guide.html#theory">Theory</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/troubleshooting_guide.html#practical">Practical</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../canton/usermanual/troubleshooting_guide.html#contention">Contention</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/troubleshooting_guide.html#why-do-you-get-contention">Why do you get contention</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/troubleshooting_guide.html#how-to-change-your-model-to-avoid-undesired-contention">How To Change Your Model To Avoid Undesired Contention</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/troubleshooting_guide.html#how-to-find-contention">How To Find Contention</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../canton/usermanual/troubleshooting_guide.html#use-bisection-to-narrow-down-the-root-cause">Use Bisection to Narrow Down the Root Cause</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../canton/usermanual/support_checklist.html">Support Checklist</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../canton/usermanual/support_checklist.html#remote-console-access">Remote Console Access</a></li>
<li class="toctree-l2"><a class="reference internal" href="../canton/usermanual/support_checklist.html#logging">Logging</a></li>
<li class="toctree-l2"><a class="reference internal" href="../canton/usermanual/support_checklist.html#metrics">Metrics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../canton/usermanual/support_checklist.html#configuration-and-patching">Configuration and Patching</a></li>
<li class="toctree-l2"><a class="reference internal" href="../canton/usermanual/support_checklist.html#database-access">Database Access</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Help</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../canton/reference/error_codes.html">Error Codes</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../canton/reference/error_codes.html#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../canton/reference/error_codes.html#glossary">Glossary</a></li>
<li class="toctree-l2"><a class="reference internal" href="../canton/reference/error_codes.html#anatomy-of-an-error">Anatomy of an Error</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#error-description">Error Description</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#additional-machine-readable-information">Additional Machine-Readable Information</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#prevent-security-leaks-in-error-codes">Prevent Security Leaks in Error Codes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#work-with-error-codes">Work With Error Codes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../canton/reference/error_codes.html#error-codes-in-canton-operations">Error Codes In Canton Operations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../canton/reference/error_codes.html#error-categories">Error Categories</a></li>
<li class="toctree-l2"><a class="reference internal" href="../canton/reference/error_codes.html#machine-readable-information">Machine Readable Information</a></li>
<li class="toctree-l2"><a class="reference internal" href="../canton/reference/error_codes.html#example">Example</a></li>
<li class="toctree-l2"><a class="reference internal" href="../canton/reference/error_codes.html#error-categories-inventory">Error Categories Inventory</a></li>
<li class="toctree-l2"><a class="reference internal" href="../canton/reference/error_codes.html#error-codes-inventory-daml">Error Codes Inventory - Daml</a></li>
<li class="toctree-l2"><a class="reference internal" href="../canton/reference/error_codes.html#error-codes-inventory-canton">Error Codes Inventory - Canton</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#grpcerrors">1. GrpcErrors</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#aborted-due-to-shutdown">ABORTED_DUE_TO_SHUTDOWN</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#authorizationcheckserrors">2. AuthorizationChecksErrors</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#access-token-expired">ACCESS_TOKEN_EXPIRED</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#internal-authorization-error">INTERNAL_AUTHORIZATION_ERROR</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#invalid-token">INVALID_TOKEN</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#permission-denied">PERMISSION_DENIED</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#stale-stream-authorization">STALE_STREAM_AUTHORIZATION</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#unauthenticated">UNAUTHENTICATED</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#participanterrorgroup">3. ParticipantErrorGroup</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#errors">3.1. Errors</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#acs-commitment-internal-error">ACS_COMMITMENT_INTERNAL_ERROR</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#mismatcherror">3.1.1. MismatchError</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#acs-commitment-alarm">ACS_COMMITMENT_ALARM</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#acs-commitment-mismatch">ACS_COMMITMENT_MISMATCH</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#acs-mismatch-no-shared-contracts">ACS_MISMATCH_NO_SHARED_CONTRACTS</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#degradationerror">3.1.2. DegradationError</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#acs-commitment-degradation">ACS_COMMITMENT_DEGRADATION</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#acs-commitment-degradation-with-ineffective-config">ACS_COMMITMENT_DEGRADATION_WITH_INEFFECTIVE_CONFIG</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#ledgerapierrorgroup">3.2. LedgerApiErrorGroup</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#commandexecutionerrors">3.2.1. CommandExecutionErrors</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#failed-to-determine-ledger-time">FAILED_TO_DETERMINE_LEDGER_TIME</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#interpretation-time-exceeded">INTERPRETATION_TIME_EXCEEDED</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#package">3.2.1.1. Package</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#allowed-language-versions">ALLOWED_LANGUAGE_VERSIONS</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#package-validation-failed">PACKAGE_VALIDATION_FAILED</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#preprocessing">3.2.1.2. Preprocessing</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#command-preprocessing-failed">COMMAND_PREPROCESSING_FAILED</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#interpreter">3.2.1.3. Interpreter</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#contract-does-not-implement-interface">CONTRACT_DOES_NOT_IMPLEMENT_INTERFACE</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#contract-does-not-implement-requiring-interface">CONTRACT_DOES_NOT_IMPLEMENT_REQUIRING_INTERFACE</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#contract-id-comparability">CONTRACT_ID_COMPARABILITY</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#contract-id-in-contract-key">CONTRACT_ID_IN_CONTRACT_KEY</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#contract-not-active">CONTRACT_NOT_ACTIVE</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#create-empty-contract-key-maintainers">CREATE_EMPTY_CONTRACT_KEY_MAINTAINERS</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#daml-authorization-error">DAML_AUTHORIZATION_ERROR</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#daml-interpretation-error">DAML_INTERPRETATION_ERROR</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#daml-interpreter-invalid-argument">DAML_INTERPRETER_INVALID_ARGUMENT</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#disallowed-interface-exercise">DISALLOWED_INTERFACE_EXERCISE</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#disclosed-contract-key-hashing-error">DISCLOSED_CONTRACT_KEY_HASHING_ERROR</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#fetch-empty-contract-key-maintainers">FETCH_EMPTY_CONTRACT_KEY_MAINTAINERS</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#interpretation-dev-error">INTERPRETATION_DEV_ERROR</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#interpretation-user-error">INTERPRETATION_USER_ERROR</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#non-comparable-values">NON_COMPARABLE_VALUES</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#template-precondition-violated">TEMPLATE_PRECONDITION_VIOLATED</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#unhandled-exception">UNHANDLED_EXCEPTION</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#value-nesting">VALUE_NESTING</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#wrongly-typed-contract">WRONGLY_TYPED_CONTRACT</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#lookuperrors">3.2.1.3.1. LookupErrors</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#contract-key-not-found">CONTRACT_KEY_NOT_FOUND</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#upgradeerror">3.2.1.3.2. UpgradeError</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#contract-not-upgradable">CONTRACT_NOT_UPGRADABLE</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#interpretation-upgrade-error-downgrade-drop-defined-field">INTERPRETATION_UPGRADE_ERROR_DOWNGRADE_DROP_DEFINED_FIELD</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#interpretation-upgrade-error-downgrade-failed">INTERPRETATION_UPGRADE_ERROR_DOWNGRADE_FAILED</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#interpretation-upgrade-error-validation-failed">INTERPRETATION_UPGRADE_ERROR_VALIDATION_FAILED</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#interpretation-upgrade-error-view-mismatch">INTERPRETATION_UPGRADE_ERROR_VIEW_MISMATCH</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#adminserviceserrorgroup">3.2.2. AdminServicesErrorGroup</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#partymanagementserviceerrors">3.2.2.1. PartyManagementServiceErrors</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#concurrent-party-details-update-detected">CONCURRENT_PARTY_DETAILS_UPDATE_DETECTED</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#internal-party-record-already-exists">INTERNAL_PARTY_RECORD_ALREADY_EXISTS</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#internal-party-record-not-found">INTERNAL_PARTY_RECORD_NOT_FOUND</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#invalid-party-details-update-request">INVALID_PARTY_DETAILS_UPDATE_REQUEST</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#max-party-details-annotations-size-exceeded">MAX_PARTY_DETAILS_ANNOTATIONS_SIZE_EXCEEDED</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#party-not-found">PARTY_NOT_FOUND</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#usermanagementserviceerrors">3.2.2.2. UserManagementServiceErrors</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#concurrent-user-update-detected">CONCURRENT_USER_UPDATE_DETECTED</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#invalid-user-update-request">INVALID_USER_UPDATE_REQUEST</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#max-user-annotations-size-exceeded">MAX_USER_ANNOTATIONS_SIZE_EXCEEDED</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#too-many-user-rights">TOO_MANY_USER_RIGHTS</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#user-already-exists">USER_ALREADY_EXISTS</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#user-not-found">USER_NOT_FOUND</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#identityproviderconfigserviceerrors-canton-error-codes">3.2.2.3. IdentityProviderConfigServiceErrors</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#idp-config-already-exists-canton-error-codes">IDP_CONFIG_ALREADY_EXISTS</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#idp-config-by-issuer-not-found-canton-error-codes">IDP_CONFIG_BY_ISSUER_NOT_FOUND</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#idp-config-issuer-already-exists-canton-error-codes">IDP_CONFIG_ISSUER_ALREADY_EXISTS</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#idp-config-not-found-canton-error-codes">IDP_CONFIG_NOT_FOUND</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#invalid-identity-provider-update-request">INVALID_IDENTITY_PROVIDER_UPDATE_REQUEST</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#too-many-identity-provider-configs">TOO_MANY_IDENTITY_PROVIDER_CONFIGS</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#adminserviceerrors">3.2.3. AdminServiceErrors</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#configuration-entry-rejected">CONFIGURATION_ENTRY_REJECTED</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#internally-invalid-key">INTERNALLY_INVALID_KEY</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#package-upload-rejected">PACKAGE_UPLOAD_REJECTED</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#consistencyerrors">3.2.4. ConsistencyErrors</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#contract-not-found">CONTRACT_NOT_FOUND</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#disclosed-contract-invalid">DISCLOSED_CONTRACT_INVALID</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#duplicate-command">DUPLICATE_COMMAND</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#duplicate-contract-key">DUPLICATE_CONTRACT_KEY</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#inconsistent">INCONSISTENT</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#inconsistent-contracts">INCONSISTENT_CONTRACTS</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#inconsistent-contract-key">INCONSISTENT_CONTRACT_KEY</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#invalid-ledger-time">INVALID_LEDGER_TIME</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#submission-already-in-flight">SUBMISSION_ALREADY_IN_FLIGHT</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#packageserviceerrors">3.2.5. PackageServiceErrors</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#dar-not-self-consistent">DAR_NOT_SELF_CONSISTENT</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#dar-not-valid-upgrade">DAR_NOT_VALID_UPGRADE</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#dar-validation-error">DAR_VALIDATION_ERROR</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#known-dar-version">KNOWN_DAR_VERSION</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#package-service-internal-error">PACKAGE_SERVICE_INTERNAL_ERROR</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#shutdown-interrupted-package-vetting">SHUTDOWN_INTERRUPTED_PACKAGE_VETTING</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#reading">3.2.5.1. Reading</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#dar-parse-error">DAR_PARSE_ERROR</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#invalid-dar">INVALID_DAR</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#invalid-dar-file-name">INVALID_DAR_FILE_NAME</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#invalid-legacy-dar">INVALID_LEGACY_DAR</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#invalid-zip-entry">INVALID_ZIP_ENTRY</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#zip-bomb">ZIP_BOMB</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#writeservicerejectionerrors">3.2.6. WriteServiceRejectionErrors</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#disputed">DISPUTED</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#out-of-quota">OUT_OF_QUOTA</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#party-not-known-on-ledger">PARTY_NOT_KNOWN_ON_LEDGER</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#submitter-cannot-act-via-participant">SUBMITTER_CANNOT_ACT_VIA_PARTICIPANT</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#submitting-party-not-known-on-ledger">SUBMITTING_PARTY_NOT_KNOWN_ON_LEDGER</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#internal">3.2.6.1. Internal</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#internally-duplicate-keys">INTERNALLY_DUPLICATE_KEYS</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#internally-inconsistent-keys">INTERNALLY_INCONSISTENT_KEYS</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#requestvalidationerrors">3.2.7. RequestValidationErrors</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#invalid-argument">INVALID_ARGUMENT</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#invalid-deduplication-period">INVALID_DEDUPLICATION_PERIOD</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#invalid-field">INVALID_FIELD</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#ledger-id-mismatch">LEDGER_ID_MISMATCH</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#missing-field">MISSING_FIELD</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#non-hexadecimal-offset">NON_HEXADECIMAL_OFFSET</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#offset-after-ledger-end">OFFSET_AFTER_LEDGER_END</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#offset-out-of-range">OFFSET_OUT_OF_RANGE</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#participant-pruned-data-accessed">PARTICIPANT_PRUNED_DATA_ACCESSED</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#notfound">3.2.7.1. NotFound</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#ledger-configuration-not-found">LEDGER_CONFIGURATION_NOT_FOUND</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#no-templates-for-package-name-and-qualified-name">NO_TEMPLATES_FOR_PACKAGE_NAME_AND_QUALIFIED_NAME</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#package-names-not-found">PACKAGE_NAMES_NOT_FOUND</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#package-not-found">PACKAGE_NOT_FOUND</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#templates-or-interfaces-not-found">TEMPLATES_OR_INTERFACES_NOT_FOUND</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#transaction-not-found">TRANSACTION_NOT_FOUND</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#transactionerrorgroup">3.3. TransactionErrorGroup</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#transactionroutingerror">3.3.1. TransactionRoutingError</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#automatic-transfer-for-transaction-failed">AUTOMATIC_TRANSFER_FOR_TRANSACTION_FAILED</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#routing-internal-error">ROUTING_INTERNAL_ERROR</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#unable-to-get-topology-snapshot">UNABLE_TO_GET_TOPOLOGY_SNAPSHOT</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#malformedinputerrors">3.3.1.1. MalformedInputErrors</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#disclosed-contract-authentication-failed">DISCLOSED_CONTRACT_AUTHENTICATION_FAILED</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#invalid-disclosed-contract">INVALID_DISCLOSED_CONTRACT</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#invalid-domain-alias">INVALID_DOMAIN_ALIAS</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#invalid-domain-id">INVALID_DOMAIN_ID</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#invalid-party-identifier">INVALID_PARTY_IDENTIFIER</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#invalid-submitter">INVALID_SUBMITTER</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#topologyerrors">3.3.1.2. TopologyErrors</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#informees-not-active">INFORMEES_NOT_ACTIVE</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#not-connected-to-all-contract-domains">NOT_CONNECTED_TO_ALL_CONTRACT_DOMAINS</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#no-common-domain">NO_COMMON_DOMAIN</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#no-domain-for-submission">NO_DOMAIN_FOR_SUBMISSION</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#no-domain-on-which-all-submitters-can-submit">NO_DOMAIN_ON_WHICH_ALL_SUBMITTERS_CAN_SUBMIT</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#submitters-not-active">SUBMITTERS_NOT_ACTIVE</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#submitter-always-stakeholder">SUBMITTER_ALWAYS_STAKEHOLDER</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#unknown-contract-domains">UNKNOWN_CONTRACT_DOMAINS</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#unknown-informees">UNKNOWN_INFORMEES</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#unknown-submitters">UNKNOWN_SUBMITTERS</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#configurationerrors">3.3.1.3. ConfigurationErrors</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#input-contract-has-unauthenticated-id">INPUT_CONTRACT_HAS_UNAUTHENTICATED_ID</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#invalid-prescribed-domain-id">INVALID_PRESCRIBED_DOMAIN_ID</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#multi-domain-support-not-enabled">MULTI_DOMAIN_SUPPORT_NOT_ENABLED</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#submission-domain-not-ready">SUBMISSION_DOMAIN_NOT_READY</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#submissionerrors">3.3.2. SubmissionErrors</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#chosen-mediator-is-inactive">CHOSEN_MEDIATOR_IS_INACTIVE</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#contract-authentication-failed">CONTRACT_AUTHENTICATION_FAILED</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#domain-backpressure">DOMAIN_BACKPRESSURE</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#domain-without-mediator">DOMAIN_WITHOUT_MEDIATOR</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#malformed-request">MALFORMED_REQUEST</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#not-sequenced-timeout">NOT_SEQUENCED_TIMEOUT</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#package-not-vetted-by-recipients">PACKAGE_NOT_VETTED_BY_RECIPIENTS</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#participant-overloaded">PARTICIPANT_OVERLOADED</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#sequencer-request-failed">SEQUENCER_REQUEST_FAILED</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#submission-during-shutdown">SUBMISSION_DURING_SHUTDOWN</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#unknown-contract-domain">UNKNOWN_CONTRACT_DOMAIN</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#syncserviceinjectionerror">3.3.3. SyncServiceInjectionError</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#command-injection-failure">COMMAND_INJECTION_FAILURE</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#node-is-passive-replica">NODE_IS_PASSIVE_REPLICA</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#not-connected-to-any-domain">NOT_CONNECTED_TO_ANY_DOMAIN</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#localreject">3.3.4. LocalReject</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#malformedrejects">3.3.4.1. MalformedRejects</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#local-verdict-bad-root-hash-messages">LOCAL_VERDICT_BAD_ROOT_HASH_MESSAGES</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#local-verdict-creates-existing-contracts">LOCAL_VERDICT_CREATES_EXISTING_CONTRACTS</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#local-verdict-failed-model-conformance-check">LOCAL_VERDICT_FAILED_MODEL_CONFORMANCE_CHECK</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#local-verdict-malformed-payload">LOCAL_VERDICT_MALFORMED_PAYLOAD</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#local-verdict-malformed-request">LOCAL_VERDICT_MALFORMED_REQUEST</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#consistencyrejections">3.3.4.2. ConsistencyRejections</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#local-verdict-duplicate-key">LOCAL_VERDICT_DUPLICATE_KEY</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#local-verdict-inactive-contracts">LOCAL_VERDICT_INACTIVE_CONTRACTS</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#local-verdict-inconsistent-key">LOCAL_VERDICT_INCONSISTENT_KEY</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#local-verdict-locked-contracts">LOCAL_VERDICT_LOCKED_CONTRACTS</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#local-verdict-locked-keys">LOCAL_VERDICT_LOCKED_KEYS</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#timerejects">3.3.4.3. TimeRejects</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#local-verdict-ledger-time-out-of-bound">LOCAL_VERDICT_LEDGER_TIME_OUT_OF_BOUND</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#local-verdict-submission-time-out-of-bound">LOCAL_VERDICT_SUBMISSION_TIME_OUT_OF_BOUND</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#local-verdict-timeout">LOCAL_VERDICT_TIMEOUT</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#transferinrejects">3.3.4.4. TransferInRejects</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#transfer-in-already-completed">TRANSFER_IN_ALREADY_COMPLETED</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#transfer-in-contract-already-active">TRANSFER_IN_CONTRACT_ALREADY_ACTIVE</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#transfer-in-contract-already-archived">TRANSFER_IN_CONTRACT_ALREADY_ARCHIVED</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#transfer-in-contract-is-locked">TRANSFER_IN_CONTRACT_IS_LOCKED</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#transferoutrejects">3.3.4.5. TransferOutRejects</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#transfer-out-activeness-check-failed">TRANSFER_OUT_ACTIVENESS_CHECK_FAILED</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#commanddeduplicationerror">3.3.5. CommandDeduplicationError</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#malformed-deduplication-offset">MALFORMED_DEDUPLICATION_OFFSET</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#syncserviceerror">3.4. SyncServiceError</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#party-allocation-without-connected-domain">PARTY_ALLOCATION_WITHOUT_CONNECTED_DOMAIN</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#sync-service-alarm">SYNC_SERVICE_ALARM</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#sync-service-already-added">SYNC_SERVICE_ALREADY_ADDED</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#sync-service-domain-became-passive">SYNC_SERVICE_DOMAIN_BECAME_PASSIVE</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#sync-service-domain-disabled-us">SYNC_SERVICE_DOMAIN_DISABLED_US</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#sync-service-domain-disconnected">SYNC_SERVICE_DOMAIN_DISCONNECTED</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#sync-service-domain-must-be-offline">SYNC_SERVICE_DOMAIN_MUST_BE_OFFLINE</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#sync-service-domain-must-not-have-in-flight-transactions">SYNC_SERVICE_DOMAIN_MUST_NOT_HAVE_IN_FLIGHT_TRANSACTIONS</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#sync-service-domain-status-must-be-inactive">SYNC_SERVICE_DOMAIN_STATUS_MUST_BE_INACTIVE</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#sync-service-domain-status-not-active">SYNC_SERVICE_DOMAIN_STATUS_NOT_ACTIVE</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#sync-service-internal-error">SYNC_SERVICE_INTERNAL_ERROR</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#sync-service-unknown-domain">SYNC_SERVICE_UNKNOWN_DOMAIN</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#syncdomainmigrationerror">3.4.1. SyncDomainMigrationError</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#broken-domain-migration">BROKEN_DOMAIN_MIGRATION</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#invalid-domain-migration-request">INVALID_DOMAIN_MIGRATION_REQUEST</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#domainregistryerror">3.4.2. DomainRegistryError</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#domain-registry-internal-error">DOMAIN_REGISTRY_INTERNAL_ERROR</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#topology-conversion-error">TOPOLOGY_CONVERSION_ERROR</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#id183">3.4.2.1. ConfigurationErrors</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#cannot-issue-domain-trust-certificate">CANNOT_ISSUE_DOMAIN_TRUST_CERTIFICATE</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#domain-parameters-changed">DOMAIN_PARAMETERS_CHANGED</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#incompatible-unique-contract-keys-mode">INCOMPATIBLE_UNIQUE_CONTRACT_KEYS_MODE</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#invalid-domain-connection">INVALID_DOMAIN_CONNECTION</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#misconfigured-static-domain-parameters">MISCONFIGURED_STATIC_DOMAIN_PARAMETERS</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#sequencers-from-different-domains-are-configured">SEQUENCERS_FROM_DIFFERENT_DOMAINS_ARE_CONFIGURED</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#handshakeerrors">3.4.2.2. HandshakeErrors</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#domain-alias-duplication">DOMAIN_ALIAS_DUPLICATION</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#domain-crypto-handshake-failed">DOMAIN_CRYPTO_HANDSHAKE_FAILED</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#domain-handshake-failed">DOMAIN_HANDSHAKE_FAILED</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#domain-id-mismatch">DOMAIN_ID_MISMATCH</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#service-agreement-acceptance-failed">SERVICE_AGREEMENT_ACCEPTANCE_FAILED</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#connectionerrors">3.4.2.3. ConnectionErrors</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#domain-is-not-available">DOMAIN_IS_NOT_AVAILABLE</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#failed-to-connect-to-sequencer">FAILED_TO_CONNECT_TO_SEQUENCER</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#failed-to-connect-to-sequencers">FAILED_TO_CONNECT_TO_SEQUENCERS</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#grpc-connection-failure">GRPC_CONNECTION_FAILURE</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#participant-is-not-active">PARTICIPANT_IS_NOT_ACTIVE</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#adminworkflowservices">3.5. AdminWorkflowServices</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#can-not-automatically-vet-admin-workflow-package">CAN_NOT_AUTOMATICALLY_VET_ADMIN_WORKFLOW_PACKAGE</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#repairserviceerror">3.6. RepairServiceError</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#contract-purge-error">CONTRACT_PURGE_ERROR</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#contract-serialization-error">CONTRACT_SERIALIZATION_ERROR</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#import-acs-error">IMPORT_ACS_ERROR</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#inconsistent-acs-snapshot">INCONSISTENT_ACS_SNAPSHOT</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#invalid-acs-snapshot-timestamp">INVALID_ACS_SNAPSHOT_TIMESTAMP</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#invalid-argument-repair">INVALID_ARGUMENT_REPAIR</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#unavailable-acs-snapshot">UNAVAILABLE_ACS_SNAPSHOT</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#unsupported-protocol-version-participant">UNSUPPORTED_PROTOCOL_VERSION_PARTICIPANT</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#cantonpackageserviceerror">3.7. CantonPackageServiceError</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#dar-not-found">DAR_NOT_FOUND</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#package-missing-dependencies">PACKAGE_MISSING_DEPENDENCIES</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#package-or-dar-removal-error">PACKAGE_OR_DAR_REMOVAL_ERROR</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#ledgerapierrors">3.8. LedgerApiErrors</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#heap-memory-over-limit">HEAP_MEMORY_OVER_LIMIT</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#ledger-api-internal-error">LEDGER_API_INTERNAL_ERROR</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#maximum-number-of-streams">MAXIMUM_NUMBER_OF_STREAMS</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#participant-backpressure">PARTICIPANT_BACKPRESSURE</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#threadpool-overloaded">THREADPOOL_OVERLOADED</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#indexerrors">3.9. IndexErrors</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#databaseerrors">3.9.1. DatabaseErrors</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#index-db-invalid-result-set">INDEX_DB_INVALID_RESULT_SET</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#index-db-sql-non-transient-error">INDEX_DB_SQL_NON_TRANSIENT_ERROR</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#index-db-sql-transient-error">INDEX_DB_SQL_TRANSIENT_ERROR</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#pruningserviceerror">3.10. PruningServiceError</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#internal-pruning-error">INTERNAL_PRUNING_ERROR</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#non-canton-offset">NON_CANTON_OFFSET</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#no-internal-participant-data-before">NO_INTERNAL_PARTICIPANT_DATA_BEFORE</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#pruning-not-supported-in-community-edition">PRUNING_NOT_SUPPORTED_IN_COMMUNITY_EDITION</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#shutdown-interrupted-pruning">SHUTDOWN_INTERRUPTED_PRUNING</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#unsafe-to-prune">UNSAFE_TO_PRUNE</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#participantreplicationserviceerror">3.11. ParticipantReplicationServiceError</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#participant-replication-internal-error">PARTICIPANT_REPLICATION_INTERNAL_ERROR</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#participant-replication-not-supported-by-storage">PARTICIPANT_REPLICATION_NOT_SUPPORTED_BY_STORAGE</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#commonerrors">3.12. CommonErrors</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#request-deadline-exceeded">REQUEST_DEADLINE_EXCEEDED</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#request-time-out">REQUEST_TIME_OUT</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#server-is-shutting-down">SERVER_IS_SHUTTING_DOWN</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#service-internal-error">SERVICE_INTERNAL_ERROR</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#service-not-running">SERVICE_NOT_RUNNING</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#unsupported-operation">UNSUPPORTED_OPERATION</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#ethereumerrors">4. EthereumErrors</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#id235">4.1. ConfigurationErrors</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#ahead-of-head">AHEAD_OF_HEAD</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#attempt-to-change-immutable-value">ATTEMPT_TO_CHANGE_IMMUTABLE_VALUE</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#besu-version-mismatch">BESU_VERSION_MISMATCH</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#ethereum-cant-query-version">ETHEREUM_CANT_QUERY_VERSION</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#many-blocks-behind-head">MANY_BLOCKS_BEHIND_HEAD</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#not-free-gas-network">NOT_FREE_GAS_NETWORK</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#wrong-evm-bytecode">WRONG_EVM_BYTECODE</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#transactionerrors">4.2. TransactionErrors</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#ethereum-transaction-invalid">ETHEREUM_TRANSACTION_INVALID</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#ethereum-transaction-receipt-fetching-failed">ETHEREUM_TRANSACTION_RECEIPT_FETCHING_FAILED</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#ethereum-transaction-submission-failed">ETHEREUM_TRANSACTION_SUBMISSION_FAILED</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#topologymanagementerrorgroup">5. TopologyManagementErrorGroup</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#topologymanagererror">5.1. TopologyManagerError</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#duplicate-topology-transaction">DUPLICATE_TOPOLOGY_TRANSACTION</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#illegal-removal-of-domain-trust-certificate">ILLEGAL_REMOVAL_OF_DOMAIN_TRUST_CERTIFICATE</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#increase-of-ledger-time-record-time-tolerance">INCREASE_OF_LEDGER_TIME_RECORD_TIME_TOLERANCE</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#insufficient-keys">INSUFFICIENT_KEYS</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#invalid-domain">INVALID_DOMAIN</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#invalid-threshold">INVALID_THRESHOLD</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#invalid-topology-tx-signature-error">INVALID_TOPOLOGY_TX_SIGNATURE_ERROR</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#invalid-traffic-limit">INVALID_TRAFFIC_LIMIT</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#no-appropriate-signing-key-in-store">NO_APPROPRIATE_SIGNING_KEY_IN_STORE</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#no-corresponding-active-tx-to-revoke">NO_CORRESPONDING_ACTIVE_TX_TO_REVOKE</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#public-key-not-in-store">PUBLIC_KEY_NOT_IN_STORE</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#removing-key-dangling-transactions-must-be-forced">REMOVING_KEY_DANGLING_TRANSACTIONS_MUST_BE_FORCED</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#removing-last-key-must-be-forced">REMOVING_LAST_KEY_MUST_BE_FORCED</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#secret-key-not-in-store">SECRET_KEY_NOT_IN_STORE</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#serial-mismatch">SERIAL_MISMATCH</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#topology-manager-alarm">TOPOLOGY_MANAGER_ALARM</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#topology-manager-internal-error">TOPOLOGY_MANAGER_INTERNAL_ERROR</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#topology-mapping-already-exists">TOPOLOGY_MAPPING_ALREADY_EXISTS</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#unauthorized-topology-transaction">UNAUTHORIZED_TOPOLOGY_TRANSACTION</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#unknown-members">UNKNOWN_MEMBERS</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#domaintopologymanagererror">5.1.1. DomainTopologyManagerError</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#alien-domain-entities">ALIEN_DOMAIN_ENTITIES</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#failed-to-add-member">FAILED_TO_ADD_MEMBER</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#malicous-or-faulty-onboarding-request">MALICOUS_OR_FAULTY_ONBOARDING_REQUEST</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#participant-not-initialized">PARTICIPANT_NOT_INITIALIZED</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#wrong-domain">WRONG_DOMAIN</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#wrong-protocol-version">WRONG_PROTOCOL_VERSION</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#participanttopologymanagererror">5.1.2. ParticipantTopologyManagerError</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#cannot-vet-due-to-missing-packages">CANNOT_VET_DUE_TO_MISSING_PACKAGES</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#dangerous-key-use-command-requires-force">DANGEROUS_KEY_USE_COMMAND_REQUIRES_FORCE</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#dangerous-vetting-commands-require-force">DANGEROUS_VETTING_COMMANDS_REQUIRE_FORCE</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#dependencies-not-check-only-or-vetted">DEPENDENCIES_NOT_CHECK_ONLY_OR_VETTED</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#dependencies-not-vetted">DEPENDENCIES_NOT_VETTED</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#disable-party-with-active-contracts-requires-force">DISABLE_PARTY_WITH_ACTIVE_CONTRACTS_REQUIRES_FORCE</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#main-dar-package-referenced-externally">MAIN_DAR_PACKAGE_REFERENCED_EXTERNALLY</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#package-topology-state-update-timeout">PACKAGE_TOPOLOGY_STATE_UPDATE_TIMEOUT</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#uninitialized-participant">UNINITIALIZED_PARTICIPANT</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#domain">5.1.3. Domain</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#domain-node-initialisation-failed">DOMAIN_NODE_INITIALISATION_FAILED</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#grpcsequencerauthenticationservice">5.1.3.1. GrpcSequencerAuthenticationService</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#client-authentication-faulty">CLIENT_AUTHENTICATION_FAULTY</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#client-authentication-rejected">CLIENT_AUTHENTICATION_REJECTED</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#domaintopologysender">5.2. DomainTopologySender</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#topology-dispatching-degradation">TOPOLOGY_DISPATCHING_DEGRADATION</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#topology-dispatching-internal-error">TOPOLOGY_DISPATCHING_INTERNAL_ERROR</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#configerrors">6. ConfigErrors</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#cannot-parse-config-files">CANNOT_PARSE_CONFIG_FILES</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#cannot-read-config-files">CANNOT_READ_CONFIG_FILES</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#config-substitution-error">CONFIG_SUBSTITUTION_ERROR</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#config-validation-error">CONFIG_VALIDATION_ERROR</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#generic-config-error">GENERIC_CONFIG_ERROR</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#no-config-files">NO_CONFIG_FILES</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#commanderrors">7. CommandErrors</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#console-command-internal-error">CONSOLE_COMMAND_INTERNAL_ERROR</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#console-command-timed-out">CONSOLE_COMMAND_TIMED_OUT</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#node-not-started">NODE_NOT_STARTED</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#databasestorageerror">8. DatabaseStorageError</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#db-connection-lost">DB_CONNECTION_LOST</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#db-storage-degradation">DB_STORAGE_DEGRADATION</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#id298">9. HandshakeErrors</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#deprecated-protocol-version">DEPRECATED_PROTOCOL_VERSION</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#deprecating-protocol-version">DEPRECATING_PROTOCOL_VERSION</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#envelopeopenererror">10. EnvelopeOpenerError</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#event-deserialization-error">EVENT_DESERIALIZATION_ERROR</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#fabricerrors">11. FabricErrors</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#id303">11.1. ConfigurationErrors</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#fabric-ahead-of-head">FABRIC_AHEAD_OF_HEAD</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#fabric-many-blocks-behind-head">FABRIC_MANY_BLOCKS_BEHIND_HEAD</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#id307">11.2. TransactionErrors</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#fabric-transaction-invalid">FABRIC_TRANSACTION_INVALID</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#fabric-transaction-proposal-submission-failed">FABRIC_TRANSACTION_PROPOSAL_SUBMISSION_FAILED</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#fabric-transaction-submission-failed">FABRIC_TRANSACTION_SUBMISSION_FAILED</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#sequencererror">12. SequencerError</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#invalid-acknowledgement-signature">INVALID_ACKNOWLEDGEMENT_SIGNATURE</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#invalid-acknowledgement-timestamp">INVALID_ACKNOWLEDGEMENT_TIMESTAMP</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#invalid-envelope-signature">INVALID_ENVELOPE_SIGNATURE</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#invalid-ledger-event">INVALID_LEDGER_EVENT</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#invalid-sequencer-pruning-request-on-chain">INVALID_SEQUENCER_PRUNING_REQUEST_ON_CHAIN</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#invalid-submission-request-signature">INVALID_SUBMISSION_REQUEST_SIGNATURE</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#max-request-size-exceeded">MAX_REQUEST_SIZE_EXCEEDED</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#max-sequencing-time-exceeded">MAX_SEQUENCING_TIME_EXCEEDED</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#missing-submission-request-signature-timestamp">MISSING_SUBMISSION_REQUEST_SIGNATURE_TIMESTAMP</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#multiple-mediator-recipients">MULTIPLE_MEDIATOR_RECIPIENTS</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#payload-to-event-time-bound-exceeded">PAYLOAD_TO_EVENT_TIME_BOUND_EXCEEDED</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#enterprisegrpcvaultserviceerror">13. EnterpriseGrpcVaultServiceError</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#invalid-kms-key-id">INVALID_KMS_KEY_ID</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#no-encrypted-private-key-store-error">NO_ENCRYPTED_PRIVATE_KEY_STORE_ERROR</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#register-kms-key-internal-error">REGISTER_KMS_KEY_INTERNAL_ERROR</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#wrapper-key-already-in-use-error">WRAPPER_KEY_ALREADY_IN_USE_ERROR</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#wrapper-key-disabled-or-deleted-error">WRAPPER_KEY_DISABLED_OR_DELETED_ERROR</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#wrapper-key-not-exist-error">WRAPPER_KEY_NOT_EXIST_ERROR</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#wrapper-key-rotation-internal-error">WRAPPER_KEY_ROTATION_INTERNAL_ERROR</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#mediatorerror">14. MediatorError</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#mediator-internal-error">MEDIATOR_INTERNAL_ERROR</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#mediator-invalid-message">MEDIATOR_INVALID_MESSAGE</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#mediator-received-malformed-message">MEDIATOR_RECEIVED_MALFORMED_MESSAGE</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#mediator-says-tx-timed-out">MEDIATOR_SAYS_TX_TIMED_OUT</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#protodeserializationerror">15. ProtoDeserializationError</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#proto-deserialization-failure">PROTO_DESERIALIZATION_FAILURE</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#sequencererrors">16. SequencerErrors</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#sequencer-aggregate-submission-already-sent">SEQUENCER_AGGREGATE_SUBMISSION_ALREADY_SENT</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#sequencer-aggregate-submission-stuffing">SEQUENCER_AGGREGATE_SUBMISSION_STUFFING</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#sequencer-max-sequencing-time-too-far">SEQUENCER_MAX_SEQUENCING_TIME_TOO_FAR</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#sequencer-not-enough-traffic-credit">SEQUENCER_NOT_ENOUGH_TRAFFIC_CREDIT</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#sequencer-signing-timestamp-after-sequencing-timestamp">SEQUENCER_SIGNING_TIMESTAMP_AFTER_SEQUENCING_TIMESTAMP</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#sequencer-signing-timestamp-missing">SEQUENCER_SIGNING_TIMESTAMP_MISSING</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#sequencer-signing-timestamp-too-early">SEQUENCER_SIGNING_TIMESTAMP_TOO_EARLY</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#sequencer-submission-request-malformed">SEQUENCER_SUBMISSION_REQUEST_MALFORMED</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#sequencer-submission-request-refused">SEQUENCER_SUBMISSION_REQUEST_REFUSED</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#sequencer-tombstone-persisted">SEQUENCER_TOMBSTONE_PERSISTED</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#sequencer-unknown-recipients">SEQUENCER_UNKNOWN_RECIPIENTS</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#resilientsequencersubscription">17. ResilientSequencerSubscription</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#sequencer-fork-detected">SEQUENCER_FORK_DETECTED</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#sequencer-subscription-lost">SEQUENCER_SUBSCRIPTION_LOST</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#sequencersubscriptionerror">18. SequencerSubscriptionError</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#sequencer-tombstone-encountered">SEQUENCER_TOMBSTONE_ENCOUNTERED</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/reference/error_codes.html#clock">19. Clock</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/reference/error_codes.html#system-clock-running-backwards">SYSTEM_CLOCK_RUNNING_BACKWARDS</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../daml/troubleshooting.html">Troubleshooting</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../daml/troubleshooting.html#error-x-is-not-authorized-to-commit-an-update">Error: “&lt;X&gt; is not authorized to commit an update”</a></li>
<li class="toctree-l2"><a class="reference internal" href="../daml/troubleshooting.html#error-argument-is-not-of-serializable-type">Error: “Argument is not of serializable type”</a></li>
<li class="toctree-l2"><a class="reference internal" href="../daml/troubleshooting.html#error-recursion-limit-overflow-in-module">Error: “Recursion limit overflow in module”</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../daml/troubleshooting.html#solving-script-recursion-limits">Solving script recursion limits</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/troubleshooting.html#solving-datatype-recursion-limits">Solving datatype recursion limits</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../daml/troubleshooting.html#modeling-questions">Modeling Questions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../daml/troubleshooting.html#how-to-model-an-agreement-with-another-party">How To Model an Agreement With Another Party</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/troubleshooting.html#how-to-model-rights">How To Model Rights</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/troubleshooting.html#how-to-void-a-contract">How To Void a Contract</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/troubleshooting.html#how-to-represent-off-ledger-parties">How To Represent Off-ledger Parties</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/troubleshooting.html#how-to-limit-a-choice-by-time">How To Limit a Choice by Time</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/troubleshooting.html#how-to-model-a-mandatory-action">How To Model a Mandatory Action</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/troubleshooting.html#when-to-use-optional">When to Use Optional</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../daml/troubleshooting.html#testing-questions">Testing Questions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../daml/troubleshooting.html#how-to-test-that-a-contract-is-visible-to-a-party">How To Test That a Contract Is Visible to a Party</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/troubleshooting.html#how-to-test-that-an-update-action-cannot-be-committed">How To Test That an Update Action Cannot Be Committed</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../support/support.html">Get Help</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../support/support.html#support-expectations">Support Expectations</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../support/compatibility.html">Portability, Compatibility, and Support Durations</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../support/compatibility.html#ledger-api-compatibility-application-portability">Ledger API Compatibility: Application Portability</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../support/compatibility.html#list-of-ledger-api-versions-supported-by-daml">List of Ledger API Versions Supported by Daml</a></li>
<li class="toctree-l3"><a class="reference internal" href="../support/compatibility.html#summary-of-ledger-api-changes">Summary of Ledger API Changes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../support/compatibility.html#driver-and-participant-compatibility-network-upgradeability">Driver and Participant Compatibility: Network Upgradeability</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../support/compatibility.html#participant-database-migration">Participant database migration</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../support/compatibility.html#sdk-runtime-component-and-library-compatibility-daml-upgradeability">SDK, Runtime Component, and Library Compatibility: Daml Upgradeability</a></li>
<li class="toctree-l2"><a class="reference internal" href="../support/compatibility.html#ledger-api-support-duration">Ledger API Support Duration</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../support/overview.html">Daml Ecosystem Overview</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../support/overview.html#architecture">Architecture</a></li>
<li class="toctree-l2"><a class="reference internal" href="../support/overview.html#daml-networks">Daml Networks</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../support/overview.html#daml-drivers">Daml drivers</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../support/overview.html#participant-nodes">Participant Nodes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../support/overview.html#ledger-api">Ledger API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../support/overview.html#daml-components">Daml Components</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../support/overview.html#runtime-components">Runtime components</a></li>
<li class="toctree-l3"><a class="reference internal" href="../support/overview.html#libraries">Libraries</a></li>
<li class="toctree-l3"><a class="reference internal" href="../support/overview.html#generated-code">Generated code</a></li>
<li class="toctree-l3"><a class="reference internal" href="../support/overview.html#developer-tools-sdk">Developer tools / SDK</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../support/status-definitions.html">Status Definitions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../support/status-definitions.html#early-access-features">Early Access Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="../support/status-definitions.html#deprecation">Deprecation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../support/status-definitions.html#comparison-of-statuses">Comparison of Statuses</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../support/releases.html">Releases and Versioning</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../support/releases.html#versioning">Versioning</a></li>
<li class="toctree-l2"><a class="reference internal" href="../support/releases.html#cadence">Cadence</a></li>
<li class="toctree-l2"><a class="reference internal" href="../support/releases.html#support-duration">Support Duration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../support/releases.html#release-notes">Release Notes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../support/releases.html#process">Process</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../concepts/glossary.html">Glossary of Concepts</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../concepts/glossary.html#key-concepts">Key Concepts</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../concepts/glossary.html#daml">Daml</a></li>
<li class="toctree-l3"><a class="reference internal" href="../concepts/glossary.html#daml-language">Daml Language</a></li>
<li class="toctree-l3"><a class="reference internal" href="../concepts/glossary.html#daml-ledger">Daml Ledger</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../concepts/glossary.html#canton-ledger">Canton Ledger</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../concepts/glossary.html#canton-protocol">Canton Protocol</a></li>
<li class="toctree-l3"><a class="reference internal" href="../concepts/glossary.html#synchronization-technology">Synchronization Technology</a></li>
<li class="toctree-l3"><a class="reference internal" href="../concepts/glossary.html#daml-drivers">Daml Drivers</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../concepts/glossary.html#daml-language-concepts">Daml Language Concepts</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../concepts/glossary.html#contract">Contract</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../concepts/glossary.html#active-contract-archived-contract">Active Contract, Archived Contract</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../concepts/glossary.html#template">Template</a></li>
<li class="toctree-l3"><a class="reference internal" href="../concepts/glossary.html#choice">Choice</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../concepts/glossary.html#consuming-choice">Consuming Choice</a></li>
<li class="toctree-l4"><a class="reference internal" href="../concepts/glossary.html#nonconsuming-choice">Nonconsuming Choice</a></li>
<li class="toctree-l4"><a class="reference internal" href="../concepts/glossary.html#disjunction-choice-flexible-controllers">Disjunction Choice, Flexible Controllers</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../concepts/glossary.html#party">Party</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../concepts/glossary.html#signatory">Signatory</a></li>
<li class="toctree-l4"><a class="reference internal" href="../concepts/glossary.html#observer">Observer</a></li>
<li class="toctree-l4"><a class="reference internal" href="../concepts/glossary.html#controller">Controller</a></li>
<li class="toctree-l4"><a class="reference internal" href="../concepts/glossary.html#choice-observer">Choice Observer</a></li>
<li class="toctree-l4"><a class="reference internal" href="../concepts/glossary.html#stakeholder">Stakeholder</a></li>
<li class="toctree-l4"><a class="reference internal" href="../concepts/glossary.html#maintainer">Maintainer</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../concepts/glossary.html#authorization-signing">Authorization, Signing</a></li>
<li class="toctree-l3"><a class="reference internal" href="../concepts/glossary.html#standard-library">Standard Library</a></li>
<li class="toctree-l3"><a class="reference internal" href="../concepts/glossary.html#agreement">Agreement</a></li>
<li class="toctree-l3"><a class="reference internal" href="../concepts/glossary.html#create">Create</a></li>
<li class="toctree-l3"><a class="reference internal" href="../concepts/glossary.html#exercise">Exercise</a></li>
<li class="toctree-l3"><a class="reference internal" href="../concepts/glossary.html#daml-script">Daml Script</a></li>
<li class="toctree-l3"><a class="reference internal" href="../concepts/glossary.html#contract-key">Contract Key</a></li>
<li class="toctree-l3"><a class="reference internal" href="../concepts/glossary.html#dar-file-dalf-file">DAR File, DALF File</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../concepts/glossary.html#developer-tools">Developer Tools</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../concepts/glossary.html#assistant">Assistant</a></li>
<li class="toctree-l3"><a class="reference internal" href="../concepts/glossary.html#studio">Studio</a></li>
<li class="toctree-l3"><a class="reference internal" href="../concepts/glossary.html#sandbox">Sandbox</a></li>
<li class="toctree-l3"><a class="reference internal" href="../concepts/glossary.html#navigator-deprecated">Navigator (Deprecated)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../concepts/glossary.html#navigator-gui">Navigator GUI</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../concepts/glossary.html#building-applications">Building Applications</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../concepts/glossary.html#application-ledger-client-integration">Application, Ledger Client, Integration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../concepts/glossary.html#ledger-api">Ledger API</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../concepts/glossary.html#command-submission-service">Command Submission Service</a></li>
<li class="toctree-l4"><a class="reference internal" href="../concepts/glossary.html#command-completion-service">Command Completion Service</a></li>
<li class="toctree-l4"><a class="reference internal" href="../concepts/glossary.html#command-service">Command Service</a></li>
<li class="toctree-l4"><a class="reference internal" href="../concepts/glossary.html#transaction-service">Transaction Service</a></li>
<li class="toctree-l4"><a class="reference internal" href="../concepts/glossary.html#active-contract-service">Active Contract Service</a></li>
<li class="toctree-l4"><a class="reference internal" href="../concepts/glossary.html#package-service">Package Service</a></li>
<li class="toctree-l4"><a class="reference internal" href="../concepts/glossary.html#ledger-identity-service">Ledger Identity Service</a></li>
<li class="toctree-l4"><a class="reference internal" href="../concepts/glossary.html#ledger-configuration-service">Ledger Configuration Service</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../concepts/glossary.html#ledger-api-libraries">Ledger API Libraries</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../concepts/glossary.html#java-bindings">Java Bindings</a></li>
<li class="toctree-l4"><a class="reference internal" href="../concepts/glossary.html#python-bindings">Python Bindings</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../concepts/glossary.html#reading-from-the-ledger">Reading From the Ledger</a></li>
<li class="toctree-l3"><a class="reference internal" href="../concepts/glossary.html#submitting-commands-writing-to-the-ledger">Submitting Commands, Writing To the Ledger</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../concepts/glossary.html#commands">Commands</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../concepts/glossary.html#participant-node">Participant Node</a></li>
<li class="toctree-l3"><a class="reference internal" href="../concepts/glossary.html#sub-transaction-privacy">Sub-transaction Privacy</a></li>
<li class="toctree-l3"><a class="reference internal" href="../concepts/glossary.html#id2">Daml-LF</a></li>
<li class="toctree-l3"><a class="reference internal" href="../concepts/glossary.html#composability">Composability</a></li>
<li class="toctree-l3"><a class="reference internal" href="../concepts/glossary.html#trust-domain">Trust Domain</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../concepts/glossary.html#canton-concepts">Canton Concepts</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../concepts/glossary.html#synchronization-domain">Synchronization Domain</a></li>
<li class="toctree-l3"><a class="reference internal" href="../concepts/glossary.html#private-contract-store">Private Contract Store</a></li>
<li class="toctree-l3"><a class="reference internal" href="../concepts/glossary.html#virtual-global-ledger">Virtual Global Ledger</a></li>
<li class="toctree-l3"><a class="reference internal" href="../concepts/glossary.html#mediator">Mediator</a></li>
<li class="toctree-l3"><a class="reference internal" href="../concepts/glossary.html#sequencer">Sequencer</a></li>
<li class="toctree-l3"><a class="reference internal" href="../concepts/glossary.html#synchronization-domain-identity-manager">Synchronization Domain Identity Manager</a></li>
<li class="toctree-l3"><a class="reference internal" href="../concepts/glossary.html#consensus">Consensus</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../reference/example-applications.html">Daml Example Applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/daml-language-references.html">Daml Language References</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../reference/cheat-sheet.html">Daml Language Cheat Sheet</a></li>
<li class="toctree-l2"><a class="reference internal" href="../daml/reference/index.html">Language Reference</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../daml/reference/structure.html">Overview: Template Structure</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml/reference/structure.html#template-outline-structure">Template Outline Structure</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/reference/structure.html#choice-structure">Choice Structure</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/reference/structure.html#choice-body-structure">Choice Body Structure</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml/reference/templates.html">Reference: Templates</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml/reference/templates.html#template-name">Template Name</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/reference/templates.html#template-parameters">Template Parameters</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/reference/templates.html#implicit-record">Implicit Record</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/reference/templates.html#this-and-self"><code class="docutils literal notranslate"><span class="pre">this</span></code> and <code class="docutils literal notranslate"><span class="pre">self</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/reference/templates.html#template-local-definitions-deprecated">Template-local Definitions (Deprecated)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/reference/templates.html#signatory-parties">Signatory Parties</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/reference/templates.html#observers">Observers</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/reference/templates.html#choices">Choices</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/reference/templates.html#serializable-types">Serializable Types</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/reference/templates.html#agreements-deprecated">Agreements (Deprecated)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/reference/templates.html#preconditions">Preconditions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/reference/templates.html#contract-keys-and-maintainers">Contract Keys and Maintainers</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/reference/templates.html#interface-instances">Interface Instances</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml/reference/choices.html">Reference: Choices</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml/reference/choices.html#choice-name">Choice Name</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/reference/choices.html#controllers">Controllers</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/reference/choices.html#choice-observers">Choice Observers</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/reference/choices.html#preconsuming-choices">Preconsuming Choices</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/reference/choices.html#postconsuming-choices">Postconsuming Choices</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/reference/choices.html#non-consuming-choices">Non-consuming Choices</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/reference/choices.html#choice-arguments">Choice Arguments</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/reference/choices.html#choice-body">Choice Body</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml/reference/updates.html">Reference: Updates</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml/reference/updates.html#background">Background</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/reference/updates.html#binding-variables">Binding Variables</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/reference/updates.html#do">do</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/reference/updates.html#archive">archive</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/reference/updates.html#create">create</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/reference/updates.html#exercise">exercise</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/reference/updates.html#exercisebykey">exerciseByKey</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/reference/updates.html#fetch">fetch</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/reference/updates.html#fetchbykey">fetchByKey</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/reference/updates.html#visiblebykey">visibleByKey</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/reference/updates.html#lookupbykey">lookupByKey</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/reference/updates.html#abort">abort</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/reference/updates.html#assert">assert</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/reference/updates.html#gettime">getTime</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/reference/updates.html#return">return</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/reference/updates.html#let">let</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/reference/updates.html#this">this</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml/reference/data-types.html">Reference: Data types</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml/reference/data-types.html#built-in-types">Built-in Types</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/reference/data-types.html#lists">Lists</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/reference/data-types.html#records-and-record-types">Records and Record Types</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/reference/data-types.html#type-synonyms">Type Synonyms</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/reference/data-types.html#algebraic-data-types">Algebraic Data Types</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml/reference/working-with.html">Reference: Built-in functions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml/reference/working-with.html#work-with-time">Work with Time</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/reference/working-with.html#work-with-numbers">Work with Numbers</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/reference/working-with.html#work-with-text">Work with Text</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/reference/working-with.html#work-with-lists">Work with Lists</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml/reference/expressions.html">Reference: Expressions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml/reference/expressions.html#definitions">Definitions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/reference/expressions.html#arithmetic-operators">Arithmetic Operators</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/reference/expressions.html#comparison-operators">Comparison Operators</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/reference/expressions.html#logical-operators">Logical Operators</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/reference/expressions.html#if-then-else">If-then-else</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/reference/expressions.html#let">Let</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml/reference/functions.html">Reference: Functions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml/reference/functions.html#defining-functions">Defining Functions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/reference/functions.html#partial-application">Partial Application</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/reference/functions.html#functions-are-values">Functions are Values</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/reference/functions.html#generic-functions">Generic Functions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml/reference/file-structure.html">Reference: File structure</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml/reference/file-structure.html#file-structure">File Structure</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/reference/file-structure.html#imports">Imports</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/reference/file-structure.html#libraries">Libraries</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/reference/file-structure.html#comments">Comments</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/reference/file-structure.html#contract-identifiers">Contract Identifiers</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml/reference/packages.html">Reference: Packages</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml/reference/packages.html#building-daml-archives">Building Daml Archives</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/reference/packages.html#inspecting-dars">Inspecting DARs</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/reference/packages.html#import-daml-packages">Import Daml Packages</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/reference/packages.html#handling-module-name-collisions">Handling Module Name Collisions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml/reference/contract-keys.html">Reference: Contract keys</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml/reference/contract-keys.html#what-can-be-a-contract-key">What Can Be a Contract Key</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/reference/contract-keys.html#specify-maintainers">Specify Maintainers</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/reference/contract-keys.html#contract-lookups">Contract Lookups</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/reference/contract-keys.html#exercisebykey">exerciseByKey</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/reference/contract-keys.html#example">Example</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml/reference/exceptions.html">Reference: Exceptions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml/reference/exceptions.html#builtin-errors">Builtin Errors</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/reference/exceptions.html#user-defined-exceptions">User-defined Exceptions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/reference/exceptions.html#throw-exceptions">Throw Exceptions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/reference/exceptions.html#catch-exceptions">Catch Exceptions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml/reference/interfaces.html">Reference: Interfaces</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml/reference/interfaces.html#configuration">Configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/reference/interfaces.html#interface-declaration">Interface Declaration</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/reference/interfaces.html#interface-instances">Interface Instances</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/reference/interfaces.html#interface-functions">Interface Functions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/reference/interfaces.html#required-interfaces">Required Interfaces</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../daml/stdlib/index.html">The Standard Library</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../daml/stdlib/Prelude.html">Prelude</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml/stdlib/Prelude.html#typeclasses">Typeclasses</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/stdlib/Prelude.html#data-types">Data Types</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/stdlib/Prelude.html#functions">Functions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml/stdlib/DA-Action.html">DA.Action</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml/stdlib/DA-Action.html#functions">Functions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml/stdlib/DA-Action-State.html">DA.Action.State</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml/stdlib/DA-Action-State.html#data-types">Data Types</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/stdlib/DA-Action-State.html#functions">Functions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml/stdlib/DA-Action-State-Class.html">DA.Action.State.Class</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml/stdlib/DA-Action-State-Class.html#typeclasses">Typeclasses</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml/stdlib/DA-Assert.html">DA.Assert</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml/stdlib/DA-Assert.html#functions">Functions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml/stdlib/DA-Bifunctor.html">DA.Bifunctor</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml/stdlib/DA-Bifunctor.html#typeclasses">Typeclasses</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml/stdlib/DA-BigNumeric.html">DA.BigNumeric</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml/stdlib/DA-BigNumeric.html#functions">Functions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml/stdlib/DA-Date.html">DA.Date</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml/stdlib/DA-Date.html#data-types">Data Types</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/stdlib/DA-Date.html#functions">Functions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml/stdlib/DA-Either.html">DA.Either</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml/stdlib/DA-Either.html#functions">Functions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml/stdlib/DA-Exception.html">DA.Exception</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml/stdlib/DA-Exception.html#typeclasses">Typeclasses</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/stdlib/DA-Exception.html#data-types">Data Types</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml/stdlib/DA-Foldable.html">DA.Foldable</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml/stdlib/DA-Foldable.html#typeclasses">Typeclasses</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/stdlib/DA-Foldable.html#functions">Functions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml/stdlib/DA-Functor.html">DA.Functor</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml/stdlib/DA-Functor.html#functions">Functions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml/stdlib/DA-Internal-Interface-AnyView.html">DA.Internal.Interface.AnyView</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml/stdlib/DA-Internal-Interface-AnyView.html#typeclasses">Typeclasses</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/stdlib/DA-Internal-Interface-AnyView.html#functions">Functions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml/stdlib/DA-Internal-Interface-AnyView-Types.html">DA.Internal.Interface.AnyView.Types</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml/stdlib/DA-Internal-Interface-AnyView-Types.html#data-types">Data Types</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml/stdlib/DA-List.html">DA.List</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml/stdlib/DA-List.html#functions">Functions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml/stdlib/DA-List-BuiltinOrder.html">DA.List.BuiltinOrder</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml/stdlib/DA-List-BuiltinOrder.html#functions">Functions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml/stdlib/DA-List-Total.html">DA.List.Total</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml/stdlib/DA-List-Total.html#functions">Functions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml/stdlib/DA-Logic.html">DA.Logic</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml/stdlib/DA-Logic.html#data-types">Data Types</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/stdlib/DA-Logic.html#functions">Functions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml/stdlib/DA-Map.html">DA.Map</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml/stdlib/DA-Map.html#functions">Functions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml/stdlib/DA-Math.html">DA.Math</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml/stdlib/DA-Math.html#functions">Functions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml/stdlib/DA-Monoid.html">DA.Monoid</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml/stdlib/DA-Monoid.html#data-types">Data Types</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml/stdlib/DA-NonEmpty.html">DA.NonEmpty</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml/stdlib/DA-NonEmpty.html#functions">Functions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml/stdlib/DA-NonEmpty-Types.html">DA.NonEmpty.Types</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml/stdlib/DA-NonEmpty-Types.html#data-types">Data Types</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml/stdlib/DA-Numeric.html">DA.Numeric</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml/stdlib/DA-Numeric.html#functions">Functions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml/stdlib/DA-Optional.html">DA.Optional</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml/stdlib/DA-Optional.html#functions">Functions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml/stdlib/DA-Record.html">DA.Record</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml/stdlib/DA-Record.html#typeclasses">Typeclasses</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml/stdlib/DA-Semigroup.html">DA.Semigroup</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml/stdlib/DA-Semigroup.html#data-types">Data Types</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml/stdlib/DA-Set.html">DA.Set</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml/stdlib/DA-Set.html#data-types">Data Types</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/stdlib/DA-Set.html#functions">Functions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml/stdlib/DA-Stack.html">DA.Stack</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml/stdlib/DA-Stack.html#data-types">Data Types</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/stdlib/DA-Stack.html#functions">Functions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml/stdlib/DA-Text.html">DA.Text</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml/stdlib/DA-Text.html#functions">Functions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml/stdlib/DA-TextMap.html">DA.TextMap</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml/stdlib/DA-TextMap.html#functions">Functions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml/stdlib/DA-Time.html">DA.Time</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml/stdlib/DA-Time.html#data-types">Data Types</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/stdlib/DA-Time.html#functions">Functions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml/stdlib/DA-Traversable.html">DA.Traversable</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml/stdlib/DA-Traversable.html#typeclasses">Typeclasses</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/stdlib/DA-Traversable.html#functions">Functions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml/stdlib/DA-Tuple.html">DA.Tuple</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml/stdlib/DA-Tuple.html#functions">Functions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml/stdlib/DA-Validation.html">DA.Validation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml/stdlib/DA-Validation.html#data-types">Data Types</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/stdlib/DA-Validation.html#functions">Functions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml/stdlib/GHC-Show-Text.html">GHC.Show.Text</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml/stdlib/GHC-Show-Text.html#functions">Functions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml/stdlib/GHC-Tuple-Check.html">GHC.Tuple.Check</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml/stdlib/GHC-Tuple-Check.html#functions">Functions</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../daml-script/api/index.html">Daml Script Library</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../daml-script/api/Daml-Script.html">Daml.Script</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml-script/api/Daml-Script.html#data-types">Data Types</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml-script/api/Daml-Script.html#functions">Functions</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../triggers/api/index.html">Daml Trigger Library</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../triggers/api/Daml-Trigger.html">Daml.Trigger</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../triggers/api/Daml-Trigger.html#typeclasses">Typeclasses</a></li>
<li class="toctree-l4"><a class="reference internal" href="../triggers/api/Daml-Trigger.html#data-types">Data Types</a></li>
<li class="toctree-l4"><a class="reference internal" href="../triggers/api/Daml-Trigger.html#functions">Functions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../triggers/api/Daml-Trigger-Assert.html">Daml.Trigger.Assert</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../triggers/api/Daml-Trigger-Assert.html#data-types">Data Types</a></li>
<li class="toctree-l4"><a class="reference internal" href="../triggers/api/Daml-Trigger-Assert.html#functions">Functions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../triggers/api/Daml-Trigger-LowLevel.html">Daml.Trigger.LowLevel</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../triggers/api/Daml-Trigger-LowLevel.html#typeclasses">Typeclasses</a></li>
<li class="toctree-l4"><a class="reference internal" href="../triggers/api/Daml-Trigger-LowLevel.html#data-types">Data Types</a></li>
<li class="toctree-l4"><a class="reference internal" href="../triggers/api/Daml-Trigger-LowLevel.html#functions">Functions</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../reference/daml-ledger-references.html">Daml Ledger References</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../concepts/ledger-model/index.html">Daml Ledger Model Concepts</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../concepts/ledger-model/ledger-structure.html">Structure</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../concepts/ledger-model/ledger-structure.html#actions-and-transactions">Actions and Transactions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../concepts/ledger-model/ledger-structure.html#ledgers">Ledgers</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../concepts/ledger-model/ledger-integrity.html">Integrity</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../concepts/ledger-model/ledger-integrity.html#valid-ledgers">Valid Ledgers</a></li>
<li class="toctree-l4"><a class="reference internal" href="../concepts/ledger-model/ledger-integrity.html#consistency">Consistency</a></li>
<li class="toctree-l4"><a class="reference internal" href="../concepts/ledger-model/ledger-integrity.html#conformance">Conformance</a></li>
<li class="toctree-l4"><a class="reference internal" href="../concepts/ledger-model/ledger-integrity.html#authorization">Authorization</a></li>
<li class="toctree-l4"><a class="reference internal" href="../concepts/ledger-model/ledger-integrity.html#valid-ledgers-obligations-offers-and-rights">Valid Ledgers, Obligations, Offers and Rights</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../concepts/local-ledger.html">Causality and Local Daml Ledgers</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../concepts/local-ledger.html#causality-examples">Causality Examples</a></li>
<li class="toctree-l4"><a class="reference internal" href="../concepts/local-ledger.html#causality-graphs">Causality Graphs</a></li>
<li class="toctree-l4"><a class="reference internal" href="../concepts/local-ledger.html#local-ledgers">Local Ledgers</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../concepts/ledger-model/ledger-privacy.html">Privacy</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../concepts/ledger-model/ledger-privacy.html#contract-observers-and-stakeholders">Contract Observers and Stakeholders</a></li>
<li class="toctree-l4"><a class="reference internal" href="../concepts/ledger-model/ledger-privacy.html#choice-observers">Choice Observers</a></li>
<li class="toctree-l4"><a class="reference internal" href="../concepts/ledger-model/ledger-privacy.html#projections">Projections</a></li>
<li class="toctree-l4"><a class="reference internal" href="../concepts/ledger-model/ledger-privacy.html#privacy-through-authorization">Privacy Through Authorization</a></li>
<li class="toctree-l4"><a class="reference internal" href="../concepts/ledger-model/ledger-privacy.html#divulgence-when-non-stakeholders-see-contracts">Divulgence: When Non-Stakeholders See Contracts</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../concepts/ledger-model/ledger-daml.html">Daml: Define Contract Models Compactly</a></li>
<li class="toctree-l3"><a class="reference internal" href="../concepts/ledger-model/ledger-exceptions.html">Exceptions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../concepts/ledger-model/ledger-exceptions.html#structure">Structure</a></li>
<li class="toctree-l4"><a class="reference internal" href="../concepts/ledger-model/ledger-exceptions.html#consistency">Consistency</a></li>
<li class="toctree-l4"><a class="reference internal" href="../concepts/ledger-model/ledger-exceptions.html#transaction-normalization">Transaction Normalization</a></li>
<li class="toctree-l4"><a class="reference internal" href="../concepts/ledger-model/ledger-exceptions.html#authorization">Authorization</a></li>
<li class="toctree-l4"><a class="reference internal" href="../concepts/ledger-model/ledger-exceptions.html#privacy">Privacy</a></li>
<li class="toctree-l4"><a class="reference internal" href="../concepts/ledger-model/ledger-exceptions.html#relation-to-daml-exceptions">Relation to Daml Exceptions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../concepts/identity-and-package-management.html">Identity and Package Management</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../concepts/identity-and-package-management.html#identity-management">Identity Management</a></li>
<li class="toctree-l4"><a class="reference internal" href="../concepts/identity-and-package-management.html#package-management">Package Management</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../concepts/time.html">Time on Daml Ledgers</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../concepts/time.html#ledger-time">Ledger Time</a></li>
<li class="toctree-l4"><a class="reference internal" href="../concepts/time.html#record-time">Record Time</a></li>
<li class="toctree-l4"><a class="reference internal" href="../concepts/time.html#guarantees">Guarantees</a></li>
<li class="toctree-l4"><a class="reference internal" href="../concepts/time.html#ledger-time-model">Ledger Time Model</a></li>
<li class="toctree-l4"><a class="reference internal" href="../concepts/time.html#assign-ledger-time">Assign Ledger Time</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../concepts/ledger-model/upgrade-model-in-depth.html">Smart Contract Upgrade In Depth</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../concepts/ledger-model/upgrade-model-in-depth.html#static-checks">Static Checks</a></li>
<li class="toctree-l4"><a class="reference internal" href="../concepts/ledger-model/upgrade-model-in-depth.html#data-transformation-runtime-semantics">Data Transformation: Runtime Semantics</a></li>
<li class="toctree-l4"><a class="reference internal" href="../concepts/ledger-model/upgrade-model-in-depth.html#lf-1-17-values-in-the-ledger-api">LF 1.17 Values in the Ledger API</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../reference/canton-advanced-architecture.html">Canton Advanced Architecture</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/contract_keys.html">Contract Keys in Canton</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/contract_keys.html#synchronization-domains-with-uniqueness-guarantees">Synchronization Domains with Uniqueness Guarantees</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/contract_keys.html#non-unique-contract-keys-mode">Non-Unique Contract Keys Mode</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/architecture/domains/domains.html">Domain Architecture and Integrations</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/architecture/domains/domains.html#synchronization-domain-specific-requirements">Synchronization Domain-Specific Requirements</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/architecture/domains/domains.html#synchronization-domain-internal-components">Synchronization Domain-Internal Components</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/architecture/domains/domains.html#drivers">Drivers</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/architecture/domains/ethereum.html">Canton Domain on Ethereum</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/architecture/domains/fabric.html">Canton Domain on Fabric</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/architecture/identity.html">Identity Management</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/architecture/identity.html#identity-providing-service">Identity Providing Service</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/architecture/identity.html#identity-management-design">Identity Management Design</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/architecture/identity.html#implementation">Implementation</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/architecture/requirements/requirements.html">Canton High-Level Requirements</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/architecture/requirements/requirements.html#functional-requirements">Functional requirements</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/architecture/requirements/requirements.html#resource-limits">Resource limits</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/architecture/requirements/requirements.html#non-functional-requirements">Non-functional requirements</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/architecture/requirements/requirements.html#known-limitations">Known limitations</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/architecture/requirements/requirements.html#requirement-exceptions-notes">Requirement Exceptions: Notes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/architecture/research.html">Research Publications</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/architecture/security.html">Security Architecture</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/architecture/security.html#secure-cryptographic-private-key-storage">Secure Cryptographic Private Key Storage</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/architecture/security.html#resilience-to-malicious-participants">Resilience to Malicious Participants</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/architecture/security.html#consensus-transparency">Consensus &amp; Transparency</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../ops/system_architecture_faq.html">System Architecture FAQ</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../ops/system_architecture_faq.html#what-does-the-sequencer-do">What does the Sequencer do?</a></li>
<li class="toctree-l4"><a class="reference internal" href="../ops/system_architecture_faq.html#how-does-canton-process-a-transaction">How does Canton process a transaction?</a></li>
<li class="toctree-l4"><a class="reference internal" href="../ops/system_architecture_faq.html#how-does-canton-ensure-privacy">How does Canton ensure privacy?</a></li>
<li class="toctree-l4"><a class="reference internal" href="../ops/system_architecture_faq.html#where-does-the-golden-source-of-daml-ledger-data-live-in-canton">Where does “the golden source” of Daml Ledger data live in Canton?</a></li>
<li class="toctree-l4"><a class="reference internal" href="../ops/system_architecture_faq.html#how-is-canton-able-to-recover-from-data-loss">How is Canton able to recover from data loss?</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../canton/usermanual/FAQ.html">Canton Frequently Asked Questions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/FAQ.html#log-messages">Log Messages</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/FAQ.html#database-task-queue-full">Database task queue full</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/FAQ.html#serialization-exception">Serialization Exception</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/FAQ.html#console-commands">Console Commands</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/FAQ.html#i-received-an-error-saying-that-the-domainalias-i-used-was-too-long-where-i-can-see-the-limits-of-string-types-in-canton">I received an error saying that the DomainAlias I used was too long. Where I can see the limits of String types in Canton?</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/FAQ.html#bootstrap-scripts">Bootstrap Scripts</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/FAQ.html#why-do-you-have-an-additional-new-line-between-each-line-in-your-example-scripts">Why do you have an additional new line between each line in your example scripts?</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/FAQ.html#how-can-i-use-nested-import-statements-to-split-my-script-into-multiple-files">How can I use nested import statements to split my script into multiple files?</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/FAQ.html#how-do-i-write-data-to-a-file-and-how-do-i-read-it-back">How do I write data to a file and how do I read it back?</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/FAQ.html#why-is-canton-complaining-about-my-database-version">Why is Canton complaining about my database version?</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/FAQ.html#postgres">Postgres</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/FAQ.html#oracle">Oracle</a></li>
<li class="toctree-l4"><a class="reference internal" href="../canton/usermanual/FAQ.html#using-non-standard-database-versions">Using non-standard database versions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/FAQ.html#how-do-i-enable-unsupported-features">How do I enable unsupported features?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/FAQ.html#how-do-i-enable-beta-features">How do I enable beta features?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../canton/usermanual/FAQ.html#how-to-troubleshoot-included-configuration-files">How to troubleshoot included configuration files?</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../concepts/test-evidence.html">Test Evidence</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Early Access</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../concepts/interoperability.html">Daml Ledger Interoperability</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../concepts/interoperability.html#interoperability-examples">Interoperability Examples</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../concepts/interoperability.html#topology">Topology</a></li>
<li class="toctree-l3"><a class="reference internal" href="../concepts/interoperability.html#aggregation-at-the-participant">Aggregation at the Participant</a></li>
<li class="toctree-l3"><a class="reference internal" href="../concepts/interoperability.html#enter-and-leave-events">Enter and Leave Events</a></li>
<li class="toctree-l3"><a class="reference internal" href="../concepts/interoperability.html#cross-ledger-transactions">Cross-ledger Transactions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../concepts/interoperability.html#multi-ledger-causality-graphs">Multi-ledger Causality Graphs</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../concepts/interoperability.html#consistency">Consistency</a></li>
<li class="toctree-l3"><a class="reference internal" href="../concepts/interoperability.html#minimality-and-reduction">Minimality and Reduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../concepts/interoperability.html#from-multi-ledger-causality-graphs-to-ledgers">From Multi-ledger Causality Graphs to Ledgers</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../concepts/interoperability.html#ledger-aware-projection">Ledger-aware Projection</a></li>
<li class="toctree-l2"><a class="reference internal" href="../concepts/interoperability.html#ledger-api-ordering-guarantees">Ledger API Ordering Guarantees</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../tools/non-repudiation.html">Non-repudiation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../tools/non-repudiation.html#architecture">Architecture</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tools/non-repudiation.html#run-the-server-side-components">Run the Server-side Components</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tools/non-repudiation.html#use-the-client">Use the Client</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tools/non-repudiation.html#non-repudiation-over-the-http-json-api">Non-repudiation Over the HTTP JSON API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tools/non-repudiation.html#tls-support">TLS Support</a></li>
</ul>
</li>
</ul>

          
          
          
          <div class="pdf-download"><a href="../_downloads/DamlEnterprise2.10.1.pdf" download>Download as PDF</a></div>
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <div class="topbar fixed">
        
        <nav class="wy-nav-top" aria-label="top navigation">
          
          <i data-toggle="wy-nav-top" class="wy-nav-top-toggle"></i>
          
        </nav>
        <!-- Copyright (c) 2023 Digital Asset (Switzerland) GmbH and/or its affiliates. All rights reserved. -->
<!-- SPDX-License-Identifier: Apache-2.0 -->

<div class="navbar">
    <h1><img src="../_static/images/Daml_Logo_Blue.svg"></h1>
    <div class="navbar-menu">
        <div class="da-menu-item da-menu-depth-1" role="menu">
            <a href="https://www.digitalasset.com/developers" role="menuitem" class="da-menu-link">Developers</a>
        </div>
        <div class="da-menu-item da-menu-depth-1" role="menu">
            <a href="https://www.digitalasset.com/products" role="menuitem" class="da-menu-link">Products</a>
        </div>
        <div class="da-menu-item da-menu-depth-1" role="menu">
            <a href="https://www.digitalasset.com" role="menuitem" class="da-menu-link">Company</a>
        </div>
    </div>
</div>

        <div class="version ">
          <span class="hide-mobile">Version&nbsp;</span><span class="version_switcher_placeholder"></span>
          
        </div>


        <!-- Copyright (c) 2023 Digital Asset (Switzerland) GmbH and/or its affiliates. All rights reserved. -->
<!-- SPDX-License-Identifier: Apache-2.0 -->
<div class="search-inline">
    <div id="rtd-search-inline-form" class="wy-form">
        <input type="text" class="search-inline-input" placeholder="Search" name="q">
        <img src="../_static/images/Search.svg" class="search-inline-img"/>
    </div>
    <div class="search-alert">
        Please enter at least 3 letters.
    </div>
    <div id="search-inline-results" class="search-inline-results">
        
    </div>
</div>
          <!-- Copyright (c) 2023 Digital Asset (Switzerland) GmbH and/or its affiliates. All rights reserved. -->
<!-- SPDX-License-Identifier: Apache-2.0 -->

<div class="content-menu collapsed">
    <span class="content-menu-title">In This Section</span>
    <span class="content-menu-expand"></span>
    <div class="content-menu-wrapper">
        
        <!-- Local TOC -->
        <div class="content-menu-toc"><ul>
<li><a class="reference internal" href="#">Smart Contract Upgrade</a><ul>
<li><a class="reference internal" href="#overview">Overview</a><ul>
<li><a class="reference internal" href="#what-is-smart-contract-upgrade-scu">What is Smart Contract Upgrade (SCU)?</a></li>
<li><a class="reference internal" href="#requirements">Requirements</a></li>
<li><a class="reference internal" href="#smart-contract-upgrade-basics">Smart Contract Upgrade Basics</a><ul>
<li><a class="reference internal" href="#automatic-data-upgrades-and-downgrades">Automatic Data Upgrades and Downgrades</a></li>
</ul>
</li>
<li><a class="reference internal" href="#upgrading-across-the-stack">Upgrading Across the Stack</a><ul>
<li><a class="reference internal" href="#canton">Canton</a></li>
<li><a class="reference internal" href="#code-generation">Code Generation</a></li>
<li><a class="reference internal" href="#json-api-server">JSON API Server</a></li>
<li><a class="reference internal" href="#pqs-daml-shell">PQS &amp; Daml Shell</a></li>
<li><a class="reference internal" href="#daml-script">Daml Script</a></li>
<li><a class="reference internal" href="#daml-compiler">Daml Compiler</a></li>
</ul>
</li>
<li><a class="reference internal" href="#limitations">Limitations</a></li>
</ul>
</li>
<li><a class="reference internal" href="#the-programming-model-by-example">The Programming Model by Example</a><ul>
<li><a class="reference internal" href="#writing-your-first-smart-contract-upgrade">Writing Your First Smart Contract Upgrade</a><ul>
<li><a class="reference internal" href="#setup">Setup</a></li>
<li><a class="reference internal" href="#adding-a-new-field">Adding a New Field</a></li>
<li><a class="reference internal" href="#seeing-upgraded-fields-in-contracts">Seeing Upgraded Fields in Contracts</a></li>
<li><a class="reference internal" href="#downgrading-contracts">Downgrading Contracts</a></li>
<li><a class="reference internal" href="#adding-a-choice">Adding a Choice</a></li>
</ul>
</li>
<li><a class="reference internal" href="#deploying-your-first-upgrade">Deploying Your First Upgrade</a><ul>
<li><a class="reference internal" href="#configuring-canton-to-support-smart-upgrading">Configuring Canton to Support Smart Upgrading</a></li>
<li><a class="reference internal" href="#using-smart-contract-upgrading-enabled-packages">Using Smart Contract Upgrading Enabled Packages</a><ul>
<li><a class="reference internal" href="#validate-the-dar-against-a-running-participant-node">Validate the DAR Against a Running Participant Node</a></li>
<li><a class="reference internal" href="#upgrading-and-package-vetting">Upgrading and Package Vetting</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#continuing-to-write-your-upgrades">Continuing to Write Your Upgrades</a><ul>
<li><a class="reference internal" href="#id1">Setup</a></li>
<li><a class="reference internal" href="#changing-choices">Changing Choices</a></li>
<li><a class="reference internal" href="#modifying-signatory-definitions">Modifying Signatory Definitions</a></li>
<li><a class="reference internal" href="#modifying-key-expressions">Modifying Key Expressions</a></li>
<li><a class="reference internal" href="#upgrading-enums">Upgrading Enums</a></li>
<li><a class="reference internal" href="#upgrading-variants">Upgrading Variants</a></li>
<li><a class="reference internal" href="#limitations-in-upgrading-variants">Limitations in Upgrading Variants</a></li>
<li><a class="reference internal" href="#nested-datatypes">Nested Datatypes</a></li>
<li><a class="reference internal" href="#dependencies">Dependencies</a></li>
<li><a class="reference internal" href="#upgrading-interface-instances">Upgrading Interface Instances</a></li>
<li><a class="reference internal" href="#upgrading-interfaces">Upgrading Interfaces</a></li>
</ul>
</li>
<li><a class="reference internal" href="#developer-workflow">Developer Workflow</a><ul>
<li><a class="reference internal" href="#multi-package-builds">Multi-Package Builds</a></li>
<li><a class="reference internal" href="#working-with-a-running-canton-instance">Working with a Running Canton Instance</a></li>
<li><a class="reference internal" href="#working-with-the-daml-sandbox">Working with the Daml Sandbox</a></li>
</ul>
</li>
<li><a class="reference internal" href="#the-upgrade-model-in-depth-reference">The Upgrade Model in Depth - Reference</a></li>
</ul>
</li>
<li><a class="reference internal" href="#package-selection-in-the-ledger-api">Package Selection in the Ledger API</a><ul>
<li><a class="reference internal" href="#package-preference">Package Preference</a></li>
<li><a class="reference internal" href="#dynamic-package-resolution-in-command-submission">Dynamic Package Resolution in Command Submission</a></li>
<li><a class="reference internal" href="#dynamic-package-resolution-in-ledger-api-queries">Dynamic Package Resolution in Ledger API Queries</a><ul>
<li><a class="reference internal" href="#example">Example</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#migrating-to-scu">Migrating to SCU</a></li>
<li><a class="reference internal" href="#best-practices">Best Practices</a><ul>
<li><a class="reference internal" href="#separate-interfaces-exceptions-from-templates">Separate Interfaces/Exceptions from Templates</a></li>
<li><a class="reference internal" href="#remove-retroactive-instances">Remove Retroactive Instances</a></li>
<li><a class="reference internal" href="#avoid-contract-metadata-changes">Avoid Contract Metadata Changes</a></li>
<li><a class="reference internal" href="#breaking-changes-via-explicit-package-version">Breaking Changes via Explicit Package Version</a></li>
<li><a class="reference internal" href="#avoid-depending-on-lf-1-15-packages">Avoid Depending on LF 1.15 Packages</a></li>
<li><a class="reference internal" href="#avoid-depending-on-daml-script-packages">Avoid Depending on Daml Script Packages</a></li>
<li><a class="reference internal" href="#operational-design-guideline-for-upgrading-daml-apps">Operational Design Guideline for Upgrading Daml Apps</a><ul>
<li><a class="reference internal" href="#zero-downtime-upgrades">Zero-Downtime Upgrades</a></li>
<li><a class="reference internal" href="#rolling-out-backwards-incompatible-changes">Rolling out backwards-incompatible changes</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#testing">Testing</a><ul>
<li><a class="reference internal" href="#standalone-upgradeability-checks">Standalone Upgradeability Checks</a></li>
<li><a class="reference internal" href="#dry-run-uploading-to-a-test-environment">Dry Run Uploading to a Test Environment</a></li>
<li><a class="reference internal" href="#daml-script-testing">Daml Script Testing</a></li>
<li><a class="reference internal" href="#multi-package-builds-for-upgrades">Multi-package builds for upgrades</a></li>
<li><a class="reference internal" href="#workflow-testing">Workflow Testing</a></li>
</ul>
</li>
<li><a class="reference internal" href="#scu-support-in-daml-tooling">SCU Support in Daml Tooling</a><ul>
<li><a class="reference internal" href="#codegen">Codegen</a><ul>
<li><a class="reference internal" href="#java">Java</a></li>
<li><a class="reference internal" href="#typescript">TypeScript</a></li>
</ul>
</li>
<li><a class="reference internal" href="#json-api-server-1">JSON API Server</a></li>
<li><a class="reference internal" href="#pqs">PQS</a></li>
<li><a class="reference internal" href="#daml-shell">Daml Shell</a></li>
<li><a class="reference internal" href="#id5">Daml-Script</a></li>
<li><a class="reference internal" href="#daml-studio-support">Daml Studio support</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
        
    </div>
</div>
        

      </div>
      <div class="wy-nav-content">
        
        <div class="rst-content">
          
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div itemprop="articleBody">
                
  <div class="section" id="smart-contract-upgrade">
<span id="smart-contract-upgrades"></span><h1>Smart Contract Upgrade<a class="headerlink" href="#smart-contract-upgrade" title="Permalink to this headline">¶</a></h1>
<div class="section" id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<div class="section" id="what-is-smart-contract-upgrade-scu">
<h3>What is Smart Contract Upgrade (SCU)?<a class="headerlink" href="#what-is-smart-contract-upgrade-scu" title="Permalink to this headline">¶</a></h3>
<p>Smart Contract Upgrade (SCU) allows Daml models (packages in DAR files) to be
updated on Canton transparently, provided some guidelines in making the
changes are followed. For example, you can fix an application bug by uploading
the DAR of the fixed package. This feature requires the minimum versions of LF
1.17 and Canton Protocol version 7. This section provides an overview of
the SCU feature, while <a class="reference internal" href="../concepts/ledger-model/upgrade-model-in-depth.html#upgrade-model-reference"><span class="std std-ref">The Smart Contract Upgrade Model in Depth</span></a> is a concise, technical description of the feature.</p>
<p>Smart Contract Upgrade (SCU) is a feature for Daml
packages which enable authors to publish new versions of their templates
while maintaining compatibility with prior versions, without any
downtime for package users and existing contracts.</p>
<p>Package authors previously upgraded their packages by either:</p>
<ul>
<li><div class="first line-block">
<div class="line">Providing a Daml workflow for upgrading contracts to the new version,
and tell users of the old version to use the workflow to upgrade
their old templates to the new versions.</div>
<div class="line">This requires communication with all package users, splits package users
across the two versions during the migration, and may incur
significant network cost. This approach is described
<a class="reference internal" href="upgrade.html#upgrade-overview"><span class="std std-ref">here</span></a>.</div>
</div>
</li>
<li><div class="first line-block">
<div class="line">Uploading the new version of their application code to their participant,
temporarily stopping workflows relating to the old version, and manually
upgrading every old template on the participant to the new version by
directly manipulating Canton’s databases. This method is error-prone and
requires some downtime for the participant.</div>
</div>
</li>
</ul>
<p>Now, with SCU, any contract from the old package is automatically interpreted
as the new version as soon as it is used in a new workflow that requires
it. This feature is well-suited for developing and rolling out incremental
template changes. There are guidelines to ensure upgrade compatibility
between DAR files. The compatibility is checked at compile time, DAR
upload time, and runtime. This is to ensure data backwards upgrade
compatibility and forwards compatibility (subject to the guidelines
being followed) so that DARs can be safely upgraded to new versions. It
also prevents unexpected data loss at clients if a runtime downgrade
occurs (e.g., a client is using template version 1.0.0 while the
participant node has the newer version 1.1.0).</p>
<p>A general guideline for SCU is that additive application changes are allowed
but items cannot be removed. A summary of the allowed changes in templates
are:</p>
<ul class="simple">
<li>A template can add new <code class="docutils literal notranslate"><span class="pre">Optional</span></code> fields at the end of the list of fields;</li>
<li>A <code class="docutils literal notranslate"><span class="pre">record</span></code> datatype can add new optional fields at the end of the list of
fields, and a <code class="docutils literal notranslate"><span class="pre">variant</span></code> or <code class="docutils literal notranslate"><span class="pre">enum</span></code> datatype can add new constructors at
the end;</li>
<li>The <code class="docutils literal notranslate"><span class="pre">ensure</span></code> predicate can be changed and it is reevaluated at interpretation;</li>
<li>A choice signature can be changed by adding <code class="docutils literal notranslate"><span class="pre">Optional</span></code> parameters at the end;</li>
<li>The controller of a choice can be changed;</li>
<li>The observer of a choice can be changed</li>
<li>The body of a choice can be changed;</li>
<li>A new choice can be added to a template;</li>
<li>The implementation of an interface instance can be changed;</li>
</ul>
<p>The following table summarizes the changes supported by SCU. Consult the
sections below for additional information. For application updates
that are not covered by SCU, consult the <a class="reference internal" href="automation.html#upgrade-automation"><span class="std std-ref">Automating the Upgrade Process</span></a> section, which describes an upgrade tool for
migrating contracts from an old version to a new version.</p>
<table border="1" class="colwidths-given docutils align-default">
<colgroup>
<col width="20%" />
<col width="20%" />
<col width="15%" />
<col width="45%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Daml Model
Change</strong></th>
<th class="head"><strong>Scope</strong></th>
<th class="head"><strong>Covered
by SCU?</strong></th>
<th class="head"><strong>Comments</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Rename of Module</td>
<td>Template Definition</td>
<td>No</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>Rename of Template</td>
<td>Template Definition</td>
<td>No</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>Change of Field Type</td>
<td>Template Definition</td>
<td>No</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>Change of Field Ordering</td>
<td>Template Definition</td>
<td>No</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>Change of Field Name</td>
<td>Template Definition</td>
<td>No</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>Change of Signatories</td>
<td>Template Definition</td>
<td>No</td>
<td><div class="first last line-block">
<div class="line">A new template version needs to return the same signatory result for a persisted contract, otherwise the contracts cannot be used by an upgraded package (this fails at runtime).</div>
<div class="line"><br /></div>
<div class="line">One can change the function that computes the signatories (for example to take into account new fields) when creating contracts.</div>
</div>
</td>
</tr>
<tr class="row-even"><td>Change of</td>
<td>Template</td>
<td>No</td>
<td><div class="first last line-block">
<div class="line">The key’s type cannot be changed, like adding a new field in the record it contains.</div>
<div class="line"><br /></div>
<div class="line">One can change the function that computes the key in the same way the function computing the signatories can be changed. A persisted contract can be used by an upgrade only if the result of the function does not change.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td>Change of Observers</td>
<td>Template Definition</td>
<td>No</td>
<td>Same as template signatories</td>
</tr>
<tr class="row-even"><td>Change of Key Maintainers</td>
<td>Template Definition</td>
<td>No</td>
<td>Same as template signatories</td>
</tr>
<tr class="row-odd"><td>Change of Ensure Predicate</td>
<td>Template Definition</td>
<td>Yes</td>
<td>Note that the Ensure is recalculated just before usage so any changes need to ensure that a V1 contract is still valid as a V2 contract.</td>
</tr>
<tr class="row-even"><td>Addition of New Definition Fields, Enum, and Variant Constructors</td>
<td>Template Definition</td>
<td>Yes, but they they must be optional</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>Deletion of Fields from Template</td>
<td>Template Definition</td>
<td>No</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>Change of Choice Implementation</td>
<td>Template Definition</td>
<td>Yes</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>Change in Choice Controller</td>
<td>Choice</td>
<td>Yes</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>Addition of Choice Parameters</td>
<td>Choice</td>
<td>Yes, but they must be optional</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>Deletion of Choice Parameters</td>
<td>Choice</td>
<td>No</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>Change of Consuming Choice to Non-Consuming Choice, or Vice-versa</td>
<td>Choice</td>
<td>No</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>Change of Choice Body</td>
<td>Choice</td>
<td>Yes</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>Change of Choice Return Type</td>
<td>Choice</td>
<td>Yes, except for Tuple or scalar types</td>
<td><div class="first last line-block">
<div class="line">You can change a user data type (Record, Variant, Enum) contained in the return type. In this case you can add a field to the record or a new case to the Variant/Enum.</div>
<div class="line"><br /></div>
<div class="line">In particular: you cannot change a collection, Optional, List, or Map; you can change Tuple, (to a triple) if you define your own type.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td>Change of Interface Definition</td>
<td>Interface Definition</td>
<td>No</td>
<td>Interfaces are static and cannot be changed. Separate interface definition and keep the implementation in the template code.</td>
</tr>
<tr class="row-even"><td>Addition of Interface Implementations (Retroactive Interfaces)</td>
<td>Interface Definition</td>
<td>No</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>Adding or Removing Interfaces from Templates</td>
<td>Template Definition</td>
<td>No</td>
<td>Interfaces cannot be changed.</td>
</tr>
<tr class="row-even"><td>Change or Deletion of Exception</td>
<td>Exception Definition</td>
<td>No</td>
<td>Keep the exception definition separate. Exceptions cannot be upgraded.</td>
</tr>
</tbody>
</table>
<p>In this way, package authors can publish new package versions that
improve contract functionality without requiring any
error-prone migrations, without downtime, without requiring any
additional network traffic, and without any extensive communication with
downstream users.</p>
<p>With SCU, packages may now be referenced by either:</p>
<ul class="simple">
<li>the package ID</li>
<li>the package name.</li>
</ul>
<p>Package names are used to group versions of a package. Any two packages with
the same package name must have distinct package versions.</p>
<p><strong>Note:</strong></p>
<ul class="simple">
<li>When defining a Daml package, the <code class="docutils literal notranslate"><span class="pre">name</span></code> field of the package’s <code class="docutils literal notranslate"><span class="pre">daml.yaml</span></code> is now used to
specify the SCU package name.</li>
</ul>
<p>The JSON API server is compatible with the smart contract upgrade
feature by:</p>
<ul class="simple">
<li>Supporting package names for commands and queries;</li>
<li>Allowing use of an optional <code class="docutils literal notranslate"><span class="pre">packageIdSelectionPreference</span></code> field to
specify a preferred package ID to use;</li>
<li>Requiring either a package ID or package name to be present to disambiguate
the partially-qualified form of template/interface IDs.</li>
</ul>
<p>Previously JSON API had supported partially qualified template IDs,
(i.e. simply <code class="docutils literal notranslate"><span class="pre">&lt;module&gt;:&lt;entity&gt;</span></code>) as an interactive convenience which
fails if there is more than one package with matching template names.
Since this format was not supported for production use and does not work
with SCU, it is now unavailable.</p>
<p>The Java and TypeScript codegen allow the use of package name and
package ID (if needed).</p>
<p>PQS supports for this feature.  PQS now supports the highly sought after feature of using package-name
(specified in <code class="docutils literal notranslate"><span class="pre">daml.yaml</span></code>) instead of the more cumbersome package-id. When specifying a
template/interface/choice name, simply substitute any package-id with the
package-name (eg. now <code class="docutils literal notranslate"><span class="pre">register:DA.Register:Token</span></code>) instead of the old
<code class="docutils literal notranslate"><span class="pre">deadbeefpackageidhex:DA.Register:Token</span></code> format. This applies to template
filters and SQL queries (eg. via the <code class="docutils literal notranslate"><span class="pre">active()</span></code> function). These functions will
always return all versions of a given identifier. Qualified name can be:</p>
<ul class="simple">
<li>fully qualified, e.g. <code class="docutils literal notranslate"><span class="pre">&lt;package-name&gt;:&lt;module-path&gt;:&lt;template-name&gt;</span></code></li>
<li>partially qualified, e.g. <code class="docutils literal notranslate"><span class="pre">&lt;module-path&gt;:&lt;template-name&gt;</span></code></li>
</ul>
<p>Qualified names cannot be ambiguous.</p>
<p>The PQS Read API now returns the package-name, package-id, and package-version
for each contract instance, making it easy for users to determine and inspect
different versions over time. To reconstruct the old experience (should you
need to) of querying one specific version, use a filter predicate in
the SQL.</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span>
<span class="w">  </span><span class="k">FROM</span><span class="w"> </span><span class="n">active</span><span class="p">(</span><span class="s1">&#39;mypackage:My.App:MyTemplate&#39;</span><span class="p">)</span>
<span class="w">  </span><span class="k">WHERE</span><span class="w"> </span><span class="n">package_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;deadbeefpackageidhex&#39;</span>
</pre></div>
</div>
</div>
<div class="section" id="requirements">
<h3>Requirements<a class="headerlink" href="#requirements" title="Permalink to this headline">¶</a></h3>
<p>Note that SCU is only available when the criteria below are met:</p>
<ul class="simple">
<li>Canton 2.10.x or above</li>
<li>Daml LF Version 1.17 or above</li>
<li>Canton Protocol Version 7 or above</li>
</ul>
<p>There are instructions below on how to configure this setup. The
sections below, unless explicitly stated otherwise, assume that this is
the case.</p>
<p>To prevent unexpected behavior, this feature enforces a unique package name and version for each DAR being
uploaded to a participant node.
This closes a loophole where the participant node allowed multiple DARs with
the same package name and version. For backward compatibility, this
restriction only applies for packages compiled with LF &gt;= 1.17. If LF &lt;
1.15 is used, there can be several packages with the same name and
version but this should be corrected; duplicate package names and versions are no longer supported.</p>
</div>
<div class="section" id="smart-contract-upgrade-basics">
<h3>Smart Contract Upgrade Basics<a class="headerlink" href="#smart-contract-upgrade-basics" title="Permalink to this headline">¶</a></h3>
<p>To upgrade a package the package author modifies their existing
package to add new functionality, such as new fields and choices. When
the new package is uploaded to a participant with the old version,
the participant ensures that every modification to the model in the
new version is a valid upgrade of the previous version.</p>
<p>To be able to automatically upgrade a contract or datatype, SCU
restricts the kinds of changes that a new package version can introduce
over its prior version.</p>
<p>For example, the simplest kind of data transformation that SCU supports
is adding a field to a template.</p>
<p>Given the following first version of a template:</p>
<div class="highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="kr">template</span><span class="w"> </span><span class="kt">IOU</span>
<span class="w">  </span><span class="kr">with</span>
<span class="w">    </span><span class="n">issuer</span><span class="kt">:</span><span class="w"> </span><span class="kt">Party</span>
<span class="w">    </span><span class="n">owner</span><span class="kt">:</span><span class="w"> </span><span class="kt">Party</span>
<span class="w">    </span><span class="n">value</span><span class="kt">:</span><span class="w"> </span><span class="kt">Int</span>
<span class="w">  </span><span class="kr">where</span>
<span class="w">    </span><span class="kr">signatory</span><span class="w"> </span><span class="n">issuer</span>
<span class="w">    </span><span class="kr">observer</span><span class="w"> </span><span class="n">owner</span>
</pre></div>
</div>
<p>You can add a new field for currency:</p>
<div class="highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="kr">template</span><span class="w"> </span><span class="kt">IOU</span>
<span class="w">  </span><span class="kr">with</span>
<span class="w">    </span><span class="n">issuer</span><span class="kt">:</span><span class="w"> </span><span class="kt">Party</span>
<span class="w">    </span><span class="n">owner</span><span class="kt">:</span><span class="w"> </span><span class="kt">Party</span>
<span class="w">    </span><span class="n">value</span><span class="kt">:</span><span class="w"> </span><span class="kt">Int</span>
<span class="w">    </span><span class="c1">-- New field:</span>
<span class="w">    </span><span class="n">currency</span><span class="kt">:</span><span class="w"> </span><span class="kt">Optional</span><span class="w"> </span><span class="kt">String</span>
<span class="w">  </span><span class="kr">where</span>
<span class="w">    </span><span class="kr">signatory</span><span class="w"> </span><span class="n">issuer</span>
<span class="w">    </span><span class="kr">observer</span><span class="w"> </span><span class="n">owner</span>
</pre></div>
</div>
<p>With SCU, any new template fields must be optional - templates from the
old version are automatically upgraded to new versions by setting the
new field to <code class="docutils literal notranslate"><span class="pre">None</span></code>. This optional field requirement extends to all
records in your package. Conversely, newer contracts with this field set
to <code class="docutils literal notranslate"><span class="pre">None</span></code> can be automatically downgraded to previous versions of the
template in workflows that have not yet been updated.</p>
<div class="section" id="automatic-data-upgrades-and-downgrades">
<h4>Automatic Data Upgrades and Downgrades<a class="headerlink" href="#automatic-data-upgrades-and-downgrades" title="Permalink to this headline">¶</a></h4>
<p>When extending data in a Daml model, SCU requires the old model to be
representable in the new model. For extending a record, we can
only add nullable (<code class="docutils literal notranslate"><span class="pre">Optional</span></code>) fields, so that old data can be represented
by setting these fields to <code class="docutils literal notranslate"><span class="pre">None</span></code>. Similar constraints hold for
Variants and Enums, which only allow adding constructors, with some
other restrictions covered in <a class="reference external" href="#continuing-to-write-your-upgrades">Continuing to Write Your Upgrades</a>. This
approach is inspired by
<a class="reference external" href="https://protobuf.dev/programming-guides/proto3/#updating">Protobuf</a>
and Typescript’s ability to ignore <a class="reference external" href="https://www.typescriptlang.org/docs/handbook/2/objects.html#excess-property-checks">excess
fields</a>
via <code class="docutils literal notranslate"><span class="pre">as</span></code>.</p>
<p>Automatic data upgrades occur in the following places:</p>
<p><strong>Submissions to the Ledger API</strong></p>
<p>When you submit a command, and provide only a package-name instead of a package-id,
Canton will automatically upgrade (or downgrade) the payloads you give to the most
recent version of the package that is uploaded on the participant. It
will also use the most recent implementation of any choices you exercise
directly through the Ledger API, by automatically upgrading/downgrading the choice argument.
Choice result upgrading/downgrading is handled by Consuming Clients, as discussed later in this section.
This behavior can be influenced by <a class="reference internal" href="#package-preference"><span class="std std-ref">the package preference</span></a>.</p>
<p><strong>Updates in a choice body</strong></p>
<p>When Fetching a contract, the contract payload will be automatically upgraded/downgraded to match
the version expected by the calling choice body, as compiled into the DAR.
When Exercising a choice on a contract, the contract payload will be upgraded/downgraded
to match the version of the choice expected by the calling choice body. This means
that in a choice body, an exercised choice argument or return type is never upgraded/downgraded.</p>
<p><strong>Consuming Clients (such as Daml Script, TypeScript/Java codegen)</strong></p>
<p>When clients query the Ledger API for contracts, the returned event
payload format matches the template originally used for generating the
event (creating a contract/exercising a choice). It is the
responsibility of these clients to upgrade/downgrade the payloads they
receive to match what is expected downstream. The same applies to choice
results. Daml Script, as well as TypeScript/Java codegen, does this for you to
match the Ledger API response to the package versions they were run/built from.</p>
</div>
</div>
<div class="section" id="upgrading-across-the-stack">
<h3>Upgrading Across the Stack<a class="headerlink" href="#upgrading-across-the-stack" title="Permalink to this headline">¶</a></h3>
<p>These are all the components that interact with SCU,
and how you as a user should be aware that they interacts.</p>
<div class="section" id="canton">
<h4>Canton<a class="headerlink" href="#canton" title="Permalink to this headline">¶</a></h4>
<p>When considering the Canton ledger nodes, only the Canton participant
node is aware of smart contract upgrading. The Canton domain nodes are
only concerned with the protocol version which must be at least 7 to allow connected participants to use upgradable Daml packages.</p>
<p>Below, we provide a brief overview of the interactions with the
participant node that have been adapted for supporting the smart
contract upgrading feature starting with Canton 2.10:</p>
<ul class="simple">
<li>DAR upload requests go through an additional validation stage to
check the contained new packages for upgrade-compatibility with
other packages previously uploaded on the participant.</li>
<li>Ledger API command submissions can be automatically or explicitly
up/downgraded if multiple upgrade-supported (language version &gt;= 1.17) packages exist for the same package-name.</li>
<li>Ledger API streaming queries are adapted to support fetching events
more generically, by package-name.</li>
</ul>
</div>
<div class="section" id="code-generation">
<h4>Code Generation<a class="headerlink" href="#code-generation" title="Permalink to this headline">¶</a></h4>
<p>The Java and TypeScript CodeGen have been updated to perform upgrades on
retrieved contracts, and now use package-names over package-ids for
commands to the participant.</p>
</div>
<div class="section" id="json-api-server">
<h4>JSON API Server<a class="headerlink" href="#json-api-server" title="Permalink to this headline">¶</a></h4>
<p>To match the changes to the Ledger API, the JSON API similarly supports
package-name queries and command submission.</p>
</div>
<div class="section" id="pqs-daml-shell">
<h4>PQS &amp; Daml Shell<a class="headerlink" href="#pqs-daml-shell" title="Permalink to this headline">¶</a></h4>
<p>As of 2.10, PQS only supports querying contracts via package-name,
dropping support for direct package-id queries. See
<a class="reference external" href="#pqs">the PQS section</a> for more information and a work-around.</p>
<p>Daml Shell builds on top of PQS, so inherits this behavior.</p>
</div>
<div class="section" id="daml-script">
<h4>Daml Script<a class="headerlink" href="#daml-script" title="Permalink to this headline">¶</a></h4>
<p>Support for SCU is available in the opt-in LTS version of Daml Script.</p>
<p>This version acts as a drop-in replacement for the previous
Daml Script, and enables support for upgrades on all queries and
command submissions.</p>
<p>We also expose functions for more advanced interactions with
upgrades, as well as to revert to the previous submission behavior.</p>
</div>
<div class="section" id="daml-compiler">
<h4>Daml Compiler<a class="headerlink" href="#daml-compiler" title="Permalink to this headline">¶</a></h4>
<p>The Daml compiler supports the <code class="docutils literal notranslate"><span class="pre">upgrades:</span></code> configuration field - every
time <code class="docutils literal notranslate"><span class="pre">daml</span> <span class="pre">build</span></code> is invoked, it validates the current package for
upgrade compatibility against the package specified in the <code class="docutils literal notranslate"><span class="pre">upgrades:</span></code>
field.</p>
<p>Validation emits custom error messages for common upgrading mistakes,
and warns the package author when upgrading a package in a potentially
unsafe way. Note however that this validation cannot be complete, as
upgrade validity depends on a participant’s package store. The
participant’s DAR upload checks have the final say on upgrade validity.</p>
</div>
</div>
<div class="section" id="limitations">
<h3>Limitations<a class="headerlink" href="#limitations" title="Permalink to this headline">¶</a></h3>
<p>To allow SCU to minimize downtime, and multiple versions
of a package to be active at once, we limit the types of
transformations that can be performed on live data. Following are some
data transformations that cannot be made using SCU upgrades:</p>
<ul class="simple">
<li>Renaming, removal, or rearrangement of fields in a template</li>
<li>Conversion of records to variants and vice versa</li>
<li>Moving templates/datatypes to other modules</li>
<li>Upgrading interface and exception definitions</li>
<li>Adding/removing an interface instance on a template</li>
</ul>
<p>These restrictions are required to give a simple model of runtime
upgrades, avoiding ambiguity and non-obvious side effects. If you
require any of these types of changes, you may need to consider a
redeployment with downtime, either using the approach suggested in
<a class="reference internal" href="#backwards-incompatible-changes"><span class="std std-ref">Rolling out backwards-incompatible changes</span></a> or using the existing upgrade
procedure described in <a class="reference internal" href="upgrade.html#upgrade-overview"><span class="std std-ref">here</span></a>.</p>
<p>In this version of SCU, the following functionality has not yet been
implemented, but may be implemented in future releases.</p>
<ul class="simple">
<li>A LF 1.17 templates cannot implement a LF 1.15 interface.</li>
<li>Retroactive interface instances are not compatible with SCU
upgrades.  SCU allows instances to be changed in an
upgrade. However, a new interface instance cannot be added to a
template in an upgrade; it requires an offline migration.</li>
<li>Daml Script does not support SCU or LF1.17, you must use Daml Script
LTS.</li>
</ul>
<p>There are further limitations with respect to managing the packages on a running ledger:</p>
<ul class="simple">
<li>Once a version of a package is uploaded to the ledger, it cannot be replaced or removed.
If a package is uploaded by mistake it can only be overriden by uploading an even newer version.</li>
<li>As a consequence of the above, if a record is extended by mistake with an optional field,
that field must be part of all future versions.</li>
<li>Package versions cannot be deleted, they can only be unvetted. As a good rule of thumb
the highest version for each package name should be vetted.</li>
<li>If, for whatever reason, a lower version of a package is vetted and preferred, that
package version needs to be explicitly mentioned in the command submissions in the
specific <cite>package_id_selection_preference</cite> field of the grpc <cite>Commands</cite> message.</li>
<li>Participants that confirm and observe a certain transaction must have vetted the package
version that is preferred by the submitting participant. If that is not the case, the transaction
is rejected.</li>
<li>The contract create events sent as part of the active contracts and transaction streams
are always represented according to the template definition in the package version used
at time of their creation.</li>
</ul>
</div>
</div>
<div class="section" id="the-programming-model-by-example">
<h2>The Programming Model by Example<a class="headerlink" href="#the-programming-model-by-example" title="Permalink to this headline">¶</a></h2>
<div class="section" id="writing-your-first-smart-contract-upgrade">
<h3>Writing Your First Smart Contract Upgrade<a class="headerlink" href="#writing-your-first-smart-contract-upgrade" title="Permalink to this headline">¶</a></h3>
<div class="section" id="setup">
<h4>Setup<a class="headerlink" href="#setup" title="Permalink to this headline">¶</a></h4>
<p>We continue with the example introduced in <a class="reference external" href="#smart-contract-upgrade-basics">Smart Contract Upgrade Basics</a>. Begin by defining the first (old) version
of our package:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>&gt;<span class="w"> </span>mkdir<span class="w"> </span>-p<span class="w"> </span>v1/my-pkg
&gt;<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>v1/my-pkg
&gt;<span class="w"> </span>daml<span class="w"> </span>init
&gt;<span class="w"> </span>daml<span class="w"> </span>version
SDK<span class="w"> </span>versions:
<span class="w">  </span><span class="m">2</span>.10.0<span class="w">  </span><span class="o">(</span>project<span class="w"> </span>SDK<span class="w"> </span>version<span class="w"> </span>from<span class="w"> </span>daml.yaml<span class="o">)</span>
</pre></div>
</div>
<p>Running <code class="docutils literal notranslate"><span class="pre">daml</span> <span class="pre">version</span></code> should print a line showing that 2.10.0 or higher is the “project SDK version from daml.yaml”.</p>
<p>Add <code class="docutils literal notranslate"><span class="pre">daml-script-lts</span></code> to the list of dependencies in <code class="docutils literal notranslate"><span class="pre">v1/my-pkg/daml.yaml</span></code>,
as well as <code class="docutils literal notranslate"><span class="pre">--target=1.17</span></code> to the <code class="docutils literal notranslate"><span class="pre">build-options</span></code>:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nn">...</span>
<span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-pkg</span>
<span class="nn">...</span>
<span class="nt">dependencies</span><span class="p">:</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">daml-prim</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">daml-stdlib</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">daml-script-lts</span>
<span class="nt">build-options</span><span class="p">:</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">--target=1.17</span>
</pre></div>
</div>
<p><strong>Note:</strong> Throughout this tutorial we ignore some best practices
in favor of simplicity. In particular, we recommend a package undergoing SCU
should contain a version identifier in its name as well, but we omit this - consult the section on <a class="reference internal" href="#upgrade-package-naming"><span class="std std-ref">package naming best
practices</span></a> to learn more. We also recommend
that you do not depend on <code class="docutils literal notranslate"><span class="pre">daml-script-lts</span></code> in any package that is uploaded to
the ledger - more on this <a class="reference internal" href="#upgrade-dont-upload-daml-script"><span class="std std-ref">here</span></a>.</p>
<p>Then create <code class="docutils literal notranslate"><span class="pre">v1/my-pkg/daml/Main.daml</span></code>:</p>
<div class="highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="kr">module</span><span class="w"> </span><span class="nn">Main</span><span class="w"> </span><span class="kr">where</span>

<span class="kr">import</span><span class="w"> </span><span class="nn">Daml.Script</span>

<span class="kr">template</span><span class="w"> </span><span class="kt">IOU</span>
<span class="w">  </span><span class="kr">with</span>
<span class="w">    </span><span class="n">issuer</span><span class="kt">:</span><span class="w"> </span><span class="kt">Party</span>
<span class="w">    </span><span class="n">owner</span><span class="kt">:</span><span class="w"> </span><span class="kt">Party</span>
<span class="w">    </span><span class="n">value</span><span class="kt">:</span><span class="w"> </span><span class="kt">Int</span>
<span class="w">  </span><span class="kr">where</span>
<span class="w">    </span><span class="kr">signatory</span><span class="w"> </span><span class="n">issuer</span>
<span class="w">    </span><span class="kr">observer</span><span class="w"> </span><span class="n">owner</span>
<span class="w">    </span><span class="kr">key</span><span class="w"> </span><span class="n">issuer</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Party</span>
<span class="w">    </span><span class="kr">maintainer</span><span class="w"> </span><span class="kr">key</span>
</pre></div>
</div>
<p>Running daml build should successfully produce a DAR in
<code class="docutils literal notranslate"><span class="pre">v1/my-pkg/.daml/dist/my-pkg-1.0.0.dar</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>&gt;<span class="w"> </span>daml<span class="w"> </span>build
Running<span class="w"> </span>single<span class="w"> </span>package<span class="w"> </span>build<span class="w"> </span>of<span class="w"> </span>my-pkg<span class="w"> </span>as<span class="w"> </span>no<span class="w"> </span>multi-package.yaml<span class="w"> </span>was<span class="w"> </span>found.
...
Compiling<span class="w"> </span>my-pkg<span class="w"> </span>to<span class="w"> </span>a<span class="w"> </span>DAR.
...
Created<span class="w"> </span>.daml/dist/my-pkg-1.0.0.dar
</pre></div>
</div>
<p>Now you can create the second (new) version of this package, which
upgrades the first version. Navigate back to the root directory and copy
the v1 package into a v2 directory.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>&gt;<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>../..
&gt;<span class="w"> </span>cp<span class="w"> </span>-r<span class="w"> </span>v1<span class="w"> </span>v2
&gt;<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>v2/my-pkg
</pre></div>
</div>
<p>Edit the <code class="docutils literal notranslate"><span class="pre">daml.yaml</span></code> to update the package version, and add the <code class="docutils literal notranslate"><span class="pre">upgrades:</span></code>
field pointing to v1:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1.1.0</span>
<span class="nn">...</span>
<span class="nt">dependencies</span><span class="p">:</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">daml-prim</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">daml-stdlib</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">daml-script-lts</span>
<span class="nt">upgrades</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">../../v1/my-pkg/.daml/dist/my-pkg-1.0.0.dar</span>
<span class="nt">build-options</span><span class="p">:</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">--target=1.17</span>
</pre></div>
</div>
<p>Any changes you make to v2 are now validated as correct upgrades
over v1.</p>
</div>
<div class="section" id="adding-a-new-field">
<h4>Adding a New Field<a class="headerlink" href="#adding-a-new-field" title="Permalink to this headline">¶</a></h4>
<p>Begin by adding a new <code class="docutils literal notranslate"><span class="pre">currency</span></code> field to <code class="docutils literal notranslate"><span class="pre">v2/my-pkg/daml/Main.daml</span></code>:</p>
<div class="highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="o">...</span>
<span class="kr">template</span><span class="w"> </span><span class="kt">IOU</span>
<span class="w">  </span><span class="kr">with</span>
<span class="w">    </span><span class="n">issuer</span><span class="kt">:</span><span class="w"> </span><span class="kt">Party</span>
<span class="w">    </span><span class="n">owner</span><span class="kt">:</span><span class="w"> </span><span class="kt">Party</span>
<span class="w">    </span><span class="n">value</span><span class="kt">:</span><span class="w"> </span><span class="kt">Int</span>
<span class="w">    </span><span class="n">currency</span><span class="kt">:</span><span class="w"> </span><span class="kt">Text</span><span class="w"> </span><span class="c1">-- New field</span>
<span class="w">  </span><span class="kr">where</span>
<span class="o">...</span>
</pre></div>
</div>
<p>Run <code class="docutils literal notranslate"><span class="pre">daml</span> <span class="pre">build</span></code>. An error is emitted:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>&gt;<span class="w"> </span>daml<span class="w"> </span>build
...
error<span class="w"> </span><span class="nb">type</span><span class="w"> </span>checking<span class="w"> </span>template<span class="w"> </span>Main.IOU<span class="w"> </span>:
<span class="w">  </span>The<span class="w"> </span>upgraded<span class="w"> </span>template<span class="w"> </span>IOU<span class="w"> </span>has<span class="w"> </span>added<span class="w"> </span>new<span class="w"> </span>fields,<span class="w"> </span>but<span class="w"> </span>those<span class="w"> </span>fields<span class="w"> </span>are<span class="w"> </span>not<span class="w"> </span>Optional.
ERROR:<span class="w"> </span>Creation<span class="w"> </span>of<span class="w"> </span>DAR<span class="w"> </span>file<span class="w"> </span>failed.
</pre></div>
</div>
<p>Any new fields added to a template must be optional - old contracts
from the previous version are automatically upgraded by setting new
fields to <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p>
<p>Fix the <code class="docutils literal notranslate"><span class="pre">currency</span></code> field to be optional, and re-run <code class="docutils literal notranslate"><span class="pre">daml</span> <span class="pre">build</span></code>:</p>
<div class="highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="o">...</span>
<span class="w">    </span><span class="n">currency</span><span class="kt">:</span><span class="w"> </span><span class="kt">Optional</span><span class="w"> </span><span class="kt">Text</span><span class="w"> </span><span class="c1">-- New field</span>
<span class="o">...</span>
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>&gt;<span class="w"> </span>daml<span class="w"> </span>build
...
Created<span class="w"> </span>.daml/dist/my-pkg-1.0.0.dar
</pre></div>
</div>
<p>The build may produce warnings about expression changes - this is
covered in the <a class="reference external" href="#continuing-to-write-your-upgrades">Continuing to Write Your
Upgrades</a> section.</p>
</div>
<div class="section" id="seeing-upgraded-fields-in-contracts">
<h4>Seeing Upgraded Fields in Contracts<a class="headerlink" href="#seeing-upgraded-fields-in-contracts" title="Permalink to this headline">¶</a></h4>
<p>Using the Daml Sandbox, we can see our old contracts automatically
upgrade.</p>
<p>Add a script to make and get IOUs to <code class="docutils literal notranslate"><span class="pre">v1/my-pkg/daml/Main.daml</span></code>:</p>
<div class="highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="kr">module</span><span class="w"> </span><span class="nn">Main</span><span class="w"> </span><span class="kr">where</span>

<span class="kr">import</span><span class="w"> </span><span class="nn">Daml.Script</span>
<span class="o">...</span>
<span class="nf">mkIOU</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Script</span><span class="w"> </span><span class="kt">Party</span>
<span class="nf">mkIOU</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="kr">do</span>
<span class="w">  </span><span class="n">alice</span><span class="w"> </span><span class="ow">&lt;-</span><span class="w"> </span><span class="n">allocateParty</span><span class="w"> </span><span class="s">&quot;alice&quot;</span>
<span class="w">  </span><span class="n">alice</span><span class="w"> </span><span class="p">`</span><span class="n">submit</span><span class="p">`</span><span class="w"> </span><span class="n">createCmd</span><span class="w"> </span><span class="p">(</span><span class="kt">IOU</span><span class="w"> </span><span class="n">alice</span><span class="w"> </span><span class="n">alice</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span>
<span class="w">  </span><span class="n">pure</span><span class="w"> </span><span class="n">alice</span>

<span class="nf">getIOU</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Party</span><span class="w"> </span><span class="ow">-&gt;</span><span class="w"> </span><span class="kt">Script</span><span class="w"> </span><span class="p">(</span><span class="kt">Optional</span><span class="w"> </span><span class="p">(</span><span class="kt">ContractId</span><span class="w"> </span><span class="kt">IOU</span><span class="p">,</span><span class="w"> </span><span class="kt">IOU</span><span class="p">))</span>
<span class="nf">getIOU</span><span class="w"> </span><span class="kr">key</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="n">queryContractKey</span><span class="w"> </span><span class="o">@</span><span class="kt">IOU</span><span class="w"> </span><span class="kr">key</span><span class="w"> </span><span class="kr">key</span>
</pre></div>
</div>
<p>Open <code class="docutils literal notranslate"><span class="pre">v2/my-pkg/daml/Main.daml</span></code> and add scripts to make IOUs with and
without a currency field, and a script to get any IOU:</p>
<div class="highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="kr">module</span><span class="w"> </span><span class="nn">Main</span><span class="w"> </span><span class="kr">where</span>

<span class="kr">import</span><span class="w"> </span><span class="nn">Daml.Script</span>
<span class="o">...</span>
<span class="nf">mkIOU</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Script</span><span class="w"> </span><span class="kt">Party</span>
<span class="nf">mkIOU</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="kr">do</span>
<span class="w">  </span><span class="n">alice</span><span class="w"> </span><span class="ow">&lt;-</span><span class="w"> </span><span class="n">allocateParty</span><span class="w"> </span><span class="s">&quot;alice&quot;</span>
<span class="w">  </span><span class="n">alice</span><span class="w"> </span><span class="p">`</span><span class="n">submit</span><span class="p">`</span><span class="w"> </span><span class="n">createCmd</span><span class="w"> </span><span class="p">(</span><span class="kt">IOU</span><span class="w"> </span><span class="n">alice</span><span class="w"> </span><span class="n">alice</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">(</span><span class="kt">Some</span><span class="w"> </span><span class="s">&quot;USD&quot;</span><span class="p">))</span>
<span class="w">  </span><span class="n">pure</span><span class="w"> </span><span class="n">alice</span>

<span class="nf">mkIOUWithoutCurrency</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Script</span><span class="w"> </span><span class="kt">Party</span>
<span class="nf">mkIOUWithoutCurrency</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="kr">do</span>
<span class="w">  </span><span class="n">alice</span><span class="w"> </span><span class="ow">&lt;-</span><span class="w"> </span><span class="n">allocateParty</span><span class="w"> </span><span class="s">&quot;alice&quot;</span>
<span class="w">  </span><span class="n">alice</span><span class="w"> </span><span class="p">`</span><span class="n">submit</span><span class="p">`</span><span class="w"> </span><span class="n">createCmd</span><span class="w"> </span><span class="p">(</span><span class="kt">IOU</span><span class="w"> </span><span class="n">alice</span><span class="w"> </span><span class="n">alice</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="kt">None</span><span class="p">)</span>
<span class="w">  </span><span class="n">pure</span><span class="w"> </span><span class="n">alice</span>

<span class="nf">getIOU</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Party</span><span class="w"> </span><span class="ow">-&gt;</span><span class="w"> </span><span class="kt">Script</span><span class="w"> </span><span class="p">(</span><span class="kt">Optional</span><span class="w"> </span><span class="p">(</span><span class="kt">ContractId</span><span class="w"> </span><span class="kt">IOU</span><span class="p">,</span><span class="w"> </span><span class="kt">IOU</span><span class="p">))</span>
<span class="nf">getIOU</span><span class="w"> </span><span class="kr">key</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="n">queryContractKey</span><span class="w"> </span><span class="o">@</span><span class="kt">IOU</span><span class="w"> </span><span class="kr">key</span><span class="w"> </span><span class="kr">key</span>
</pre></div>
</div>
<p>Start a new terminal, run <code class="docutils literal notranslate"><span class="pre">daml</span> <span class="pre">sandbox</span></code> to start a simple ledger in which
to test upgrades.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>&gt;<span class="w"> </span>daml<span class="w"> </span>sandbox
Starting<span class="w"> </span>Canton<span class="w"> </span>sandbox.
Listening<span class="w"> </span>at<span class="w"> </span>port<span class="w"> </span><span class="m">6865</span>
Canton<span class="w"> </span>sandbox<span class="w"> </span>is<span class="w"> </span>ready.
</pre></div>
</div>
<p>Start another terminal, separately from the terminal in which the
sandbox is running. From inside <code class="docutils literal notranslate"><span class="pre">v1/my-pkg</span></code>, upload and run the <code class="docutils literal notranslate"><span class="pre">mkIOU</span></code>
script and place the resulting party for Alice into an output file
<code class="docutils literal notranslate"><span class="pre">alice-v1</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>&gt;<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>v1/my-pkg
&gt;<span class="w"> </span>daml<span class="w"> </span>ledger<span class="w"> </span>upload-dar<span class="w"> </span>--port<span class="w"> </span><span class="m">6865</span>
&gt;<span class="w"> </span>daml<span class="w"> </span>script<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--ledger-host<span class="w"> </span>localhost<span class="w"> </span>--ledger-port<span class="w"> </span><span class="m">6865</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--dar<span class="w"> </span>.daml/dist/my-pkg-1.0.0.dar<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--script-name<span class="w"> </span>Main:mkIOU<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--output-file<span class="w"> </span>alice-v1
...
</pre></div>
</div>
<p>From inside <code class="docutils literal notranslate"><span class="pre">v2/my-pkg</span></code>, upload and run the <code class="docutils literal notranslate"><span class="pre">getIOU</span></code> script, passing in the
<code class="docutils literal notranslate"><span class="pre">alice-v1</span></code> file as the script’s input:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>&gt;<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>../../v2/my-pkg
&gt;<span class="w"> </span>daml<span class="w"> </span>ledger<span class="w"> </span>upload-dar<span class="w"> </span>--port<span class="w"> </span><span class="m">6865</span>
&gt;<span class="w"> </span>daml<span class="w"> </span>script<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--ledger-host<span class="w"> </span>localhost<span class="w"> </span>--ledger-port<span class="w"> </span><span class="m">6865</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--dar<span class="w"> </span>.daml/dist/my-pkg-1.1.0.dar<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--script-name<span class="w"> </span>Main:getIOU<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--output-file<span class="w"> </span>/dev/stdout<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--input-file<span class="w"> </span>../../v1/my-pkg/alice-v1
...
<span class="o">{</span>
<span class="w">  </span><span class="s2">&quot;_1&quot;</span>:<span class="w"> </span><span class="s2">&quot;...&quot;</span>,
<span class="w">  </span><span class="s2">&quot;_2&quot;</span>:<span class="w"> </span><span class="o">{</span>
<span class="w">  </span><span class="s2">&quot;issuer&quot;</span>:<span class="w"> </span><span class="s2">&quot;party-...&quot;</span>,
<span class="w">  </span><span class="s2">&quot;owner&quot;</span>:<span class="w"> </span><span class="s2">&quot;party-...&quot;</span>,
<span class="w">  </span><span class="s2">&quot;value&quot;</span>:<span class="w"> </span><span class="m">1</span>,
<span class="w">  </span><span class="s2">&quot;currency&quot;</span>:<span class="w"> </span>null
<span class="w">  </span><span class="o">}</span>
<span class="o">}</span>
...
</pre></div>
</div>
<p>The returned contract has a field <code class="docutils literal notranslate"><span class="pre">currency</span></code> which is set to <code class="docutils literal notranslate"><span class="pre">null</span></code>. When
running the <code class="docutils literal notranslate"><span class="pre">getIOU</span></code> script from v1, this field does not appear.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>&gt;<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>../../v1/my-pkg
&gt;<span class="w"> </span>daml<span class="w"> </span>script<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--ledger-host<span class="w"> </span>localhost<span class="w"> </span>--ledger-port<span class="w"> </span><span class="m">6865</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--dar<span class="w"> </span>.daml/dist/my-pkg-1.0.0.dar<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--script-name<span class="w"> </span>Main:getIOU<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--output-file<span class="w"> </span>/dev/stdout<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--input-file<span class="w"> </span>alice-v1
...
<span class="o">{</span>
<span class="w">  </span><span class="s2">&quot;_1&quot;</span>:<span class="w"> </span><span class="s2">&quot;...&quot;</span>,
<span class="w">  </span><span class="s2">&quot;_2&quot;</span>:<span class="w"> </span><span class="o">{</span>
<span class="w">  </span><span class="s2">&quot;issuer&quot;</span>:<span class="w"> </span><span class="s2">&quot;party-...&quot;</span>,
<span class="w">  </span><span class="s2">&quot;owner&quot;</span>:<span class="w"> </span><span class="s2">&quot;party-...&quot;</span>,
<span class="w">  </span><span class="s2">&quot;value&quot;</span>:<span class="w"> </span><span class="m">1</span>
<span class="w">  </span><span class="o">}</span>
<span class="o">}</span>
...
</pre></div>
</div>
</div>
<div class="section" id="downgrading-contracts">
<h4>Downgrading Contracts<a class="headerlink" href="#downgrading-contracts" title="Permalink to this headline">¶</a></h4>
<p>New contracts cannot be downgraded if they have a value in their
Optional fields. Create a new v2 IOU contract from the <code class="docutils literal notranslate"><span class="pre">v2/my-pkg</span></code>
directory, with <code class="docutils literal notranslate"><span class="pre">USD</span></code> as currency:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>&gt;<span class="w"> </span><span class="c1"># Create a new v2 IOU contract, with USD as currency</span>
&gt;<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>../../v2/my-pkg
&gt;<span class="w"> </span>daml<span class="w"> </span>script<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--ledger-host<span class="w"> </span>localhost<span class="w"> </span>--ledger-port<span class="w"> </span><span class="m">6865</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--dar<span class="w"> </span>.daml/dist/my-pkg-1.1.0.dar<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--script-name<span class="w"> </span>Main:mkIOU<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--output-file<span class="w"> </span>alice-v2
...
</pre></div>
</div>
<p>Query it from a v1 script in the <code class="docutils literal notranslate"><span class="pre">v1/my-pkg</span></code> directory:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>&gt;<span class="w"> </span><span class="c1"># Query from v1 package</span>
&gt;<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>../../v1/my-pkg
&gt;<span class="w"> </span>daml<span class="w"> </span>script<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--ledger-host<span class="w"> </span>localhost<span class="w"> </span>--ledger-port<span class="w"> </span><span class="m">6865</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--dar<span class="w"> </span>.daml/dist/my-pkg-1.0.0.dar<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--script-name<span class="w"> </span>Main:getIOU<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--output-file<span class="w"> </span>/dev/stdout<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--input-file<span class="w"> </span>../../v2/my-pkg/alice-v2
...
Exception<span class="w"> </span><span class="k">in</span><span class="w"> </span>thread<span class="w"> </span><span class="s2">&quot;main&quot;</span><span class="w"> </span>com.daml.lf.engine.script.Script<span class="nv">$FailedCmd</span>:<span class="w"> </span>Command<span class="w"> </span>QueryContractKey<span class="w"> </span>failed:<span class="w"> </span>Failed<span class="w"> </span>to<span class="w"> </span>translate<span class="w"> </span>create<span class="w"> </span>argument:
...
An<span class="w"> </span>optional<span class="w"> </span>contract<span class="w"> </span>field<span class="w"> </span>with<span class="w"> </span>a<span class="w"> </span>value<span class="w"> </span>of<span class="w"> </span>Some<span class="w"> </span>may<span class="w"> </span>not<span class="w"> </span>be<span class="w"> </span>dropped<span class="w"> </span>during<span class="w"> </span>downgrading.
</pre></div>
</div>
<p>The error states that the optional field may not be dropped during
downgrading.</p>
<p>Contracts created in a workflow from a v2 package may be used if the
optional, upgraded fields are set to <code class="docutils literal notranslate"><span class="pre">None</span></code>. For example, create an IOU
with the currency field set to <code class="docutils literal notranslate"><span class="pre">None</span></code> using <code class="docutils literal notranslate"><span class="pre">mkIOUWithoutCurrency</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>&gt;<span class="w"> </span><span class="c1"># Create a new v2 IOU contract, without USD as currency</span>
&gt;<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>../../v2/my-pkg
&gt;<span class="w"> </span>daml<span class="w"> </span>script<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--ledger-host<span class="w"> </span>localhost<span class="w"> </span>--ledger-port<span class="w"> </span><span class="m">6865</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--dar<span class="w"> </span>.daml/dist/my-pkg-1.1.0.dar<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--script-name<span class="w"> </span>Main:mkIOUWithoutCurrency<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--output-file<span class="w"> </span>alice-v2
...
</pre></div>
</div>
<p>And then query it from v1:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>&gt;<span class="w"> </span><span class="c1"># Query from v1 package</span>
&gt;<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>../../v1/my-pkg
&gt;<span class="w"> </span>daml<span class="w"> </span>script<span class="w"> </span><span class="se">\</span>
<span class="w">      </span>--ledger-host<span class="w"> </span>localhost<span class="w"> </span>--ledger-port<span class="w"> </span><span class="m">6865</span><span class="w"> </span><span class="se">\</span>
<span class="w">      </span>--dar<span class="w"> </span>.daml/dist/my-pkg-1.0.0.dar<span class="w"> </span><span class="se">\</span>
<span class="w">      </span>--script-name<span class="w"> </span>Main:getIOU<span class="w"> </span><span class="se">\</span>
<span class="w">      </span>--output-file<span class="w"> </span>/dev/stdout<span class="w"> </span><span class="se">\</span>
<span class="w">      </span>--input-file<span class="w"> </span>../../v2/my-pkg/alice-v2
...
<span class="w">  </span><span class="s2">&quot;issuer&quot;</span>:<span class="w"> </span><span class="s2">&quot;party-...&quot;</span>,
<span class="w">      </span><span class="s2">&quot;owner&quot;</span>:<span class="w"> </span><span class="s2">&quot;party-...&quot;</span>,
<span class="w">      </span><span class="s2">&quot;value&quot;</span>:<span class="w"> </span><span class="m">1</span>
...
</pre></div>
</div>
<p>In this case, the query from v1 succeeded because all upgraded fields
are set to <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p>
</div>
<div class="section" id="adding-a-choice">
<h4>Adding a Choice<a class="headerlink" href="#adding-a-choice" title="Permalink to this headline">¶</a></h4>
<p>SCU also allows package authors to add new choices - add the
example choice <code class="docutils literal notranslate"><span class="pre">Double</span></code> to <code class="docutils literal notranslate"><span class="pre">v2/my-pkg/daml/Main.daml</span></code>, which archives
the current contract and produces a new one with twice the value.</p>
<div class="highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="o">...</span>
<span class="w">    </span><span class="kr">maintainer</span><span class="w"> </span><span class="kr">key</span>
<span class="w">    </span><span class="kr">choice</span><span class="w"> </span><span class="kt">Double</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">ContractId</span><span class="w"> </span><span class="kt">IOU</span>
<span class="w">        </span><span class="kr">controller</span><span class="w"> </span><span class="n">issuer</span>
<span class="w">        </span><span class="kr">do</span><span class="w"> </span><span class="n">create</span><span class="w"> </span><span class="kr">this</span><span class="w"> </span><span class="kr">with</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">2</span>
<span class="o">...</span>
</pre></div>
</div>
<p>Along with a script to call it.</p>
<div class="highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="kr">import</span><span class="w"> </span><span class="nn">DA.Optional</span><span class="w"> </span><span class="p">(</span><span class="nf">fromSome</span><span class="p">)</span>

<span class="o">...</span>

<span class="nf">doubleIOU</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Party</span><span class="w"> </span><span class="ow">-&gt;</span><span class="w"> </span><span class="kt">Script</span><span class="w"> </span><span class="kt">IOU</span>
<span class="nf">doubleIOU</span><span class="w"> </span><span class="n">alice</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="kr">do</span>
<span class="w">  </span><span class="n">oIOU</span><span class="w"> </span><span class="ow">&lt;-</span><span class="w"> </span><span class="n">getIOU</span><span class="w"> </span><span class="n">alice</span>
<span class="w">  </span><span class="kr">case</span><span class="w"> </span><span class="n">oIOU</span><span class="w"> </span><span class="kr">of</span>
<span class="w">    </span><span class="kt">Some</span><span class="w"> </span><span class="p">(</span><span class="n">cid</span><span class="p">,</span><span class="w"> </span><span class="kr">_</span><span class="p">)</span><span class="w"> </span><span class="ow">-&gt;</span><span class="w"> </span><span class="kr">do</span>
<span class="w">      </span><span class="n">newCid</span><span class="w"> </span><span class="ow">&lt;-</span><span class="w"> </span><span class="n">alice</span><span class="w"> </span><span class="p">`</span><span class="n">submit</span><span class="p">`</span><span class="w"> </span><span class="n">exerciseCmd</span><span class="w"> </span><span class="n">cid</span><span class="w"> </span><span class="kt">Double</span>
<span class="w">      </span><span class="n">fromSome</span><span class="w"> </span><span class="o">&lt;$&gt;</span><span class="w"> </span><span class="n">queryContractId</span><span class="w"> </span><span class="n">alice</span><span class="w"> </span><span class="n">newCid</span>
<span class="w">    </span><span class="kt">None</span><span class="w"> </span><span class="ow">-&gt;</span><span class="w"> </span><span class="n">fail</span><span class="w"> </span><span class="s">&quot;Failed to find IOU&quot;</span>
</pre></div>
</div>
<p>Compiled changes are checked against the previous version and pass:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>&gt;<span class="w"> </span>daml<span class="w"> </span>build
...
Compiling<span class="w"> </span>my-pkg<span class="w"> </span>to<span class="w"> </span>a<span class="w"> </span>DAR.
...
Created<span class="w"> </span>.daml/dist/my-pkg-1.1.0.dar
...
</pre></div>
</div>
<p>Restart the sandbox and re-upload both v1 and v2:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>&gt;<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>v1/my-deps
&gt;<span class="w"> </span>daml<span class="w"> </span>ledger<span class="w"> </span>upload-dar<span class="w"> </span>--port<span class="w"> </span><span class="m">6865</span>
&gt;<span class="w"> </span><span class="c1"># Make a new IOU</span>
&gt;<span class="w"> </span>daml<span class="w"> </span>script<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--ledger-host<span class="w"> </span>localhost<span class="w"> </span>--ledger-port<span class="w"> </span><span class="m">6865</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--dar<span class="w"> </span>.daml/dist/my-pkg-1.0.0.dar<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--script-name<span class="w"> </span>Main:mkIOU<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--output-file<span class="w"> </span>alice-v1
...
&gt;<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>../../v2/my-deps
&gt;<span class="w"> </span>daml<span class="w"> </span>ledger<span class="w"> </span>upload-dar<span class="w"> </span>--port<span class="w"> </span><span class="m">6865</span>
...
&gt;<span class="w"> </span>daml<span class="w"> </span>script<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--ledger-host<span class="w"> </span>localhost<span class="w"> </span>--ledger-port<span class="w"> </span><span class="m">6865</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--dar<span class="w"> </span>.daml/dist/my-pkg-1.1.0.dar<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--script-name<span class="w"> </span>Main:doubleIOU<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--output-file<span class="w"> </span>/dev/stdout<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--input-file<span class="w"> </span>../../v1/my-pkg/alice-v1
...
<span class="w">      </span><span class="s2">&quot;issuer&quot;</span>:<span class="w"> </span><span class="s2">&quot;party-...&quot;</span>,
<span class="w">      </span><span class="s2">&quot;owner&quot;</span>:<span class="w"> </span><span class="s2">&quot;party-...&quot;</span>,
<span class="w">      </span><span class="s2">&quot;value&quot;</span>:<span class="w"> </span><span class="m">2</span>,
<span class="w">      </span><span class="s2">&quot;currency&quot;</span>:<span class="w"> </span>null
...
</pre></div>
</div>
<p>Contracts made in v1 can now be exercised with choices introduced in
v2.</p>
<p>Exercising a v1 choice on a v2 contract is also possible if upgraded
fields are set to <code class="docutils literal notranslate"><span class="pre">None</span></code>, but this requires a different script function -
replace the use of <code class="docutils literal notranslate"><span class="pre">exerciseCmd</span></code> with <code class="docutils literal notranslate"><span class="pre">exerciseExactCmd</span></code> in the body of
<code class="docutils literal notranslate"><span class="pre">doubleIOU</span></code> in v1, and restart your sandbox.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>&gt;<span class="w"> </span><span class="c1"># Replace exerciseCmd with exerciseExactCmd in v1</span>
&gt;<span class="w"> </span><span class="c1"># Do it using your editor, or use `sed`</span>
&gt;<span class="w"> </span>sed<span class="w"> </span>-i<span class="w"> </span>-E<span class="w"> </span><span class="s1">&#39;s/exerciseCmd/exerciseExactCmd/g&#39;</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>v1/my-pkg/daml/Main.daml
</pre></div>
</div>
<p>Once you’ve restarted your sandbox, create an IOU without a currency in
V2 via <code class="docutils literal notranslate"><span class="pre">mkIOUWithoutCurrency</span></code>, then run <code class="docutils literal notranslate"><span class="pre">doubleIOU</span></code> on it from V1:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>&gt;<span class="w"> </span><span class="c1"># Create a new v2 IOU contract, without USD as currency</span>
&gt;<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>v2/my-pkg
&gt;<span class="w"> </span>daml<span class="w"> </span>ledger<span class="w"> </span>upload-dar<span class="w"> </span>--port<span class="w"> </span><span class="m">6865</span>
&gt;<span class="w"> </span>daml<span class="w"> </span>script<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--ledger-host<span class="w"> </span>localhost<span class="w"> </span>--ledger-port<span class="w"> </span><span class="m">6865</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--dar<span class="w"> </span>.daml/dist/my-pkg-1.1.0.dar<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--script-name<span class="w"> </span>Main:mkIOUWithoutCurrency<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--output-file<span class="w"> </span>alice-v2
&gt;<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>../../v1/my-pkg
&gt;<span class="w"> </span>daml<span class="w"> </span>ledger<span class="w"> </span>upload-dar<span class="w"> </span>--port<span class="w"> </span><span class="m">6865</span>
&gt;<span class="w"> </span>daml<span class="w"> </span>script<span class="w"> </span><span class="se">\</span>
<span class="w">      </span>--ledger-host<span class="w"> </span>localhost<span class="w"> </span>--ledger-port<span class="w"> </span><span class="m">6865</span><span class="w"> </span><span class="se">\</span>
<span class="w">      </span>--dar<span class="w"> </span>.daml/dist/my-pkg-1.0.0.dar<span class="w"> </span><span class="se">\</span>
<span class="w">      </span>--script-name<span class="w"> </span>Main:doubleIOU<span class="w"> </span><span class="se">\</span>
<span class="w">      </span>--output-file<span class="w"> </span>/dev/stdout<span class="w"> </span><span class="se">\</span>
<span class="w">      </span>--input-file<span class="w"> </span>../../v2/my-pkg/alice-v2
...
<span class="w">      </span><span class="s2">&quot;issuer&quot;</span>:<span class="w"> </span><span class="s2">&quot;party-...&quot;</span>,
<span class="w">      </span><span class="s2">&quot;owner&quot;</span>:<span class="w"> </span><span class="s2">&quot;party-...&quot;</span>,
<span class="w">      </span><span class="s2">&quot;value&quot;</span>:<span class="w"> </span><span class="m">2</span>
...
</pre></div>
</div>
<p>Existing choices can also be upgraded, as covered in
<a class="reference external" href="#continuing-to-write-your-upgrades">Continuing to Write Your Upgrades</a>.</p>
</div>
</div>
<div class="section" id="deploying-your-first-upgrade">
<h3>Deploying Your First Upgrade<a class="headerlink" href="#deploying-your-first-upgrade" title="Permalink to this headline">¶</a></h3>
<div class="section" id="configuring-canton-to-support-smart-upgrading">
<h4>Configuring Canton to Support Smart Upgrading<a class="headerlink" href="#configuring-canton-to-support-smart-upgrading" title="Permalink to this headline">¶</a></h4>
<p>When using the feature one must be using Protocol Version 7.</p>
</div>
<div class="section" id="using-smart-contract-upgrading-enabled-packages">
<h4>Using Smart Contract Upgrading Enabled Packages<a class="headerlink" href="#using-smart-contract-upgrading-enabled-packages" title="Permalink to this headline">¶</a></h4>
<p>Once you have finished development of your smart contract app, use the
mentioned upgrade-enabled options in daml.yaml to compile and generate
the related DAR. This can be uploaded using the existing gRPC endpoints
without modifications and is immediately available for use.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">In 2.10, once a DAR is successfully uploaded, it cannot be
safely removed from the participant node. Participant operators must
then ensure that uploaded functionality does not break the intended
upgrade lineage as newly uploaded DARs affect the upgrading line (i.e.
all subsequent uploads must be compatible with this one as well).</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Upgrade-supported packages stored on the participant must
lead to unique package-id -&gt; (package-name, package-version) relationships
since runtime package-name -&gt; package-id
resolution must be deterministic (see <a class="reference external" href="#ledger-api">Ledger API</a>). For this
reason, once a LF 1.17+ DAR has been uploaded with its main package
having a specific package-name/package-version, this relationship cannot
be overridden. Hence, uploading a DAR with different content for the
same name/version as an existing DAR on the participant leads to a
rejection with error code KNOWN_DAR_VERSION.</p>
</div>
<div class="section" id="validate-the-dar-against-a-running-participant-node">
<h5>Validate the DAR Against a Running Participant Node<a class="headerlink" href="#validate-the-dar-against-a-running-participant-node" title="Permalink to this headline">¶</a></h5>
<p>Starting with 2.10 you can validate your DAR against the current
participant node state without uploading it to the participant via the
<code class="docutils literal notranslate"><span class="pre">PackageManagementService.validateDar</span></code> Ledger API endpoint. This allows
participant node operators to first check the DAR before uploading it.</p>
<p>This operation is also available via the Canton Admin API and Console:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">participant</span><span class="o">.</span><span class="n">dars</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="s2">&quot;dars/CantonExamples.dar&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="upgrading-and-package-vetting">
<h5>Upgrading and Package Vetting<a class="headerlink" href="#upgrading-and-package-vetting" title="Permalink to this headline">¶</a></h5>
<p>Upgradable packages are also subject to <a class="reference internal" href="../canton/usermanual/packagemanagement.html#package-vetting"><span class="std std-ref">package vetting
restrictions</span></a>:
in to be able to use a package in Daml transactions with smart
contract upgrading, it must be vetted by all participants informed about
the transaction. This applies to both the packages used for creating
the contracts and the target packages.</p>
<p><strong>Note:</strong> Package vetting is enabled by default on DAR upload
operations.</p>
</div>
</div>
</div>
<div class="section" id="continuing-to-write-your-upgrades">
<h3>Continuing to Write Your Upgrades<a class="headerlink" href="#continuing-to-write-your-upgrades" title="Permalink to this headline">¶</a></h3>
<p>SCU allows package authors to change many more aspects of their packages
- fields can be extended in templates, choices, and data type
definitions. Choice bodies can be changed, and other expressions such as
key definitions and signatory lists can be changed with caveats.</p>
<div class="section" id="id1">
<h4>Setup<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h4>
<p>Continue the package defined in the <a class="reference external" href="#writing-your-first-upgrade">Writing Your First
Upgrade</a> section above, but overwrite
the v1 and v2 IOU modules. The v1 IOU module should be overwritten as follows:</p>
<div class="highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="kr">module</span><span class="w"> </span><span class="nn">Main</span><span class="w"> </span><span class="kr">where</span>

<span class="kr">import</span><span class="w"> </span><span class="nn">Daml.Script</span>

<span class="kr">template</span><span class="w"> </span><span class="kt">IOU</span>
<span class="w">  </span><span class="kr">with</span>
<span class="w">    </span><span class="n">issuer</span><span class="kt">:</span><span class="w"> </span><span class="kt">Party</span>
<span class="w">    </span><span class="n">owner</span><span class="kt">:</span><span class="w"> </span><span class="kt">Party</span>
<span class="w">    </span><span class="n">value</span><span class="kt">:</span><span class="w"> </span><span class="kt">Int</span>
<span class="w">  </span><span class="kr">where</span>
<span class="w">    </span><span class="kr">signatory</span><span class="w"> </span><span class="n">issuer</span>
<span class="w">    </span><span class="kr">observer</span><span class="w"> </span><span class="n">owner</span>
<span class="w">    </span><span class="kr">key</span><span class="w"> </span><span class="n">issuer</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Party</span>
<span class="w">    </span><span class="kr">maintainer</span><span class="w"> </span><span class="kr">key</span>

<span class="nf">mkIOU</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Script</span><span class="w"> </span><span class="kt">Party</span>
<span class="nf">mkIOU</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="kr">do</span>
<span class="w">  </span><span class="n">alice</span><span class="w"> </span><span class="ow">&lt;-</span><span class="w"> </span><span class="n">allocateParty</span><span class="w"> </span><span class="s">&quot;alice&quot;</span>
<span class="w">  </span><span class="n">alice</span><span class="w"> </span><span class="p">`</span><span class="n">submit</span><span class="p">`</span><span class="w"> </span><span class="n">createCmd</span><span class="w"> </span><span class="p">(</span><span class="kt">IOU</span><span class="w"> </span><span class="n">alice</span><span class="w"> </span><span class="n">alice</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span>
<span class="w">  </span><span class="n">pure</span><span class="w"> </span><span class="n">alice</span>

<span class="nf">getIOU</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Party</span><span class="w"> </span><span class="ow">-&gt;</span><span class="w"> </span><span class="kt">Script</span><span class="w"> </span><span class="p">(</span><span class="kt">Optional</span><span class="w"> </span><span class="p">(</span><span class="kt">ContractId</span><span class="w"> </span><span class="kt">IOU</span><span class="p">,</span><span class="w"> </span><span class="kt">IOU</span><span class="p">))</span>
<span class="nf">getIOU</span><span class="w"> </span><span class="kr">key</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="n">queryContractKey</span><span class="w"> </span><span class="o">@</span><span class="kt">IOU</span><span class="w"> </span><span class="kr">key</span><span class="w"> </span><span class="kr">key</span>
</pre></div>
</div>
<p>The v2 IOU module should be overwritten to look like the following:</p>
<div class="highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="kr">module</span><span class="w"> </span><span class="nn">Main</span><span class="w"> </span><span class="kr">where</span>

<span class="kr">import</span><span class="w"> </span><span class="nn">Daml.Script</span>
<span class="kr">import</span><span class="w"> </span><span class="nn">DA.Optional</span><span class="w"> </span><span class="p">(</span><span class="nf">fromOptional</span><span class="p">)</span>

<span class="kr">template</span><span class="w"> </span><span class="kt">IOU</span>
<span class="w">  </span><span class="kr">with</span>
<span class="w">    </span><span class="n">issuer</span><span class="kt">:</span><span class="w"> </span><span class="kt">Party</span>
<span class="w">    </span><span class="n">owner</span><span class="kt">:</span><span class="w"> </span><span class="kt">Party</span>
<span class="w">    </span><span class="n">value</span><span class="kt">:</span><span class="w"> </span><span class="kt">Int</span>
<span class="w">    </span><span class="n">currency</span><span class="kt">:</span><span class="w"> </span><span class="kt">Optional</span><span class="w"> </span><span class="kt">Text</span>
<span class="w">  </span><span class="kr">where</span>
<span class="w">    </span><span class="kr">signatory</span><span class="w"> </span><span class="n">issuer</span>
<span class="w">    </span><span class="kr">observer</span><span class="w"> </span><span class="n">owner</span>
<span class="w">    </span><span class="kr">key</span><span class="w"> </span><span class="n">issuer</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Party</span>
<span class="w">    </span><span class="kr">maintainer</span><span class="w"> </span><span class="kr">key</span>

<span class="nf">mkIOU</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Script</span><span class="w"> </span><span class="kt">Party</span>
<span class="nf">mkIOU</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="kr">do</span>
<span class="w">  </span><span class="n">alice</span><span class="w"> </span><span class="ow">&lt;-</span><span class="w"> </span><span class="n">allocateParty</span><span class="w"> </span><span class="s">&quot;alice&quot;</span>
<span class="w">  </span><span class="n">alice</span><span class="w"> </span><span class="p">`</span><span class="n">submit</span><span class="p">`</span><span class="w"> </span><span class="n">createCmd</span><span class="w"> </span><span class="p">(</span><span class="kt">IOU</span><span class="w"> </span><span class="n">alice</span><span class="w"> </span><span class="n">alice</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">(</span><span class="kt">Some</span><span class="w"> </span><span class="s">&quot;USD&quot;</span><span class="p">))</span>
<span class="w">  </span><span class="n">pure</span><span class="w"> </span><span class="n">alice</span>

<span class="nf">mkIOUWithoutCurrency</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Script</span><span class="w"> </span><span class="kt">Party</span>
<span class="nf">mkIOUWithoutCurrency</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="kr">do</span>
<span class="w">  </span><span class="n">alice</span><span class="w"> </span><span class="ow">&lt;-</span><span class="w"> </span><span class="n">allocateParty</span><span class="w"> </span><span class="s">&quot;alice&quot;</span>
<span class="w">  </span><span class="n">alice</span><span class="w"> </span><span class="p">`</span><span class="n">submit</span><span class="p">`</span><span class="w"> </span><span class="n">createCmd</span><span class="w"> </span><span class="p">(</span><span class="kt">IOU</span><span class="w"> </span><span class="n">alice</span><span class="w"> </span><span class="n">alice</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="kt">None</span><span class="p">)</span>
<span class="w">  </span><span class="n">pure</span><span class="w"> </span><span class="n">alice</span>

<span class="nf">getIOU</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Party</span><span class="w"> </span><span class="ow">-&gt;</span><span class="w"> </span><span class="kt">Script</span><span class="w"> </span><span class="p">(</span><span class="kt">Optional</span><span class="w"> </span><span class="p">(</span><span class="kt">ContractId</span><span class="w"> </span><span class="kt">IOU</span><span class="p">,</span><span class="w"> </span><span class="kt">IOU</span><span class="p">))</span>
<span class="nf">getIOU</span><span class="w"> </span><span class="kr">key</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="n">queryContractKey</span><span class="w"> </span><span class="o">@</span><span class="kt">IOU</span><span class="w"> </span><span class="kr">key</span><span class="w"> </span><span class="kr">key</span>
</pre></div>
</div>
<p>All other files should remain the same.</p>
</div>
<div class="section" id="changing-choices">
<h4>Changing Choices<a class="headerlink" href="#changing-choices" title="Permalink to this headline">¶</a></h4>
<p>Add the following choice, <code class="docutils literal notranslate"><span class="pre">Duplicate</span></code>, to both v1 and v2 versions of IOU:</p>
<div class="highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="kr">data</span><span class="w"> </span><span class="kt">DuplicateResult</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="kt">DuplicateResult</span><span class="w"> </span><span class="kr">with</span>
<span class="w">  </span><span class="n">newCid</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">ContractId</span><span class="w"> </span><span class="kt">IOU</span>

<span class="kr">choice</span><span class="w"> </span><span class="kt">Duplicate</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">DuplicateResult</span>
<span class="w">  </span><span class="kr">controller</span><span class="w"> </span><span class="n">issuer</span>
<span class="w">  </span><span class="kr">do</span>
<span class="w">    </span><span class="n">cid</span><span class="w"> </span><span class="ow">&lt;-</span><span class="w"> </span><span class="n">create</span><span class="w"> </span><span class="kr">this</span><span class="w"> </span><span class="kr">with</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">2</span>
<span class="w">    </span><span class="kr">return</span><span class="w"> </span><span class="kt">DuplicateResult</span><span class="w"> </span><span class="kr">with</span><span class="w"> </span><span class="n">newCid</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="n">cid</span>
</pre></div>
</div>
<p>Running <code class="docutils literal notranslate"><span class="pre">daml</span> <span class="pre">build</span></code> should succeed without errors.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>&gt;<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>v1/my-pkg
&gt;<span class="w"> </span>daml<span class="w"> </span>build
...
Created<span class="w"> </span>.daml/dist/my-pkg-1.0.0.dar
&gt;<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>../../v2/my-pkg
&gt;<span class="w"> </span>daml<span class="w"> </span>build
...
Created<span class="w"> </span>.daml/dist/my-pkg-1.1.0.dar
</pre></div>
</div>
<p>Next, upgrade the <code class="docutils literal notranslate"><span class="pre">Duplicate</span></code> choice by adding an optional field <code class="docutils literal notranslate"><span class="pre">amount</span></code>,
and changing the behavior of the choice to default to a multiple of 3. Also
upgrade the <code class="docutils literal notranslate"><span class="pre">DuplicateResult</span></code> data type to include the old value.
Replace the definitions of the <code class="docutils literal notranslate"><span class="pre">DuplicateResult</span></code> data type and of the
<code class="docutils literal notranslate"><span class="pre">Duplicate</span></code> choice in v2 only:</p>
<div class="highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="o">...</span>
<span class="c1">-- Add import to top of module</span>
<span class="kr">import</span><span class="w"> </span><span class="nn">DA.Optional</span><span class="w"> </span><span class="p">(</span><span class="nf">fromOptional</span><span class="p">)</span>
<span class="o">...</span>
<span class="c1">-- Replace DuplicateResult definition</span>
<span class="kr">data</span><span class="w"> </span><span class="kt">DuplicateResult</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="kt">DuplicateResult</span><span class="w"> </span><span class="kr">with</span>
<span class="w">  </span><span class="n">newCid</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">ContractId</span><span class="w"> </span><span class="kt">IOU</span>
<span class="w">  </span><span class="n">oldValue</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Optional</span><span class="w"> </span><span class="kt">Int</span><span class="w"> </span><span class="c1">-- New optional oldValue field</span>
<span class="o">...</span>
<span class="w">   </span><span class="c1">-- Replace Duplicate choice implementation</span>
<span class="w">   </span><span class="kr">choice</span><span class="w"> </span><span class="kt">Duplicate</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">DuplicateResult</span>
<span class="w">     </span><span class="kr">with</span>
<span class="w">       </span><span class="n">amount</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Optional</span><span class="w"> </span><span class="kt">Int</span><span class="w"> </span><span class="c1">-- New optional amount</span>
<span class="w">     </span><span class="kr">controller</span><span class="w"> </span><span class="n">issuer</span>
<span class="w">     </span><span class="kr">do</span>
<span class="w">       </span><span class="kr">let</span><span class="w"> </span><span class="n">amt</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="n">fromOptional</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="n">amount</span>
<span class="w">       </span><span class="n">cid</span><span class="w"> </span><span class="ow">&lt;-</span><span class="w"> </span><span class="n">create</span><span class="w"> </span><span class="kr">this</span><span class="w"> </span><span class="kr">with</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">amt</span>
<span class="w">       </span><span class="kr">return</span><span class="w"> </span><span class="kt">DuplicateResult</span><span class="w"> </span><span class="kr">with</span>
<span class="w">         </span><span class="n">newCid</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="n">cid</span>
<span class="w">         </span><span class="n">oldValue</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="kt">Some</span><span class="w"> </span><span class="n">value</span>
<span class="o">...</span>
</pre></div>
</div>
<p>Add a script called <code class="docutils literal notranslate"><span class="pre">duplicateIOU</span></code> in V1:</p>
<div class="highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="o">...</span>
<span class="nf">duplicateIOU</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Party</span><span class="w"> </span><span class="ow">-&gt;</span><span class="w"> </span><span class="kt">Script</span><span class="w"> </span><span class="p">(</span><span class="kt">Optional</span><span class="w"> </span><span class="p">(</span><span class="kt">ContractId</span><span class="w"> </span><span class="kt">IOU</span><span class="p">,</span><span class="w"> </span><span class="kt">IOU</span><span class="p">))</span>
<span class="nf">duplicateIOU</span><span class="w"> </span><span class="kr">key</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="kr">do</span>
<span class="w">  </span><span class="n">mbIOU</span><span class="w"> </span><span class="ow">&lt;-</span><span class="w"> </span><span class="n">getIOU</span><span class="w"> </span><span class="kr">key</span>
<span class="w">  </span><span class="kr">case</span><span class="w"> </span><span class="n">mbIOU</span><span class="w"> </span><span class="kr">of</span>
<span class="w">    </span><span class="kt">None</span><span class="w"> </span><span class="ow">-&gt;</span><span class="w"> </span><span class="n">pure</span><span class="w"> </span><span class="kt">None</span>
<span class="w">    </span><span class="kt">Some</span><span class="w"> </span><span class="p">(</span><span class="n">iouCid</span><span class="p">,</span><span class="w"> </span><span class="kr">_</span><span class="p">)</span><span class="w"> </span><span class="ow">-&gt;</span><span class="w"> </span><span class="kr">do</span>
<span class="w">      </span><span class="n">res</span><span class="w"> </span><span class="ow">&lt;-</span><span class="w"> </span><span class="kr">key</span><span class="w"> </span><span class="p">`</span><span class="n">submit</span><span class="p">`</span><span class="w"> </span><span class="n">exerciseExactCmd</span><span class="w"> </span><span class="n">iouCid</span><span class="w"> </span><span class="kt">Duplicate</span>
<span class="w">      </span><span class="n">mbNewIOU</span><span class="w"> </span><span class="ow">&lt;-</span><span class="w"> </span><span class="n">queryContractId</span><span class="w"> </span><span class="kr">key</span><span class="w"> </span><span class="n">res</span><span class="o">.</span><span class="n">newCid</span>
<span class="w">      </span><span class="kr">case</span><span class="w"> </span><span class="n">mbNewIOU</span><span class="w"> </span><span class="kr">of</span>
<span class="w">        </span><span class="kt">Some</span><span class="w"> </span><span class="n">newIOU</span><span class="w"> </span><span class="ow">-&gt;</span><span class="w"> </span><span class="n">pure</span><span class="w"> </span><span class="p">(</span><span class="kt">Some</span><span class="w"> </span><span class="p">(</span><span class="n">newCid</span><span class="p">,</span><span class="w"> </span><span class="n">newIOU</span><span class="p">))</span>
<span class="w">        </span><span class="kt">None</span><span class="w"> </span><span class="ow">-&gt;</span><span class="w"> </span><span class="n">pure</span><span class="w"> </span><span class="kt">None</span>
</pre></div>
</div>
<p>A similar script called <code class="docutils literal notranslate"><span class="pre">duplicateIOU</span></code> should be added in V2, supplying an
<code class="docutils literal notranslate"><span class="pre">amount</span></code> field:</p>
<div class="highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="o">...</span>
<span class="nf">duplicateIOU</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Party</span><span class="w"> </span><span class="ow">-&gt;</span><span class="w"> </span><span class="kt">Script</span><span class="w"> </span><span class="p">(</span><span class="kt">Optional</span><span class="w"> </span><span class="p">(</span><span class="kt">ContractId</span><span class="w"> </span><span class="kt">IOU</span><span class="p">,</span><span class="w"> </span><span class="kt">Int</span><span class="p">,</span><span class="w"> </span><span class="kt">IOU</span><span class="p">))</span>
<span class="nf">duplicateIOU</span><span class="w"> </span><span class="kr">key</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="kr">do</span>
<span class="w">  </span><span class="n">mbIOU</span><span class="w"> </span><span class="ow">&lt;-</span><span class="w"> </span><span class="n">getIOU</span><span class="w"> </span><span class="kr">key</span>
<span class="w">  </span><span class="kr">case</span><span class="w"> </span><span class="n">mbIOU</span><span class="w"> </span><span class="kr">of</span>
<span class="w">    </span><span class="kt">None</span><span class="w"> </span><span class="ow">-&gt;</span><span class="w"> </span><span class="n">pure</span><span class="w"> </span><span class="kt">None</span>
<span class="w">    </span><span class="kt">Some</span><span class="w"> </span><span class="p">(</span><span class="n">iouCid</span><span class="p">,</span><span class="w"> </span><span class="kr">_</span><span class="p">)</span><span class="w"> </span><span class="ow">-&gt;</span><span class="w"> </span><span class="kr">do</span>
<span class="w">      </span><span class="n">res</span><span class="w"> </span><span class="ow">&lt;-</span><span class="w"> </span><span class="kr">key</span><span class="w"> </span><span class="p">`</span><span class="n">submit</span><span class="p">`</span><span class="w"> </span><span class="n">exerciseExactCmd</span><span class="w"> </span><span class="n">iouCid</span><span class="w"> </span><span class="kt">Duplicate</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">amount</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="kt">Some</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="p">}</span>
<span class="w">      </span><span class="kr">case</span><span class="w"> </span><span class="n">res</span><span class="o">.</span><span class="n">oldValue</span><span class="w"> </span><span class="kr">of</span>
<span class="w">        </span><span class="kt">None</span><span class="w"> </span><span class="ow">-&gt;</span><span class="w"> </span><span class="n">pure</span><span class="w"> </span><span class="kt">None</span><span class="w"> </span><span class="c1">-- This should never happen</span>
<span class="w">        </span><span class="kt">Some</span><span class="w"> </span><span class="n">oldValue</span><span class="w"> </span><span class="ow">-&gt;</span>
<span class="w">          </span><span class="n">mbNewIOU</span><span class="w"> </span><span class="ow">&lt;-</span><span class="w"> </span><span class="n">queryContractId</span><span class="w"> </span><span class="kr">key</span><span class="w"> </span><span class="n">res</span><span class="o">.</span><span class="n">newCid</span>
<span class="w">          </span><span class="kr">case</span><span class="w"> </span><span class="n">mbNewIOU</span><span class="w"> </span><span class="kr">of</span>
<span class="w">            </span><span class="kt">Some</span><span class="w"> </span><span class="n">newIOU</span><span class="w"> </span><span class="ow">-&gt;</span><span class="w"> </span><span class="n">pure</span><span class="w"> </span><span class="p">(</span><span class="kt">Some</span><span class="w"> </span><span class="p">(</span><span class="n">newCid</span><span class="p">,</span><span class="w"> </span><span class="n">oldValue</span><span class="p">,</span><span class="w"> </span><span class="n">newIOU</span><span class="p">))</span>
<span class="w">            </span><span class="kt">None</span><span class="w"> </span><span class="ow">-&gt;</span><span class="w"> </span><span class="n">pure</span><span class="w"> </span><span class="kt">None</span>
</pre></div>
</div>
<p>Running the v1 <code class="docutils literal notranslate"><span class="pre">duplicateIOU</span></code> script with <code class="docutils literal notranslate"><span class="pre">exerciseExactCmd</span></code> always runs
the v1 implementation for the <code class="docutils literal notranslate"><span class="pre">Duplicate</span></code> choice, and likewise for v2.</p>
</div>
<div class="section" id="modifying-signatory-definitions">
<h4>Modifying Signatory Definitions<a class="headerlink" href="#modifying-signatory-definitions" title="Permalink to this headline">¶</a></h4>
<p>Other definitions can be changed, but warnings are emitted to remind the
developer that the changes can be unsafe and need to be made with care
to preserve necessary invariants.</p>
<p>Signatories and observers are one expression that can be changed. Importantly,
SCU assumes that the new definition does not alter the computed values of the
signatories. The computed value of the observers is allowed to change in one
specific way: observers that are also signatories can be removed. Any other
change to the computed value of the observers (losing a non-signatory observer,
adding an observer) is not allowed.</p>
<p>For example, add a new field of “outside observers” to the v2 IOU
template, and add them to the observer definition.</p>
<div class="highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="o">...</span>
<span class="w">    </span><span class="c1">-- Add a new outsideObservers field</span>
<span class="w">    </span><span class="n">outsideObservers</span><span class="kt">:</span><span class="w"> </span><span class="kt">Optional</span><span class="w"> </span><span class="p">[</span><span class="kt">Party</span><span class="p">]</span>
<span class="w">  </span><span class="kr">where</span>
<span class="w">    </span><span class="kr">signatory</span><span class="w"> </span><span class="n">issuer</span>
<span class="w">    </span><span class="c1">-- Add outsideObservers to the observer definition</span>
<span class="w">    </span><span class="kr">observer</span><span class="w"> </span><span class="n">owner</span><span class="p">,</span><span class="w"> </span><span class="n">fromOptional</span><span class="w"> </span><span class="kt">[]</span><span class="w"> </span><span class="n">outsideObservers</span>
<span class="o">...</span>
</pre></div>
</div>
<p>The new observer definition allows v2 contracts and beyond to add
new observers via the outsideObservers field. However, any existing
contracts default to <code class="docutils literal notranslate"><span class="pre">None</span></code> for the <code class="docutils literal notranslate"><span class="pre">outsideObservers</span></code> field, so all
existing contracts have the same observer list as before: the
single owner.</p>
<p>In the case where a contract’s signatories or observers change in during an
upgrade/downgrade in a way that doesn’t meet the constraints above, the upgrade,
and thus full transaction, fails at runtime.</p>
</div>
<div class="section" id="modifying-key-expressions">
<h4>Modifying Key Expressions<a class="headerlink" href="#modifying-key-expressions" title="Permalink to this headline">¶</a></h4>
<p>Similarly, key expressions can be changed as long as they evaluate to
the same value for existing contracts.</p>
<p>For example, v2 can add a new field “alternative key” to the v2 IOU
template, and use it instead of the default key when present.</p>
<div class="highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="o">...</span>
<span class="w">    </span><span class="c1">-- Add a new alternativeKey field</span>
<span class="w">    </span><span class="n">alternativeKey</span><span class="kt">:</span><span class="w"> </span><span class="kt">Optional</span><span class="w"> </span><span class="kt">Party</span>
<span class="w">  </span><span class="kr">where</span>
<span class="w">    </span><span class="kr">key</span><span class="w"> </span><span class="n">fromOptional</span><span class="w"> </span><span class="n">issuer</span><span class="w"> </span><span class="n">alternativeKey</span>
<span class="o">...</span>
</pre></div>
</div>
<p>All old contracts will default to using the <code class="docutils literal notranslate"><span class="pre">issuer</span></code>, and new contracts
will use the <code class="docutils literal notranslate"><span class="pre">alternativeKey</span></code> field.</p>
</div>
<div class="section" id="upgrading-enums">
<h4>Upgrading Enums<a class="headerlink" href="#upgrading-enums" title="Permalink to this headline">¶</a></h4>
<p>Variants and enums can be extended using SCU, either by adding
fields to an existing constructor, or by adding a new constructor to the
end of the list.</p>
<p>Redefine the IOU package, overwriting the v1 and v2 sections similarly
to the previous section. Overwrite the IOU package in both V1 and V2
with the following:</p>
<div class="highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="kr">module</span><span class="w"> </span><span class="nn">Main</span><span class="w"> </span><span class="kr">where</span>

<span class="kr">import</span><span class="w"> </span><span class="nn">Daml.Script</span>

<span class="kr">template</span><span class="w"> </span><span class="kt">IOU</span>
<span class="w">  </span><span class="kr">with</span>
<span class="w">    </span><span class="n">issuer</span><span class="kt">:</span><span class="w"> </span><span class="kt">Party</span>
<span class="w">    </span><span class="n">owner</span><span class="kt">:</span><span class="w"> </span><span class="kt">Party</span>
<span class="w">    </span><span class="n">value</span><span class="kt">:</span><span class="w"> </span><span class="kt">Int</span>
<span class="w">    </span><span class="n">currency</span><span class="kt">:</span><span class="w"> </span><span class="kt">Currency</span>
<span class="w">  </span><span class="kr">where</span>
<span class="w">    </span><span class="kr">signatory</span><span class="w"> </span><span class="n">issuer</span>
<span class="w">    </span><span class="kr">observer</span><span class="w"> </span><span class="n">owner</span>
<span class="w">    </span><span class="kr">key</span><span class="w"> </span><span class="n">issuer</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Party</span>
<span class="w">    </span><span class="kr">maintainer</span><span class="w"> </span><span class="kr">key</span>

<span class="kr">data</span><span class="w"> </span><span class="kt">Currency</span>
<span class="w">  </span><span class="ow">=</span><span class="w"> </span><span class="kt">USD</span>
<span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="kt">GBP</span>
<span class="w">  </span><span class="kr">deriving</span><span class="w"> </span><span class="p">(</span><span class="kt">Show</span><span class="p">,</span><span class="w"> </span><span class="kt">Eq</span><span class="p">,</span><span class="w"> </span><span class="kt">Ord</span><span class="p">)</span>

<span class="nf">mkIOU</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Script</span><span class="w"> </span><span class="kt">Party</span>
<span class="nf">mkIOU</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="kr">do</span>
<span class="w">  </span><span class="n">alice</span><span class="w"> </span><span class="ow">&lt;-</span><span class="w"> </span><span class="n">allocateParty</span><span class="w"> </span><span class="s">&quot;alice&quot;</span>
<span class="w">  </span><span class="n">alice</span><span class="w"> </span><span class="p">`</span><span class="n">submit</span><span class="p">`</span><span class="w"> </span><span class="n">createCmd</span><span class="w"> </span><span class="p">(</span><span class="kt">IOU</span><span class="w"> </span><span class="n">alice</span><span class="w"> </span><span class="n">alice</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="kt">USD</span><span class="p">)</span>
<span class="w">  </span><span class="n">pure</span><span class="w"> </span><span class="n">alice</span>

<span class="nf">getIOU</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Party</span><span class="w"> </span><span class="ow">-&gt;</span><span class="w"> </span><span class="kt">Script</span><span class="w"> </span><span class="p">(</span><span class="kt">Optional</span><span class="w"> </span><span class="p">(</span><span class="kt">ContractId</span><span class="w"> </span><span class="kt">IOU</span><span class="p">,</span><span class="w"> </span><span class="kt">IOU</span><span class="p">))</span>
<span class="nf">getIOU</span><span class="w"> </span><span class="kr">key</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="n">queryContractKey</span><span class="w"> </span><span class="o">@</span><span class="kt">IOU</span><span class="w"> </span><span class="kr">key</span><span class="w"> </span><span class="kr">key</span>
</pre></div>
</div>
<p>Instead of using <code class="docutils literal notranslate"><span class="pre">Text</span></code> for the currency field, here we use an enum
data-type <code class="docutils literal notranslate"><span class="pre">Currency</span></code> with two constructors: <code class="docutils literal notranslate"><span class="pre">USD</span></code> and <code class="docutils literal notranslate"><span class="pre">GBP</span></code>.</p>
<p>Running <code class="docutils literal notranslate"><span class="pre">daml</span> <span class="pre">build</span></code> should succeed with no errors:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>&gt;<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>v1/my-pkg
&gt;<span class="w"> </span>daml<span class="w"> </span>build
...
Created<span class="w"> </span>.daml/dist/my-pkg-1.0.0.dar
&gt;<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>../../v2/my-pkg
&gt;<span class="w"> </span>daml<span class="w"> </span>build
...
Created<span class="w"> </span>.daml/dist/my-pkg-1.1.0.dar
</pre></div>
</div>
<p>When you want to extend our contract to support new currencies, you can
add new entries to the end of our <code class="docutils literal notranslate"><span class="pre">Currency</span></code> enum.</p>
<div class="highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="o">...</span>
<span class="kr">data</span><span class="w"> </span><span class="kt">Currency</span>
<span class="w">  </span><span class="ow">=</span><span class="w"> </span><span class="kt">USD</span>
<span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="kt">GBP</span>
<span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="kt">CHF</span><span class="w"> </span><span class="c1">-- Add a new currency type</span>
<span class="w">  </span><span class="kr">deriving</span><span class="w"> </span><span class="p">(</span><span class="kt">Show</span><span class="p">,</span><span class="w"> </span><span class="kt">Eq</span><span class="p">,</span><span class="w"> </span><span class="kt">Ord</span><span class="p">)</span>
<span class="o">...</span>
</pre></div>
</div>
<p>Upgrades of extended enums from an old version to a new version always succeed. In the case of IOUs, a v1 IOU can always be interpreted
as a v2 IOU because the constructors for its <code class="docutils literal notranslate"><span class="pre">currency</span></code> field are a subset
of those in a v2 contract.</p>
<p>For example, create an IOU with USD via v1’s <code class="docutils literal notranslate"><span class="pre">mkIOU</span></code> script, and query it
via v2’s <code class="docutils literal notranslate"><span class="pre">getIOU</span></code> script:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>&gt;<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>v1/my-pkg
&gt;<span class="w"> </span>daml<span class="w"> </span>script
<span class="w">    </span>--ledger-host<span class="w"> </span>localhost<span class="w"> </span>--ledger-port<span class="w"> </span><span class="m">6865</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--dar<span class="w"> </span>.daml/dist/my-pkg-1.0.0.dar<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--script-name<span class="w"> </span>Main:mkIOU<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--output-file<span class="w"> </span>alice-v1
...
&gt;<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>../../v2/my-pkg
&gt;<span class="w"> </span>daml<span class="w"> </span>script
<span class="w">    </span>--ledger-host<span class="w"> </span>localhost<span class="w"> </span>--ledger-port<span class="w"> </span><span class="m">6865</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--dar<span class="w"> </span>.daml/dist/my-pkg-1.1.0.dar<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--script-name<span class="w"> </span>Main:getIOU<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--output-file<span class="w"> </span>/dev/stdout<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--input-file<span class="w"> </span>../../v1/my-pkg/alice-v1
...
<span class="w">    </span><span class="s2">&quot;issuer&quot;</span>:<span class="w"> </span><span class="s2">&quot;party-...&quot;</span>,
<span class="w">    </span><span class="s2">&quot;owner&quot;</span>:<span class="w"> </span><span class="s2">&quot;party-...&quot;</span>,
<span class="w">    </span><span class="s2">&quot;value&quot;</span>:<span class="w"> </span><span class="m">1</span>,
<span class="w">    </span><span class="s2">&quot;currency&quot;</span>:<span class="w"> </span><span class="s2">&quot;USD&quot;</span>
...
</pre></div>
</div>
<p>Only constructors that are defined in both
v1 and v2 can be downgraded from v2 to v1. Any constructor that does not
exist in the v1 package fails to downgrade with a runtime error. In
the case of our <code class="docutils literal notranslate"><span class="pre">IOU</span></code>, any <code class="docutils literal notranslate"><span class="pre">CHF</span></code> fails to downgrade, so any v2 contracts
with a <code class="docutils literal notranslate"><span class="pre">CHF</span></code> currency cannot be used in v1 workflows.</p>
<p>For example, create a contract with <code class="docutils literal notranslate"><span class="pre">CHF</span></code> as its <code class="docutils literal notranslate"><span class="pre">currency</span></code> field via v2’s
<code class="docutils literal notranslate"><span class="pre">mkIOU</span></code> script. Attempting to query it via v1’s <code class="docutils literal notranslate"><span class="pre">getIOU</span></code> script fails
with a lookup error for the CHF variant.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>&gt;<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>v2/my-pkg
&gt;<span class="w"> </span>daml<span class="w"> </span>script
<span class="w">    </span>--ledger-host<span class="w"> </span>localhost<span class="w"> </span>--ledger-port<span class="w"> </span><span class="m">6865</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--dar<span class="w"> </span>.daml/dist/my-pkg-1.1.0.dar<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--script-name<span class="w"> </span>Main:mkIOU<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--output-file<span class="w"> </span>alice-v2
...
&gt;<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>../../v1/my-pkg
&gt;<span class="w"> </span>daml<span class="w"> </span>script
<span class="w">    </span>--ledger-host<span class="w"> </span>localhost<span class="w"> </span>--ledger-port<span class="w"> </span><span class="m">6865</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--dar<span class="w"> </span>.daml/dist/my-pkg-1.0.0.dar<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--script-name<span class="w"> </span>Main:getIOU<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--output-file<span class="w"> </span>/dev/stdout<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--input-file<span class="w"> </span>../../v2/my-pkg/alice-v2
...
Failed<span class="w"> </span>to<span class="w"> </span>translate<span class="w"> </span>create<span class="w"> </span>argument:<span class="w"> </span>Lookup<span class="o">(</span>NotFound<span class="o">(</span>DataVariantConstructor<span class="o">(</span>c1543a5c2b7ff03650162e68e03e469d1ecf9f546565d3809cdec2e0255ed902:Main:Currency,CHF<span class="o">)</span>,DataEnumConstructor<span class="o">(</span>c1543a5c2b7ff03650162e68e03e469d1ecf9f546565d3809cdec2e0255ed902:Main:Currency,CHF<span class="o">)))</span>
...
</pre></div>
</div>
</div>
<div class="section" id="upgrading-variants">
<h4>Upgrading Variants<a class="headerlink" href="#upgrading-variants" title="Permalink to this headline">¶</a></h4>
<p>Variants, also known as algebraic data types, are very similar to enums
except that they also contain structured data.</p>
<p>For example, the following variant has two constructors, each with
unique fields. Overwrite both v1 and v2 modules with the following
source:</p>
<div class="highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="kr">module</span><span class="w"> </span><span class="nn">Main</span><span class="w"> </span><span class="kr">where</span>

<span class="kr">data</span><span class="w"> </span><span class="kt">Shape</span>
<span class="w">  </span><span class="ow">=</span><span class="w"> </span><span class="kt">Circle</span>
<span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="kt">Polygon</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">sides</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Int</span><span class="w"> </span><span class="p">}</span>
</pre></div>
</div>
<p>You can extend this variant in two ways. You can add a new constructor,
similarly to enums. Modify the v2 module to add a new <code class="docutils literal notranslate"><span class="pre">Line</span></code> constructor
with a <code class="docutils literal notranslate"><span class="pre">len</span></code> field:</p>
<div class="highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="kr">module</span><span class="w"> </span><span class="nn">Main</span><span class="w"> </span><span class="kr">where</span>

<span class="kr">data</span><span class="w"> </span><span class="kt">Shape</span>
<span class="w">  </span><span class="ow">=</span><span class="w"> </span><span class="kt">Circle</span>
<span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="kt">Polygon</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">sides</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Int</span><span class="w"> </span><span class="p">}</span>
<span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="kt">Line</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">len</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Numeric</span><span class="w"> </span><span class="mi">10</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="c1">-- New line constructor</span>
</pre></div>
</div>
<p>As before, building should succeed.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>&gt;<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>v1/my-pkg
&gt;<span class="w"> </span>daml<span class="w"> </span>build
...
Created<span class="w"> </span>.daml/dist/my-pkg-1.0.0.dar
&gt;<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>../../v2/my-pkg
&gt;<span class="w"> </span>daml<span class="w"> </span>build
...
Created<span class="w"> </span>.daml/dist/my-pkg-1.1.0.dar
</pre></div>
</div>
<p>You can also add a new field to a constructor, similarly to templates -
for example, add a <code class="docutils literal notranslate"><span class="pre">sideLen</span></code> field to the <code class="docutils literal notranslate"><span class="pre">Polygon</span></code> constructor, to specify
the lengths of the sides of the polygon.</p>
<div class="highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="kr">data</span><span class="w"> </span><span class="kt">Shape</span>
<span class="w">  </span><span class="ow">=</span><span class="w"> </span><span class="kt">Circle</span>
<span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="kt">Polygon</span>
<span class="w">      </span><span class="p">{</span><span class="w"> </span><span class="n">sides</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Int</span>
<span class="w">      </span><span class="p">,</span><span class="w"> </span><span class="n">sideLen</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Numeric</span><span class="w"> </span><span class="mi">10</span><span class="w"> </span><span class="c1">-- New field</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="kt">Line</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">len</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Numeric</span><span class="w"> </span><span class="mi">10</span><span class="w"> </span><span class="p">}</span>
</pre></div>
</div>
<p>Building this fails because the new <code class="docutils literal notranslate"><span class="pre">sideLen</span></code> field is non-optional.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>&gt;<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>v2/my-pkg
&gt;<span class="w"> </span>daml<span class="w"> </span>build
...
error<span class="w"> </span><span class="nb">type</span><span class="w"> </span>checking<span class="w"> </span>data<span class="w"> </span><span class="nb">type</span><span class="w"> </span>Main.Shape:
<span class="w">  </span>The<span class="w"> </span>upgraded<span class="w"> </span>variant<span class="w"> </span>constructor<span class="w"> </span>Polygon<span class="w"> </span>from<span class="w"> </span>variant<span class="w"> </span>Shape<span class="w"> </span>has<span class="w"> </span>added<span class="w"> </span>a<span class="w"> </span>field.
ERROR:<span class="w"> </span>Creation<span class="w"> </span>of<span class="w"> </span>DAR<span class="w"> </span>file<span class="w"> </span>failed.
</pre></div>
</div>
<p>Making the new <code class="docutils literal notranslate"><span class="pre">sideLen</span></code> field optional fixes the error:</p>
<div class="highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="o">...</span>
<span class="w">      </span><span class="p">,</span><span class="w"> </span><span class="n">sideLen</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Optional</span><span class="w"> </span><span class="p">(</span><span class="kt">Numeric</span><span class="w"> </span><span class="mi">10</span><span class="p">)</span><span class="w"> </span><span class="c1">-- New field</span>
<span class="o">...</span>
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>&gt;<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>v2/my-pkg
&gt;<span class="w"> </span>daml<span class="w"> </span>build
...
Created<span class="w"> </span>.daml/dist/my-pkg-1.1.0.dar
</pre></div>
</div>
</div>
<div class="section" id="limitations-in-upgrading-variants">
<h4>Limitations in Upgrading Variants<a class="headerlink" href="#limitations-in-upgrading-variants" title="Permalink to this headline">¶</a></h4>
<p>Upgrading variants has some limitations - because the <code class="docutils literal notranslate"><span class="pre">Circle</span></code>
constructor has been defined without a field in curly braces, it cannot be
upgraded with new fields.</p>
<div class="highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="o">...</span>
<span class="w">  </span><span class="c1">-- Add a field where no fields existed</span>
<span class="w">  </span><span class="ow">=</span><span class="w"> </span><span class="kt">Circle</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">radius</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Optional</span><span class="w"> </span><span class="p">(</span><span class="kt">Numeric</span><span class="w"> </span><span class="mi">10</span><span class="p">)</span><span class="w"> </span><span class="p">}</span>
<span class="o">...</span>
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>&gt;<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>v2/my-pkg
&gt;<span class="w"> </span>daml<span class="w"> </span>build
...
error<span class="w"> </span><span class="nb">type</span><span class="w"> </span>checking<span class="w"> </span>data<span class="w"> </span><span class="nb">type</span><span class="w"> </span>Main.Shape:
<span class="w">  </span>The<span class="w"> </span>upgraded<span class="w"> </span>data<span class="w"> </span><span class="nb">type</span><span class="w"> </span>Shape<span class="w"> </span>has<span class="w"> </span>changed<span class="w"> </span>the<span class="w"> </span><span class="nb">type</span><span class="w"> </span>of<span class="w"> </span>a<span class="w"> </span>variant.
ERROR:<span class="w"> </span>Creation<span class="w"> </span>of<span class="w"> </span>DAR<span class="w"> </span>file<span class="w"> </span>failed.
</pre></div>
</div>
<p>The same applies to variants with unnamed fields. If the v1 definition
of the <code class="docutils literal notranslate"><span class="pre">Line</span></code> constructor were as follows, it would also not be able to
upgrade:</p>
<div class="highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="o">...</span>
<span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="kt">Line</span><span class="w"> </span><span class="p">(</span><span class="kt">Numeric</span><span class="w"> </span><span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
<p>In general, in order to enable future upgrades, it is strongly
recommended that all constructors use named fields, and that all
constructors have at least one field. If a constructor has no fields in
an initial v1 package, one can assign a dummy field.</p>
<p>For example, the correct way to write the v1 <code class="docutils literal notranslate"><span class="pre">Circle</span></code> constructor would be
as follows:</p>
<div class="highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="o">...</span>
<span class="w">  </span><span class="ow">=</span><span class="w"> </span><span class="kt">Circle</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">dummy</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="nb">()</span><span class="w"> </span><span class="p">}</span>
<span class="o">...</span>
</pre></div>
</div>
<p>The subsequent v2 upgrade would succeed:</p>
<div class="highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="o">...</span>
<span class="w">  </span><span class="ow">=</span><span class="w"> </span><span class="kt">Circle</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">dummy</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="nb">()</span><span class="p">,</span><span class="w"> </span><span class="n">radius</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Optional</span><span class="w"> </span><span class="p">(</span><span class="kt">Numeric</span><span class="w"> </span><span class="mi">10</span><span class="p">)</span><span class="w"> </span><span class="p">}</span>
<span class="o">...</span>
</pre></div>
</div>
</div>
<div class="section" id="nested-datatypes">
<h4>Nested Datatypes<a class="headerlink" href="#nested-datatypes" title="Permalink to this headline">¶</a></h4>
<p>If a data type, choice, or template has a field which refers to another
data type, the larger data type can be upgraded if the field’s data
type is upgradeable.</p>
<p>For example, given the data type <code class="docutils literal notranslate"><span class="pre">A</span></code> with a field referring to data type
<code class="docutils literal notranslate"><span class="pre">B</span></code>,</p>
<div class="highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="kr">data</span><span class="w"> </span><span class="kt">A</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="kt">A</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">B</span><span class="w"> </span><span class="p">}</span>
<span class="kr">data</span><span class="w"> </span><span class="kt">B</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="kt">B</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">field</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Text</span><span class="w"> </span><span class="p">}</span>
</pre></div>
</div>
<p>If modifications made to <code class="docutils literal notranslate"><span class="pre">B</span></code> are valid for SCU, then <code class="docutils literal notranslate"><span class="pre">A</span></code> is also valid.</p>
</div>
<div class="section" id="dependencies">
<h4>Dependencies<a class="headerlink" href="#dependencies" title="Permalink to this headline">¶</a></h4>
<p>Package authors may upgrade the dependencies of a package as well as the
package itself. A new version of a package may add new dependencies, and
must have all the (non-<a class="reference internal" href="../concepts/ledger-model/upgrade-model-in-depth.html#upgrades-utility-package"><span class="std std-ref">utility-package</span></a>)
dependencies of the old version. If these dependencies are used in ways that are
checked for upgrades, each existing dependency must be either
unchanged from the old DAR or an upgrade of its previous version.</p>
<p>For example, given a dependencies folder containing v1, v2, and v3
of a dependency package <code class="docutils literal notranslate"><span class="pre">dep</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>&gt;<span class="w"> </span>ls<span class="w"> </span>./dependencies
dep-1.0.0.dar
dep-2.0.0.dar
dep-3.0.0.dar
</pre></div>
</div>
<p>Then assume a version <code class="docutils literal notranslate"><span class="pre">1.0.0</span></code> of a package <code class="docutils literal notranslate"><span class="pre">main</span></code> that depends on a datatype
from version <code class="docutils literal notranslate"><span class="pre">2.0.0</span></code> of <code class="docutils literal notranslate"><span class="pre">dep</span></code>:</p>
<div class="highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="kr">module</span><span class="w"> </span><span class="nn">Main</span><span class="w"> </span><span class="kr">where</span>

<span class="kr">import</span><span class="w"> </span><span class="k">qualified</span><span class="w"> </span><span class="nn">Dep</span>

<span class="kr">data</span><span class="w"> </span><span class="kt">MyData</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="kt">MyData</span>
<span class="w">  </span><span class="p">{</span><span class="w"> </span><span class="n">depData</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Dep</span><span class="o">.</span><span class="kt">AdditionalData</span>
<span class="w">  </span><span class="p">}</span>
</pre></div>
</div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nn">...</span>
<span class="nt">dependencies</span><span class="p">:</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">daml-prim</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">daml-stdlib</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">daml3-script</span>
<span class="nt">data-dependencies</span><span class="p">:</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">dependencies/dep-2.0.0.dar</span>
<span class="nn">...</span>
</pre></div>
</div>
<p>Because a package with a newer version may upgrade any dependency to a newer
version (or keep the version the same), version <code class="docutils literal notranslate"><span class="pre">2.0.0</span></code> of the <code class="docutils literal notranslate"><span class="pre">main</span></code>
package may keep its dependencies the same, or it may upgrade <code class="docutils literal notranslate"><span class="pre">dep</span></code> to
<code class="docutils literal notranslate"><span class="pre">3.0.0</span></code>:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nn">...</span>
<span class="nt">dependencies</span><span class="p">:</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">daml-prim</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">daml-stdlib</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">daml3-script</span>
<span class="nt">data-dependencies</span><span class="p">:</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">dependencies/dep-3.0.0.dar</span><span class="w"> </span><span class="c1"># Can upgrade dep-2.0.0 to dep-3.0.0, or leave it unchanged</span>
<span class="nn">...</span>
</pre></div>
</div>
<p>You cannot downgrade a dependency when using that dependency’s datatypes. For example, <code class="docutils literal notranslate"><span class="pre">main</span></code> may not downgrade <code class="docutils literal notranslate"><span class="pre">dep</span></code> to version <code class="docutils literal notranslate"><span class="pre">1.0.0</span></code>.
The following <code class="docutils literal notranslate"><span class="pre">daml.yaml</span></code> would be invalid:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nn">...</span>
<span class="nt">dependencies</span><span class="p">:</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">daml-prim</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">daml-stdlib</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">daml3-script</span>
<span class="nt">data-dependencies</span><span class="p">:</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">dependencies/dep-1.0.0.dar</span><span class="w"> </span><span class="c1"># Cannot downgrade dep-2.0.0 to dep-1.0.0</span>
<span class="nn">...</span>
</pre></div>
</div>
<p>If you try to build this package, the typechecker returns an error on a package ID
mismatch for the Dep:AdditionalData field, because the Dep:AdditionalData
reference in this case has changed to a package that is not a legitimate upgrade
of the original.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>&gt;<span class="w"> </span>daml<span class="w"> </span>build
...
error<span class="w"> </span><span class="nb">type</span><span class="w"> </span>checking<span class="w"> </span>data<span class="w"> </span><span class="nb">type</span><span class="w"> </span>Main.MyData:
The<span class="w"> </span>upgraded<span class="w"> </span>data<span class="w"> </span><span class="nb">type</span><span class="w"> </span>MyData<span class="w"> </span>has<span class="w"> </span>changed<span class="w"> </span>the<span class="w"> </span>types<span class="w"> </span>of<span class="w"> </span>some<span class="w"> </span>of<span class="w"> </span>its<span class="w"> </span>original<span class="w"> </span>fields:
<span class="w">  </span>Field<span class="w"> </span><span class="s1">&#39;depData&#39;</span><span class="w"> </span>changed<span class="w"> </span><span class="nb">type</span><span class="w"> </span>from<span class="w"> </span>&lt;dep-2.0.0<span class="w"> </span>package<span class="w"> </span>ID&gt;:Dep:AdditionalData<span class="w"> </span>to<span class="w"> </span>&lt;dep-1.0.0<span class="w"> </span>package<span class="w"> </span>ID&gt;:Dep:AdditionalData
</pre></div>
</div>
</div>
<div class="section" id="upgrading-interface-instances">
<h4>Upgrading Interface Instances<a class="headerlink" href="#upgrading-interface-instances" title="Permalink to this headline">¶</a></h4>
<p>SCU also supports changing Interface instances. First, create a
new package directory <code class="docutils literal notranslate"><span class="pre">my-iface</span></code>, with <code class="docutils literal notranslate"><span class="pre">my-iface/daml.yaml</span></code> and
module <code class="docutils literal notranslate"><span class="pre">my-iface/daml/MyIface.daml</span></code>:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">sdk-version</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2.10.0</span>
<span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-iface</span>
<span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1.0.0</span>
<span class="nt">source</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">daml/MyIface.daml</span>
<span class="nt">parties</span><span class="p">:</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Alice</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Bob</span>
<span class="nt">dependencies</span><span class="p">:</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">daml-prim</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">daml-stdlib</span>
<span class="nt">build-options</span><span class="p">:</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">--target=1.17</span>
</pre></div>
</div>
<div class="highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="kr">module</span><span class="w"> </span><span class="nn">MyIface</span><span class="w"> </span><span class="kr">where</span>

<span class="kr">data</span><span class="w"> </span><span class="kt">HasValueView</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="kt">HasValueView</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">hasValueView</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Int</span><span class="w"> </span><span class="p">}</span>

<span class="kr">interface</span><span class="w"> </span><span class="kt">HasValue</span><span class="w"> </span><span class="kr">where</span>
<span class="w">  </span><span class="kr">viewtype</span><span class="w"> </span><span class="kt">HasValueView</span>
<span class="w">  </span><span class="n">getValue</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Int</span>
</pre></div>
</div>
<p>And build the module:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>&gt;<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>my-iface
&gt;<span class="w"> </span>daml<span class="w"> </span>build
...
Created<span class="w"> </span>.daml/dist/my-iface-1.0.0.dar
</pre></div>
</div>
<p>Add references to the newly created DAR in both <code class="docutils literal notranslate"><span class="pre">v1/my-pkg/daml.yaml</span></code> and
<code class="docutils literal notranslate"><span class="pre">v2/my-pkg/daml.yaml</span></code>:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nn">...</span>
<span class="nt">dependencies</span><span class="p">:</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">daml-prim</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">daml-stdlib</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">daml3-script</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">../../my-iface/.daml/dist/my-iface-1.0.0.dar</span>
<span class="nn">...</span>
</pre></div>
</div>
<p>Overwrite both <code class="docutils literal notranslate"><span class="pre">v1/my-pkg/daml/Main.daml</span></code> and <code class="docutils literal notranslate"><span class="pre">v2/my-pkg/daml/Main.daml</span></code>
with the following:</p>
<div class="highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="kr">module</span><span class="w"> </span><span class="nn">Main</span><span class="w"> </span><span class="kr">where</span>

<span class="kr">import</span><span class="w"> </span><span class="nn">Daml.Script</span>
<span class="kr">import</span><span class="w"> </span><span class="nn">MyIface</span>

<span class="kr">template</span><span class="w"> </span><span class="kt">IOU</span>
<span class="w">  </span><span class="kr">with</span>
<span class="w">    </span><span class="n">issuer</span><span class="kt">:</span><span class="w"> </span><span class="kt">Party</span>
<span class="w">    </span><span class="n">owner</span><span class="kt">:</span><span class="w"> </span><span class="kt">Party</span>
<span class="w">    </span><span class="n">value</span><span class="kt">:</span><span class="w"> </span><span class="kt">Int</span>
<span class="w">  </span><span class="kr">where</span>
<span class="w">    </span><span class="kr">signatory</span><span class="w"> </span><span class="n">issuer</span>
<span class="w">    </span><span class="kr">observer</span><span class="w"> </span><span class="n">owner</span>
<span class="w">    </span><span class="kr">key</span><span class="w"> </span><span class="n">issuer</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Party</span>
<span class="w">    </span><span class="kr">maintainer</span><span class="w"> </span><span class="kr">key</span>

<span class="w">    </span><span class="kr">interface</span><span class="w"> </span><span class="kr">instance</span><span class="w"> </span><span class="kt">HasValue</span><span class="w"> </span><span class="kr">for</span><span class="w"> </span><span class="kt">IOU</span><span class="w"> </span><span class="kr">where</span>
<span class="w">      </span><span class="n">view</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="kt">HasValueView</span><span class="w"> </span><span class="n">value</span>
<span class="w">      </span><span class="n">getValue</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="n">value</span>
</pre></div>
</div>
<p>Interface instances can be changed by an upgrade. For example, v2 can
change the definition of <code class="docutils literal notranslate"><span class="pre">getValue</span></code> in the <code class="docutils literal notranslate"><span class="pre">HasValue</span></code> instance.</p>
<p>Add a <code class="docutils literal notranslate"><span class="pre">quantity</span></code> field to the v2 IOU package, and amend the definition of
<code class="docutils literal notranslate"><span class="pre">getValue</span></code> to use it:</p>
<div class="highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="o">...</span>
<span class="kr">import</span><span class="w"> </span><span class="nn">DA.Optional</span><span class="w"> </span><span class="p">(</span><span class="nf">fromOptional</span><span class="p">)</span>

<span class="kr">template</span><span class="w"> </span><span class="kt">IOU</span>
<span class="w">  </span><span class="kr">with</span>
<span class="w">    </span><span class="n">issuer</span><span class="kt">:</span><span class="w"> </span><span class="kt">Party</span>
<span class="w">    </span><span class="n">owner</span><span class="kt">:</span><span class="w"> </span><span class="kt">Party</span>
<span class="w">    </span><span class="n">value</span><span class="kt">:</span><span class="w"> </span><span class="kt">Int</span>
<span class="w">    </span><span class="n">quantity</span><span class="kt">:</span><span class="w"> </span><span class="kt">Optional</span><span class="w"> </span><span class="kt">Int</span><span class="w"> </span><span class="c1">-- new quantity field</span>
<span class="w">  </span><span class="kr">where</span>
<span class="o">...</span>
<span class="w">    </span><span class="kr">interface</span><span class="w"> </span><span class="kr">instance</span><span class="w"> </span><span class="kt">HasValue</span><span class="w"> </span><span class="kr">for</span><span class="w"> </span><span class="kt">IOU</span><span class="w"> </span><span class="kr">where</span>
<span class="w">      </span><span class="n">view</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="kt">HasValueView</span><span class="w"> </span><span class="p">(</span><span class="n">value</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">fromOptional</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="n">quantity</span><span class="p">)</span>
<span class="w">      </span><span class="c1">-- Use quantity field to calculate value</span>
<span class="w">      </span><span class="n">getValue</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">fromOptional</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="n">quantity</span>
</pre></div>
</div>
<p>Shut down and relaunch the Daml sandbox, then build and upload the two
DARs. They should both succeed again:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>&gt;<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>v1/my-pkg
&gt;<span class="w"> </span>daml<span class="w"> </span>build
&gt;<span class="w"> </span>daml<span class="w"> </span>ledger<span class="w"> </span>upload-dar<span class="w"> </span>--port<span class="w"> </span><span class="m">6865</span>
...
Uploading<span class="w"> </span>.daml/dist/my-pkg-1.0.0.dar<span class="w"> </span>to<span class="w"> </span>localhost:6865
DAR<span class="w"> </span>upload<span class="w"> </span>succeeded.
&gt;<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>../../v2/my-pkg
&gt;<span class="w"> </span>daml<span class="w"> </span>build
&gt;<span class="w"> </span>daml<span class="w"> </span>ledger<span class="w"> </span>upload-dar<span class="w"> </span>--port<span class="w"> </span><span class="m">6865</span>
...
Uploading<span class="w"> </span>.daml/dist/my-pkg-1.1.0.dar<span class="w"> </span>to<span class="w"> </span>localhost:6865
DAR<span class="w"> </span>upload<span class="w"> </span>succeeded.
</pre></div>
</div>
<p>Packages with new versions cannot remove an instance that is already
there. For example, the v2 IOU template cannot remove its instance of
<code class="docutils literal notranslate"><span class="pre">HasValue</span></code>. Comment out the interface instance for <code class="docutils literal notranslate"><span class="pre">HasValue</span></code> from
<code class="docutils literal notranslate"><span class="pre">v2/my-pkg/daml/Main.daml</span></code> completely, then restart the sandbox and try to
reupload the two versions:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>&gt;<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>v1/my-pkg
&gt;<span class="w"> </span>daml<span class="w"> </span>build
&gt;<span class="w"> </span>daml<span class="w"> </span>ledger<span class="w"> </span>upload-dar<span class="w"> </span>--port<span class="w"> </span><span class="m">6865</span>
...
Uploading<span class="w"> </span>.daml/dist/my-pkg-1.0.0.dar<span class="w"> </span>to<span class="w"> </span>localhost:6865
DAR<span class="w"> </span>upload<span class="w"> </span>succeeded.
&gt;<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>../../v2/my-pkg
&gt;<span class="w"> </span>daml<span class="w"> </span>build
&gt;<span class="w"> </span>daml<span class="w"> </span>ledger<span class="w"> </span>upload-dar<span class="w"> </span>--port<span class="w"> </span><span class="m">6865</span>
...
Uploading<span class="w"> </span>.daml/dist/my-pkg-2.0.0.dar<span class="w"> </span>to<span class="w"> </span>localhost:6865
upload-dar<span class="w"> </span>did<span class="w"> </span>not<span class="w"> </span>succeed:<span class="w"> </span>...<span class="w"> </span>Implementation<span class="w"> </span>of<span class="w"> </span>interface<span class="w"> </span>...:MyIface:HasValue<span class="w"> </span>by<span class="w"> </span>template<span class="w"> </span>IOU<span class="w"> </span>appears<span class="w"> </span><span class="k">in</span><span class="w"> </span>package<span class="w"> </span>that<span class="w"> </span>is<span class="w"> </span>being<span class="w"> </span>upgraded,<span class="w"> </span>but<span class="w"> </span>does<span class="w"> </span>not<span class="w"> </span>appear<span class="w"> </span><span class="k">in</span><span class="w"> </span>this<span class="w"> </span>package.
</pre></div>
</div>
<p>Packages with new versions cannot add an interface instance to an existing
template either. For example, restore the instance deleted in the previous step
and remove the <code class="docutils literal notranslate"><span class="pre">HasValue</span></code> interface from <code class="docutils literal notranslate"><span class="pre">v2/my-pkg/daml/Main.daml</span></code> instead.
Then restart the sandbox and try to reupload the two versions.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>&gt;<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>v1/my-pkg
&gt;<span class="w"> </span>daml<span class="w"> </span>build
&gt;<span class="w"> </span>daml<span class="w"> </span>ledger<span class="w"> </span>upload-dar<span class="w"> </span>--port<span class="w"> </span><span class="m">6865</span>
...
Uploading<span class="w"> </span>.daml/dist/my-pkg-1.0.0.dar<span class="w"> </span>to<span class="w"> </span>localhost:6865
DAR<span class="w"> </span>upload<span class="w"> </span>succeeded.
&gt;<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>../../v2/my-pkg
&gt;<span class="w"> </span>daml<span class="w"> </span>build
&gt;<span class="w"> </span>daml<span class="w"> </span>ledger<span class="w"> </span>upload-dar<span class="w"> </span>--port<span class="w"> </span><span class="m">6865</span>
...
Uploading<span class="w"> </span>.daml/dist/my-pkg-2.0.0.dar<span class="w"> </span>to<span class="w"> </span>localhost:6865
upload-dar<span class="w"> </span>did<span class="w"> </span>not<span class="w"> </span>succeed:<span class="w"> </span>...<span class="w"> </span>Implementation<span class="w"> </span>of<span class="w"> </span>...:MyIface:HasValue<span class="w"> </span>by<span class="w"> </span>template<span class="w"> </span>IOU<span class="w"> </span>appears<span class="w"> </span><span class="k">in</span><span class="w"> </span>this<span class="w"> </span>package,<span class="w"> </span>but<span class="w"> </span>does<span class="w"> </span>not<span class="w"> </span>appear<span class="w"> </span><span class="k">in</span><span class="w"> </span>package<span class="w"> </span>that<span class="w"> </span>is<span class="w"> </span>being<span class="w"> </span>upgraded.
</pre></div>
</div>
<p>Similarly to choices, scripts may invoke interface implementations from
their own version using <code class="docutils literal notranslate"><span class="pre">exerciseExactCmd</span></code>.</p>
</div>
<div class="section" id="upgrading-interfaces">
<h4>Upgrading Interfaces<a class="headerlink" href="#upgrading-interfaces" title="Permalink to this headline">¶</a></h4>
<p>Interface instances may be upgraded, but interface definitions cannot be
upgraded. If an interface definition is present in v1 of a package, it must be
removed from all subsequent versions of that package.</p>
<p>Because interfaces definitions may not be defined in subsequent versions, any
package that uses an interface definition from a dependency package can never
upgrade that dependency to a new version.</p>
<p>For this reason, it is <a class="reference internal" href="#upgrades-separate-interfaces-and-exceptions"><span class="std std-ref">strongly recommended that interfaces always be defined
in their own packages separately from templates</span></a>.</p>
</div>
</div>
<div class="section" id="developer-workflow">
<h3>Developer Workflow<a class="headerlink" href="#developer-workflow" title="Permalink to this headline">¶</a></h3>
<p>This section contains suggestions on how to set up your development environment
for SCU to help you iterate more quickly on your projects.</p>
<div class="section" id="multi-package-builds">
<h4>Multi-Package Builds<a class="headerlink" href="#multi-package-builds" title="Permalink to this headline">¶</a></h4>
<p>Following the <a class="reference internal" href="#upgrades-best-practices"><span class="std std-ref">best practices</span></a> outlined below and the <a class="reference internal" href="#upgrades-testing"><span class="std std-ref">testing recommendations</span></a> leads to a
proliferation of packages in your project.  Use <a class="reference internal" href="../tools/assistant-build.html#multi-package-build"><span class="std std-ref">Multi-Package builds</span></a> to reliably rebuild these packages as you iterate on your
project. Multi-package builds also enable cross-package navigation in Daml
Studio.</p>
<p>The <a class="reference internal" href="#upgrades-multi-package"><span class="std std-ref">Multi-package builds for upgrades</span></a> section
goes into more detail on how to set up multi-package builds for SCU and how it
can help with testing.</p>
</div>
<div class="section" id="working-with-a-running-canton-instance">
<h4>Working with a Running Canton Instance<a class="headerlink" href="#working-with-a-running-canton-instance" title="Permalink to this headline">¶</a></h4>
<p>With SCU, it is no longer possible to iterate on a package by
uploading it to a running participant after each rebuild. A participant rejects two packages with the same name and version whose content
differs.</p>
<dl class="docutils">
<dt>There are two ways to work around this:</dt><dd><ul class="simple">
<li>restart the participant after each rebuild</li>
<li>change the version name of the package before each rebuild</li>
</ul>
</dd>
</dl>
<p><a class="reference internal" href="../tools/assistant.html#environment-variable-interpolation"><span class="std std-ref">Environment variable interpolation</span></a>
in the Daml Assistant can help with the latter. In the <code class="docutils literal notranslate"><span class="pre">daml.yaml</span></code> file of each
of your packages, append an environment variable to the name of the package:</p>
<div class="highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="nf">name</span><span class="kt">:</span><span class="w"> </span><span class="n">my</span><span class="o">-</span><span class="n">package</span><span class="o">-</span><span class="n">v</span><span class="o">$</span><span class="p">{</span><span class="kt">UNIQUE_BUILD_ID</span><span class="p">}</span>
</pre></div>
</div>
<p>Make sure to also append the variable to the name of the DAR file produced by
<code class="docutils literal notranslate"><span class="pre">my-package</span></code> in the <code class="docutils literal notranslate"><span class="pre">daml.yaml</span></code> files that depend on it:</p>
<div class="highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="nf">dependencies</span><span class="kt">:</span>
<span class="o">-</span><span class="w"> </span><span class="kr">daml</span><span class="o">-</span><span class="n">prim</span>
<span class="o">-</span><span class="w"> </span><span class="kr">daml</span><span class="o">-</span><span class="n">stdlib</span>
<span class="kr">data</span><span class="o">-</span><span class="n">dependencies</span><span class="kt">:</span>
<span class="o">-</span><span class="w"> </span><span class="o">../</span><span class="n">my</span><span class="o">-</span><span class="n">package</span><span class="o">/.</span><span class="kr">daml</span><span class="o">/</span><span class="n">dist</span><span class="o">/</span><span class="n">my</span><span class="o">-</span><span class="n">package</span><span class="o">-$</span><span class="p">{</span><span class="kt">UNIQUE_BUILD_ID</span><span class="p">}</span><span class="o">.</span><span class="n">dar</span>
</pre></div>
</div>
<p>Then, before invoking <code class="docutils literal notranslate"><span class="pre">daml</span> <span class="pre">build</span> <span class="pre">--all</span></code>, increment the <code class="docutils literal notranslate"><span class="pre">UNIQUE_BUILD_ID</span></code>
environment variable. This ensures that the build produces unique DAR files that can be uploaded to the participant without conflict.</p>
</div>
<div class="section" id="working-with-the-daml-sandbox">
<h4>Working with the Daml Sandbox<a class="headerlink" href="#working-with-the-daml-sandbox" title="Permalink to this headline">¶</a></h4>
<p>For the same reason, the <a class="reference internal" href="../tools/sandbox.html#sandbox-manual"><span class="std std-ref">Daml sandbox</span></a> does not support
hot-swapping of SCU-enabled (LF 1.17) packages.</p>
<dl class="docutils">
<dt>There are two ways to work around this:</dt><dd><ul class="simple">
<li>restart the sandbox after each rebuild</li>
<li>change the version name of your packages after each rebuild, as outlined in
the previous section</li>
</ul>
</dd>
</dl>
</div>
</div>
<div class="section" id="the-upgrade-model-in-depth-reference">
<h3>The Upgrade Model in Depth - Reference<a class="headerlink" href="#the-upgrade-model-in-depth-reference" title="Permalink to this headline">¶</a></h3>
<p>You can find the in-depth upgrading model, which can be used as a reference
for valid upgrades, <a class="reference internal" href="../concepts/ledger-model/upgrade-model-in-depth.html#upgrade-model-reference"><span class="std std-ref">here</span></a>.</p>
</div>
</div>
<div class="section" id="package-selection-in-the-ledger-api">
<h2>Package Selection in the Ledger API<a class="headerlink" href="#package-selection-in-the-ledger-api" title="Permalink to this headline">¶</a></h2>
<p>Until the introduction of SCU, template IDs in requests to the Ledger API were all of the form
<code class="docutils literal notranslate"><span class="pre">&lt;package-id&gt;:&lt;module-name&gt;:&lt;template-name&gt;</span></code>.
For disambiguation, going forward, we refer to this format as <strong>by-package-id template IDs</strong>.</p>
<p>With SCU, we introduce a more generic template reference of the format
<code class="docutils literal notranslate"><span class="pre">#&lt;package-name&gt;:&lt;module-name&gt;:&lt;template-name&gt;</span></code> (<strong>by-package-name template ID</strong>)
that scopes templates by package-name, allowing version-agnostic addressing of templates on the Ledger API.
It serves as a reference to all template IDs with the qualified name <code class="docutils literal notranslate"><span class="pre">&lt;module-name&gt;:&lt;template-name&gt;</span></code>
from all packages with the name <code class="docutils literal notranslate"><span class="pre">package-name</span></code> known to the Ledger API server.</p>
<p><cite>By-package-name template ID</cite> addressing is supported for all upgradable packages (LF &gt;= 1.17)
and is possible on both the write path (command submission) and read path (Ledger API queries).</p>
<p>The <cite>by-package-name template ID</cite> is an API-level concept of the Ledger API.
Internally, Canton uses by-package-id template IDs for all operations.
Therefore, when the new format is used in requests to the Ledger API,
a dynamic resolution is performed as described in the following sections.</p>
<div class="section" id="package-preference">
<span id="id2"></span><h3>Package Preference<a class="headerlink" href="#package-preference" title="Permalink to this headline">¶</a></h3>
<p>On processing a command submission, there are scenarios where the Ledger API server needs
to resolve <cite>by-package-name template IDs</cite> to <cite>by-package-id template IDs</cite> (see <a class="reference internal" href="#dynamic-package-resolution-in-command-submission"><span class="std std-ref">Dynamic Package Resolution in Command Submission</span></a>).
For this purpose, the <strong>package preference</strong> concept is introduced
as the mapping from package-name to package ID for all known package-names on the participant.</p>
<p>The package preference is needed at each command submission time and is assembled from two sources:</p>
<ul>
<li><p class="first">The <strong>default</strong> package preference of the Ledger API server to which the command is submitted.
This is the exhaustive mapping from package-name to package ID for all known package-names on the participant.
If multiple package IDs exist for a package-name, the package ID of the package with the highest
version is used.</p>
</li>
<li><p class="first">The package-id selection preference list specified in the submitted command’s
<a class="reference internal" href="../app-dev/grpc/proto-docs.html#com-daml-ledger-api-v1-commands-package-id-selection-preference"><span class="std std-ref">package_id_selection_preference</span></a> in a command submission.
This is package-id resolution list explicitly provided by the client to
override the default package preference mentioned above.</p>
<blockquote>
<div><ul class="simple">
<li>See <a class="reference internal" href="#daml-script-package-preference"><span class="std std-ref">here</span></a> for how to provide this in Daml-Script</li>
<li><strong>Note:</strong> The <a class="reference internal" href="../app-dev/grpc/proto-docs.html#com-daml-ledger-api-v1-commands-package-id-selection-preference"><span class="std std-ref">package_id_selection_preference</span></a>
must not lead to ambiguous resolutions for package-names,
meaning that it must not contain two package-ids pointing to
packages with the same package-name, as otherwise the submission will fail with
an <code class="docutils literal notranslate"><span class="pre">INVALID_ARGUMENT</span></code> error.</li>
</ul>
</div></blockquote>
</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last"><strong>Important</strong>: DAR uploads change the package preference on the participant.
If a new uploaded DAR contains an upgradable (LF &gt;= 1.17) package with a higher version
than the existing package preference for the same package name,
the default preference is updated to the new package ID.
Essentially, this affects the Daml code version used in command submissions.</p>
</div>
</div>
<div class="section" id="dynamic-package-resolution-in-command-submission">
<span id="id3"></span><h3>Dynamic Package Resolution in Command Submission<a class="headerlink" href="#dynamic-package-resolution-in-command-submission" title="Permalink to this headline">¶</a></h3>
<p>Dynamic package resolution can happen in two cases during command submission:</p>
<ul class="simple">
<li>For command submissions that use a <cite>by-package-name template ID</cite>
in the command’s templateId field (e.g. in a
create command <a class="reference internal" href="../app-dev/grpc/proto-docs.html#com-daml-ledger-api-v1-createcommand"><span class="std std-ref">here</span></a>)</li>
<li>For command submissions whose Daml interpretation requires the execution of
interface choices or fetch-by-interface actions.</li>
</ul>
<p>In these situations, the <a class="reference internal" href="#package-preference"><span class="std std-ref">package preference</span></a> is used for
selecting the target implementation package for these interface actions.</p>
</div>
<div class="section" id="dynamic-package-resolution-in-ledger-api-queries">
<h3>Dynamic Package Resolution in Ledger API Queries<a class="headerlink" href="#dynamic-package-resolution-in-ledger-api-queries" title="Permalink to this headline">¶</a></h3>
<p>When subscribing for <a class="reference internal" href="../app-dev/services.html#transaction-trees"><span class="std std-ref">transaction</span></a>
or <a class="reference internal" href="../app-dev/services.html#active-contract-service"><span class="std std-ref">active contract streams</span></a>,
users can now use the <cite>by-package-name template ID</cite> format
in the <a class="reference internal" href="../app-dev/grpc/proto-docs.html#com-daml-ledger-api-v1-templatefilter-template-id"><span class="std std-ref">template-id request filter field</span></a>.
to specify that they’re interested in fetching events for all templates
pertaining to the specified package-name. This template selection set is
dynamic and it widens with each uploaded template/package.</p>
<p><strong>Note:</strong> The by-package-name query mechanism described here does not
apply to events sourced from non-upgradable templates (coming from
packages with LF &lt; 1.17)</p>
<div class="section" id="example">
<h4>Example<a class="headerlink" href="#example" title="Permalink to this headline">¶</a></h4>
<p>Given the following packages with LF 1.17 existing on the participant
node:</p>
<ul class="simple">
<li>Package AppV1<ul>
<li>package-name: <code class="docutils literal notranslate"><span class="pre">app1</span></code></li>
<li>package-version: <code class="docutils literal notranslate"><span class="pre">1.0.0</span></code></li>
<li>template-ids: <code class="docutils literal notranslate"><span class="pre">pkgId1:mod:T</span></code></li>
</ul>
</li>
<li>Package AppV2<ul>
<li>package-name: <code class="docutils literal notranslate"><span class="pre">app1</span></code></li>
<li>package-version: <code class="docutils literal notranslate"><span class="pre">1.1.0</span></code></li>
<li>template-ids: <code class="docutils literal notranslate"><span class="pre">pkgId2:mod:T</span></code></li>
</ul>
</li>
</ul>
<p>If a transaction query is created with a templateId specified as
<code class="docutils literal notranslate"><span class="pre">#app1:mod:T</span></code>, then the events stream will include events from both
template-ids: <code class="docutils literal notranslate"><span class="pre">pkgId1:mod:T</span></code> and <code class="docutils literal notranslate"><span class="pre">pkgId2:mod:T</span></code></p>
</div>
</div>
</div>
<div class="section" id="migrating-to-scu">
<h2>Migrating to SCU<a class="headerlink" href="#migrating-to-scu" title="Permalink to this headline">¶</a></h2>
<p>SCU is only supported on LF1.17, which in turn is only supported on
Canton Protocol Version 7. Existing deployed contracts
require migration and redeployment to use this feature.
See <a class="reference internal" href="../canton/usermanual/upgrading.html#upgrade-to-2-10"><span class="std std-ref">here</span></a> for the migration guide to 2.10 and Protocol Version 7</p>
<p>First you must migrate your Daml model to be compatible with
upgrades; see <a class="reference external" href="#best-practices">Best Practices</a> for what to
change here. Pay particular attention to the case of interfaces and
exceptions, as failure to do so could lead to packages which are
incompatible with SCU and require the use of another full migration (and
downtime).</p>
<p>Next, be aware of the new package-name scoping rules, and
ensure that your package set does not violate them. In short, LF1.17 packages
with the same package name are unified under SCU, so you should ensure that
all of your packages that are not intended to be direct upgrades of each other
have unique package names.
Note also that only one package for each version
can exist within a given package name.
LF1.15 packages are not subject to this restriction, and can exist alongside LF1.17
packages.</p>
<p>Once you have your new DARs, you need to upgrade your Canton and
protocol version together, since 2.10 introduces a new protocol version.
The steps to achieve this are given in the <a class="reference internal" href="../canton/usermanual/upgrading.html#one-step-migration"><span class="std std-ref">Canton Upgrading
manual</span></a>.</p>
<p>Finally, you can migrate your live data from your previous DARs to the
new LF1.17 DARs, using one of the existing downtime upgrade techniques
listed <a class="reference internal" href="index.html#upgrades-index"><span class="std std-ref">here</span></a>.</p>
</div>
<div class="section" id="best-practices">
<span id="upgrades-best-practices"></span><h2>Best Practices<a class="headerlink" href="#best-practices" title="Permalink to this headline">¶</a></h2>
<p>To ensure that future upgrades and DAR lifecycling go smoothly, we
recommend the following practices:</p>
<div class="section" id="separate-interfaces-exceptions-from-templates">
<span id="upgrades-separate-interfaces-and-exceptions"></span><h3>Separate Interfaces/Exceptions from Templates<a class="headerlink" href="#separate-interfaces-exceptions-from-templates" title="Permalink to this headline">¶</a></h3>
<p>Interface and exception definitions are not upgradable. As such, if you attempt
to redefine an interface or exception in version 2 of a package, even if it is
unchanged, the package does not type check. Removing an interface from the
version 2 package also causes issues, especially if the interface has
choices.</p>
<p>This means that template definitions that exist in the same package as
interfaces and exception definitions are not upgradeable. To avoid this
issue, move interface and exception definitions into a separate package such that subsequent versions of your template package all depend on the same version of the package with interfaces/exceptions.</p>
<p>For example, a single package <code class="docutils literal notranslate"><span class="pre">main</span></code> defined as follows would not be able to
upgrade, leaving the template <code class="docutils literal notranslate"><span class="pre">T</span></code> non-upgradeable.</p>
<div class="highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="kr">module</span><span class="w"> </span><span class="nn">Main</span><span class="w"> </span><span class="kr">where</span>

<span class="kr">interface</span><span class="w"> </span><span class="kt">I</span><span class="w"> </span><span class="kr">where</span>
<span class="w">  </span><span class="o">...</span>

<span class="kr">template</span><span class="w"> </span><span class="kt">T</span><span class="w"> </span><span class="kr">with</span>
<span class="w">  </span><span class="o">...</span>
</pre></div>
</div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">sdk-version</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2.10.0</span>
<span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">main</span>
<span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1.0.0</span>
<span class="nt">source</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Main.daml</span>
<span class="nt">dependencies</span><span class="p">:</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">daml-prim</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">daml-stdlib</span>
<span class="nt">build-options</span><span class="p">:</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">--target=1.17</span>
</pre></div>
</div>
<p>The SCU type checker emits an error and refuses to compile this module:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>error type checking &lt;none&gt;:
  This package defines both interfaces and templates. This may make this package and its dependents not upgradeable.

  It is recommended that interfaces are defined in their own package separate from their implementations.
  Downgrade this error to a warning with -Wupgrade-interfaces
  Disable this error entirely with -Wno-upgrade-interfaces
</pre></div>
</div>
<p><strong>Note:</strong> It is very strongly recommended that you do not compile interfaces or
exceptions in a package alongside templates. However, you can downgrade this
error to a warning by passing the <code class="docutils literal notranslate"><span class="pre">-Wupgrade-interfaces</span></code> flag, or ignore this
error entirely with the <code class="docutils literal notranslate"><span class="pre">-Wno-upgrade-interfaces</span></code> flag.</p>
<p>The recommended way to fix this is to split the <code class="docutils literal notranslate"><span class="pre">main</span></code> package by redefining
it as two packages, <code class="docutils literal notranslate"><span class="pre">helper</span></code> and <code class="docutils literal notranslate"><span class="pre">main</span></code>:</p>
<div class="highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="kr">module</span><span class="w"> </span><span class="nn">Helper</span><span class="w"> </span><span class="kr">where</span>

<span class="kr">interface</span><span class="w"> </span><span class="kt">I</span><span class="w"> </span><span class="kr">where</span>
<span class="w">  </span><span class="o">...</span>
</pre></div>
</div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">sdk-version</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2.10.0</span>
<span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">helper</span>
<span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1.0.0</span>
<span class="nt">source</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Helper.daml</span>
<span class="nt">dependencies</span><span class="p">:</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">daml-prim</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">daml-stdlib</span>
<span class="nt">build-options</span><span class="p">:</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">--target=1.17</span>
</pre></div>
</div>
<div class="highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="kr">module</span><span class="w"> </span><span class="nn">Main</span><span class="w"> </span><span class="kr">where</span>

<span class="kr">import</span><span class="w"> </span><span class="k">qualified</span><span class="w"> </span><span class="nn">Helper</span>

<span class="kr">template</span><span class="w"> </span><span class="kt">T</span><span class="w"> </span><span class="kr">with</span>
<span class="w">  </span><span class="o">...</span>
</pre></div>
</div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">sdk-version</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2.10.0</span>
<span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">main</span>
<span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1.0.0</span>
<span class="nt">source</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Main.daml</span>
<span class="nt">dependencies</span><span class="p">:</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">daml-prim</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">daml-stdlib</span>
<span class="nt">data-dependencies</span><span class="p">:</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;path to helper DAR&gt;</span>
<span class="nt">build-options</span><span class="p">:</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">--target=1.17</span>
</pre></div>
</div>
<p>To manage the complexity of working with multiple packages at once, we recommend using <a class="reference internal" href="../tools/assistant-build.html#multi-package-build"><span class="std std-ref">multi-package builds</span></a>.</p>
</div>
<div class="section" id="remove-retroactive-instances">
<h3>Remove Retroactive Instances<a class="headerlink" href="#remove-retroactive-instances" title="Permalink to this headline">¶</a></h3>
<p>SCU is not compatible with retroactive interface instances, so if you are migrating to SCU from an LF1.15
project that uses retroactive instances, you must move the instances to their respective templates
during the migration.
See <a class="reference external" href="#limitations">Limitations</a> for more information.</p>
</div>
<div class="section" id="avoid-contract-metadata-changes">
<h3>Avoid Contract Metadata Changes<a class="headerlink" href="#avoid-contract-metadata-changes" title="Permalink to this headline">¶</a></h3>
<p>The signatories, stakeholders, contract key, and ensure clauses of a contract
should be fixed at runtime for a given contract. Changing their definitions in
your Daml code is discouraged and triggers a warning from the SCU typechecker.</p>
<p>We strongly recommend against altering the type of a key. If changing the type
of a key cannot be avoided, consider using an off-ledger migration instead of
SCU.</p>
</div>
<div class="section" id="breaking-changes-via-explicit-package-version">
<span id="upgrade-package-naming"></span><h3>Breaking Changes via Explicit Package Version<a class="headerlink" href="#breaking-changes-via-explicit-package-version" title="Permalink to this headline">¶</a></h3>
<p>To make a breaking change to your package that
is not upgrade compatible, you can change the name of your package to indicate a
breaking version bump. To enable this, we recommend that your package
name contains a version marker for when a breaking change occurs.</p>
<p>For example, for your first iteration of a package, you would name it
<code class="docutils literal notranslate"><span class="pre">main-v1</span></code>, starting with package version <code class="docutils literal notranslate"><span class="pre">1.0.0</span></code>. In this case, the <code class="docutils literal notranslate"><span class="pre">v1</span></code>
is part of the <em>package name</em>, not the package version. You could publish
upgrade-compatible versions by changing the <code class="docutils literal notranslate"><span class="pre">version:</span></code> field from <code class="docutils literal notranslate"><span class="pre">1.0.0</span></code> to
<code class="docutils literal notranslate"><span class="pre">2.0.0</span></code> to <code class="docutils literal notranslate"><span class="pre">3.0.0</span></code>. These versions would all be upgrade-compatible with
one another:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>main-v1-1.0.0
main-v1-2.0.0
main-v1-3.0.0
</pre></div>
</div>
<p>Note how the <code class="docutils literal notranslate"><span class="pre">v1</span></code> in all three packages remains stable - this means the
package name has not changed, and ensures that these three packages and their
datatypes are considered by the runtime and the type checker to be upgradeable.</p>
<p>To make a breaking change, publish a new package version with package name <code class="docutils literal notranslate"><span class="pre">main-v2</span></code>. Because this package has a
different package name from those with <code class="docutils literal notranslate"><span class="pre">main-v1</span></code>, it is not typechecked
against those packages and its datatypes are not automatically converted.
You would need to manually migrate values from <code class="docutils literal notranslate"><span class="pre">main-v1</span></code> packages to
<code class="docutils literal notranslate"><span class="pre">main-v2</span></code> – existing downtime upgrade techniques are listed <a class="reference internal" href="index.html#upgrades-index"><span class="std std-ref">here</span></a>.</p>
</div>
<div class="section" id="avoid-depending-on-lf-1-15-packages">
<h3>Avoid Depending on LF 1.15 Packages<a class="headerlink" href="#avoid-depending-on-lf-1-15-packages" title="Permalink to this headline">¶</a></h3>
<p>Smart contract upgrades were only enabled in LF 1.17. This means that packages
of previous LF versions, namely &lt;= LF 1.15, are not upgradeable. By extension,
their datatypes and templates are not upgradeable.</p>
<p>This means that datatypes in an LF 1.17 package with fields that use datatyps
from an LF 1.15 dependency cannot ever upgrade those datatypes, so that package remains a dependency forever.</p>
<p>As an example, assume we have three packages:
* <code class="docutils literal notranslate"><span class="pre">main</span></code>, which uses LF 1.17, with module <code class="docutils literal notranslate"><span class="pre">Main</span></code>
* <code class="docutils literal notranslate"><span class="pre">dep1</span></code>, which uses LF 1.15, with module <code class="docutils literal notranslate"><span class="pre">Dep1</span></code>
* <code class="docutils literal notranslate"><span class="pre">dep2</span></code>, which uses LF 1.17, with module <code class="docutils literal notranslate"><span class="pre">Dep2</span></code></p>
<div class="highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="kr">module</span><span class="w"> </span><span class="nn">Main</span><span class="w"> </span><span class="kr">where</span>

<span class="kr">import</span><span class="w"> </span><span class="k">qualified</span><span class="w"> </span><span class="nn">Dep1</span>
<span class="kr">import</span><span class="w"> </span><span class="k">qualified</span><span class="w"> </span><span class="nn">Dep2</span>

<span class="kr">data</span><span class="w"> </span><span class="kt">MyData</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="kt">MyData</span>
<span class="w">  </span><span class="p">{</span><span class="w"> </span><span class="n">field1</span><span class="kt">:</span><span class="w"> </span><span class="kt">Dep1</span><span class="o">.</span><span class="kt">D</span>
<span class="w">  </span><span class="p">,</span><span class="w"> </span><span class="n">field2</span><span class="kt">:</span><span class="w"> </span><span class="kt">Dep2</span><span class="o">.</span><span class="kt">D</span>
<span class="w">  </span><span class="p">,</span><span class="w"> </span><span class="n">field3</span><span class="kt">:</span><span class="w"> </span><span class="p">(</span><span class="kt">Dep1</span><span class="o">.</span><span class="kt">D</span><span class="p">,</span><span class="w"> </span><span class="kt">Dep2</span><span class="o">.</span><span class="kt">D</span><span class="p">)</span>
<span class="w">  </span><span class="p">}</span>
</pre></div>
</div>
<p>Because datatype <code class="docutils literal notranslate"><span class="pre">Dep1.D</span></code> comes from an LF 1.15 dependency, it cannot be
upgraded, and so <code class="docutils literal notranslate"><span class="pre">field1</span></code> and the second element of <code class="docutils literal notranslate"><span class="pre">field3</span></code> can never be
changed. However, <code class="docutils literal notranslate"><span class="pre">field2</span></code> and the first element of <code class="docutils literal notranslate"><span class="pre">field3</span></code> can be upgraded
as new upgraded versions of <code class="docutils literal notranslate"><span class="pre">dep2</span></code> become available.</p>
<p>If you compile <code class="docutils literal notranslate"><span class="pre">main</span></code>, you can expect a warning about the use of an LF 1.15
package’s datatype in the definition of <code class="docutils literal notranslate"><span class="pre">MyData</span></code>.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>&gt;<span class="w"> </span>daml<span class="w"> </span>build
...
warning<span class="w"> </span><span class="k">while</span><span class="w"> </span><span class="nb">type</span><span class="w"> </span>checking<span class="w"> </span>data<span class="w"> </span><span class="nb">type</span><span class="w"> </span>Main.MyData:
<span class="w">  </span>This<span class="w"> </span>package<span class="w"> </span>has<span class="w"> </span>LF<span class="w"> </span>version<span class="w"> </span><span class="m">1</span>.17,<span class="w"> </span>but<span class="w"> </span>it<span class="w"> </span>depends<span class="w"> </span>on<span class="w"> </span>a<span class="w"> </span>serializable<span class="w"> </span><span class="nb">type</span><span class="w"> </span>&lt;dep1<span class="w"> </span>package<span class="w"> </span>ID&gt;:Dep1:D<span class="w"> </span>from<span class="w"> </span>package<span class="w"> </span>&lt;dep<span class="w"> </span><span class="m">1</span><span class="w"> </span>package<span class="w"> </span>ID&gt;<span class="w"> </span><span class="o">(</span>dep1,<span class="w"> </span><span class="m">1</span>.0.0<span class="o">)</span><span class="w"> </span>which<span class="w"> </span>has<span class="w"> </span>LF<span class="w"> </span>version<span class="w"> </span><span class="m">1</span>.15.

<span class="w">  </span>We<span class="w"> </span><span class="k">do</span><span class="w"> </span>not<span class="w"> </span>recommend<span class="w"> </span>that<span class="w"> </span>&gt;<span class="o">=</span><span class="w"> </span>LF1.17<span class="w"> </span>packages<span class="w"> </span>depend<span class="w"> </span>on<span class="w"> </span>&lt;<span class="o">=</span><span class="w"> </span>LF1.15<span class="w"> </span>datatypes<span class="w"> </span><span class="k">in</span><span class="w"> </span>places<span class="w"> </span>that<span class="w"> </span>may<span class="w"> </span>be<span class="w"> </span>serialized<span class="w"> </span>to<span class="w"> </span>the<span class="w"> </span>ledger,<span class="w"> </span>because<span class="w"> </span>those<span class="w"> </span>datatypes<span class="w"> </span>are<span class="w"> </span>not<span class="w"> </span>upgradeable.
<span class="w">  </span>Upgrade<span class="w"> </span>this<span class="w"> </span>warning<span class="w"> </span>to<span class="w"> </span>an<span class="w"> </span>error<span class="w"> </span>-Werror<span class="o">=</span>upgrade-serialized-non-upgradeable-dependency
<span class="w">  </span>Remove<span class="w"> </span>this<span class="w"> </span>warning<span class="w"> </span>with<span class="w"> </span>-Wno-upgrade-serialized-non-upgradeable-dependency
</pre></div>
</div>
<p><strong>Note:</strong> For added safety, you may upgrade these warnings to errors with
<code class="docutils literal notranslate"><span class="pre">-Werror=upgrade-serialized-non-upgradeable-dependency</span></code>. We recommend against removing these
warnings with <code class="docutils literal notranslate"><span class="pre">-Wno-upgrade-serialized-non-upgradeable-dependency</span></code>.</p>
</div>
<div class="section" id="avoid-depending-on-daml-script-packages">
<span id="upgrade-dont-upload-daml-script"></span><h3>Avoid Depending on Daml Script Packages<a class="headerlink" href="#avoid-depending-on-daml-script-packages" title="Permalink to this headline">¶</a></h3>
<p>We recommend only depending on Daml Script packages such as <code class="docutils literal notranslate"><span class="pre">daml-script-lts</span></code>
in dedicated packages for running tests written in Daml Script. These packages
should not be part of your model and should not be uploaded to the ledger.</p>
<p>Daml Script packages are not guaranteed to be upgradeable across SDK versions.
If you depend on a Daml Script datatype in a serializable
position (e.g. the field of a template), your package may rely on
a Daml Script package in a way that can neither be removed nor upgraded to the
next SDK version. Your package and any of its SCU upgrades would
be stuck on that SDK version.</p>
<p>For example, suppose you have a <code class="docutils literal notranslate"><span class="pre">main</span></code> package that depends on
<code class="docutils literal notranslate"><span class="pre">daml-script-lts</span></code> from SDK 2.10.0.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2.10.0</span>
<span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">main</span>
<span class="nn">...</span>
<span class="nt">dependencies</span><span class="p">:</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">daml-prim</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">daml-stdlib</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">daml-script-lts</span>
<span class="nt">build-options</span><span class="p">:</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">--target=1.17</span>
</pre></div>
</div>
<div class="highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="kr">module</span><span class="w"> </span><span class="nn">Main</span><span class="w"> </span><span class="kr">where</span>

<span class="kr">import</span><span class="w"> </span><span class="k">qualified</span><span class="w"> </span><span class="nn">Daml.Script</span>

<span class="kr">data</span><span class="w"> </span><span class="kt">MyData</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="kt">MyData</span>
<span class="w">  </span><span class="p">{</span><span class="w"> </span><span class="n">field1</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Daml</span><span class="o">.</span><span class="kt">Script</span><span class="o">.</span><span class="kt">PartyIdHint</span>
<span class="w">  </span><span class="p">}</span>
</pre></div>
</div>
<p>Because <code class="docutils literal notranslate"><span class="pre">MyData</span></code> is a serializable datatype, any changes to it must be valid
upgrade changes (e.g. adding a field) for the <code class="docutils literal notranslate"><span class="pre">main</span></code> package itself to be upgraded. If SDK 2.10.X introduces a change to
<code class="docutils literal notranslate"><span class="pre">daml-script-lts</span></code> that is not a valid upgrade of the <code class="docutils literal notranslate"><span class="pre">daml-script-lts</span></code> in
SDK 2.10.0, then <code class="docutils literal notranslate"><span class="pre">field1</span></code> is not upgradeable to the next version of the
SDK, nor can the field be dropped because the field is used in SCU checks.</p>
<p><strong>Note</strong>: While it is unlikely that an SDK update breaks <code class="docutils literal notranslate"><span class="pre">daml-script-lts</span></code>
for upgrades, we still strongly recommend against it. In Daml 3.x, Canton may
disallow uploading <code class="docutils literal notranslate"><span class="pre">daml-script-lts</span></code> entirely.</p>
<p>At that point, all future development on <code class="docutils literal notranslate"><span class="pre">main</span></code>, including future upgrades,
would be locked to SDK 2.10.0. To bump the SDK version, <code class="docutils literal notranslate"><span class="pre">main</span></code> would have to
be migrated via a manual upgrade tool with downtime – existing downtime upgrade
techniques are listed <a class="reference internal" href="index.html#upgrades-index"><span class="std std-ref">here</span></a>.</p>
<p>For this reason, we strongly recommend against using Daml Script as an upgrade
dependency for any package going on the ledger. Whenever building the <code class="docutils literal notranslate"><span class="pre">main</span></code>
package above, you can expect a warning:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>&gt;<span class="w"> </span>daml<span class="w"> </span>build
...
warning<span class="w"> </span><span class="k">while</span><span class="w"> </span><span class="nb">type</span><span class="w"> </span>checking<span class="w"> </span>data<span class="w"> </span><span class="nb">type</span><span class="w"> </span>Main.MyData:
<span class="w">  </span>This<span class="w"> </span>package<span class="w"> </span>depends<span class="w"> </span>on<span class="w"> </span>a<span class="w"> </span>datatype<span class="w"> </span>&lt;package<span class="w"> </span>ID&gt;:Daml.Script.Stable:PartyIdHint<span class="w"> </span>from<span class="w"> </span>&lt;package<span class="w"> </span>ID&gt;<span class="w"> </span><span class="o">(</span>daml-script-lts-stable,<span class="w"> </span><span class="m">0</span>.0.0<span class="o">)</span><span class="w"> </span>with<span class="w"> </span>LF<span class="w"> </span>version<span class="w"> </span><span class="m">1</span>.17.

<span class="w">  </span>We<span class="w"> </span><span class="k">do</span><span class="w"> </span>not<span class="w"> </span>recommend<span class="w"> </span>using<span class="w"> </span>datatypes<span class="w"> </span>from<span class="w"> </span>Daml<span class="w"> </span>Script<span class="w"> </span><span class="k">in</span><span class="w"> </span>&gt;<span class="o">=</span><span class="w"> </span>LF1.17<span class="w"> </span>packages,<span class="w"> </span>because<span class="w"> </span>those<span class="w"> </span>datatypes<span class="w"> </span>are<span class="w"> </span>not<span class="w"> </span>upgradeable.
<span class="w">  </span>Upgrade<span class="w"> </span>this<span class="w"> </span>warning<span class="w"> </span>to<span class="w"> </span>an<span class="w"> </span>error<span class="w"> </span>-Werror<span class="o">=</span>upgrade-serialized-daml-script
<span class="w">  </span>Remove<span class="w"> </span>this<span class="w"> </span>warning<span class="w"> </span>with<span class="w"> </span>-Wno-upgrade-serialized-daml-script
</pre></div>
</div>
<p><strong>Note:</strong> For added safety, you may upgrade these warnings to errors with
<code class="docutils literal notranslate"><span class="pre">-Werror=upgrade-serialized-daml-script</span></code>. We recommend against removing these
warnings with <code class="docutils literal notranslate"><span class="pre">-Wno-upgrade-serialized-daml-script</span></code>.</p>
<p>If instead <code class="docutils literal notranslate"><span class="pre">main</span></code> depends on a datatype in a non-serializable position such
as the type signature of a function, <code class="docutils literal notranslate"><span class="pre">main</span></code> can still be upgraded without
breaking any SCU restrictions. For example:</p>
<div class="highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="kr">module</span><span class="w"> </span><span class="nn">Main</span><span class="w"> </span><span class="kr">where</span>

<span class="kr">import</span><span class="w"> </span><span class="k">qualified</span><span class="w"> </span><span class="nn">Daml.Script</span>

<span class="kr">data</span><span class="w"> </span><span class="kt">MyData</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="kt">MyData</span>
<span class="w">  </span><span class="p">{</span><span class="w"> </span><span class="n">field1</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Text</span>
<span class="w">  </span><span class="p">}</span>

<span class="nf">myFunction</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Daml</span><span class="o">.</span><span class="kt">Script</span><span class="o">.</span><span class="kt">PartyIdHint</span><span class="w"> </span><span class="ow">-&gt;</span><span class="w"> </span><span class="kt">Bool</span>
<span class="nf">myFunction</span><span class="w"> </span><span class="kr">_</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="kc">True</span>
</pre></div>
</div>
<p>In this case, when changing SDK from 2.10.0 to 2.10.X, the typechecker
ignores the change to <code class="docutils literal notranslate"><span class="pre">Daml.Script.PartyIdHint</span></code> in <code class="docutils literal notranslate"><span class="pre">myFunction</span></code>, because it
is not in a serializable position. This means <code class="docutils literal notranslate"><span class="pre">daml-script-lts</span></code> can be kept
even when it is not a valid upgrade from one version to the next.</p>
<p><strong>Note:</strong> We still recommend against depending on Daml Script for
ledger-uploaded packages, even in this case with non-serializable positions.</p>
</div>
<div class="section" id="operational-design-guideline-for-upgrading-daml-apps">
<h3>Operational Design Guideline for Upgrading Daml Apps<a class="headerlink" href="#operational-design-guideline-for-upgrading-daml-apps" title="Permalink to this headline">¶</a></h3>
<p>When considering upgrading, we regard each Daml application as composed of:</p>
<ul class="simple">
<li><strong>On-ledger components</strong>: The Daml code running the on-ledger logic (i.e. the DARs uploaded
to all participant nodes interacting with the app)</li>
<li><strong>Off-ledger components</strong> interacting with the ledger via the Ledger API or other supported
Canton Ledger API clients (JSON API or PQS).
These are typically Java or TypeScript services implementing off-ledger business logic.</li>
</ul>
<div class="section" id="zero-downtime-upgrades">
<h4>Zero-Downtime Upgrades<a class="headerlink" href="#zero-downtime-upgrades" title="Permalink to this headline">¶</a></h4>
<p>Upgrading an application without operational downtime can be achieved by designing the above-mentioned components to allow:</p>
<ul class="simple">
<li><strong>Asynchronous rollout</strong>: Operators deploy updated software at their own pace,
similar to established CI/CD practices in micro-service environments.</li>
<li><strong>Synchronous switch-over</strong>: All components switch to using updated Daml code at the same time.</li>
</ul>
<p><strong>Designing for asynchronous upgrade roll-outs</strong></p>
<p>To allow for asynchronous roll-outs, off-ledger components should:</p>
<ul>
<li><p class="first"><strong>use package names in Ledger API requests</strong>:
App components interacting with the Ledger API should use <cite>by-package-name template IDs</cite>
instead of <cite>by-package-id template IDs</cite> in all their command submissions and queries.
This allows:</p>
<blockquote>
<div><ul class="simple">
<li>Ledger API server-side version selection of the package preference for command submissions.</li>
<li>reading all versions of the templates in queries, even newer versions
than the one the component was developed against.</li>
</ul>
</div></blockquote>
</li>
<li><p class="first"><strong>handle missing optional fields</strong>:
App components reading from the Ledger API or Ledger API clients
must be prepared to handle missing optional fields in records,
including those in the initial package.
The TypeScript and Java codegens for reading Daml values do so by default.</p>
</li>
<li><p class="first"><strong>use exhaustive package preference</strong>: on each command submission, the <code class="docutils literal notranslate"><span class="pre">package_id_selection_preference</span></code> is set ensuring that:</p>
<blockquote>
<div><ul class="simple">
<li>The package ID of every package used in the command and of every package
used by all possible interface instances is included in the package preference.</li>
<li>Within an application, all submissions use the same package preference.</li>
</ul>
</div></blockquote>
</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Following these recommendations decouples the application’s behavior from the DAR uploads
(see <a class="reference internal" href="#package-preference"><span class="std std-ref">the note regarding Package Preference</span></a>),
as package resolution is fully determined by the explicit
and exhaustive package preference provided in command submissions.</p>
</div>
<p><strong>Operational steps for upgrading</strong></p>
<p>Once a new Daml package version of the application is ready, define an operational window
for allowing the asynchronous rollout of the updated components.
During this window, Canton node and off-ledger app operators should:</p>
<ul class="simple">
<li>Upload the upgraded DARs to the participant nodes</li>
<li>Roll-out the updated off-ledger components</li>
</ul>
<p>After the operational window passes, the application can switch over to the upgraded logic as such:</p>
<ul class="simple">
<li>A switch-over time is decided and communicated to all app clients in advance,
along with the updated package preference pertaining to the application’s upgraded DARs.
For example, you may encode the switch-over time in a config value set on all components;
or publish it at a well-known HTTP endpoint from which all components read it.</li>
<li>After the switch-over time, all Ledger API clients update their package preference
and use it for subsequent command submissions.</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Ledger API clients or participant nodes that do not finish the components rollout before the update switch-over time
may not be able to participate in the upgraded workflow.</p>
</div>
</div>
<div class="section" id="rolling-out-backwards-incompatible-changes">
<span id="backwards-incompatible-changes"></span><h4>Rolling out backwards-incompatible changes<a class="headerlink" href="#rolling-out-backwards-incompatible-changes" title="Permalink to this headline">¶</a></h4>
<p>Some changes to a Daml workflow cannot be made backwards-compatible,
such as changing the definition of a template in a breaking way (e.g., extending the observer set).</p>
<p>To handle such changes, you can replace the existing contract with an upgraded one of the target template as follows:</p>
<ul class="simple">
<li>Introduce the target template as a new template following the <a class="reference internal" href="#upgrade-package-naming"><span class="std std-ref">Breaking changes via Explicit Package Version</span></a></li>
<li>Add a consuming <code class="docutils literal notranslate"><span class="pre">OriginalTemplate_UpgradeToNewTemplate</span></code> choice to the existing template by rolling out a new version in a backwards-compatible fashion.</li>
<li>Where required, provide reference data for the <code class="docutils literal notranslate"><span class="pre">upgrade</span></code> choice via additional choice arguments.</li>
<li>Implement backend automation or a contract migration tool similar to the one described <a class="reference internal" href="upgrade.html#upgrade-overview"><span class="std std-ref">here</span></a>
to migrate all old contracts to the new ones by exercising the <code class="docutils literal notranslate"><span class="pre">upgrade</span></code> choice on the existing contracts.</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Rolling out backwards-incompatible changes as described in this section
incurs downtime on affected workflows until their contracts have been converted by the automation.
In order to not disrupt business, such rollouts should be executed during maintenance windows.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Note that this kind of upgrade requires O(number-of-active-contracts) of transactions to roll out.
Depending on the size of your ACS this can take a long time and consume significant compute and storage resources.
In contrast, the backwards-compatible upgrades can be rolled out with constant cost, independent of the size of your ACS.</p>
</div>
</div>
</div>
</div>
<div class="section" id="testing">
<span id="upgrades-testing"></span><h2>Testing<a class="headerlink" href="#testing" title="Permalink to this headline">¶</a></h2>
<div class="section" id="standalone-upgradeability-checks">
<h3>Standalone Upgradeability Checks<a class="headerlink" href="#standalone-upgradeability-checks" title="Permalink to this headline">¶</a></h3>
<p>We recommend using the <code class="docutils literal notranslate"><span class="pre">upgrade-check</span></code> tool to perform a standalone check that all of the DARs typecheck against one another correctly as further validation of your upgraded packages.</p>
<p>This tool takes a list of DARs and runs Canton’s participant-side upgrade
typechecking without spinning up an instance of Canton. You should pass the
tool the list of DARs constituting your previous model and the list of DARs for
your new model.</p>
<p>For example, assume you have a helper package <code class="docutils literal notranslate"><span class="pre">helper</span></code> that does not change,
and two packages <code class="docutils literal notranslate"><span class="pre">main</span></code> and <code class="docutils literal notranslate"><span class="pre">dep</span></code>.</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>main-1.0.0.dar
dep-1.0.0.dar
helper-1.0.0.dar
</pre></div>
</div>
<p>After upgrading your model, you would publish a new DAR <code class="docutils literal notranslate"><span class="pre">main-2.0.0.dar</span></code> for <code class="docutils literal notranslate"><span class="pre">main</span></code>
and a new DAR <code class="docutils literal notranslate"><span class="pre">dep-2.0.0.dar</span></code> for <code class="docutils literal notranslate"><span class="pre">dep</span></code>. We would then recommend running the
upgrade-check tool as follows:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>&gt;<span class="w"> </span>daml<span class="w"> </span>upgrade-check<span class="w"> </span>--participant<span class="w"> </span>helper-1.0.0.dar<span class="w"> </span>dep-1.0.0.dar<span class="w"> </span>main-1.0.0.dar<span class="w"> </span>dep-2.0.0.dar<span class="w"> </span>main-2.0.0.dar
...
</pre></div>
</div>
<p>This runs the same upload validation over these DARs that would be run in
the event of an upload to the ledger, and prints out the same messages and
errors. Because it does not require a ledger to be spun up, the command runs
much more quickly.</p>
<p>We can also check that all of the DARs pass compiler-side checks, but this is
much less likely to indicate an issue because the DARs are typechecked during
compilation.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>&gt;<span class="w"> </span>daml<span class="w"> </span>upgrade-check<span class="w"> </span>--compiler<span class="w"> </span>helper-1.0.0.dar<span class="w"> </span>dep-1.0.0.dar<span class="w"> </span>main-1.0.0.dar<span class="w"> </span>dep-2.0.0.dar<span class="w"> </span>main-2.0.0.dar
...
</pre></div>
</div>
</div>
<div class="section" id="dry-run-uploading-to-a-test-environment">
<h3>Dry Run Uploading to a Test Environment<a class="headerlink" href="#dry-run-uploading-to-a-test-environment" title="Permalink to this headline">¶</a></h3>
<p>If you have a test environment with DARs that are not available to you, you may
not be able to supply a complete list of DARs for your previous model to the
standalone <code class="docutils literal notranslate"><span class="pre">upgrade-check</span></code> tool.</p>
<p>In this case, we recommend that as a further check for the validity of your
upgraded package, you perform a dry-run upload of your package to a testing
environment, using the <code class="docutils literal notranslate"><span class="pre">--dry-run</span></code> flag of the <code class="docutils literal notranslate"><span class="pre">daml</span> <span class="pre">ledger</span> <span class="pre">upload-dar</span></code>
command. This also runs the upgrade typechecking, but does not persist your
package to the ledger.</p>
<p>For workflows involving multiple DARs, we recommend more robust testing by
running a Canton sandbox with the same version and environment as your
in-production participant and uploading all the old and new packages that
constitute your Daml app.</p>
</div>
<div class="section" id="daml-script-testing">
<h3>Daml Script Testing<a class="headerlink" href="#daml-script-testing" title="Permalink to this headline">¶</a></h3>
<p>Daml Script has been used for demonstrative purposes in this document, however
usually the complexities of live upgrades comes with your workflows, not the data
transformations themselves. You can use Daml Script (with Canton) to test some
isolated simple cases, but for thorough tests of you system using SCU, you should
prefer full <a class="reference external" href="#workflow-testing">Workflow Testing</a>.</p>
<p>We recommend placing your Daml Script tests
in a separate package which depends on all versions of your business logic when testing your upgrades with Daml Script. This testing
package should not be uploaded to the ledger if possible, as it depends on the <code class="docutils literal notranslate"><span class="pre">daml-script-lts</span></code> package.
This package emits a warning on the participant when uploaded, as it serves no purpose on a participant,
cannot be fully removed (as with any package), and may not be uploadable to the
ledger in future versions (Daml 3). More information about this limitation <a class="reference internal" href="#upgrade-dont-upload-daml-script"><span class="std std-ref">here</span></a>.</p>
<p>Depending on multiple versions of the same package does however face ambiguity issues with
imports. You can resolve these issues using <a class="reference internal" href="../daml/reference/packages.html#module-prefixes"><span class="std std-ref">module prefixes</span></a>:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-testing-package</span>
<span class="nn">...</span>
<span class="nt">data-dependencies</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my/v1/main-package.dar</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my/v2/main-package.dar</span>
<span class="nt">module-prefixes</span><span class="p">:</span>
<span class="w">  </span><span class="nt">main-1.0.0.dar</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">V11</span>
<span class="w">  </span><span class="nt">main-1.1.0.dar</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">V12</span>
</pre></div>
</div>
<p>It is important to verify old workflows are still functional under
new data and new implementation when writing your tests. You also need to verify that any new workflows intended
to be backward compatible can consume old data. You should build your testing structure to
cover this how you see fit, but we give the following recommendation as a starting point:</p>
<p>If your new version only includes choice body or interface instance changes (that is, it is a patch release)</p>
<ul>
<li><div class="first line-block">
<div class="line">Run your existing test suite for V1 but updated to call V2 choices. This can be
done with a rewrite, or by passing down a <a class="reference internal" href="#daml-script-package-preference"><span class="std std-ref">package preference</span></a>
and calling the test with both the V1 and V2 package ID.</div>
</div>
</li>
</ul>
<p>If your new version includes data changes, be that to contract payloads or choices (that is, it is a minor release)</p>
<ul>
<li><div class="first line-block">
<div class="line">Assuming your data change affects a template payload, write separate setup code for V1 and V2, populating new fields</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">setupV1</span> <span class="pre">:</span> <span class="pre">Script</span> <span class="pre">V1TestData</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">setupV2</span> <span class="pre">:</span> <span class="pre">Script</span> <span class="pre">V2TestData</span></code></div>
<div class="line">These new data types should mostly just hold Contract IDs</div>
</div>
</li>
<li><div class="first line-block">
<div class="line">Update your existing test suite from V1 to take a <a class="reference internal" href="#daml-script-package-preference"><span class="std std-ref">package preference</span></a>,
allowing the V2 implementation without additional fields to choices to be called.</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">testV1</span> <span class="pre">:</span> <span class="pre">[PackageId]</span> <span class="pre">-&gt;</span> <span class="pre">V1TestData</span> <span class="pre">-&gt;</span> <span class="pre">Script</span> <span class="pre">()</span></code></div>
</div>
</li>
<li><div class="first line-block">
<div class="line">Run the above test suite against V1 data, passing a V1 preference, then a V2 preference.</div>
<div class="line">This ensures your changes haven’t broken any existing workflows.</div>
</div>
</li>
<li><div class="first line-block">
<div class="line">Next write tests for your new/modified workflows, using the V2 choice implementations. This does not need a package preference.</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">testV2</span> <span class="pre">:</span> <span class="pre">V2TestData</span> <span class="pre">-&gt;</span> <span class="pre">Script</span> <span class="pre">()</span></code></div>
</div>
</li>
<li><div class="first line-block">
<div class="line">Run these tests against both the V1 setup and the V2 setup, to ensure your new workflows support existing/old templates.</div>
<div class="line">In order to do this, you’ll need some way to upcast your <code class="docutils literal notranslate"><span class="pre">V1TestData</span></code>, i.e.</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">upcastTestData</span> <span class="pre">:</span> <span class="pre">V1TestData</span> <span class="pre">-&gt;</span> <span class="pre">V2TestData</span></code></div>
<div class="line">This function should mostly just call <code class="docutils literal notranslate"><span class="pre">coerceContractId</span></code> on any contract IDs, and fill in any <code class="docutils literal notranslate"><span class="pre">None</span></code> values if needed.</div>
</div>
</li>
<li><div class="first line-block">
<div class="line">Finally, you can cover any workflows that require the contract data to already be upgraded (new fields populated), these are
written entirely in V2 without any special considerations.</div>
</div>
</li>
</ul>
</div>
<div class="section" id="multi-package-builds-for-upgrades">
<h3>Multi-package builds for upgrades<a class="headerlink" href="#multi-package-builds-for-upgrades" title="Permalink to this headline">¶</a></h3>
<p id="upgrades-multi-package">When you are developing upgrades, you may have multiple DARs in scope that need
to be built together. Tracking these DARs and building them in the right order
can be complicated, especially as you develop live and as the project grows.</p>
<p><a class="reference internal" href="../tools/assistant-build.html#multi-package-build"><span class="std std-ref">Multi-package builds</span></a> help
with projects containing multiple DARs, for example, a project using upgrades.</p>
<p>To understand how multi-package builds simplify the
development of a project using upgrades, begin by creating a new Daml project
with the <code class="docutils literal notranslate"><span class="pre">upgrades-example</span></code> template.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>&gt;<span class="w"> </span>daml<span class="w"> </span>new<span class="w"> </span>upgraded-iou<span class="w"> </span>--template<span class="w"> </span>upgrades-example
&gt;<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>upgraded-iou
&gt;<span class="w"> </span>tree
.
├──<span class="w"> </span>multi-package.yaml
├──<span class="w"> </span>run-test.sh
├──<span class="w"> </span>interfaces
│<span class="w">   </span>├──<span class="w"> </span>daml/...
│<span class="w">   </span>└──<span class="w"> </span>daml.yaml
├──<span class="w"> </span>main-v1
│<span class="w">   </span>├──<span class="w"> </span>daml/...
│<span class="w">   </span>└──<span class="w"> </span>daml.yaml
├──<span class="w"> </span>main-v2
│<span class="w">   </span>├──<span class="w"> </span>daml/...
│<span class="w">   </span>└──<span class="w"> </span>daml.yaml
└──<span class="w"> </span><span class="nb">test</span>
<span class="w">    </span>├──<span class="w"> </span>daml/...
<span class="w">    </span>└──<span class="w"> </span>daml.yaml
</pre></div>
</div>
<p>The example template contains:</p>
<ul class="simple">
<li>A package <code class="docutils literal notranslate"><span class="pre">upgraded-iou-interfaces</span></code>, which defines an interface <code class="docutils literal notranslate"><span class="pre">Asset</span></code>
and a viewtype <code class="docutils literal notranslate"><span class="pre">Asset.View</span></code>.</li>
<li>The first version (1.0.0) of a package <code class="docutils literal notranslate"><span class="pre">upgraded-iou-main</span></code>, which defines a
template <code class="docutils literal notranslate"><span class="pre">IOU</span></code> with instance of <code class="docutils literal notranslate"><span class="pre">upgraded-iou-interfaces:Main.Asset</span></code>.</li>
<li>The second version (2.0.0) of <code class="docutils literal notranslate"><span class="pre">upgraded-iou-main</span></code> which upgrades
the first. It adds a new <code class="docutils literal notranslate"><span class="pre">description</span></code> field to <code class="docutils literal notranslate"><span class="pre">IOU</span></code>, and uses it (when
the field is defined) in an upgraded implementation of <code class="docutils literal notranslate"><span class="pre">Asset</span></code>.</li>
<li>A testing package <code class="docutils literal notranslate"><span class="pre">upgraded-iou-test</span></code>, which depends on both
<code class="docutils literal notranslate"><span class="pre">upgraded-iou-main-1.0.0</span></code> and <code class="docutils literal notranslate"><span class="pre">upgraded-iou-main-2.0.0</span></code>. It defines a
script which exercises v1.0.0 and v2.0.0 <code class="docutils literal notranslate"><span class="pre">IOU``s</span> <span class="pre">via</span> <span class="pre">their</span> <span class="pre">``Asset</span></code>
interface.</li>
<li>A script <code class="docutils literal notranslate"><span class="pre">run-test.sh</span></code>, which runs the main test in <code class="docutils literal notranslate"><span class="pre">upgraded-iou-test</span></code>.</li>
<li>A <code class="docutils literal notranslate"><span class="pre">multi-package.yaml</span></code> file which lists our four packages.</li>
</ul>
<p>Without multi-package builds you would test your program like this:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>&gt;<span class="w"> </span><span class="c1"># Run sandbox in the background, wait until the three lines below are shown</span>
&gt;<span class="w"> </span>daml<span class="w"> </span>sandbox<span class="w"> </span><span class="p">&amp;</span>
Starting<span class="w"> </span>Canton<span class="w"> </span>sandbox.
Listening<span class="w"> </span>at<span class="w"> </span>port<span class="w"> </span><span class="m">6865</span>
Canton<span class="w"> </span>sandbox<span class="w"> </span>is<span class="w"> </span>ready.
&gt;<span class="w"> </span><span class="c1"># Build all, run test</span>
&gt;<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>interfaces/<span class="p">;</span><span class="w"> </span>daml<span class="w"> </span>build<span class="w"> </span>--enable-multi-package<span class="o">=</span>no
&gt;<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>../main-v1/<span class="p">;</span><span class="w"> </span>daml<span class="w"> </span>build<span class="w"> </span>--enable-multi-package<span class="o">=</span>no
&gt;<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>../main-v2/<span class="p">;</span><span class="w"> </span>daml<span class="w"> </span>build<span class="w"> </span>--enable-multi-package<span class="o">=</span>no
&gt;<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>../test/<span class="p">;</span><span class="w"> </span>daml<span class="w"> </span>build<span class="w"> </span>--enable-multi-package<span class="o">=</span>no
&gt;<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>..
&gt;<span class="w"> </span>./run-test.sh
&gt;<span class="w"> </span><span class="c1"># Modify v2, run test</span>
&gt;<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>main-v2/
&gt;<span class="w"> </span>...<span class="w"> </span>modify<span class="w"> </span>main-v2<span class="w"> </span>...
&gt;<span class="w"> </span>daml<span class="w"> </span>build<span class="w"> </span>--enable-multi-package<span class="o">=</span>no
&gt;<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>../test/<span class="p">;</span><span class="w"> </span>daml<span class="w"> </span>build<span class="w"> </span>--enable-multi-package<span class="o">=</span>no
&gt;<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>..
&gt;<span class="w"> </span><span class="c1"># Modify test, run test</span>
&gt;<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>test/
&gt;<span class="w"> </span>daml<span class="w"> </span>build<span class="w"> </span>--enable-multi-package<span class="o">=</span>no
&gt;<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>..
&gt;<span class="w"> </span>./run-test.sh
...
Test<span class="w"> </span>output:
...
&gt;<span class="w"> </span><span class="nb">kill</span><span class="w"> </span>%1<span class="w"> </span><span class="c1"># Kill backgrounded sandbox process</span>
</pre></div>
</div>
<p>Forgetting to rebuild packages after changing their source would not cause a
failure - for example, if you modified the source from <code class="docutils literal notranslate"><span class="pre">main-v2</span></code> in an
incompatible way but did not recompile it, the <code class="docutils literal notranslate"><span class="pre">test</span></code> package would still compile
successfully against the previous DAR for <code class="docutils literal notranslate"><span class="pre">main-v2</span></code>.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>&gt;<span class="w"> </span><span class="c1"># Modify main-v2 in an incompatible way</span>
&gt;<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>main-v2/
&gt;<span class="w"> </span>...<span class="w"> </span>add<span class="w"> </span>a<span class="w"> </span>non-optional<span class="w"> </span>field<span class="w"> </span><span class="sb">`</span>currency:<span class="w"> </span>Text<span class="sb">`</span><span class="w"> </span>to<span class="w"> </span>template<span class="w"> </span>T<span class="w"> </span><span class="k">in</span><span class="w"> </span>main-v2<span class="w"> </span>...
&gt;<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>../test/
&gt;<span class="w"> </span>daml<span class="w"> </span>build<span class="w"> </span>--enable-multi-package<span class="o">=</span>no
...
Created<span class="w"> </span>.daml/dist/upgraded-iou-upgrades-template-test-1.0.0.dar
&gt;<span class="w"> </span><span class="c1"># Compiling `test` succeeded even though main-v2 was changed incorrectly</span>
</pre></div>
</div>
<p>With Daml multi-package builds, all builds automatically rebuild
dependencies if their source has changed:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>&gt;<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>test/
&gt;<span class="w"> </span>daml<span class="w"> </span>build<span class="w"> </span><span class="c1"># --enable-multi-package is set to true by default</span>
...
Building<span class="w"> </span>/home/dylanthinnes/ex-upgrades-template/main-v2
...
Severity:<span class="w"> </span>DsError
Message:
error<span class="w"> </span><span class="nb">type</span><span class="w"> </span>checking<span class="w"> </span>template<span class="w"> </span>Main.IOU<span class="w"> </span>:
<span class="w">  </span>The<span class="w"> </span>upgraded<span class="w"> </span>template<span class="w"> </span>IOU<span class="w"> </span>has<span class="w"> </span>added<span class="w"> </span>new<span class="w"> </span>fields,<span class="w"> </span>but<span class="w"> </span>the<span class="w"> </span>following<span class="w"> </span>new<span class="w"> </span>fields<span class="w"> </span>are<span class="w"> </span>not<span class="w"> </span>Optional:
<span class="w">    </span>Field<span class="w"> </span><span class="s1">&#39;currency&#39;</span><span class="w"> </span>with<span class="w"> </span><span class="nb">type</span><span class="w"> </span>Text
...
&gt;<span class="w"> </span><span class="c1"># Compiling `test` failed as expected because main-v2 was changed incorrectly</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">./run-test.sh</span></code> script automatically rebuilds all DARs in the package that
need to be rebuilt:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>&gt;<span class="w"> </span>daml<span class="w"> </span>sandbox<span class="w"> </span><span class="p">&amp;</span><span class="w"> </span><span class="c1"># Start sandbox in background</span>
Starting<span class="w"> </span>Canton<span class="w"> </span>sandbox.
Listening<span class="w"> </span>at<span class="w"> </span>port<span class="w"> </span><span class="m">6865</span>
Canton<span class="w"> </span>sandbox<span class="w"> </span>is<span class="w"> </span>ready.
&gt;<span class="w"> </span>...<span class="w"> </span>Fix<span class="w"> </span>main-v2<span class="w"> </span>by<span class="w"> </span>dropping<span class="w"> </span>non-optional<span class="w"> </span><span class="sb">`</span>currency<span class="sb">`</span><span class="w"> </span>field<span class="w"> </span>...
&gt;<span class="w"> </span><span class="c1"># Re-run test</span>
&gt;<span class="w"> </span>./run-test.sh
...
Building<span class="w"> </span>/home/dylanthinnes/ex-upgrades-template/main-v2
...
&gt;<span class="w"> </span><span class="c1"># Modify test, run test</span>
&gt;<span class="w"> </span>...<span class="w"> </span>modify<span class="w"> </span><span class="nb">test</span><span class="w"> </span>...
&gt;<span class="w"> </span>daml<span class="w"> </span>build<span class="w"> </span>--all
&gt;<span class="w"> </span>./run-test.sh
</pre></div>
</div>
<p>Multi-package builds invoked by <code class="docutils literal notranslate"><span class="pre">daml</span> <span class="pre">build</span> <span class="pre">--all</span></code> always recompile stale dependencies and DARs in order. This ensures a
fully up-to-date package environment before running <code class="docutils literal notranslate"><span class="pre">./run-test.sh</span></code>.</p>
</div>
<div class="section" id="workflow-testing">
<h3>Workflow Testing<a class="headerlink" href="#workflow-testing" title="Permalink to this headline">¶</a></h3>
<p>While testing your workflows is application-specific, we still
recommend at least one test for your core workflows that follows this pattern:</p>
<ol class="arabic simple">
<li>Start your app using version 2.0 of your DAR, but only upload version 1.0.</li>
<li>Initialize the app and start one instance of every core workflow.</li>
<li>Upload version 2.0 of your DAR.</li>
<li>Switch your backends to start using version 2.0, ideally this should be a flag.</li>
<li>Validate that the core workflows are in the same state and advance them to check that they are not stuck.</li>
</ol>
</div>
</div>
<div class="section" id="scu-support-in-daml-tooling">
<h2>SCU Support in Daml Tooling<a class="headerlink" href="#scu-support-in-daml-tooling" title="Permalink to this headline">¶</a></h2>
<div class="section" id="codegen">
<h3>Codegen<a class="headerlink" href="#codegen" title="Permalink to this headline">¶</a></h3>
<p>For packages that support SCU (i.e. LF1.17), generated code uses
package names in place of package IDs in template IDs. Retrieved data
from the ledger is subject to the upgrade transformations described
in previous sections.</p>
<p>Concretely, this is implemented as follows:</p>
<div class="section" id="java">
<h4>Java<a class="headerlink" href="#java" title="Permalink to this headline">¶</a></h4>
<p>The classes that are generated for each template and interface contain a
<code class="docutils literal notranslate"><span class="pre">TEMPLATE_ID</span></code> field, which, for upgradable packages, now use a
package name rather than a package ID. To help you determine
the package ID of these packages, we have added a new <code class="docutils literal notranslate"><span class="pre">PACKAGE_ID</span></code> field to all
such classes. Upgradable packages also have <code class="docutils literal notranslate"><span class="pre">PACKAGE_NAME</span></code> and
<code class="docutils literal notranslate"><span class="pre">PACKAGE_VERSION</span></code> fields.</p>
<p>If you need to identify a template by the specific package ID of the DAR from
which the code was generated, you can use the <code class="docutils literal notranslate"><span class="pre">TEMPLATE_ID_WITH_PACKAGE_ID</span></code> field,
which is on all generated classes and their companion objects. When submitting
commands you may also use the <code class="docutils literal notranslate"><span class="pre">packageIdSelectionPreference</span></code> to explicitly specify which package
ID(s) you want the ledger to use to interpret the commands. Note that using these options
prevents your application from seamlessly supporting upgrades.</p>
</div>
<div class="section" id="typescript">
<h4>TypeScript<a class="headerlink" href="#typescript" title="Permalink to this headline">¶</a></h4>
<p>The <code class="docutils literal notranslate"><span class="pre">templateId</span></code> field on generated template classes has been updated to
use the package name as the package qualifier for upgrade-compatible
packages. This is used for command submission and queries. However,
note that queries return the package qualifier with the
package ID rather than the package name. Generated modules now also
give the package “reference”, which is the package name for upgrade-compatible packages; for other packages it is the package ID.</p>
<p>To perform package ID-qualified commands/queries in an upgrade
compatible package, create a copy of the template object using
the following:</p>
<div class="highlight-typescript notranslate"><div class="highlight"><pre><span></span><span class="kd">const</span><span class="w"> </span><span class="nx">MyTemplateWithPackageId</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="p">...</span><span class="nx">pkg</span><span class="p">.</span><span class="nx">Mod</span><span class="p">.</span><span class="nx">MyTemplate</span><span class="p">,</span>
<span class="w">  </span><span class="nx">templateId</span><span class="o">:</span><span class="w"> </span><span class="sb">`</span><span class="si">${</span><span class="nx">pkg</span><span class="p">.</span><span class="nx">packageId</span><span class="si">}</span><span class="sb">:Mod:MyTemplate`</span><span class="p">,</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="json-api-server-1">
<span id="id4"></span><h3>JSON API Server<a class="headerlink" href="#json-api-server-1" title="Permalink to this headline">¶</a></h3>
<p>Template IDs may still be used with a package ID; however,
for packages built as LF 1.17 or greater, the package may also be
identified by name. That is to say, for upgradable packages a template ID can have
the form <code class="docutils literal notranslate"><span class="pre">#&lt;package-name&gt;:&lt;module-name&gt;:&lt;template-name&gt;</span></code>, and this is
resolved to corresponding templates from all packages which share this
name and are built at 1.17 or above. For packages built at LF 1.15,
the templates are not identifiable via a package name, and a
package ID must be used.</p>
<p>Note: template IDs in query results always use a package ID. This
allows you to distinguish the source of a particular contract. This means
that if you use a template with a package name in the request, you can
no longer expect the template IDs in the result to exactly match the
input template ID.</p>
<p>Package ID selection preference: preferences apply to JSON API where you
can specify your preferred selection of package versions.</p>
</div>
<div class="section" id="pqs">
<h3>PQS<a class="headerlink" href="#pqs" title="Permalink to this headline">¶</a></h3>
<p>To match the package-name changes to the Ledger API, PQS has changed how packages
are selected for queries. All queries that take a Daml identity in the form
<code class="docutils literal notranslate"><span class="pre">&lt;package-id&gt;:&lt;module-name&gt;:&lt;template-name&gt;</span></code> now take a package name in place
of package ID. Note that this differs from the Ledger API in that the <cite>#</cite> prefix
is not required for PQS, as PQS has dropped direct package ID queries.
Queries for package names return all versions of a given contract, alongside the
package version and package ID for each contract.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If you still need to perform a query with an explicit package ID, you can either use
a previous version of PQS or add the following filter predicate to your query:
<code class="docutils literal notranslate"><span class="pre">SELECT</span> <span class="pre">\*</span> <span class="pre">FROM</span> <span class="pre">active('my_package:My.App:MyTemplate')</span> <span class="pre">WHERE</span> <span class="pre">package_id</span> <span class="pre">=</span> <span class="pre">'my_package_id'</span></code></p>
</div>
<p>Given that PQS uses a document-oriented model for ledger content
(JSONB), extensions to contract payloads are handled simply by returning
the additional data in the blob.</p>
</div>
<div class="section" id="daml-shell">
<h3>Daml Shell<a class="headerlink" href="#daml-shell" title="Permalink to this headline">¶</a></h3>
<p>Daml Shell builds on PQS by providing a shell interface to inspect the
ledger using package name to create an integrated view of all versions of contracts.</p>
</div>
<div class="section" id="id5">
<h3>Daml-Script<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h3>
<p>Daml 2.10 introduces a new version of Daml Script which can be used by
depending on <code class="docutils literal notranslate"><span class="pre">daml-script-lts</span></code> in your <code class="docutils literal notranslate"><span class="pre">daml.yaml</span></code>, as described
in <a class="reference external" href="#writing-your-first-upgrade">Writing your first upgrade</a>. This version of Daml Script
supports upgrades over the Ledger API.</p>
<p>All commands and queries in this version of Daml Script now use
upgrades/downgrades automatically to ensure that they exercise the correct versions
of choices and return correct payloads.</p>
<p>The following additional functionality is available for more advanced
uses of SCU.</p>
<p><strong>Exact commands</strong></p>
<p>Each of the four submission commands now has an “exact” variant: <code class="docutils literal notranslate"><span class="pre">createExactCmd</span></code>, <code class="docutils literal notranslate"><span class="pre">exerciseExactCmd</span></code>, <code class="docutils literal notranslate"><span class="pre">exerciseByKeyExactCmd</span></code>, and
<code class="docutils literal notranslate"><span class="pre">createAndExerciseExactCmd</span></code>. These commands force the participant to
use the exact version of the package that your script uses, so you can be certain of the choice code you are
calling. Note that exact and non-exact commands can be mixed in the same
submission.</p>
<p id="daml-script-package-preference"><strong>Daml Script Package Preference</strong></p>
<p>A submission can specify a <a class="reference internal" href="#package-preference"><span class="std std-ref">package preference</span></a>
as a list of package IDs:</p>
<div class="highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">actAs</span><span class="w"> </span><span class="n">alice</span><span class="w"> </span><span class="o">&lt;&gt;</span><span class="w"> </span><span class="n">packagePreference</span><span class="w"> </span><span class="p">[</span><span class="n">myPackageId</span><span class="p">])</span><span class="w"> </span><span class="p">`</span><span class="n">submitWithOptions</span><span class="p">`</span><span class="w"> </span><span class="n">createCmd</span><span class="w"> </span><span class="o">...</span>
</pre></div>
</div>
<p>Note the use of <code class="docutils literal notranslate"><span class="pre">submitWithOptions</span> <span class="pre">:</span> <span class="pre">SubmitOptions</span> <span class="pre">-&gt;</span> <span class="pre">Commands</span> <span class="pre">a</span> <span class="pre">-&gt;</span> <span class="pre">Script</span> <span class="pre">a</span></code>.
You can build <code class="docutils literal notranslate"><span class="pre">SubmitOptions</span></code> by combining the <code class="docutils literal notranslate"><span class="pre">actAs</span></code> and <code class="docutils literal notranslate"><span class="pre">packagePreference</span></code> functions with <code class="docutils literal notranslate"><span class="pre">&lt;&gt;</span></code>.</p>
<p>The full list of builders for <code class="docutils literal notranslate"><span class="pre">SubmitOptions</span></code> is as follows:</p>
<div class="highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="c1">-- `p` can be `Party`, `[Party]`, etc.</span>
<span class="nf">actAs</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">IsParties</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="ow">=&gt;</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="ow">-&gt;</span><span class="w"> </span><span class="kt">SubmiOptions</span>
<span class="nf">readAs</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">IsParties</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="ow">=&gt;</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="ow">-&gt;</span><span class="w"> </span><span class="kt">SubmitOptions</span>

<span class="nf">disclose</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Disclosure</span><span class="w"> </span><span class="ow">-&gt;</span><span class="w"> </span><span class="kt">SubmitOptions</span>
<span class="nf">discloseMany</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="p">[</span><span class="kt">Disclosure</span><span class="p">]</span><span class="w"> </span><span class="ow">-&gt;</span><span class="w"> </span><span class="kt">SubmitOptions</span>

<span class="kr">newtype</span><span class="w"> </span><span class="kt">PackageId</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="kt">PackageId</span><span class="w"> </span><span class="kt">Text</span>
<span class="nf">packagePreference</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="p">[</span><span class="kt">PackageId</span><span class="p">]</span><span class="w"> </span><span class="ow">-&gt;</span><span class="w"> </span><span class="kt">SubmitOptions</span>
</pre></div>
</div>
<p>A <code class="docutils literal notranslate"><span class="pre">PackageId</span></code> can be hard-coded in your script, in which case it must be updated whenever the package changes. Otherwise,
it can be provided using the <code class="docutils literal notranslate"><span class="pre">--input-file</span></code> flag of the <code class="docutils literal notranslate"><span class="pre">daml</span> <span class="pre">script</span></code> command line tool.</p>
<p>The following example demonstrates reading the package ID from a DAR and passing it to a script:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Path to the dar you want to pass as package preference.</span>
<span class="nv">PACKAGE_DAR</span><span class="o">=</span>path/to/main/dar.dar
<span class="c1"># Path to the dar containing the Daml script for which you want to pass the package-id</span>
<span class="nv">SCRIPT_DAR</span><span class="o">=</span>path/to/script/dar.dar
<span class="c1"># Extract the package-id of PACKAGE_DAR&#39;s main package.</span>
daml<span class="w"> </span>damlc<span class="w"> </span>inspect-dar<span class="w"> </span><span class="si">${</span><span class="nv">PACKAGE_DAR</span><span class="si">}</span><span class="w"> </span>--json<span class="w"> </span><span class="p">|</span><span class="w"> </span>jq<span class="w"> </span><span class="s1">&#39;.main_package_id&#39;</span><span class="w"> </span>&gt;<span class="w"> </span>./package-id-script-input.json
<span class="c1"># replace --ide-ledger with --ledger-host and --ledger-port for deployed Canton</span>
daml<span class="w"> </span>script<span class="w"> </span>--dar<span class="w"> </span><span class="si">${</span><span class="nv">SCRIPT_DAR</span><span class="si">}</span><span class="w"> </span>--script-name<span class="w"> </span>Main:main<span class="w"> </span>--ide-ledger<span class="w"> </span>--input-file<span class="w"> </span>./package-id-script-input.json
</pre></div>
</div>
<p>Following this, your script would look like:</p>
<div class="highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="kr">module</span><span class="w"> </span><span class="nn">Main</span><span class="w"> </span><span class="kr">where</span>

<span class="kr">import</span><span class="w"> </span><span class="nn">Daml.Script</span>

<span class="nf">main</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="kt">Text</span><span class="w"> </span><span class="ow">-&gt;</span><span class="w"> </span><span class="kt">Script</span><span class="w"> </span><span class="nb">()</span>
<span class="nf">main</span><span class="w"> </span><span class="n">rawPkgId</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="kr">do</span>
<span class="w">  </span><span class="kr">let</span><span class="w"> </span><span class="n">pkgId</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="kt">PackageId</span><span class="w"> </span><span class="n">rawPkgId</span>
<span class="w">  </span><span class="n">alice</span><span class="w"> </span><span class="ow">&lt;-</span><span class="w"> </span><span class="n">allocateParty</span><span class="w"> </span><span class="s">&quot;alice&quot;</span>
<span class="w">  </span><span class="c1">-- Commands omitted for brevity</span>
<span class="w">  </span><span class="kr">let</span><span class="w"> </span><span class="n">submitOptions</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="n">actAs</span><span class="w"> </span><span class="n">alice</span><span class="w"> </span><span class="o">&lt;&gt;</span><span class="w"> </span><span class="n">packagePreference</span><span class="w"> </span><span class="p">[</span><span class="n">pkgId</span><span class="p">]</span>
<span class="w">  </span><span class="n">submitOptions</span><span class="w"> </span><span class="p">`</span><span class="n">submitWithOptions</span><span class="p">`</span><span class="w"> </span><span class="n">createCmd</span><span class="w"> </span><span class="o">...</span>
</pre></div>
</div>
</div>
<div class="section" id="daml-studio-support">
<h3>Daml Studio support<a class="headerlink" href="#daml-studio-support" title="Permalink to this headline">¶</a></h3>
<p>Daml Studio runs a reference model of Canton called the IDE Ledger. This
ledger has been updated to support the relevant parts of the Smart Contract
Upgrades feature.</p>
</div>
</div>
</div>


              
            </div>
            
            
              <!-- Copyright (c) 2023 Digital Asset (Switzerland) GmbH and/or its affiliates. All rights reserved. -->
<!-- SPDX-License-Identifier: Apache-2.0 -->

<footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="upgrade.html" class="da-btn da-btn-label btn-prev" title="Upgrading Daml Applications" accesskey="p" rel="prev">Previous</a>
      
      
        <a href="automation.html" class="da-btn da-btn-label btn-next" title="Automating the Upgrade Process" accesskey="n" rel="next">Next</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        Copyright (c) 2025 Digital Asset (Switzerland) GmbH and/or its affiliates. All rights reserved. Any unauthorized use, duplication or distribution is strictly prohibited. &#34;Digital Asset&#34; and &#34;Daml&#34; are Registered in the U.S. Patent and Trademark Office.

    </p>
  </div> 

</footer>
            
          </div>
        </div>
      </div>
    </section>
  </div>

  <!-- Copyright (c) 2023 Digital Asset (Switzerland) GmbH and/or its affiliates. All rights reserved. -->
<!-- SPDX-License-Identifier: Apache-2.0 -->





  <script type="text/javascript">
    jQuery(function () {
      SphinxRtdTheme.Navigation.enable(true);
      });
  </script>


  
    
  
  <div id="inpageContent"></div>
  

</body>
</html>