{
  "101" : {
    "command" : "val createIouCmd = ledger_api_utils.create(mainPackageId,\"Iou\",\"Iou\",Map(\"payer\" -> participant1.adminParty,\"owner\" -> participant1.adminParty,\"amount\" -> Map(\"value\" -> 100.0, \"currency\" -> \"EUR\"),\"viewers\" -> List()))",
    "output" : ".."
  },
  "20" : {
    "command" : "participant2.dars.upload(\"dars/CantonExamples.dar\")",
    "output" : "res1: String = \"12202102be83f3489f0f3df0d42d54280e6769eb173a8fee8eb02b20f82e1ef5d709\""
  },
  "132" : {
    "command" : "participant1.dars.vetting.disable(examplesDependencyDarHash)",
    "output" : ""
  },
  "181" : {
    "command" : "participant1.topology.vetted_packages.list().exists(_.item.packageIds.contains(mainPackageId))",
    "output" : "res23: Boolean = false"
  },
  "98" : {
    "command" : "val darHash = participant1.dars.upload(\"dars/CantonExamples.dar\")",
    "output" : "darHash : String = \"12202102be83f3489f0f3df0d42d54280e6769eb173a8fee8eb02b20f82e1ef5d709\""
  },
  "108" : {
    "command" : "participant1.dars.vetting.disable(darHash)",
    "output" : ""
  },
  "80" : {
    "command" : "participant2.dars.vetting.enable(hash)",
    "output" : ""
  },
  "127" : {
    "command" : "participant1.dars.vetting.disable(darHash)",
    "output" : "ERROR com.digitalasset.canton.integration.EnterpriseEnvironmentDefinition$$anon$3 - Request failed for participant1.\n  GrpcRequestRefusedByServer: FAILED_PRECONDITION/MAIN_DAR_PACKAGE_REFERENCED_EXTERNALLY(9,25d6ffd7): Operation DAR disabling for DAR 'CantonExamples' failed due to its main package with packageId=7e0aa3d819f2dfd20c1ba08ac133130e1f135172e5c0f4cf0c8a70d79d7b5a84 being vetted multiple times\n  Request: UnvetDar(12202102be83f3489f0f3df0d42d54280e6769eb173a8fee8eb02b20f82e1ef5d709,true)\n  CorrelationId: 25d6ffd72b85fb4a13c92c2755007f52\n  Context: HashMap(participant -> participant1, test -> PackageDarManagementDocumentationIntegrationTest, darDescription -> CantonExamples, operationName -> DAR disabling, mainPackageId -> 7e0aa3d819f2dfd20c1ba08ac133130e1f135172e5c0f4cf0c8a70d79d7b5a84, tid -> 25d6ffd72b85fb4a13c92c2755007f52)\n  Command ParticipantAdministration$dars$vetting$.disable invoked from cmd10000044.sc:1"
  },
  "75" : {
    "command" : "participant2.dars.upload(\"dars/CantonExamples.dar\", vetAllPackages = false)",
    "output" : "res8: String = \"12202102be83f3489f0f3df0d42d54280e6769eb173a8fee8eb02b20f82e1ef5d709\""
  },
  "36" : {
    "command" : "val dars = participant2.dars.list(filterName = \"CantonExamples\")",
    "output" : "dars : Seq[com.digitalasset.canton.participant.admin.v0.DarDescription] = Vector(\n  DarDescription(\n    hash = \"12202102be83f3489f0f3df0d42d54280e6769eb173a8fee8eb02b20f82e1ef5d709\",\n    name = \"CantonExamples\"\n  )\n)"
  },
  "126" : {
    "command" : "val examplesDependencyDarHash = participant1.dars.upload(\"dars/CantonExamplesDependency.dar\")",
    "output" : "examplesDependencyDarHash : String = \"1220ee0bfbe921a7f88b376b9b35c74d9ff18a4aab9ceacf877b8e1880281518ef7a\""
  },
  "47" : {
    "command" : "participant2.packages.list()",
    "output" : "res6: Seq[com.digitalasset.canton.participant.admin.v0.PackageDescription] = Vector(\n  PackageDescription(\n    packageId = \"88cf65277201722eda8564ac04494bed23ac79673722af482c6f3fb37aec83ed\",\n    sourceDescription = \"AdminWorkflowsWithVacuuming\"\n  ),\n  PackageDescription(\n    packageId = \"86828b9843465f419db1ef8a8ee741d1eef645df02375ebf509cdc8c3ddd16cb\",\n    sourceDescription = \"CantonExamples\"\n.."
  },
  "115" : {
    "command" : "participant1.ledger_api.commands.submit(Seq(participant1.adminParty), Seq(createIouCmd))",
    "output" : "res16: com.daml.ledger.api.v1.transaction.TransactionTree = TransactionTree(\n  transactionId = \"1220c52d497fadffb85630554a33d76c4817c144f7c4d6a2acc81b5b192306916418\",\n  commandId = \"26e5d72c-53b8-4470-aae8-54b38c87a2b2\",\n  workflowId = \"\",\n  effectiveAt = Some(\n.."
  },
  "217" : {
    "command" : "import com.digitalasset.canton.LfPackageId",
    "output" : ""
  },
  "42" : {
    "command" : "val darContent = participant2.dars.list_contents(hash)",
    "output" : "darContent : DarMetadata = DarMetadata(\n  name = \"CantonExamples\",\n  main = \"7e0aa3d819f2dfd20c1ba08ac133130e1f135172e5c0f4cf0c8a70d79d7b5a84\",\n  packages = Vector(\n    \"7e0aa3d819f2dfd20c1ba08ac133130e1f135172e5c0f4cf0c8a70d79d7b5a84\",\n    \"6851f194e144b693e63e9034b956c76cef6b5088dd8c66a657ab652a204dba2b\",\n    \"cb0552debf219cc909f51cbb5c3b41e9981d39f8f645b1f35e2ef5be2e0b858a\",\n    \"3f4deaf145a15cdcfa762c058005e2edb9baa75bb7f95a4f8f6f937378e86415\",\n.."
  },
  "37" : {
    "command" : "val hash = dars.head.hash",
    "output" : "hash : String = \"12202102be83f3489f0f3df0d42d54280e6769eb173a8fee8eb02b20f82e1ef5d709\""
  },
  "28" : {
    "command" : "participant2.dars.list()",
    "output" : "res2: Seq[com.digitalasset.canton.participant.admin.v0.DarDescription] = Vector(\n  DarDescription(\n    hash = \"12207f38b04c40dd9cf5bc1daa97625427665af959801fc77024dafd5898cb01f01b\",\n    name = \"AdminWorkflowsWithVacuuming\"\n  ),\n  DarDescription(\n    hash = \"12202102be83f3489f0f3df0d42d54280e6769eb173a8fee8eb02b20f82e1ef5d709\",\n    name = \"CantonExamples\"\n  )\n)"
  },
  "137" : {
    "command" : "participant1.dars.vetting.disable(darHash)",
    "output" : ""
  },
  "109" : {
    "command" : "participant1.ledger_api.commands.submit(Seq(participant1.adminParty), Seq(createIouCmd))",
    "output" : "ERROR com.digitalasset.canton.integration.EnterpriseEnvironmentDefinition$$anon$3 - Request failed for participant1.\n  GrpcRequestRefusedByServer: FAILED_PRECONDITION/NO_DOMAIN_FOR_SUBMISSION(9,b3cbc8e8): No valid domain for submission found.\n  Request: SubmitAndWaitTransactionTree(\n  actAs = participant1::12206baa196b...,\n  readAs = Seq(),\n  commandId = '',\n  workflowId = '',\n  submissionId = '',\n  deduplicationPeriod = None(),\n  applicationId = 'CantonConsole',\n  commands = ...\n)\n  CorrelationId: b3cbc8e81749166ffadf7602e1e908ad\n  Context: HashMap(participant -> participant1, test -> PackageDarManagementDocumentationIntegrationTest, domainsNotUsed -> Map(mydomain::12202fd803a2... -> The topology state for some packages does not meet the requirements on domain mydomain::12202fd803a2...: [(Participant PAR::participant1::12206baa196b... has not vetted 7e0aa3d819f2...)]), tid -> b3cbc8e81749166ffadf7602e1e908ad, definite_answer -> false)\n  Command BaseLedgerApiAdministration$ledger_api$commands$.submit invoked from cmd10000036.sc:1"
  },
  "212" : {
    "command" : "val txsContainingMainPackage = participant1.topology.vetted_packages.list(filterStore = \"Authorized\", filterParticipant = participant1.id.filterString).filter(_.item.packageIds.contains(mainPackageId))",
    "output" : "txsContainingMainPackage : Seq[ListVettedPackagesResult] = Vector(\n  ListVettedPackagesResult(\n    context = BaseResult(\n      domain = \"Authorized\",\n      validFrom = 2025-01-06T19:55:19.094041Z,\n      validUntil = None,\n      operation = Add,\n      serialized = <ByteString@4604aa42 size=2450 contents=\"\\n\\217\\023\\n\\275\\020\\n\\270\\020\\n\\265\\020\\022 R9IDS7aR3H5zdgkJI1ClZvBYaQmHa31dJ...\">,\n      signedBy = 12206baa196b...\n    ),\n    item = VettedPackages(\n      participant = participant1::12206baa196b...,\n      packages = Seq(\n        28cf6c194d92...,\n        7e0aa3d819f2...,\n        6851f194e144...,\n        cb0552debf21...,\n        3f4deaf145a1...,\n        86828b984346...,\n        f20de1e4e37b...,\n        76bf0fd12bd9...,\n        38e6274601b2...,\n        d58cf9939847...,\n        40f452260bef...,\n        e491352788e5...,\n        6839a6d3d430...,\n        518032f41fd0...,\n        b6d4b2160a76...,\n        c0ff73164651...,\n        10e0333b52bb...,\n        bfcd37bd6b84...,\n        cc348d369011...,\n        057eed1fd48c...,\n        d14e08374fc7...,\n        c1f1f0055879...,\n        6c2c0667393c...,\n        e22bce619ae2...,\n        e4cc67c3264e...,\n        8a7806365bbd...,\n        97b883cd8a2b...,\n        5921708ce82f...,\n        733e38d36a27...,\n        99a2705ed38c...\n      )\n    )\n  ),\n  ListVettedPackagesResult(\n    context = BaseResult(\n      domain = \"Authorized\",\n      validFrom = 2025-01-06T19:55:19.430608Z,\n      validUntil = None,\n      operation = Add,\n      serialized = <ByteString@70164894 size=2384 contents=\"\\n\\315\\022\\n\\373\\017\\n\\366\\017\\n\\363\\017\\022 igpmTaUdwWTGh96GplfrnAayzf0NkoGwJ...\">,\n      signedBy = 12206baa196b...\n    ),\n    item = VettedPackages(\n      participant = participant1::12206baa196b...,\n      packages = Seq(\n        7e0aa3d819f2...,\n        6851f194e144...,\n        cb0552debf21...,\n        3f4deaf145a1...,\n        86828b984346...,\n        f20de1e4e37b...,\n        76bf0fd12bd9...,\n        38e6274601b2...,\n        d58cf9939847...,\n        40f452260bef...,\n        e491352788e5...,\n        6839a6d3d430...,\n        518032f41fd0...,\n        b6d4b2160a76...,\n        c0ff73164651...,\n        10e0333b52bb...,\n        bfcd37bd6b84...,\n        cc348d369011...,\n        057eed1fd48c...,\n        d14e08374fc7...,\n        c1f1f0055879...,\n        6c2c0667393c...,\n        e22bce619ae2...,\n        e4cc67c3264e...,\n        8a7806365bbd...,\n        97b883cd8a2b...,\n        5921708ce82f...,\n        733e38d36a27...,\n        99a2705ed38c...\n      )\n    )\n  )\n)"
  },
  "166" : {
    "command" : "participant1.topology.vetted_packages.list().exists(_.item.packageIds.contains(mainPackageId))",
    "output" : "res21: Boolean = true"
  },
  "161" : {
    "command" : "participant1.dars.vetting.enable(darHash)",
    "output" : ""
  },
  "176" : {
    "command" : "participant1.dars.vetting.disable(darHash)",
    "output" : ""
  },
  "204" : {
    "command" : "participant1.dars.vetting.enable(darHash)",
    "output" : ""
  },
  "99" : {
    "command" : "val mainPackageId = participant1.packages.find(\"Iou\").head.packageId",
    "output" : "mainPackageId : String = \"7e0aa3d819f2dfd20c1ba08ac133130e1f135172e5c0f4cf0c8a70d79d7b5a84\""
  },
  "203" : {
    "command" : "participant1.dars.vetting.enable(examplesDependencyDarHash)",
    "output" : ""
  },
  "218" : {
    "command" : "txsContainingMainPackage.foreach { tx => participant1.topology.vetted_packages.authorize(TopologyChangeOp.Remove,participant1.id,tx.item.packageIds,force = true); participant1.topology.vetted_packages.authorize(TopologyChangeOp.Add,participant1.id,tx.item.packageIds.filterNot(_ == mainPackageId),force = true)}",
    "output" : ""
  },
  "55" : {
    "command" : "participant2.packages.list_contents(darContent.main)",
    "output" : "res7: Seq[com.digitalasset.canton.participant.admin.v0.ModuleDescription] = Vector(\n  ModuleDescription(name = \"CantonExamples\"),\n  ModuleDescription(name = \"ContractKeys\"),\n  ModuleDescription(name = \"SafePaint\"),\n  ModuleDescription(name = \"LockIou\"),\n  ModuleDescription(name = \"Iou\"),\n  ModuleDescription(name = \"Divulgence\"),\n  ModuleDescription(name = \"Paint\"),\n.."
  },
  "114" : {
    "command" : "participant1.dars.vetting.enable(darHash)",
    "output" : ""
  },
  "222" : {
    "command" : "participant1.topology.check_only_packages.authorize(TopologyChangeOp.Add, participant1.id, Seq(LfPackageId.assertFromString(mainPackageId)), force = true)",
    "output" : ".."
  },
  "100" : {
    "command" : "participant1.domains.connect_local(mydomain)",
    "output" : ""
  }
}